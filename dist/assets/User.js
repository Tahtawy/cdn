import{a as T,b as mr,S as ti,E as b,c as F,d as Ce,P as C,e as k,N as si,C as Kt,f as _,i as c,s as ht,g as N,h as gn,o as xh,k as tl,r as Xe,l as wh,m as Ih,j as $,n as Ie,p as Pe,q as Se,t as ot,u as D,v as Ve,w as _e,x as mt,B as Q,A as Ti,y as Je,L as yr,D as $s,z as Bn,F as Ue,G as Oe,H as zt,I as wi,J as Dr,K as q,M as Ee,O as tr,T as en,Q as Cr,R as ei,U as zn,V as Hi,W as Xi,X as yt,Y as xo,Z as Zs,_ as Eh,$ as Rh,a0 as Ah,a1 as Vt,a2 as wo,a3 as Ii,a4 as Th,a5 as kh,a6 as Dh}from"./index-CaGjSCUH.js";import{L as Io,O as Lh,a as il,b as Fh,R as Mh}from"./common.js";function Oh(o){for(var t,i=o.childNodes,e=0;e<i.length;e++)if(t=i[e],t.nodeType===3)return t;return null}function ir(o,t,i){t===void 0&&(t=!1),i===void 0&&(i={});var e=o("div",{className:"e-checkbox-wrapper e-css"});if(i.cssClass&&T([e],i.cssClass.split(" ")),i.enableRtl&&e.classList.add("e-rtl"),t){var r=o("span",{className:"e-ripple-container"});mr(r,{isCenterRipple:!0,duration:400}),e.appendChild(r)}var n=o("span",{className:"e-frame e-icons"});if(i.checked&&n.classList.add("e-check"),e.appendChild(n),i.label){var s=o("span",{className:"e-label"});i.disableHtmlEncode?s.textContent=i.label:s.innerHTML=i.label,e.appendChild(s)}return e}function Nh(o,t){if(t){var i=document.createEvent("MouseEvents");i.initEvent(o.type,!1,!0),t.dispatchEvent(i)}}var Ph=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Wt=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},Eo;(function(o){o.Left="Left",o.Right="Right",o.Top="Top",o.Bottom="Bottom"})(Eo||(Eo={}));var Mt={RTL:"e-rtl",BUTTON:"e-btn",PRIMARY:"e-primary",ICONBTN:"e-icon-btn"},Ei=function(o){Ph(t,o);function t(i,e){return o.call(this,i,e)||this}return t.prototype.preRender=function(){},t.prototype.render=function(){this.initialize(),this.removeRippleEffect=mr(this.element,{selector:"."+Mt.BUTTON}),this.renderComplete()},t.prototype.initialize=function(){this.cssClass&&T([this.element],this.cssClass.replace(/\s+/g," ").trim().split(" ")),this.isPrimary&&this.element.classList.add(Mt.PRIMARY);{if(this.content){var i=this.enableHtmlSanitizer?ti.sanitize(this.content):this.content;this.element.innerHTML=i}this.setIconCss()}this.enableRtl&&this.element.classList.add(Mt.RTL),this.disabled?this.controlStatus(this.disabled):this.wireEvents()},t.prototype.controlStatus=function(i){this.element.disabled=i},t.prototype.setIconCss=function(){if(this.iconCss){var i=this.createElement("span",{className:"e-btn-icon "+this.iconCss});this.element.textContent.trim()?(i.classList.add("e-icon-"+this.iconPosition.toLowerCase()),(this.iconPosition==="Top"||this.iconPosition==="Bottom")&&this.element.classList.add("e-"+this.iconPosition.toLowerCase()+"-icon-btn")):this.element.classList.add(Mt.ICONBTN);var e=this.element.childNodes[0];e&&(this.iconPosition==="Left"||this.iconPosition==="Top")?this.element.insertBefore(i,e):this.element.appendChild(i)}},t.prototype.wireEvents=function(){this.isToggle&&b.add(this.element,"click",this.btnClickHandler,this)},t.prototype.unWireEvents=function(){this.isToggle&&b.remove(this.element,"click",this.btnClickHandler)},t.prototype.btnClickHandler=function(){this.element.classList.contains("e-active")?this.element.classList.remove("e-active"):this.element.classList.add("e-active")},t.prototype.destroy=function(){var i=[Mt.PRIMARY,Mt.RTL,Mt.ICONBTN,"e-success","e-info","e-danger","e-warning","e-flat","e-outline","e-small","e-bigger","e-active","e-round","e-top-icon-btn","e-bottom-icon-btn"];this.cssClass&&(i=i.concat(this.cssClass.split(" "))),o.prototype.destroy.call(this),F([this.element],i),this.element.getAttribute("class")||this.element.removeAttribute("class"),this.disabled&&this.element.removeAttribute("disabled"),this.content&&(this.element.innerHTML=this.element.innerHTML.replace(this.content,""));var e=this.element.querySelector("span.e-btn-icon");e&&Ce(e),this.unWireEvents()},t.prototype.getModuleName=function(){return"btn"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.Inject=function(){},t.prototype.onPropertyChanged=function(i,e){for(var r=this.element.querySelector("span.e-btn-icon"),n=0,s=Object.keys(i);n<s.length;n++){var a=s[n];switch(a){case"isPrimary":i.isPrimary?this.element.classList.add(Mt.PRIMARY):this.element.classList.remove(Mt.PRIMARY);break;case"disabled":this.controlStatus(i.disabled);break;case"iconCss":{r=this.element.querySelector("span.e-btn-icon"),r?i.iconCss?(r.className="e-btn-icon "+i.iconCss,this.element.textContent.trim()&&(this.iconPosition==="Left"?r.classList.add("e-icon-left"):r.classList.add("e-icon-right"))):Ce(r):this.setIconCss();break}case"iconPosition":F([this.element],["e-top-icon-btn","e-bottom-icon-btn"]),r=this.element.querySelector("span.e-btn-icon"),r&&Ce(r),this.setIconCss();break;case"cssClass":e.cssClass&&F([this.element],e.cssClass.split(" ")),i.cssClass&&T([this.element],i.cssClass.replace(/\s+/g," ").trim().split(" "));break;case"enableRtl":i.enableRtl?this.element.classList.add(Mt.RTL):this.element.classList.remove(Mt.RTL);break;case"content":{var l=Oh(this.element);l||this.element.classList.remove(Mt.ICONBTN),this.enableHtmlSanitizer&&(i.content=ti.sanitize(i.content)),this.element.innerHTML=i.content,this.setIconCss();break}case"isToggle":i.isToggle?b.add(this.element,"click",this.btnClickHandler,this):(b.remove(this.element,"click",this.btnClickHandler),F([this.element],["e-active"]));break}}},t.prototype.click=function(){this.element.click()},t.prototype.focusIn=function(){this.element.focus()},Wt([C("Left")],t.prototype,"iconPosition",void 0),Wt([C("")],t.prototype,"iconCss",void 0),Wt([C(!1)],t.prototype,"disabled",void 0),Wt([C(!1)],t.prototype,"isPrimary",void 0),Wt([C("")],t.prototype,"cssClass",void 0),Wt([C("")],t.prototype,"content",void 0),Wt([C(!1)],t.prototype,"isToggle",void 0),Wt([C()],t.prototype,"locale",void 0),Wt([C(!1)],t.prototype,"enableHtmlSanitizer",void 0),Wt([k()],t.prototype,"created",void 0),t=Wt([si],t),t}(Kt),Bh=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),zh=["alt","className","disabled","form","id","readOnly","style","tabIndex","title","type","name","onClick","onFocus","onBlur"],Hh=["accordion","tab","splitter"],qh=new RegExp("]"),Lr=function(o){Bh(t,o);function t(){var i=o!==null&&o.apply(this,arguments)||this;return i.mountingState=!1,i.attrKeys=[],i.cachedTimeOut=0,i.isAppendCalled=!1,i.initRenderCalled=!1,i.isReactForeceUpdate=!1,i.isReact=!0,i.isshouldComponentUpdateCalled=!1,i.isCreated=!1,i}return t.prototype.componentDidMount=function(){this.refreshChild(!0),this.canDelayUpdate=Hh.indexOf(this.getModuleName())!==-1,this.renderReactComponent(),this.portals&&this.portals.length&&(this.mountingState=!0,this.renderReactTemplates(),this.mountingState=!1)},t.prototype.componentDidUpdate=function(i){!this.isshouldComponentUpdateCalled&&this.initRenderCalled&&!this.isReactForeceUpdate&&i!==this.props&&(this.isshouldComponentUpdateCalled=!0,this.updateProperties(this.props,!1,i))},t.prototype.renderReactComponent=function(){var i=this.reactElement;i&&!this.isAppendCalled&&(this.isAppendCalled=!0,this.appendTo(i))},t.prototype.shouldComponentUpdate=function(i){return this.isshouldComponentUpdateCalled=!0,this.initRenderCalled?(this.isAppendCalled||(clearTimeout(this.cachedTimeOut),this.isAppendCalled=!0,this.appendTo(this.reactElement)),this.updateProperties(i),!0):(this.updateProperties(i,!0),!0)},t.prototype.updateProperties=function(i,e,r){for(var n=this,s=_({},i),a=Object.keys(i),l=_({},r||this.props),h=c(l.statelessTemplates)?c(this.statelessTemplateProps)?[]:this.statelessTemplateProps:l.statelessTemplates,u=0,p=a;u<p.length;u++){var d=p[u],f=d==="className";if(d!=="children")if(!f&&!c(this.htmlattributes[""+d])&&this.htmlattributes[""+d]!==s[""+d]&&(this.htmlattributes[""+d]=s[""+d]),this.compareValues(l[""+d],i[""+d]))delete s[""+d];else if(this.attrKeys.indexOf(d)!==-1)if(f){this.clsName=!0;for(var g=l[""+d].split(" "),v=0;v<g.length;v++)this.element.classList.remove(g[parseInt(v.toString(),10)]);for(var m=s[""+d].split(" "),y=0;y<m.length;y++)this.element.classList.add(m[parseInt(y.toString(),10)])}else d!=="disabled"&&!this.properties.hasOwnProperty(d)&&delete s[""+d];else(d==="value"&&i[""+d]===this[""+d]||h.indexOf(d)>-1&&(d==="content"&&typeof s[""+d]=="function"||i[""+d].toString()===this[""+d].toString()))&&delete s[""+d]}s.children&&delete s.children,this.initRenderCalled&&(this.canDelayUpdate||l.delayUpdate)?setTimeout(function(){n.refreshProperties(s,i,e)}):this.refreshProperties(s,i,e)},t.prototype.refreshProperties=function(i,e,r){var n=c(this.props.statelessTemplates)?[]:this.props.statelessTemplates;Object.keys(i).length&&(r||this.processComplexTemplate(i,this),this.setProperties(i,r)),n.indexOf("directiveTemplates")===-1&&this.refreshChild(r,e)},t.prototype.processComplexTemplate=function(i,e){var r=e.complexTemplate;if(r)for(var n in r){var s=r[""+n];i[""+n]&&ht(s,N(n,i),i)}},t.prototype.getDefaultAttributes=function(){var i=this;this.isReact=!0;var e=Object.keys(this.props),r=["children","statelessTemplates","immediateRender","isLegacyTemplate","delayUpdate"];this.htmlattributes||(this.htmlattributes={}),this.attrKeys=zh.concat(this.controlAttributes||[]);for(var n=0,s=e;n<s.length;n++){var a=s[n];(a.indexOf("data-")!==-1||a.indexOf("aria-")!==-1||this.attrKeys.indexOf(a)!==-1||Object.keys(this.properties).indexOf(""+a)===-1&&r.indexOf(""+a)===-1)&&this.htmlattributes[""+a]!==this.props[""+a]&&(this.htmlattributes[""+a]=this.props[""+a])}if(!this.htmlattributes.ref){this.htmlattributes.ref=function(d){i.reactElement=d};var l=["autocomplete","combobox","dropdownlist","dropdowntree","multiselect","listbox","colorpicker","numerictextbox","textbox","uploader","maskedtextbox","slider","datepicker","datetimepicker","daterangepicker","timepicker","checkbox","switch","radio","rating"];l.indexOf(this.getModuleName())!==-1&&(this.htmlattributes.key=""+t.reactUid,t.reactUid++,this.type&&!this.htmlattributes.type&&(this.htmlattributes.type=this.multiline?"hidden":this.type),this.name&&!this.htmlattributes.name&&(this.htmlattributes.name=this.name))}if(this.clsName)for(var h=this.element.classList,u=this.htmlattributes.className,p=0;p<h.length;p++)u.indexOf(h[parseInt(p.toString(),10)])===-1&&(this.htmlattributes.className=this.htmlattributes.className+" "+h[parseInt(p.toString(),10)]);return this.htmlattributes},t.prototype.trigger=function(i,e,r){var n=this;if(this.isDestroyed!==!0&&this.modelObserver){if(qh.test(i)){var s=N(i,this);s?(s.call(this,e),r&&r.call(this,e)):r&&r.call(this,e)}(i==="change"||i==="input")&&this.props.onChange&&e.event&&this.props.onChange.call(void 0,{syntheticEvent:e.event,nativeEvent:{text:e.value},value:e.value,target:this});var a=this.isProtectedOnChange;this.isProtectedOnChange=!1,i==="created"?setTimeout(function(){n.isCreated=!0,n.isDestroyed||n.modelObserver.notify(i,e,r)},10):this.modelObserver.notify(i,e,r),this.isProtectedOnChange=a}},t.prototype.compareValues=function(i,e){var r=typeof i,n=typeof e;if(r===n){if(i===e)return!0;if((!c(i)&&i.constructor)!==(!c(e)&&e.constructor))return!1;if(i instanceof Date||i instanceof RegExp||i instanceof String||i instanceof Number)return i.toString()===e.toString();if(gn(i)||Array.isArray(i)){var s=i,a=e;return gn(s)&&(s=[i],a=[e]),this.compareObjects(s,a).status}if(i.constructor&&i.constructor.name===e.constructor.name&&(i.constructor.name==="Query"||i.constructor.name==="DataManager")&&JSON.stringify(i)===JSON.stringify(e))return!0}return!1},t.prototype.compareObjects=function(i,e,r){var n=!0,s=i.length===e.length,a=[],l=c(this.templateProps)?[]:this.templateProps;if(s)for(var h=0,u=e.length;h<u;h++){var p={},d=i[parseInt(h.toString(),10)],f=e[parseInt(h.toString(),10)],g=Object.keys(f);if(g.length!==0)for(var v=0,m=g;v<m.length;v++){var y=m[v],I=d[""+y],S=f[""+y];if(y==="items"){for(var R=0;R<S.length;R++)if(this.getModuleName()==="richtexteditor"&&typeof S[parseInt(R.toString(),10)]=="object")return{status:!0}}if(this.getModuleName()==="grid"&&y==="field"&&(p[""+y]=S),!d.hasOwnProperty(y)||!(l.length>0&&l.indexOf(""+y)===-1&&typeof S=="function"?this.compareValues(I.toString(),S.toString()):this.compareValues(I,S))){if(!r)return{status:!1};n=!1,p[""+y]=S}}else if(e[parseInt(h.toString(),10)]===i[parseInt(h.toString(),10)])n=!0;else{if(!r)return{status:!1};n=!1}this.getModuleName()==="grid"&&r==="columns"&&c(p.field)&&(p.field=void 0),Object.keys(p).length&&a.push({index:h,value:p,key:r})}else n=!1;return{status:n,changedProperties:a}},t.prototype.refreshChild=function(i,e){if(this.checkInjectedModules){for(var r=this.getInjectedModules()||[],n=this.getInjectedServices()||[],s=0,a=n;s<a.length;s++){var l=a[s];r.indexOf(l)===-1&&r.push(l)}this.injectedModules=r}if(this.directivekeys){var h=[],u=this.validateChildren({},this.directivekeys,e||this.props);if(u&&Object.keys(u).length){if(!i&&this.skipRefresh)for(var p=0,d=this.skipRefresh;p<d.length;p++){var f=d[p];delete u[""+f]}if(this.prevProperties)for(var g=Object.keys(this.prevProperties),v=0;v<g.length;v++){var m=g[parseInt(v.toString(),10)];if(u.hasOwnProperty(m)){var y=this.compareObjects(this.prevProperties[""+m],u[""+m],m);if(y.status)delete u[""+m];else{y.changedProperties.length&&(h=h.concat(y.changedProperties));var I={};I[""+m]=u[""+m],this.prevProperties=_(this.prevProperties,I)}}}else this.prevProperties=_({},u,{},!0);if(h.length)if(this.getModuleName()==="grid"&&m==="columns")for(var S=0,R=this.columns;S<R.length;S++){var L=N("field",R[parseInt(S.toString(),10)]),P=N(S+".value.field",h);if(L===P){var J=N(h[parseInt(S.toString(),10)].key+"."+h[parseInt(S.toString(),10)].index,this);J&&J.setProperties?J.setProperties(h[parseInt(S.toString(),10)].value):_(J,h[parseInt(S.toString(),10)].value)}else this.setProperties(u,i)}else for(var he=0,pe=h;he<pe.length;he++){var Re=pe[he],B=N(Re.key+"."+Re.index,this);B&&B.setProperties?B.setProperties(Re.value):_(B,Re.value)}else this.setProperties(u,i)}}},t.prototype.componentWillUnmount=function(){clearTimeout(this.cachedTimeOut);var i=["dropdowntree","checkbox"];this.initRenderCalled&&this.isAppendCalled&&this.element&&(i.indexOf(this.getModuleName())||document.body.contains(this.element))&&!this.isDestroyed&&this.isCreated&&this.destroy(),xh.offIntlEvents()},t.prototype.appendReactElement=function(i,e){var r=tl.createPortal(i,e);this.portals?this.portals.push(r):this.portals=[r]},t.prototype.renderReactTemplates=function(i){this.isReactForeceUpdate=!0,i?this.forceUpdate(i):this.forceUpdate(),this.isReactForeceUpdate=!1},t.prototype.clearTemplate=function(i,e,r){var n=this;i&&i.length?Array.prototype.forEach.call(i,function(s){if(n.portals.forEach(function(l){l.propName}),!c(e)&&n.portals[e]&&n.portals[e].propName===s)n.portals.splice(e,1);else for(var a=0;a<n.portals.length;a++)n.portals[parseInt(a.toString(),10)].propName===s&&(n.portals.splice(a,1),a--)}):this.portals=[],this.renderReactTemplates(r)},t.prototype.validateChildren=function(i,e,r){for(var n=!1,s=Xe.Children.toArray(r.children),a=0,l=s;a<l.length;a++){var h=l[a],u=this.getChildType(h),p=e[""+u];if(u&&e){var d=this.getChildProps(Xe.Children.toArray(h.props.children),p);d.length&&(n=!0,i[h.type.propertyName||u]=d)}}return n?i:null},t.prototype.getChildType=function(i){return i.type&&i.type.isDirective&&i.type.moduleName||""},t.prototype.getChildProps=function(i,e){for(var r=[],n=0,s=i;n<s.length;n++){var a=s[n],l=!1,h=void 0;typeof e=="string"?(l=!0,h=e):h=Object.keys(e)[0];var u=a.props,p=this.getChildType(a);if(p===h)if(l||!u.children){var d=_({},u,{},!0);this.processComplexTemplate(d,a.type),r.push(d)}else{var f=this.validateChildren(_({},u),e[""+h],u)||u;f.children&&delete f.children,this.processComplexTemplate(f,a.type),r.push(f)}}return r},t.prototype.getInjectedServices=function(){for(var i=Xe.Children.toArray(this.props.children),e=0,r=i;e<r.length;e++){var n=r[e];if(n.type&&n.type.isService)return n.props.services}return[]},t.reactUid=1,t}(Xe.Component);function Fr(o,t){t.forEach(function(i){Object.getOwnPropertyNames(i.prototype).forEach(function(e){e!=="isMounted"&&e!=="replaceState"&&(o.prototype[""+e]=i.prototype[""+e])})})}var Vh=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),rl=function(o){Vh(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.render=function(){return null},t.isDirective=!0,t}(Xe.PureComponent),Wh=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}();(function(o){Wh(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.render=function(){return null},t.isService=!0,t})(Xe.PureComponent);var Gh=Ih();function Uh(o,t){return typeof o=="string"||o.prototype&&o.prototype.CSPTemplate&&typeof o=="function"?Gh(o,t):function(i,e,r,n){var s=o,a=i;typeof s=="object"&&(s=o.template,a=_({},i,o.data||{}));var l;n?l=n:l=document.createElement("div");var h=Xe.createElement(s,a),u=tl.createPortal(h,l);if(u.propName=r,e.portals?e.portals.push(u):e.portals=[u],!n)return[l]}}wh({compile:Uh});var _h=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),ws=function(o){_h(t,o);function t(i){var e=o.call(this,i)||this;return e.initRenderCalled=!1,e.checkInjectedModules=!1,e.statelessTemplateProps=null,e.templateProps=null,e.immediateRender=!0,e.portals=[],e}return t.prototype.render=function(){if((this.element&&!this.initRenderCalled||this.refreshing)&&!this.isReactForeceUpdate)o.prototype.render.call(this),this.initRenderCalled=!0;else return Xe.createElement("button",this.getDefaultAttributes(),[].concat(this.props.children,this.portals))},t}(Ei);Fr(ws,[Lr,Xe.Component]);const jh=()=>$.jsxs("div",{className:"grid grid-cols-[19%_79%]",children:[$.jsxs("aside",{className:"flex flex-col gap-3 p-3",children:[$.jsx(Io,{className:"bg-blue-600 text-white px-4 py-3",to:"/",children:"User Home"}),$.jsx(Io,{className:"bg-blue-600 text-white px-5 py-4",to:"/counter",children:"Counter"})]}),$.jsx("div",{className:"bg-white h-screen p-3",children:$.jsx(Lh,{})})]});var Z={RTL:"e-rtl",DISABLE:"e-disabled",INPUT:"e-input",TEXTAREA:"e-multi-line-input",INPUTGROUP:"e-input-group",FLOATINPUT:"e-float-input",FLOATLINE:"e-float-line",FLOATTEXT:"e-float-text",FLOATTEXTCONTENT:"e-float-text-content",CLEARICON:"e-clear-icon",CLEARICONHIDE:"e-clear-icon-hide",LABELTOP:"e-label-top",LABELBOTTOM:"e-label-bottom",NOFLOATLABEL:"e-no-float-label",INPUTCUSTOMTAG:"e-input-custom-tag",FLOATCUSTOMTAG:"e-float-custom-tag"},ce;(function(o){var t,i=!0;function e(x,E){var z=c(E)?Ve:E,K={container:null,buttons:[],clearButton:null};if(t=x.floatLabelType,i=x.bindClearAction,c(x.floatLabelType)||x.floatLabelType==="Never"?(K.container=R(x,Z.INPUTGROUP,Z.INPUTCUSTOMTAG,"span",z),x.element.parentNode.insertBefore(K.container,x.element),T([x.element],Z.INPUT),K.container.appendChild(x.element)):u(x,K,z),r(x),!c(x.properties)&&!c(x.properties.showClearButton)&&x.properties.showClearButton&&(U(x.properties.showClearButton,x.element,K,!0,z),K.clearButton.setAttribute("role","button"),K.container.classList.contains(Z.FLOATINPUT)&&T([K.container],Z.INPUTGROUP)),!c(x.buttons))for(var Y=0;Y<x.buttons.length;Y++)K.buttons.push(We(x.buttons[Y],K.container,z));return!c(x.element)&&x.element.tagName==="TEXTAREA"&&T([K.container],Z.TEXTAREA),fe(K.container,x.element),K=d(x,K),te(K.container,z),K}o.createInput=e;function r(x){n(x.floatLabelType,x.element),x.element.addEventListener("focus",function(){var E=v(this);(E.classList.contains("e-input-group")||E.classList.contains("e-outline")||E.classList.contains("e-filled"))&&E.classList.add("e-input-focus"),x.floatLabelType==="Auto"&&setTimeout(function(){o.calculateWidth(x.element,E)},80)}),x.element.addEventListener("blur",function(){var E=v(this);(E.classList.contains("e-input-group")||E.classList.contains("e-outline")||E.classList.contains("e-filled"))&&E.classList.remove("e-input-focus"),x.floatLabelType==="Auto"&&x.element.value===""&&setTimeout(function(){o.calculateWidth(x.element,E)},80)}),x.element.addEventListener("input",function(){n(t,x.element)})}o.bindInitialEvent=r;function n(x,E){var z=E.value,K=E.parentElement,Y=K.parentElement;z!==""&&!c(z)?K&&K.classList.contains("e-input-group")?K.classList.add("e-valid-input"):Y&&Y.classList.contains("e-input-group")&&Y.classList.add("e-valid-input"):x!=="Always"&&(K&&K.classList.contains("e-input-group")?K.classList.remove("e-valid-input"):Y&&Y.classList.contains("e-input-group")&&Y.classList.remove("e-valid-input"))}function s(){var x=v(this).getElementsByClassName("e-float-text")[0];c(x)||(T([x],Z.LABELTOP),x.classList.contains(Z.LABELBOTTOM)&&F([x],Z.LABELBOTTOM))}function a(){var x=v(this);if(x.getElementsByTagName("textarea")[0]?x.getElementsByTagName("textarea")[0].value==="":x.getElementsByTagName("input")[0].value===""){var E=x.getElementsByClassName("e-float-text")[0];c(E)||(E.classList.contains(Z.LABELTOP)&&F([E],Z.LABELTOP),T([E],Z.LABELBOTTOM))}}function l(x){x.addEventListener("focus",s),x.addEventListener("blur",a)}o.wireFloatingEvents=l;function h(x){x.removeEventListener("focus",s),x.removeEventListener("blur",a)}function u(x,E,z){var K=c(z)?Ve:z;x.floatLabelType==="Auto"&&l(x.element),c(E.container)?(E.container=R(x,Z.FLOATINPUT,Z.FLOATCUSTOMTAG,"div",K),E.container.classList.add(Z.INPUTGROUP),x.element.parentNode&&x.element.parentNode.insertBefore(E.container,x.element)):(c(x.customTag)||E.container.classList.add(Z.FLOATCUSTOMTAG),E.container.classList.add(Z.FLOATINPUT));var Y=K("span",{className:Z.FLOATLINE}),X=K("label",{className:Z.FLOATTEXT});if(!c(x.element.id)&&x.element.id!==""&&(X.id="label_"+x.element.id.replace(/ /g,"_"),Ie(x.element,{"aria-labelledby":X.id})),!c(x.element.placeholder)&&x.element.placeholder!==""&&(X.innerText=L(x.element.placeholder),x.element.removeAttribute("placeholder")),!c(x.properties)&&!c(x.properties.placeholder)&&x.properties.placeholder!==""&&(X.innerText=L(x.properties.placeholder)),X.innerText||E.container.classList.add(Z.NOFLOATLABEL),E.container.classList.contains("e-float-icon-left")){var De=E.container.querySelector(".e-input-in-wrap");De.appendChild(x.element),De.appendChild(Y),De.appendChild(X)}else E.container.appendChild(x.element),E.container.appendChild(Y),E.container.appendChild(X);g(x.element.value,X),x.floatLabelType==="Always"&&(X.classList.contains(Z.LABELBOTTOM)&&F([X],Z.LABELBOTTOM),T([X],Z.LABELTOP)),x.floatLabelType==="Auto"&&(x.element.addEventListener("input",function(Qe){S(x.element,x.floatLabelType)}),x.element.addEventListener("blur",function(Qe){S(x.element,x.floatLabelType)})),c(x.element.getAttribute("id"))||X.setAttribute("for",x.element.getAttribute("id"))}function p(x,E){x==="Always"&&E.classList.contains("e-outline")&&E.classList.add("e-valid-input")}function d(x,E){if(!c(x.properties))for(var z=0,K=Object.keys(x.properties);z<K.length;z++){var Y=K[z];switch(Y){case"cssClass":J(x.properties.cssClass,[E.container]),p(x.floatLabelType,E.container);break;case"enabled":O(x.properties.enabled,x.element,x.floatLabelType,E.container);break;case"enableRtl":H(x.properties.enableRtl,[E.container]);break;case"placeholder":Re(x.properties.placeholder,x.element);break;case"readonly":B(x.properties.readonly,x.element);break}}return E}function f(x,E,z){c(E)||(x&&!z?F([E],Z.CLEARICONHIDE):T([E],Z.CLEARICONHIDE))}function g(x,E,z){if(z===void 0&&(z=null),x)T([E],Z.LABELTOP),E.classList.contains(Z.LABELBOTTOM)&&F([E],Z.LABELBOTTOM);else{var K=z!=null?z!==document.activeElement:!0;K&&(E.classList.contains(Z.LABELTOP)&&F([E],Z.LABELTOP),T([E],Z.LABELBOTTOM))}}function v(x){var E=c(x.parentNode)?x:x.parentNode;return E&&E.classList.contains("e-input-in-wrap")&&(E=E.parentNode),E}function m(x,E,z,K){var Y=c(K)?Ve:K,X=Y("span",{className:Z.CLEARICON}),De=E.container;if(!c(z))De.appendChild(X);else{var Qe=E.container.classList.contains(Z.FLOATINPUT)?E.container.querySelector("."+Z.FLOATTEXT):x;Qe.insertAdjacentElement("afterend",X)}return T([X],Z.CLEARICONHIDE),y(x,X),X.setAttribute("aria-label","close"),X}function y(x,E,z){(i===void 0||i)&&E.addEventListener("click",function(K){x.classList.contains(Z.DISABLE)||x.readOnly||(K.preventDefault(),x!==document.activeElement&&x.focus(),x.value="",T([E],Z.CLEARICONHIDE))}),x.addEventListener("input",function(K){f(x.value,E)}),x.addEventListener("focus",function(K){f(x.value,E,x.readOnly)}),x.addEventListener("blur",function(K){setTimeout(function(){c(E)||(T([E],Z.CLEARICONHIDE),E=!c(x)&&x.classList.contains("e-combobox")?null:E)},200)})}o.wireClearBtnEvents=y;function I(){}o.destroy=I;function S(x,E){var z=v(x);if(z.classList.contains(Z.FLOATINPUT)&&E==="Auto"){var K=v(x).getElementsByClassName("e-float-text")[0];g(x.value,K,x)}}function R(x,E,z,K,Y){var X=c(Y)?Ve:Y,De;return c(x.customTag)?De=X(K,{className:E}):(De=X(x.customTag,{className:E}),De.classList.add(z)),De.classList.add("e-control-wrapper"),De}function L(x){var E="";if(!c(x)&&x!==""){var z=document.createElement("span");z.innerHTML='<input  placeholder="'+x+'"/>';var K=z.children[0];E=K.placeholder}return E}function P(x,E,z,K){if(E.value=x,z==="Auto"&&x===""&&he(E,E.parentElement),!c(z)&&z==="Auto"&&S(E,z),!c(K)&&K){var Y=v(E);if(!c(Y)){var X=Y.getElementsByClassName(Z.CLEARICON)[0];c(X)||(E.value&&!c(Y)&&Y.classList.contains("e-input-focus")?F([X],Z.CLEARICONHIDE):T([X],Z.CLEARICONHIDE))}}n(z,E)}o.setValue=P;function J(x,E,z){!c(z)&&z!==""&&F(E,z.split(" ")),!c(x)&&x!==""&&T(E,x.split(" "))}o.setCssClass=J;function he(x,E,z){var K=z==="multiselect"?x:x.clientWidth-parseInt(getComputedStyle(x,null).getPropertyValue("padding-left"),10);c(E.getElementsByClassName("e-float-text-content")[0])||(E.getElementsByClassName("e-float-text-content")[0].classList.contains("e-float-text-overflow")&&E.getElementsByClassName("e-float-text-content")[0].classList.remove("e-float-text-overflow"),(K<E.getElementsByClassName("e-float-text-content")[0].clientWidth||K===E.getElementsByClassName("e-float-text-content")[0].clientWidth)&&E.getElementsByClassName("e-float-text-content")[0].classList.add("e-float-text-overflow"))}o.calculateWidth=he;function pe(x,E){typeof x=="number"?E.style.width=Pe(x):typeof x=="string"&&(E.style.width=x.match(/px|%|em/)?x:Pe(x)),he(E.firstChild,E)}o.setWidth=pe;function Re(x,E){x=L(x);var z=v(E);z.classList.contains(Z.FLOATINPUT)?!c(x)&&x!==""?(z.getElementsByClassName("e-float-text-content")[0]?z.getElementsByClassName(Z.FLOATTEXT)[0].children[0].textContent=x:z.getElementsByClassName(Z.FLOATTEXT)[0].textContent=x,z.classList.remove(Z.NOFLOATLABEL),E.removeAttribute("placeholder")):(z.classList.add(Z.NOFLOATLABEL),z.getElementsByClassName("e-float-text-content")[0]?z.getElementsByClassName(Z.FLOATTEXT)[0].children[0].textContent="":z.getElementsByClassName(Z.FLOATTEXT)[0].textContent=""):!c(x)&&x!==""?Ie(E,{placeholder:x}):E.removeAttribute("placeholder")}o.setPlaceholder=Re;function B(x,E,z){x?Ie(E,{readonly:""}):E.removeAttribute("readonly"),c(z)||S(E,z)}o.setReadonly=B;function H(x,E){x?T(E,Z.RTL):F(E,Z.RTL)}o.setEnableRtl=H;function O(x,E,z,K){var Y={disabled:"disabled","aria-disabled":"true"},X=!c(K);x?(E.classList.remove(Z.DISABLE),re(Y,E),X&&F([K],Z.DISABLE)):(E.classList.add(Z.DISABLE),j(Y,E),X&&T([K],Z.DISABLE)),c(z)||S(E,z)}o.setEnabled=O;function U(x,E,z,K,Y){var X=c(Y)?Ve:Y;x?z.clearButton=m(E,z,K,X):(Se(z.clearButton),z.clearButton=null)}o.setClearButton=U;function re(x,E){for(var z=0,K=Object.keys(x);z<K.length;z++){var Y=K[z],X=v(E);Y==="disabled"&&E.classList.remove(Z.DISABLE),Y==="disabled"&&X.classList.contains(Z.INPUTGROUP)&&X.classList.remove(Z.DISABLE),Y==="placeholder"&&X.classList.contains(Z.FLOATINPUT)?X.getElementsByClassName(Z.FLOATTEXT)[0].textContent="":E.removeAttribute(Y)}}o.removeAttributes=re;function j(x,E){for(var z=0,K=Object.keys(x);z<K.length;z++){var Y=K[z],X=v(E);Y==="disabled"&&E.classList.add(Z.DISABLE),Y==="disabled"&&X.classList.contains(Z.INPUTGROUP)&&X.classList.add(Z.DISABLE),Y==="placeholder"&&X.classList.contains(Z.FLOATINPUT)?X.getElementsByClassName(Z.FLOATTEXT)[0].textContent=x[""+Y]:E.setAttribute(Y,x[""+Y])}}o.addAttributes=j;function W(x){var E=x.container;if(!c(E)&&E.classList.contains(Z.FLOATINPUT)){var z=E.querySelector("textarea")?E.querySelector("textarea"):E.querySelector("input"),K=E.querySelector("."+Z.FLOATTEXT).textContent,Y=E.querySelector(".e-clear-icon")!==null;Ce(E.querySelector("."+Z.FLOATLINE)),Ce(E.querySelector("."+Z.FLOATTEXT)),ot(E,[Z.INPUTGROUP],[Z.FLOATINPUT]),h(z),Ie(z,{placeholder:K}),z.classList.add(Z.INPUT),!Y&&z.tagName==="INPUT"&&z.removeAttribute("required")}}o.removeFloating=W;function G(x,E,z,K){var Y=c(K)?Ve:K,X=D(x,"."+Z.INPUTGROUP);if(t=E,E!=="Never"){var De=X.tagName;De=De!=="DIV"&&De!=="SPAN"?De:null;var Qe={element:x,floatLabelType:E,customTag:De,properties:{placeholder:z}},Ye=X.querySelector(".e-clear-icon"),Et={container:X};x.classList.remove(Z.INPUT),u(Qe,Et,Y),te(Et.container,Y),he(Qe.element,Et.container);var Ft=X.classList.contains("e-float-icon-left");if(c(Ye))if(Ft){var or=X.querySelector(".e-input-in-wrap");Ye=or.querySelector(".e-input-group-icon")}else Ye=X.querySelector(".e-input-group-icon");if(c(Ye))Ft&&(Ye=X.querySelector(".e-input-group-icon"));else{var Sh=X.querySelector("."+Z.FLOATLINE),bh=X.querySelector("."+Z.FLOATTEXT),Pn=Ft?X.querySelector(".e-input-in-wrap"):X;Pn.insertBefore(x,Ye),Pn.insertBefore(Sh,Ye),Pn.insertBefore(bh,Ye)}}p(E,x.parentElement)}o.addFloating=G;function te(x,E){if(x.classList.contains("e-outline")&&x.getElementsByClassName("e-float-text")[0]){var z=E("span",{className:Z.FLOATTEXTCONTENT});z.innerHTML=x.getElementsByClassName("e-float-text")[0].innerHTML,x.getElementsByClassName("e-float-text")[0].innerHTML="",x.getElementsByClassName("e-float-text")[0].appendChild(z)}}o.createSpanElement=te;function me(x,E){for(var z=0;z<E.length;z++)xe(x,E[parseInt(z.toString())].container)}o.setRipple=me;function xe(x,E,z){var K=[];K.push(z);var Y=c(z)?E.querySelectorAll(".e-input-group-icon"):K;if(x&&Y.length>0)for(var X=0;X<Y.length;X++)Y[parseInt(X.toString())].addEventListener("mousedown",oe,!1),Y[parseInt(X.toString())].addEventListener("mouseup",ie,!1);else if(Y.length>0)for(var X=0;X<Y.length;X++)Y[parseInt(X.toString())].removeEventListener("mousedown",oe,this),Y[parseInt(X.toString())].removeEventListener("mouseup",ie,this)}function ye(x,E){!x.classList.contains("e-disabled")&&!x.querySelector("input").readOnly&&E.classList.add("e-input-btn-ripple")}function oe(){for(var x=this,E=this.parentElement;!E.classList.contains("e-input-group");)E=E.parentElement;ye(E,x)}function ie(){var x=this;setTimeout(function(){x.classList.remove("e-input-btn-ripple")},500)}function ve(x,E){var z=E("span",{className:x});return z.classList.add("e-input-group-icon"),z}function ae(x,E,z,K,Y){var X=typeof E=="string"?E.split(","):E;if(x.toLowerCase()==="append")for(var De=0,Qe=X;De<Qe.length;De++){var Ye=Qe[De];We(Ye,z,Y)}else for(var Et=0,Ft=X;Et<Ft.length;Et++){var Ye=Ft[Et];ze(Ye,z,K,Y)}z.getElementsByClassName("e-input-group-icon")[0]&&z.getElementsByClassName("e-float-text-overflow")[0]&&z.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon")}o.addIcon=ae;function ze(x,E,z,K){var Y=c(K)?Ve:K,X=ve(x,Y);E.classList.add("e-float-icon-left");var De=E.querySelector(".e-input-in-wrap");if(c(De)){De=Y("span",{className:"e-input-in-wrap"}),z.parentNode.insertBefore(De,z);var Qe=E.querySelectorAll(z.tagName+" ~ *");De.appendChild(z);for(var Ye=0;Ye<Qe.length;Ye++){var Et=Qe[parseInt(Ye.toString())],Ft=De.parentElement;(!Et.classList.contains("e-float-line")||!(Ft&&Ft.classList.contains("e-filled"))&&Ft)&&De.appendChild(Et)}}return De.parentNode.insertBefore(X,De),xe(!0,E,X),X}o.prependSpan=ze;function We(x,E,z){var K=c(z)?Ve:z,Y=ve(x,K),X=E.classList.contains("e-float-icon-left")?E.querySelector(".e-input-in-wrap"):E;return X.appendChild(Y),xe(!0,E,Y),Y}o.appendSpan=We;function fe(x,E){E.type==="hidden"?x.classList.add("e-hidden"):x.classList.contains("e-hidden")&&x.classList.remove("e-hidden")}o.validateInputType=fe})(ce||(ce={}));var ii,qi,xi,Sr,eo=!1;function nl(o,t){var i=!1,e={left:0,top:0},r=o;if(!o||!t)return e;for(c(t.offsetParent)&&t.style.position==="fixed"&&(i=!0);(t.offsetParent||i)&&o&&t.offsetParent!==o;)e.left+=o.offsetLeft,e.top+=o.offsetTop,o=o.offsetParent;for(o=r;(t.offsetParent||i)&&o&&t.offsetParent!==o;)e.left-=o.scrollLeft,e.top-=o.scrollTop,o=o.parentElement;return e}function bt(o,t,i,e,r){if(qi=void 0,qi=r,eo=!!e,!o)return{left:0,top:0};t||(t="left"),i||(i="top"),Sr=o.ownerDocument,xi=o;var n={left:0,top:0};return Kh(t.toLowerCase(),i.toLowerCase(),n)}function ai(o,t){t.left=o}function li(o,t){t.top=o}function Kh(o,t,i){switch(ii=xi.getBoundingClientRect(),t+o){case"topcenter":ai(Wn(),i),li(tn(),i);break;case"topright":ai(Vn(),i),li(tn(),i);break;case"centercenter":ai(Wn(),i),li(qn(),i);break;case"centerright":ai(Vn(),i),li(qn(),i);break;case"centerleft":ai(rn(),i),li(qn(),i);break;case"bottomcenter":ai(Wn(),i),li(Hn(),i);break;case"bottomright":ai(Vn(),i),li(Hn(),i);break;case"bottomleft":ai(rn(),i),li(Hn(),i);break;default:case"topleft":ai(rn(),i),li(tn(),i);break}return xi=null,i}function sl(){return Sr.documentElement.scrollTop||Sr.body.scrollTop}function ol(){return Sr.documentElement.scrollLeft||Sr.body.scrollLeft}function Hn(){return eo?ii.bottom:ii.bottom+sl()}function qn(){return tn()+ii.height/2}function tn(){return eo?ii.top:ii.top+sl()}function rn(){return ii.left+ol()}function Vn(){var o=xi&&(xi.classList.contains("e-date-wrapper")||xi.classList.contains("e-datetime-wrapper")||xi.classList.contains("e-date-range-wrapper")||xi.classList.contains("e-multiselect"))?qi?qi.width:0:qi&&ii.width>=qi.width?qi.width:0;return ii.right+ol()-o}function Wn(){return rn()+ii.width/2}var _i,kt;function al(o,t,i,e){if(t===void 0&&(t=null),i===void 0&&(i={X:!1,Y:!1}),!i.Y&&!i.X)return{left:0,top:0};var r=o.getBoundingClientRect();if(kt=t,_i=o.ownerDocument,e||(e=bt(o,"left","top")),i.X){var n=kt?pl():ml(),s=no(),a=so(),l=s-e.left,h=e.left+r.width-a;r.width>n?l>0&&h<=0?e.left=a-r.width:h>0&&l<=0?e.left=s:e.left=l>h?a-r.width:s:l>0?e.left+=l:h>0&&(e.left-=h)}if(i.Y){var u=kt?dl():vl(),p=ro(),d=oo(),f=p-e.top,g=e.top+r.height-d;r.height>u?f>0&&g<=0?e.top=d-r.height:g>0&&f<=0?e.top=p:e.top=f>g?d-r.height:p:f>0?e.top+=f:g>0&&(e.top-=g)}return e}function to(o,t,i,e){t===void 0&&(t=null);var r=bt(o,"left","top");i&&(r.left=i),e&&(r.top=e);var n=[];kt=t,_i=o.ownerDocument;var s=o.getBoundingClientRect(),a=r.top,l=r.left,h=r.left+s.width,u=r.top+s.height,p=cl(a,u),d=ll(l,h);return p.topSide&&n.push("top"),d.rightSide&&n.push("right"),d.leftSide&&n.push("left"),p.bottomSide&&n.push("bottom"),n}function Qh(o,t,i,e,r,n,s,a,l){if(s===void 0&&(s=null),a===void 0&&(a={X:!0,Y:!0}),!(!t||!o||!r||!n||!a.X&&!a.Y)){var h={TL:null,TR:null,BL:null,BR:null},u={TL:null,TR:null,BL:null,BR:null},p;if(window.getComputedStyle(o).display==="none"){var d=o.style.visibility;o.style.visibility="hidden",o.style.display="block",p=o.getBoundingClientRect(),o.style.removeProperty("display"),o.style.visibility=d}else p=o.getBoundingClientRect();var f={posX:r,posY:n,offsetX:i,offsetY:e,position:{left:0,top:0}};kt=s,_i=t.ownerDocument,Xh(t,h,f,l,p),io(u,f,p),a.X&&hl(t,u,h,f,p,!0),a.Y&&h.TL.top>-1&&ul(t,u,h,f,p,!0),Yh(o,f,p)}}function Yh(o,t,i){var e=0,r=0;if(o.offsetParent!=null&&(getComputedStyle(o.offsetParent).position==="absolute"||getComputedStyle(o.offsetParent).position==="relative")){var n=bt(o.offsetParent,"left","top",!1,i);e=n.left,r=n.top}var s=1,a=1;if(o.offsetParent){var l=getComputedStyle(o.offsetParent).transform;if(l!=="none"){var h=new DOMMatrix(l);s=h.a,a=h.d}}o.style.top=t.position.top/a+t.offsetY-r+"px",o.style.left=t.position.left/s+t.offsetX-e+"px"}function Xh(o,t,i,e,r){i.position=bt(o,i.posX,i.posY,e,r),t.TL=bt(o,"left","top",e,r),t.TR=bt(o,"right","top",e,r),t.BR=bt(o,"left","bottom",e,r),t.BL=bt(o,"right","bottom",e,r)}function io(o,t,i){o.TL={top:t.position.top+t.offsetY,left:t.position.left+t.offsetX},o.TR={top:o.TL.top,left:o.TL.left+i.width},o.BL={top:o.TL.top+i.height,left:o.TL.left},o.BR={top:o.TL.top+i.height,left:o.TL.left+i.width}}function ll(o,t){var i=!1,e=!1;return o-mn()<no()&&(i=!0),t>so()&&(e=!0),{leftSide:i,rightSide:e}}function hl(o,t,i,e,r,n){var s=ll(t.TL.left,t.TR.left);i.TL.left-mn()<=no()&&(s.leftSide=!1),i.TR.left>so()&&(s.rightSide=!1),(s.leftSide&&!s.rightSide||!s.leftSide&&s.rightSide)&&(e.posX==="right"?e.posX="left":e.posX="right",e.offsetX=e.offsetX+r.width,e.offsetX=-1*e.offsetX,e.position=bt(o,e.posX,e.posY,!1),io(t,e,r),n&&hl(o,t,i,e,r,!1))}function ul(o,t,i,e,r,n){var s=cl(t.TL.top,t.BL.top);i.TL.top-vn()<=ro()&&(s.topSide=!1),i.BL.top>=oo()&&o.getBoundingClientRect().bottom<window.innerHeight&&(s.bottomSide=!1),(s.topSide&&!s.bottomSide||!s.topSide&&s.bottomSide)&&(e.posY==="top"?e.posY="bottom":e.posY="top",e.offsetY=e.offsetY+r.height,e.offsetY=-1*e.offsetY,e.position=bt(o,e.posX,e.posY,!1,r),io(t,e,r),n&&ul(o,t,i,e,r,!1))}function cl(o,t){var i=!1,e=!1;return o-vn()<ro()&&(i=!0),t>oo()&&(e=!0),{topSide:i,bottomSide:e}}function pl(){return kt.getBoundingClientRect().width}function dl(){return kt.getBoundingClientRect().height}function fl(){return kt.getBoundingClientRect().left}function gl(){return kt.getBoundingClientRect().top}function ro(){return kt?gl():0}function no(){return kt?fl():0}function so(){return kt?mn()+fl()+pl():mn()+ml()}function oo(){return kt?vn()+gl()+dl():vn()+vl()}function vn(){return _i.documentElement.scrollTop||_i.body.scrollTop}function mn(){return _i.documentElement.scrollLeft||_i.body.scrollLeft}function vl(){return window.innerHeight}function ml(){var o=window.innerWidth,t=document.documentElement.getBoundingClientRect(),i=c(document.documentElement)?0:t.width;return o-(o-i)}var yl=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),$e=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},Cl=function(o){yl(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return $e([C("left")],t.prototype,"X",void 0),$e([C("top")],t.prototype,"Y",void 0),t}(_e),at={ROOT:"e-popup",RTL:"e-rtl",OPEN:"e-popup-open",CLOSE:"e-popup-close"},ao=function(o){yl(t,o);function t(i,e){return o.call(this,e,i)||this}return t.prototype.onPropertyChanged=function(i,e){for(var r=0,n=Object.keys(i);r<n.length;r++){var s=n[r];switch(s){case"width":mt(this.element,{width:Pe(i.width)});break;case"height":mt(this.element,{height:Pe(i.height)});break;case"zIndex":mt(this.element,{zIndex:i.zIndex});break;case"enableRtl":this.setEnableRtl();break;case"position":case"relateTo":this.refreshPosition();break;case"offsetX":var a=i.offsetX-e.offsetX;this.element.style.left=(parseInt(this.element.style.left,10)+a).toString()+"px";break;case"offsetY":var l=i.offsetY-e.offsetY;this.element.style.top=(parseInt(this.element.style.top,10)+l).toString()+"px";break;case"content":this.setContent();break;case"actionOnScroll":i.actionOnScroll!=="none"?this.wireScrollEvents():this.unwireScrollEvents();break}}},t.prototype.getModuleName=function(){return"popup"},t.prototype.resolveCollision=function(){this.checkCollision()},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.destroy=function(){this.element.classList.contains("e-popup-open")&&this.unwireEvents(),this.element.classList.remove(at.ROOT,at.RTL,at.OPEN,at.CLOSE),this.content=null,this.relateTo=null,o.prototype.destroy.call(this)},t.prototype.render=function(){this.element.classList.add(at.ROOT);var i={};this.zIndex!==1e3&&(i.zIndex=this.zIndex),this.width!=="auto"&&(i.width=Pe(this.width)),this.height!=="auto"&&(i.height=Pe(this.height)),mt(this.element,i),this.fixedParent=!1,this.setEnableRtl(),this.setContent()},t.prototype.wireEvents=function(){Q.isDevice&&b.add(window,"orientationchange",this.orientationOnChange,this),this.actionOnScroll!=="none"&&this.wireScrollEvents()},t.prototype.wireScrollEvents=function(){if(this.getRelateToElement())for(var i=0,e=this.getScrollableParent(this.getRelateToElement());i<e.length;i++){var r=e[i];b.add(r,"scroll",this.scrollRefresh,this)}},t.prototype.unwireEvents=function(){Q.isDevice&&b.remove(window,"orientationchange",this.orientationOnChange),this.actionOnScroll!=="none"&&this.unwireScrollEvents()},t.prototype.unwireScrollEvents=function(){if(this.getRelateToElement())for(var i=0,e=this.getScrollableParent(this.getRelateToElement());i<e.length;i++){var r=e[i];b.remove(r,"scroll",this.scrollRefresh)}},t.prototype.getRelateToElement=function(){var i=this.relateTo===""||c(this.relateTo)?document.body:this.relateTo;return this.setProperties({relateTo:i},!0),typeof this.relateTo=="string"?document.querySelector(this.relateTo):this.relateTo},t.prototype.scrollRefresh=function(i){if(this.actionOnScroll==="reposition"?!c(this.element)&&!(this.element.offsetParent===i.target||this.element.offsetParent&&this.element.offsetParent.tagName==="BODY"&&i.target.parentElement==null)&&this.refreshPosition():this.actionOnScroll==="hide"&&this.hide(),this.actionOnScroll!=="none"&&this.getRelateToElement()){var e=this.isElementOnViewport(this.getRelateToElement(),i.target);!e&&!this.targetInvisibleStatus?(this.trigger("targetExitViewport"),this.targetInvisibleStatus=!0):e&&(this.targetInvisibleStatus=!1)}},t.prototype.isElementOnViewport=function(i,e){for(var r=this.getScrollableParent(i),n=0;n<r.length;n++)if(!this.isElementVisible(i,r[n]))return!1;return!0},t.prototype.isElementVisible=function(i,e){var r=this.checkGetBoundingClientRect(i);if(!r.height||!r.width)return!1;if(c(this.checkGetBoundingClientRect(e))){var s=window,a={top:s.scrollY,left:s.scrollX,right:s.scrollX+s.outerWidth,bottom:s.scrollY+s.outerHeight},l=bt(i),h={top:l.top,left:l.left,right:l.left+r.width,bottom:l.top+r.height},u={top:a.bottom-h.top,left:a.right-h.left,bottom:h.bottom-a.top,right:h.right-a.left};return u.top>0&&u.left>0&&u.right>0&&u.bottom>0}else{var n=e.getBoundingClientRect();return!(r.bottom<n.top)&&!(r.bottom>n.bottom)&&!(r.right>n.right)&&!(r.left<n.left)}},t.prototype.preRender=function(){},t.prototype.setEnableRtl=function(){this.reposition(),this.enableRtl?this.element.classList.add(at.RTL):this.element.classList.remove(at.RTL)},t.prototype.setContent=function(){if(!c(this.content))if(this.element.innerHTML="",typeof this.content=="string")this.element.textContent=this.content;else{var i=this.getRelateToElement(),e=this.content.props;(!i.classList.contains("e-dropdown-btn")||c(e))&&this.element.appendChild(this.content)}},t.prototype.orientationOnChange=function(){var i=this;setTimeout(function(){i.refreshPosition()},200)},t.prototype.refreshPosition=function(i,e){c(i)||this.checkFixedParent(i),this.reposition(),e||this.checkCollision()},t.prototype.reposition=function(){var i,e,r=this.getRelateToElement();if(typeof this.position.X=="number"&&typeof this.position.Y=="number")i={left:this.position.X,top:this.position.Y};else if(typeof this.position.X=="string"&&typeof this.position.Y=="number"||typeof this.position.X=="number"&&typeof this.position.Y=="string"){var n=void 0,s=this.element.style.display;this.element.style.display="block",this.element.classList.contains("e-dlg-modal")&&(n=this.element.parentElement.style.display,this.element.parentElement.style.display="block"),e=this.getAnchorPosition(r,this.element,this.position,this.offsetX,this.offsetY),typeof this.position.X=="string"?i={left:e.left,top:this.position.Y}:i={left:this.position.X,top:e.top},this.element.style.display=s,this.element.classList.contains("e-dlg-modal")&&(this.element.parentElement.style.display=n)}else if(r){var a=this.element.clientHeight,s=this.element.style.display;this.element.style.display="block",i=this.getAnchorPosition(r,this.element,this.position,this.offsetX,this.offsetY,a),this.element.style.display=s}else i={left:0,top:0};c(i)||(this.element.style.left=i.left+"px",this.element.style.top=i.top+"px")},t.prototype.checkGetBoundingClientRect=function(i){var e;try{return e=i.getBoundingClientRect(),e}catch{return null}},t.prototype.getAnchorPosition=function(i,e,r,n,s,a){a===void 0&&(a=0);var l=this.checkGetBoundingClientRect(e),h=this.checkGetBoundingClientRect(i);if(c(l)||c(h))return null;var u=i,p={left:0,top:0};switch(e.offsetParent&&e.offsetParent.tagName==="BODY"&&i.tagName==="BODY"?p=bt(i):(e.classList.contains("e-dlg-modal")&&u.tagName!=="BODY"&&(e=e.parentElement),p=nl(u,e)),r.X){default:case"left":break;case"center":e.classList.contains("e-dlg-modal")&&u.tagName==="BODY"&&this.targetType==="container"?p.left+=window.innerWidth/2-l.width/2:this.targetType==="container"?p.left+=h.width/2-l.width/2:p.left+=h.width/2;break;case"right":e.classList.contains("e-dlg-modal")&&u.tagName==="BODY"&&this.targetType==="container"?p.left+=window.innerWidth-l.width:this.targetType==="container"?p.left+=h.width-l.width:p.left+=h.width;break}switch(r.Y){default:case"top":break;case"center":e.classList.contains("e-dlg-modal")&&u.tagName==="BODY"&&this.targetType==="container"?p.top+=window.innerHeight/2-l.height/2:this.targetType==="container"?p.top+=h.height/2-l.height/2:p.top+=h.height/2;break;case"bottom":e.classList.contains("e-dlg-modal")&&u.tagName==="BODY"&&this.targetType==="container"?p.top+=window.innerHeight-l.height:this.targetType==="container"&&!e.classList.contains("e-dialog")?p.top+=h.height-l.height:this.targetType==="container"&&e.classList.contains("e-dialog")?p.top+=h.height-a:p.top+=h.height;break}return p.left+=n,p.top+=s,p},t.prototype.callFlip=function(i){var e=this.getRelateToElement();Qh(this.element,e,this.offsetX,this.offsetY,this.position.X,this.position.Y,this.viewPortElement,i,this.fixedParent)},t.prototype.callFit=function(i){if(to(this.element,this.viewPortElement).length!==0)if(c(this.viewPortElement)){var e=al(this.element,this.viewPortElement,i);i.X&&(this.element.style.left=e.left+"px"),i.Y&&(this.element.style.top=e.top+"px")}else{var r=this.checkGetBoundingClientRect(this.element),n=this.checkGetBoundingClientRect(this.viewPortElement);if(c(r)||c(n))return null;i&&i.Y===!0&&(n.top>r.top?this.element.style.top="0px":n.bottom<r.bottom&&(this.element.style.top=parseInt(this.element.style.top,10)-(r.bottom-n.bottom)+"px")),i&&i.X===!0&&(n.right<r.right?this.element.style.left=parseInt(this.element.style.left,10)-(r.right-n.right)+"px":n.left>r.left&&(this.element.style.left=parseInt(this.element.style.left,10)+(n.left-r.left)+"px"))}},t.prototype.checkCollision=function(){var i=this.collision.X,e=this.collision.Y;i==="none"&&e==="none"||(i==="flip"&&e==="flip"?this.callFlip({X:!0,Y:!0}):i==="fit"&&e==="fit"?this.callFit({X:!0,Y:!0}):(i==="flip"?this.callFlip({X:!0,Y:!1}):e==="flip"&&this.callFlip({Y:!0,X:!1}),i==="fit"?this.callFit({X:!0,Y:!1}):e==="fit"&&this.callFit({X:!1,Y:!0})))},t.prototype.show=function(i,e){var r=this,n=this.getRelateToElement();if(n.classList.contains("e-filemanager")&&(this.fmDialogContainer=this.element.getElementsByClassName("e-file-select-wrap")[0]),this.wireEvents(),!c(this.fmDialogContainer)&&Q.isIos&&(this.fmDialogContainer.style.display="block"),this.zIndex===1e3||!c(e)){var s=c(e)?this.element:e;this.zIndex=Sl(s),mt(this.element,{zIndex:this.zIndex})}i=!c(i)&&typeof i=="object"?i:this.showAnimation,(this.collision.X!=="none"||this.collision.Y!=="none")&&(F([this.element],at.CLOSE),T([this.element],at.OPEN),this.checkCollision(),F([this.element],at.OPEN),T([this.element],at.CLOSE)),c(i)?(F([this.element],at.CLOSE),T([this.element],at.OPEN),this.trigger("open")):(i.begin=function(){r.isDestroyed||(F([r.element],at.CLOSE),T([r.element],at.OPEN))},i.end=function(){r.isDestroyed||r.trigger("open")},new Ti(i).animate(this.element))},t.prototype.hide=function(i){var e=this;i=!c(i)&&typeof i=="object"?i:this.hideAnimation,c(i)?(F([this.element],at.OPEN),T([this.element],at.CLOSE),this.trigger("close")):(i.end=function(){e.isDestroyed||(F([e.element],at.OPEN),T([e.element],at.CLOSE),e.trigger("close"))},new Ti(i).animate(this.element)),this.unwireEvents()},t.prototype.getScrollableParent=function(i){return this.checkFixedParent(i),Jh(i,this.fixedParent)},t.prototype.checkFixedParent=function(i){for(var e=i.parentElement;e&&e.tagName!=="HTML";){var r=getComputedStyle(e);r.position==="fixed"&&!c(this.element)&&this.element.offsetParent&&this.element.offsetParent.tagName==="BODY"&&getComputedStyle(this.element.offsetParent).overflow!=="hidden"&&(this.element.style.top=window.scrollY>parseInt(this.element.style.top,10)?Pe(window.scrollY-parseInt(this.element.style.top,10)):Pe(parseInt(this.element.style.top,10)-window.scrollY),this.element.style.position="fixed",this.fixedParent=!0),e=e.parentElement,!c(this.element)&&c(this.element.offsetParent)&&r.position==="fixed"&&this.element.style.position==="fixed"&&(this.fixedParent=!0)}},$e([C("auto")],t.prototype,"height",void 0),$e([C("auto")],t.prototype,"width",void 0),$e([C(null)],t.prototype,"content",void 0),$e([C("container")],t.prototype,"targetType",void 0),$e([C(null)],t.prototype,"viewPortElement",void 0),$e([C({X:"none",Y:"none"})],t.prototype,"collision",void 0),$e([C("")],t.prototype,"relateTo",void 0),$e([Je({},Cl)],t.prototype,"position",void 0),$e([C(0)],t.prototype,"offsetX",void 0),$e([C(0)],t.prototype,"offsetY",void 0),$e([C(1e3)],t.prototype,"zIndex",void 0),$e([C(!1)],t.prototype,"enableRtl",void 0),$e([C("reposition")],t.prototype,"actionOnScroll",void 0),$e([C(null)],t.prototype,"showAnimation",void 0),$e([C(null)],t.prototype,"hideAnimation",void 0),$e([k()],t.prototype,"open",void 0),$e([k()],t.prototype,"close",void 0),$e([k()],t.prototype,"targetExitViewport",void 0),t=$e([si],t),t}(Kt);function Jh(o,t){for(var i=getComputedStyle(o),e=[],r=/(auto|scroll)/,n=o.parentElement;n&&n.tagName!=="HTML";){var s=getComputedStyle(n);!(i.position==="absolute"&&s.position==="static")&&r.test(s.overflow+s.overflowY+s.overflowX)&&e.push(n),n=n.parentElement}return t||e.push(document),e}function Sl(o){for(var t=o.parentElement,i=[];t&&t.tagName!=="BODY";){var e=document.defaultView.getComputedStyle(t,null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(t,null).getPropertyValue("position");e!=="auto"&&r!=="static"&&i.push(e),t=t.parentElement}for(var n=[],s=0;s<document.body.children.length;s++)if(!o.isEqualNode(document.body.children[s])){var e=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(document.body.children[s],null).getPropertyValue("position");e!=="auto"&&r!=="static"&&n.push(e)}n.push("999");var a=[];if(!c(o.parentElement)&&o.parentElement.tagName!=="BODY"){for(var l=[].slice.call(o.parentElement.children),s=0;s<l.length;s++)if(!o.isEqualNode(l[s])){var e=document.defaultView.getComputedStyle(l[s],null).getPropertyValue("z-index"),r=document.defaultView.getComputedStyle(l[s],null).getPropertyValue("position");e!=="auto"&&r!=="static"&&a.push(e)}}var h=i.concat(n,a),u=Math.max.apply(Math,h)+1;return u>2147483647?2147483647:u}var Gn=["north-west","north","north-east","west","east","south-west","south","south-east"],Mr="e-resize-handle",ki="e-focused-handle",$h="e-dlg-resizable",Ro=["e-restrict-left"],bl="e-resize-viewport",Zh=["north","west","east","south"],Be,Jt,lo=0,ho=0,xl=0,wl=0,br=0,xr=0,Ji,Ri,uo,di,Te,wr=null,Is=null,Es=null,Si,yn=!0,Ao=0,Un=!0,Li;function eu(o){wr=o.resizeBegin,Is=o.resizing,Es=o.resizeComplete,Be=To(o.element),Te=To(o.boundary);for(var t=o.direction.split(" "),i=0;i<t.length;i++)if(Zh.indexOf(t[i])>=0&&t[i])tu(t[i]);else if(t[i].trim()!==""){var e=Ve("div",{className:"e-icons "+Mr+" e-"+t[i]});Be.appendChild(e)}Ji=o.minHeight,uo=o.minWidth,di=o.maxWidth,Ri=o.maxHeight,o.proxy&&o.proxy.element&&o.proxy.element.classList.contains("e-dialog")?ko(o.proxy):ko()}function tu(o){co();var t=Ve("span",{attrs:{unselectable:"on",contenteditable:"false"}});t.setAttribute("class","e-dialog-border-resize e-"+o),o==="south"&&(t.style.height="2px",t.style.width="100%",t.style.bottom="0px",t.style.left="0px"),o==="north"&&(t.style.height="2px",t.style.width="100%",t.style.top="0px",t.style.left="0px"),o==="east"&&(t.style.height="100%",t.style.width="2px",t.style.right="0px",t.style.top="0px"),o==="west"&&(t.style.height="100%",t.style.width="2px",t.style.left="0px",t.style.top="0px"),Be.appendChild(t)}function To(o){var t;return c(o)||(typeof o=="string"?t=document.querySelector(o):t=o),t}function ko(o){c(o)&&(o=this);for(var t=Be.querySelectorAll("."+Mr),i=0;i<t.length;i++){Jt=t[i],b.add(Jt,"mousedown",Do,o);var e=Q.info.name==="msie"?"pointerdown":"touchstart";b.add(Jt,e,Lo,o)}var r=Be.querySelectorAll(".e-dialog-border-resize");if(!c(r))for(var i=0;i<r.length;i++){Jt=r[i],b.add(Jt,"mousedown",Do,o);var e=Q.info.name==="msie"?"pointerdown":"touchstart";b.add(Jt,e,Lo,o)}}function Il(o){return o.indexOf("mouse")>-1?"mouse":"touch"}function Do(o){if(o.preventDefault(),Be=o.target.parentElement,co(),br=o.pageX,xr=o.pageY,o.target.classList.add(ki),!(!c(wr)&&(Li=this,wr(o,Li)===!0))){this.targetEle&&Be&&Be.querySelector("."+$h)&&(Te=this.target==="body"?null:this.targetEle,di=this.targetEle.clientWidth,Ri=this.targetEle.clientHeight);var t=c(Te)?document:Te;b.add(t,"mousemove",gr,this),b.add(document,"mouseup",Cn,this);for(var i=0;i<Ro.length;i++)Be.classList.contains(Ro[i])?yn=!1:yn=!0}}function Cn(o){var t=Q.info.name==="msie"?"pointermove":"touchmove",i=Q.info.name==="msie"?"pointerup":"touchend",e=c(Te)?document:Te,r=Q.info.name==="msie"?"pointerdown":"touchstart";b.remove(e,"mousemove",gr),b.remove(e,t,gr),b.remove(e,r,gr),c(document.body.querySelector("."+ki))||document.body.querySelector("."+ki).classList.remove(ki),c(Es)||(Li=this,Es(o,Li)),b.remove(document,"mouseup",Cn),b.remove(document,i,Cn)}function co(){lo=parseFloat(getComputedStyle(Be,null).getPropertyValue("width").replace("px","")),ho=parseFloat(getComputedStyle(Be,null).getPropertyValue("height").replace("px","")),xl=Be.getBoundingClientRect().left,wl=Be.getBoundingClientRect().top}function Lo(o){Be=o.target.parentElement,co();var t=Be.classList.contains("e-dialog");(o.target.classList.contains(Mr)||o.target.classList.contains("e-dialog-border-resize"))&&t&&o.target.classList.add(ki);var i=o.touches?o.changedTouches[0]:o;if(br=i.pageX,xr=i.pageY,!(!c(wr)&&(Li=this,wr(o,Li)===!0))){var e=Q.info.name==="msie"?"pointermove":"touchmove",r=Q.info.name==="msie"?"pointerup":"touchend",n=c(Te)?document:Te;b.add(n,e,gr,this),b.add(document,r,Cn,this)}}function gr(o){if(o.target.classList.contains(Mr)&&o.target.classList.contains(ki)?Jt=o.target:c(document.body.querySelector("."+ki))||(Jt=document.body.querySelector("."+ki)),!c(Jt)){for(var t="",i=0;i<Gn.length;i++)Jt.classList.contains("e-"+Gn[i])&&(t=Gn[i]);switch(c(Is)||(Li=this,Is(o,Li)),t){case"south":_n(o);break;case"north":jn(o);break;case"west":Kn(o);break;case"east":Qn(o);break;case"south-east":_n(o),Qn(o);break;case"south-west":_n(o),Kn(o);break;case"north-east":jn(o),Qn(o);break;case"north-west":jn(o),Kn(o);break}}}function Fi(o){return o.getBoundingClientRect()}function _n(o){var t=document.documentElement.clientHeight,i=!1,e=o.touches?o.changedTouches[0]:o,r=e.pageY,n=Fi(Be),s;c(Te)||(s=Fi(Te)),c(Te)?c(Te)&&(t-r>=0||n.top<0)&&(i=!0):i=!0;var a=ho+(r-xr);a=a>Ji?a:Ji;var l=0;c(Te)||(l=s.top);var h=c(Te)?0:Te.offsetHeight-Te.clientHeight,u=n.top-l-h/2;if(u=u<0?0:u,n.top>0&&u+a>Ri){if(i=!1,Be.classList.contains(bl))return;Be.style.height=Ri-parseInt(u.toString(),10)+"px";return}var p=0;if(i){n.top<0&&t+(n.height+n.top)>0&&(p=n.top,a+p<=30&&(a=n.height-(n.height+n.top)+30)),a+n.top>=Ri&&(Be.style.height=n.height+(t-(n.height+n.top))+"px");var d=c(Te)?p:u;a>=Ji&&a+d<=Ri&&(Be.style.height=a+"px")}}function jn(o){var t=!1,i,e=Il(o.type)==="mouse"?o.pageY:o.touches[0].pageY,r=Fi(Be);c(Te)||(i=Fi(Te)),(!c(Te)&&r.top-i.top>0||c(Te)&&e>0)&&(t=!0);var n=ho-(e-xr);if(t&&n>=Ji&&n<=Ri){var s=0;c(Te)||(s=i.top);var a=wl-s+(e-xr);a=a>0?a:1,Be.style.height=n+"px",Be.style.top=a+"px"}}function Kn(o){var t=document.documentElement.clientWidth,i=!1,e;c(Te)||(e=Fi(Te));var r=Il(o.type)==="mouse"?o.pageX:o.touches[0].pageX,n=Fi(Be),s=c(Te)?0:Te.offsetWidth-Te.clientWidth,a=c(Te)?0:e.left,l=c(Te)?0:e.width;c(Si)&&(c(Te)?Si=t:(Si=n.left-a-s/2+n.width,Si=Si+(l-s-Si))),(!c(Te)&&Math.floor(n.left-e.left+n.width+(e.right-n.right))-s<=di||c(Te)&&r>=0)&&(i=!0);var h=lo-(r-br);if(yn&&(h=h>Si?Si:h),i&&h>=uo&&h<=di){var u=0;c(Te)||(u=e.left);var p=xl-u+(r-br);p=p>0?p:1,h!==Ao&&Un&&(Be.style.width=h+"px"),yn&&(Be.style.left=p+"px",p===1?Un=!1:Un=!0)}Ao=h}function Qn(o){var t=document.documentElement.clientWidth,i=!1,e;c(Te)||(e=Fi(Te));var r=o.touches?o.changedTouches[0]:o,n=r.pageX,s=Fi(Be);(!c(Te)&&(s.left-e.left+s.width<=di||s.right-e.left>=s.width)||c(Te)&&t-n>0)&&(i=!0);var a=lo+(n-br),l=0;if(c(Te)||(l=e.left),s.left-l+a>di){if(i=!1,Be.classList.contains(bl))return;Be.style.width=di-(s.left-l)+"px"}i&&a>=uo&&a<=di&&(Be.style.width=a+"px")}function iu(o){Ji=o}function ru(o){di=o}function nu(o){Ri=o}function Fo(){for(var o=Be.querySelectorAll("."+Mr),t=0;t<o.length;t++)Ce(o[t]);var i=Be.querySelectorAll(".e-dialog-border-resize");if(!c(i))for(var t=0;t<i.length;t++)Ce(i[t])}var po=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),we=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},su=function(o){po(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return we([C(!0)],t.prototype,"isFlat",void 0),we([C()],t.prototype,"buttonModel",void 0),we([C("Button")],t.prototype,"type",void 0),we([k()],t.prototype,"click",void 0),t}(_e),ou=function(o){po(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return we([C("Fade")],t.prototype,"effect",void 0),we([C(400)],t.prototype,"duration",void 0),we([C(0)],t.prototype,"delay",void 0),t}(_e),Nr="e-dialog",Yn="e-rtl",Xn="e-dlg-header-content",Mo="e-dlg-header",ar="e-footer-content",Pr="e-dlg-modal",au="e-dlg-content",Oo="e-icon-dlg-close",lu="e-dlg-overlay",Yt="e-dlg-target",hu="e-dlg-container",Gt="e-scroll-disabled",uu="e-primary",cu="e-icons",pu="e-popup",No="e-device",Br="e-dlg-fullscreen",Po="e-dlg-closeicon-btn",du="e-popup-close",Bo="e-popup-open",zo="Information",Ho="e-scroll-disabled",El="e-alert-dialog",Rl="e-confirm-dialog",Jn="e-dlg-resizable",zr="e-restrict-left",qo="e-resize-viewport",fu="e-dlg-ref-element",$n="user action",gu="close icon",vu="escape",mu="overlayClick",yu="e-draggable",fo=function(o){po(t,o);function t(i,e){var r=o.call(this,i,e)||this;return r.needsID=!0,r}return t.prototype.render=function(){this.initialize(),this.initRender(),this.wireEvents(),this.width==="100%"&&(this.element.style.width=""),this.minHeight!==""&&(this.element.style.minHeight=Pe(this.minHeight)),this.enableResize&&(this.setResize(),this.animationSettings.effect==="None"&&this.getMinHeight()),this.renderComplete()},t.prototype.initializeValue=function(){this.dlgClosedBy=$n},t.prototype.preRender=function(){var i=this;this.initializeValue(),this.headerContent=null,this.allowMaxHeight=!0,this.preventVisibility=!0,this.clonedEle=this.element.cloneNode(!0),this.closeIconClickEventHandler=function(n){i.dlgClosedBy=gu,i.hide(n)},this.dlgOverlayClickEventHandler=function(n){i.dlgClosedBy=mu,n.preventFocus=!1,i.trigger("overlayClick",n,function(s){s.preventFocus||i.focusContent(),i.dlgClosedBy=$n})};var e={close:"Close"};if(this.l10n=new yr("dialog",e,this.locale),this.checkPositionData(),c(this.target)){var r=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.target=document.body,this.isProtectedOnChange=r}},t.prototype.updatePersistData=function(){this.enablePersistence&&this.setProperties({width:parseFloat(this.element.style.width),height:parseFloat(this.element.style.height),position:{X:parseFloat(this.dragObj.element.style.left),Y:parseFloat(this.dragObj.element.style.top)}},!0)},t.prototype.isNumberValue=function(i){var e=/^[-+]?\d*\.?\d+$/.test(i);return e},t.prototype.checkPositionData=function(){if(!c(this.position)){if(!c(this.position.X)&&typeof this.position.X!="number"){var i=this.isNumberValue(this.position.X);if(i){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.X=parseFloat(this.position.X),this.isProtectedOnChange=e}}if(!c(this.position.Y)&&typeof this.position.Y!="number"){var i=this.isNumberValue(this.position.Y);if(i){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.position.Y=parseFloat(this.position.Y),this.isProtectedOnChange=e}}}},t.prototype.getEle=function(i,e){for(var r=void 0,n=0;n<i.length;n++)if(i[n].classList.contains(e)){r=i[n];break}return r},t.prototype.getMinHeight=function(){var i="0px",e="0px";c(this.element.querySelector("."+Xn))||(i=getComputedStyle(this.headerContent).height);var r=this.getEle(this.element.children,ar);c(r)||(e=getComputedStyle(r).height);var n=parseInt(i.slice(0,i.indexOf("p")),10),s=parseInt(e.slice(0,e.indexOf("p")),10);return iu(n+30+(isNaN(s)?0:s)),n+30+s},t.prototype.onResizeStart=function(i,e){return e.trigger("resizeStart",i),i.cancel},t.prototype.onResizing=function(i,e){e.trigger("resizing",i)},t.prototype.onResizeComplete=function(i,e){e.trigger("resizeStop",i),this.updatePersistData()},t.prototype.setResize=function(){if(this.enableResize){if(this.isBlazorServerRender()&&!c(this.element.querySelector(".e-icons.e-resize-handle")))return;this.element.classList.add(Jn);for(var i=getComputedStyle(this.element).minHeight,e=getComputedStyle(this.element).minWidth,r="",n=0;n<this.resizeHandles.length;n++)if(this.resizeHandles[n]==="All"){r="south north east west north-east north-west south-east south-west";break}else{var s="";switch(this.resizeHandles[n].toString()){case"SouthEast":s="south-east";break;case"SouthWest":s="south-west";break;case"NorthEast":s="north-east";break;case"NorthWest":s="north-west";break;default:s=this.resizeHandles[n].toString();break}r+=s.toLocaleLowerCase()+" "}this.enableRtl&&r.trim()==="south-east"?r="south-west":this.enableRtl&&r.trim()==="south-west"&&(r="south-east"),this.isModal&&this.enableRtl?this.element.classList.add(zr):this.isModal&&this.target===document.body&&this.element.classList.add(qo),eu({element:this.element,direction:r,minHeight:parseInt(i.slice(0,e.indexOf("p")),10),maxHeight:this.targetEle.clientHeight,minWidth:parseInt(e.slice(0,e.indexOf("p")),10),maxWidth:this.targetEle.clientWidth,boundary:this.target===document.body?null:this.targetEle,resizeBegin:this.onResizeStart.bind(this),resizeComplete:this.onResizeComplete.bind(this),resizing:this.onResizing.bind(this),proxy:this}),this.wireWindowResizeEvent()}else Fo(),this.unWireWindowResizeEvent(),this.isModal?this.element.classList.remove(zr):this.element.classList.remove(qo),this.element.classList.remove(Jn)},t.prototype.getFocusElement=function(i){var e='input,select,textarea,button:enabled,a,[contenteditable="true"],[tabindex]',r=i.querySelectorAll(e);return{element:r[r.length-1]}},t.prototype.keyDown=function(i){var e=this;if(i.keyCode===9&&this.isModal){var r=void 0;c(this.btnObj)||(r=this.btnObj[this.btnObj.length-1]),c(this.btnObj)&&!c(this.ftrTemplateContent)&&(r=this.getFocusElement(this.ftrTemplateContent)),c(this.btnObj)&&c(this.ftrTemplateContent)&&!c(this.contentEle)&&(r=this.getFocusElement(this.contentEle)),!c(r)&&document.activeElement===r.element&&!i.shiftKey&&(i.preventDefault(),this.focusableElements(this.element).focus()),document.activeElement===this.focusableElements(this.element)&&i.shiftKey&&(i.preventDefault(),c(r)||r.element.focus())}var n=document.activeElement,s=["input","textarea"].indexOf(n.tagName.toLowerCase())>-1,a=!1;if(s||(a=n.hasAttribute("contenteditable")&&n.getAttribute("contenteditable")==="true"),i.keyCode===27&&this.closeOnEscape){this.dlgClosedBy=vu;var l=document.querySelector(".e-popup-open:not(.e-dialog)");!c(l)&&!l.classList.contains("e-toolbar-pop")||this.hide(i)}if(i.keyCode===13&&!i.ctrlKey&&n.tagName.toLowerCase()!=="textarea"&&s&&!c(this.primaryButtonEle)||i.keyCode===13&&i.ctrlKey&&(n.tagName.toLowerCase()==="textarea"||a)&&!c(this.primaryButtonEle)){var h,u=this.buttons.some(function(p,d){h=d;var f=p.buttonModel;return!c(f)&&f.isPrimary===!0});u&&typeof this.buttons[h].click=="function"&&setTimeout(function(){e.buttons[h].click.call(e,i)})}},t.prototype.initialize=function(){c(this.target)||(this.targetEle=typeof this.target=="string"?document.querySelector(this.target):this.target),this.isBlazorServerRender()||T([this.element],Nr),Q.isDevice&&T([this.element],No),this.isBlazorServerRender()||this.setCSSClass(),this.setMaxHeight()},t.prototype.initRender=function(){var i=this;if(this.initialRender=!0,this.isBlazorServerRender()||Ie(this.element,{role:"dialog"}),this.zIndex===1e3?(this.setzIndex(this.element,!1),this.calculatezIndex=!0):this.calculatezIndex=!1,this.isBlazorServerRender()&&c(this.headerContent)&&(this.headerContent=this.element.getElementsByClassName("e-dlg-header-content")[0]),this.isBlazorServerRender()&&c(this.contentEle)&&(this.contentEle=this.element.querySelector("#"+this.element.id+"_dialog-content")),this.isBlazorServerRender()||(this.setTargetContent(),this.header!==""&&!c(this.header)&&this.setHeader(),this.renderCloseIcon(),this.setContent(),this.footerTemplate!==""&&!c(this.footerTemplate)?this.setFooterTemplate():c(this.buttons[0].buttonModel)||this.setButton()),this.isBlazorServerRender()&&!c(this.buttons[0].buttonModel)&&this.footerTemplate===""&&this.setButton(),this.allowDragging&&!c(this.headerContent)&&this.setAllowDragging(),this.isBlazorServerRender()||(Ie(this.element,{"aria-modal":this.isModal?"true":"false"}),this.isModal&&this.setIsModal()),this.isBlazorServerRender()&&c(this.dlgContainer)){this.dlgContainer=this.element.parentElement;for(var e=0,r=this.dlgContainer.children;e<r.length;e++)r[e].classList.contains("e-dlg-overlay")&&(this.dlgOverlay=r[e])}if(this.element.classList.contains(El)!==!0&&this.element.classList.contains(Rl)!==!0&&!c(this.element.parentElement)){var n=this.isModal?this.dlgContainer.parentElement:this.element.parentElement;this.refElement=this.createElement("div",{className:fu}),n.insertBefore(this.refElement,this.isModal?this.dlgContainer:this.element)}if(c(this.targetEle)||(this.isModal?this.targetEle.appendChild(this.dlgContainer):this.targetEle.appendChild(this.element)),this.popupObj=new ao(this.element,{height:this.height,width:this.width,zIndex:this.zIndex,relateTo:this.target,actionOnScroll:"none",enableRtl:this.enableRtl,open:function(l){var h={container:i.isModal?i.dlgContainer:i.element,element:i.element,target:i.target,preventFocus:!1};i.enableResize&&i.resetResizeIcon(),i.trigger("open",h,function(u){u.preventFocus||i.focusContent()})},close:function(l){i.isModal&&T([i.dlgOverlay],"e-fade"),i.unBindEvent(i.element),i.isModal&&(i.dlgContainer.style.display="none"),i.trigger("close",i.closeArgs);var h=document.activeElement;!c(h)&&!c(h.blur)&&h.blur(),!c(i.storeActiveElement)&&!c(i.storeActiveElement.focus)&&i.storeActiveElement.focus()}}),this.positionChange(),this.setEnableRTL(),this.isBlazorServerRender()||(T([this.element],du),this.isModal&&this.setOverlayZindex()),this.visible){if(this.show(),this.isModal){var s=this.getTargetContainer(this.target);if(s instanceof Element){var a=window.getComputedStyle(s);a.getPropertyValue("direction")==="rtl"&&this.setPopupPosition()}}}else this.isModal&&(this.dlgOverlay.style.display="none");this.initialRender=!1},t.prototype.getTargetContainer=function(i){var e=null;if(typeof i=="string")if(i.startsWith("#"))e=document.getElementById(i.substring(1));else if(i.startsWith(".")){var r=document.getElementsByClassName(i.substring(1));e=r.length>0?r[0]:null}else!(i instanceof HTMLElement)&&i!==document.body&&(e=document.querySelector(i));else i instanceof HTMLElement&&(e=i);return e},t.prototype.resetResizeIcon=function(){var i=this.getMinHeight();if(this.targetEle.offsetHeight<i){var e=this.enableRtl?"e-south-west":"e-south-east",r=this.element.querySelector("."+e);c(r)||(r.style.bottom="-"+i.toString()+"px")}},t.prototype.setOverlayZindex=function(i){var e;c(i)?e=parseInt(this.element.style.zIndex,10)?parseInt(this.element.style.zIndex,10):this.zIndex:e=i,this.dlgOverlay.style.zIndex=(e-1).toString(),this.dlgContainer.style.zIndex=e.toString()},t.prototype.positionChange=function(){this.isModal?!isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():!isNaN(parseFloat(this.position.X))&&isNaN(parseFloat(this.position.Y))||isNaN(parseFloat(this.position.X))&&!isNaN(parseFloat(this.position.Y))?this.setPopupPosition():(this.element.style.top="0px",this.element.style.left="0px",this.dlgContainer.classList.add("e-dlg-"+this.position.X+"-"+this.position.Y)):this.setPopupPosition()},t.prototype.setPopupPosition=function(){this.popupObj.setProperties({position:{X:this.position.X,Y:this.position.Y}})},t.prototype.setAllowDragging=function(){var i=this,e="."+Xn;this.element.classList.contains(yu)||(this.dragObj=new $s(this.element,{clone:!1,isDragScroll:!0,abort:".e-dlg-closeicon-btn",handle:e,dragStart:function(r){i.trigger("dragStart",r,function(n){})},dragStop:function(r){if(i.isModal){c(i.position)||i.dlgContainer.classList.remove("e-dlg-"+i.position.X+"-"+i.position.Y);var n=i.getTargetContainer(i.target);if(n instanceof Element){var s=window.getComputedStyle(n);s.getPropertyValue("direction")==="rtl"?i.element.style.position="absolute":i.element.style.position="relative"}else i.element.style.position="relative"}i.trigger("dragStop",r),i.element.classList.remove(zr),i.updatePersistData()},drag:function(r){i.trigger("drag",r)}}),c(this.targetEle)||(this.dragObj.dragArea=this.targetEle))},t.prototype.setButton=function(){if(!this.isBlazorServerRender()){this.buttonContent=[],this.btnObj=[];for(var i=0;i<this.buttons.length;i++){var e=c(this.buttons[i].type)?"button":this.buttons[i].type.toLowerCase(),r=this.createElement("button",{className:this.cssClass,attrs:{type:e}});this.buttonContent.push(r.outerHTML)}this.setFooterTemplate()}for(var n,i=0,s=this.element.children;i<s.length;i++)s[i].classList.contains(ar)&&(n=s[i].querySelectorAll("button"));for(var i=0;i<this.buttons.length;i++)this.isBlazorServerRender()||(this.btnObj[i]=new Ei(this.buttons[i].buttonModel)),this.isBlazorServerRender()&&(this.ftrTemplateContent=this.element.querySelector("."+ar)),!c(this.ftrTemplateContent)&&n.length>0&&(typeof this.buttons[i].click=="function"&&b.add(n[i],"click",this.buttons[i].click,this),typeof this.buttons[i].click=="object"&&b.add(n[i],"click",this.buttonClickHandler.bind(this,i),this)),!this.isBlazorServerRender()&&!c(this.ftrTemplateContent)&&(this.btnObj[i].appendTo(this.ftrTemplateContent.children[i]),this.buttons[i].isFlat&&this.btnObj[i].element.classList.add("e-flat"),this.primaryButtonEle=this.element.getElementsByClassName("e-primary")[0])},t.prototype.buttonClickHandler=function(i){this.trigger("buttons["+i+"].click",{})},t.prototype.setContent=function(){this.contentEle=this.createElement("div",{className:au,id:this.element.id+"_dialog-content"}),this.headerEle?Ie(this.element,{"aria-describedby":this.element.id+"_title "+this.element.id+"_dialog-content"}):Ie(this.element,{"aria-describedby":this.element.id+"_dialog-content"}),this.innerContentElement?this.contentEle.appendChild(this.innerContentElement):(!c(this.content)&&this.content!==""||!this.initialRender)&&(typeof this.content=="string"&&!Bn()?this.setTemplate(this.content,this.contentEle,"content"):this.content instanceof HTMLElement?this.contentEle.appendChild(this.content):this.setTemplate(this.content,this.contentEle,"content")),c(this.headerContent)?this.element.insertBefore(this.contentEle,this.element.children[0]):this.element.insertBefore(this.contentEle,this.element.children[1]),this.height==="auto"&&(!this.isBlazorServerRender()&&Q.isIE&&this.element.style.width===""&&!c(this.width)&&(this.element.style.width=Pe(this.width)),this.setMaxHeight())},t.prototype.setTemplate=function(i,e,r){var n,s;e.classList.contains(Mo)?s=this.element.id+"header":e.classList.contains(ar)?s=this.element.id+"footerTemplate":s=this.element.id+"content",c(i.outerHTML)?(typeof i=="string"||typeof i!="string"||Bn())&&(typeof i=="string"&&(i=this.sanitizeHelper(i)),this.isVue||typeof i!="string"?n=Ue(i):e.innerHTML=i):e.appendChild(i);var a=[];if(!c(n)){for(var l=!0,h=0,u=n({},this,r,s,l);h<u.length;h++){var p=u[h];a.push(p)}Oe([].slice.call(a),e)}},t.prototype.sanitizeHelper=function(i){if(this.enableHtmlSanitizer){var e=ti.beforeSanitize(),r={cancel:!1,helper:null};_(e,e,r),this.trigger("beforeSanitizeHtml",e),e.cancel&&!c(e.helper)?i=e.helper(i):e.cancel||(i=ti.serializeValue(e,i))}return i},t.prototype.setMaxHeight=function(){if(this.allowMaxHeight){var i=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=!c(this.target)&&this.targetEle.offsetHeight<window.innerHeight?this.targetEle.offsetHeight-20+"px":window.innerHeight-20+"px",this.element.style.display=i,Q.isIE&&this.height==="auto"&&!c(this.contentEle)&&this.element.offsetHeight<this.contentEle.offsetHeight&&(this.element.style.height="inherit")}},t.prototype.setEnableRTL=function(){this.isBlazorServerRender()||(this.enableRtl?T([this.element],Yn):F([this.element],Yn)),c(this.element.querySelector(".e-resize-handle"))||(Fo(),this.setResize())},t.prototype.setTargetContent=function(){var i=this;if(c(this.content)||this.content===""){var e=this.element.innerHTML.replace(/\s|<(\/?|\/?)(!--!--)>/g,"")!=="";(this.element.children.length>0||e)&&(this.innerContentElement=document.createDocumentFragment(),[].slice.call(this.element.childNodes).forEach(function(r){r.nodeType!==8&&i.innerContentElement.appendChild(r)}))}},t.prototype.setHeader=function(){this.headerEle?this.headerEle.innerHTML="":this.headerEle=this.createElement("div",{id:this.element.id+"_title",className:Mo}),this.createHeaderContent(),this.headerContent.appendChild(this.headerEle),this.setTemplate(this.header,this.headerEle,"header"),Ie(this.element,{"aria-describedby":this.element.id+"_title"}),Ie(this.element,{"aria-label":"dialog"}),this.element.insertBefore(this.headerContent,this.element.children[0]),this.allowDragging&&!c(this.headerContent)&&this.setAllowDragging()},t.prototype.setFooterTemplate=function(){this.ftrTemplateContent?this.ftrTemplateContent.innerHTML="":this.ftrTemplateContent=this.createElement("div",{className:ar}),this.footerTemplate!==""&&!c(this.footerTemplate)?this.setTemplate(this.footerTemplate,this.ftrTemplateContent,"footerTemplate"):this.ftrTemplateContent.innerHTML=this.buttonContent.join(""),this.element.appendChild(this.ftrTemplateContent)},t.prototype.createHeaderContent=function(){c(this.headerContent)&&(this.headerContent=this.createElement("div",{id:this.element.id+"_dialog-header",className:Xn}))},t.prototype.renderCloseIcon=function(){this.showCloseIcon&&(this.closeIcon=this.createElement("button",{className:Po,attrs:{type:"button"}}),this.closeIconBtnObj=new Ei({cssClass:"e-flat",iconCss:Oo+" "+cu}),this.closeIconTitle(),c(this.headerContent)?(this.createHeaderContent(),zt([this.closeIcon],this.headerContent),this.element.insertBefore(this.headerContent,this.element.children[0])):zt([this.closeIcon],this.headerContent),this.closeIconBtnObj.appendTo(this.closeIcon))},t.prototype.closeIconTitle=function(){this.l10n.setLocale(this.locale);var i=this.l10n.getConstant("close");this.closeIcon.setAttribute("title",i),this.closeIcon.setAttribute("aria-label",i)},t.prototype.setCSSClass=function(i){i&&(F([this.element],i.split(" ")),this.isModal&&!c(this.dlgContainer)&&F([this.dlgContainer],i.split(" "))),this.cssClass&&(T([this.element],this.cssClass.split(" ")),this.isModal&&!c(this.dlgContainer)&&T([this.dlgContainer],this.cssClass.split(" ")))},t.prototype.setIsModal=function(){this.dlgContainer=this.createElement("div",{className:hu}),this.setCSSClass(),this.element.classList.remove(Bo),this.element.parentNode.insertBefore(this.dlgContainer,this.element),this.dlgContainer.appendChild(this.element),T([this.element],Pr),this.dlgOverlay=this.createElement("div",{className:lu}),this.dlgOverlay.style.zIndex=(this.zIndex-1).toString(),this.dlgContainer.appendChild(this.dlgOverlay)},t.prototype.getValidFocusNode=function(i){for(var e,r=0;r<i.length;r++){if(e=i[r],(e.clientHeight>0||e.tagName.toLowerCase()==="a"&&e.hasAttribute("href"))&&e.tabIndex>-1&&!e.disabled&&!this.disableElement(e,'[disabled],[aria-disabled="true"],[type="hidden"]'))return e;e=null}return e},t.prototype.focusableElements=function(i){if(!c(i)){var e='input,select,textarea,button,a,[contenteditable="true"],[tabindex]',r=i.querySelectorAll(e);return this.getValidFocusNode(r)}return null},t.prototype.getAutoFocusNode=function(i){var e=i.querySelector("."+Po),r="[autofocus]",n=i.querySelectorAll(r),s=this.getValidFocusNode(n);if(!c(s))e=s;else if(s=this.focusableElements(this.contentEle),c(s)){if(!c(this.primaryButtonEle))return this.element.querySelector("."+uu)}else return e=s;return e},t.prototype.disableElement=function(i,e){var r=i?i.matches||i.webkitMatchesSelector||i.msGetRegionContent:null;if(r){for(;i;i=i.parentNode)if(i instanceof Element&&r.call(i,e))return i}return null},t.prototype.focusContent=function(){var i=this.getAutoFocusNode(this.element),e=c(i)?this.element:i,r=Q.userAgent;(r.indexOf("MSIE ")>0||r.indexOf("Trident/")>0)&&this.element.focus(),e.focus(),this.unBindEvent(this.element),this.bindEvent(this.element)},t.prototype.bindEvent=function(i){b.add(i,"keydown",this.keyDown,this)},t.prototype.unBindEvent=function(i){b.remove(i,"keydown",this.keyDown)},t.prototype.updateSanitizeContent=function(){this.isBlazorServerRender()||(this.contentEle.innerHTML=this.sanitizeHelper(this.content))},t.prototype.isBlazorServerRender=function(){return Bn()},t.prototype.getModuleName=function(){return"dialog"},t.prototype.onPropertyChanged=function(i,e){if(this.element.classList.contains(Nr))for(var r=0,n=Object.keys(i);r<n.length;r++){var s=n[r];switch(s){case"content":!c(this.content)&&this.content!==""?(this.isBlazorServerRender()&&(this.contentEle=this.element.querySelector(".e-dlg-content")),!c(this.contentEle)&&this.contentEle.getAttribute("role")!=="dialog"?(this.isBlazorServerRender()||(this.contentEle.innerHTML=""),typeof this.content=="function"?(this.clearTemplate(["content"]),Ce(this.contentEle),this.contentEle=null,this.setContent()):typeof this.content=="string"?this.isBlazorServerRender()&&this.contentEle.innerText===""?this.contentEle.insertAdjacentHTML("beforeend",this.sanitizeHelper(this.content)):this.updateSanitizeContent():this.contentEle.appendChild(this.content),this.setMaxHeight()):(!this.isBlazorServerRender()||c(this.element.querySelector(".e-dlg-content")))&&this.setContent()):c(this.contentEle)||(Ce(this.contentEle),this.contentEle=null);break;case"header":this.header===""||c(this.header)?this.headerEle&&(Ce(this.headerEle),this.headerEle=null):(!this.isBlazorServerRender()||c(this.element.querySelector(".e-dlg-header-content")))&&this.setHeader();break;case"footerTemplate":if(this.footerTemplate===""||c(this.footerTemplate)){if(!this.ftrTemplateContent)return;Ce(this.ftrTemplateContent),this.ftrTemplateContent=null,this.buttons=[{}]}else(!this.isBlazorServerRender()||c(this.element.querySelector(".e-footer-content")))&&this.setFooterTemplate(),this.buttons=[{}];break;case"showCloseIcon":this.element.getElementsByClassName(Oo).length>0?!this.showCloseIcon&&(this.header===""||c(this.header))?(Ce(this.headerContent),this.headerContent=null):this.showCloseIcon?this.isBlazorServerRender()&&this.wireEvents():Ce(this.closeIcon):(this.isBlazorServerRender()||this.renderCloseIcon(),this.wireEvents());break;case"locale":this.showCloseIcon&&this.closeIconTitle();break;case"visible":this.visible?this.show():this.hide();break;case"isModal":this.updateIsModal();break;case"height":mt(this.element,{height:Pe(i.height)}),this.updatePersistData();break;case"width":mt(this.element,{width:Pe(i.width)}),this.updatePersistData();break;case"zIndex":this.popupObj.zIndex=this.zIndex,this.isModal&&this.setOverlayZindex(this.zIndex),this.element.style.zIndex!==this.zIndex.toString()&&(this.calculatezIndex=!1);break;case"cssClass":this.setCSSClass(e.cssClass);break;case"buttons":{var a=this.buttons.length;!c(this.ftrTemplateContent)&&!this.isBlazorServerRender()&&(Ce(this.ftrTemplateContent),this.ftrTemplateContent=null);for(var l=0;l<a;l++)c(this.buttons[l].buttonModel)||(this.footerTemplate="",this.setButton());break}case"allowDragging":this.allowDragging&&!c(this.headerContent)?this.setAllowDragging():this.dragObj.destroy();break;case"target":this.setTarget(i.target);break;case"position":if(this.checkPositionData(),this.isModal){var h=!c(e.position)&&!c(e.position.X)?e.position.X:this.position.X,u=!c(e.position)&&!c(e.position.Y)?e.position.Y:this.position.Y;this.dlgContainer.classList.contains("e-dlg-"+h+"-"+u)&&this.dlgContainer.classList.remove("e-dlg-"+h+"-"+u)}this.positionChange(),this.updatePersistData();break;case"enableRtl":this.setEnableRTL();break;case"enableResize":this.setResize();break;case"minHeight":this.minHeight!==""&&(this.element.style.minHeight=Pe(this.minHeight));break}}},t.prototype.setTarget=function(i){this.popupObj.relateTo=i,this.target=i,this.targetEle=typeof this.target=="string"?document.querySelector(this.target):this.target,this.dragObj&&(this.dragObj.dragArea=this.targetEle),this.setMaxHeight(),this.isModal&&this.updateIsModal(),this.enableResize&&this.setResize()},t.prototype.updateIsModal=function(){if(this.element.setAttribute("aria-modal",this.isModal?"true":"false"),this.isModal)c(this.dlgOverlay)&&(this.setIsModal(),this.element.style.top="0px",this.element.style.left="0px",c(this.targetEle)||this.targetEle.appendChild(this.dlgContainer));else{for(F([this.element],Pr),F([document.body],[Yt,Gt]),Ce(this.dlgOverlay);this.dlgContainer.firstChild;)this.dlgContainer.parentElement.insertBefore(this.dlgContainer.firstChild,this.dlgContainer);this.dlgContainer.parentElement.removeChild(this.dlgContainer)}this.visible&&this.show(),this.positionChange(),this.isModal&&this.dlgOverlay&&b.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.setzIndex=function(i,e){var r=this.isProtectedOnChange;this.isProtectedOnChange=!0;var n=Sl(i);this.zIndex=n>this.zIndex?n:this.zIndex,this.isProtectedOnChange=r,e&&(this.popupObj.zIndex=this.zIndex)},t.prototype.windowResizeHandler=function(){ru(this.targetEle.clientWidth),nu(this.targetEle.clientHeight),this.setMaxHeight()},t.prototype.getPersistData=function(){return this.addOnPersist(["width","height","position"])},t.prototype.destroy=function(){if(!this.isDestroyed){var i=[Yn,Pr,Jn,zr,Br,No],e=["role","aria-modal","aria-labelledby","aria-describedby","aria-grabbed","tabindex","style"];if(F([this.targetEle],[Yt,Gt]),!c(this.element)&&this.element.classList.contains(Br)&&F([document.body],[Yt,Gt]),this.isModal&&F([c(this.targetEle)?document.body:this.targetEle],Gt),this.unWireEvents(),!c(this.btnObj))for(var r=0;r<this.btnObj.length;r++)this.btnObj[r].destroy();if(c(this.closeIconBtnObj)||this.closeIconBtnObj.destroy(),c(this.dragObj)||this.dragObj.destroy(),!c(this.popupObj.element)&&this.popupObj.element.classList.contains(pu)&&this.popupObj.destroy(),F([this.element],i),!c(this.cssClass)&&this.cssClass!==""&&F([this.element],this.cssClass.split(" ")),!c(this.refElement)&&!c(this.refElement.parentElement)&&(this.refElement.parentElement.insertBefore(this.isModal?this.dlgContainer:this.element,this.refElement),Ce(this.refElement),this.refElement=void 0),this.isModal&&!this.isBlazorServerRender()&&(Ce(this.dlgOverlay),this.dlgContainer.parentNode.insertBefore(this.element,this.dlgContainer),Ce(this.dlgContainer)),this.isBlazorServerRender()||(this.element.innerHTML=this.clonedEle.innerHTML),this.isBlazorServerRender()&&!c(this.element.children))for(var r=0;r<=this.element.children.length;r++)r=r-r,Ce(this.element.children[r]);for(var r=0;r<e.length;r++)this.element.removeAttribute(e[r]);this.ftrTemplateContent=null,this.headerContent=null,this.contentEle=null,this.isBlazorServerRender()?this.isDestroyed=!0:o.prototype.destroy.call(this),this.isReact&&this.clearTemplate()}},t.prototype.wireWindowResizeEvent=function(){this.boundWindowResizeHandler=this.windowResizeHandler.bind(this),window.addEventListener("resize",this.boundWindowResizeHandler)},t.prototype.unWireWindowResizeEvent=function(){window.removeEventListener("resize",this.boundWindowResizeHandler),this.boundWindowResizeHandler=null},t.prototype.wireEvents=function(){this.isBlazorServerRender()&&this.showCloseIcon&&(this.closeIcon=this.element.getElementsByClassName("e-dlg-closeicon-btn")[0]),this.showCloseIcon&&b.add(this.closeIcon,"click",this.closeIconClickEventHandler,this),this.isModal&&this.dlgOverlay&&b.add(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler,this)},t.prototype.unWireEvents=function(){if(this.showCloseIcon&&b.remove(this.closeIcon,"click",this.closeIconClickEventHandler),this.isModal&&b.remove(this.dlgOverlay,"click",this.dlgOverlayClickEventHandler),this.buttons.length>0&&!c(this.buttons[0].buttonModel)&&this.footerTemplate==="")for(var i=0;i<this.buttons.length;i++)typeof this.buttons[i].click=="function"&&b.remove(this.ftrTemplateContent.children[i],"click",this.buttons[i].click)},t.prototype.refreshPosition=function(){this.popupObj.refreshPosition(),this.element.classList.contains(Pr)&&this.positionChange()},t.prototype.getDimension=function(){var i=this.element.offsetWidth,e=this.element.offsetHeight;return{width:i,height:e}},t.prototype.show=function(i){var e=this;if(this.element.classList.contains(Nr)){if(!this.element.classList.contains(Bo)||!c(i)){c(i)||this.fullScreen(i);var r={cancel:!1,element:this.element,container:this.isModal?this.dlgContainer:this.element,target:this.target,maxHeight:this.element.style.maxHeight};this.trigger("beforeOpen",r,function(n){if(!n.cancel){if(e.element.style.maxHeight!==r.maxHeight&&(e.allowMaxHeight=!1,e.element.style.maxHeight=r.maxHeight),e.enableResize&&e.boundWindowResizeHandler==null&&!e.initialRender&&e.wireWindowResizeEvent(),e.storeActiveElement=document.activeElement,e.element.tabIndex=-1,e.isModal&&!c(e.dlgOverlay))if(e.dlgOverlay.style.display="block",e.dlgContainer.style.display="flex",F([e.dlgOverlay],"e-fade"),c(e.targetEle))T([document.body],[Yt,Gt]);else{e.targetEle===document.body?e.dlgContainer.style.position="fixed":e.dlgContainer.style.position="absolute",e.dlgOverlay.style.position="absolute";var s=e.getTargetContainer(e.target);if(s instanceof Element){var a=window.getComputedStyle(s);a.getPropertyValue("direction")==="rtl"?e.element.style.position="absolute":e.element.style.position="relative"}else e.element.style.position="relative";T([e.targetEle],[Yt,Gt])}var l={name:e.animationSettings.effect==="None"&&wi==="Enable"?"ZoomIn":e.animationSettings.effect+"In",duration:e.animationSettings.duration,delay:e.animationSettings.delay},h=e.isModal?e.element.parentElement:e.element;e.calculatezIndex&&(e.setzIndex(h,!0),mt(e.element,{zIndex:e.zIndex}),e.isModal&&e.setOverlayZindex(e.zIndex)),e.animationSettings.effect==="None"&&wi==="Enable"?e.popupObj.show(l):e.animationSettings.effect==="None"?e.popupObj.show():e.popupObj.show(l),e.dialogOpen=!0;var u=e.isProtectedOnChange;e.isProtectedOnChange=!0,e.visible=!0,e.preventVisibility=!0,e.isProtectedOnChange=u}})}this.isReact&&this.renderReactTemplates()}},t.prototype.hide=function(i){var e=this;if(this.element.classList.contains(Nr)&&this.preventVisibility){var r={cancel:!1,isInteracted:!!i,element:this.element,target:this.target,container:this.isModal?this.dlgContainer:this.element,event:i,closedBy:this.dlgClosedBy};this.closeArgs=r,this.trigger("beforeClose",r,function(n){if(!n.cancel){e.isModal&&(c(e.targetEle)||F([e.targetEle],[Yt,Gt])),e.enableResize&&e.unWireWindowResizeEvent(),document.body.classList.contains(Yt)&&document.body.classList.contains(Gt)&&F([document.body],[Yt,Gt]);var s={name:e.animationSettings.effect==="None"&&wi==="Enable"?"ZoomOut":e.animationSettings.effect+"Out",duration:e.animationSettings.duration,delay:e.animationSettings.delay};e.animationSettings.effect==="None"&&wi==="Enable"?e.popupObj.hide(s):e.animationSettings.effect==="None"?e.popupObj.hide():e.popupObj.hide(s),e.dialogOpen=!1;var a=e.isProtectedOnChange;e.isProtectedOnChange=!0,e.visible=!1,e.preventVisibility=!1,e.isProtectedOnChange=a}e.dlgClosedBy=$n})}},t.prototype.fullScreen=function(i){if(this.element.offsetTop,this.element.offsetLeft,i){this.isModal||(this.element.style.top=document.scrollingElement.scrollTop+"px"),T([this.element],Br);var e=this.element.style.display;this.element.style.display="none",this.element.style.maxHeight=c(this.target)?window.innerHeight+"px":this.targetEle.offsetHeight+"px",this.element.style.display=e,T([document.body],[Yt,Gt]),this.allowDragging&&!c(this.dragObj)&&this.dragObj.destroy()}else F([this.element],Br),F([document.body],[Yt,Gt]),this.allowDragging&&!c(this.headerContent)&&this.setAllowDragging();return i},t.prototype.getButtons=function(i){return c(i)?this.btnObj:this.btnObj[i]},we([C("")],t.prototype,"content",void 0),we([C(!0)],t.prototype,"enableHtmlSanitizer",void 0),we([C(!1)],t.prototype,"enablePersistence",void 0),we([C(!1)],t.prototype,"showCloseIcon",void 0),we([C(!1)],t.prototype,"isModal",void 0),we([C("")],t.prototype,"header",void 0),we([C(!0)],t.prototype,"visible",void 0),we([C(!1)],t.prototype,"enableResize",void 0),we([C(["South-East"])],t.prototype,"resizeHandles",void 0),we([C("auto")],t.prototype,"height",void 0),we([C("")],t.prototype,"minHeight",void 0),we([C("100%")],t.prototype,"width",void 0),we([C("")],t.prototype,"cssClass",void 0),we([C(1e3)],t.prototype,"zIndex",void 0),we([C(null)],t.prototype,"target",void 0),we([C("")],t.prototype,"footerTemplate",void 0),we([C(!1)],t.prototype,"allowDragging",void 0),we([Dr([{}],su)],t.prototype,"buttons",void 0),we([C(!0)],t.prototype,"closeOnEscape",void 0),we([Je({},ou)],t.prototype,"animationSettings",void 0),we([Je({X:"center",Y:"center"},Cl)],t.prototype,"position",void 0),we([k()],t.prototype,"created",void 0),we([k()],t.prototype,"open",void 0),we([k()],t.prototype,"beforeSanitizeHtml",void 0),we([k()],t.prototype,"beforeOpen",void 0),we([k()],t.prototype,"close",void 0),we([k()],t.prototype,"beforeClose",void 0),we([k()],t.prototype,"dragStart",void 0),we([k()],t.prototype,"dragStop",void 0),we([k()],t.prototype,"drag",void 0),we([k()],t.prototype,"overlayClick",void 0),we([k()],t.prototype,"resizeStart",void 0),we([k()],t.prototype,"resizing",void 0),we([k()],t.prototype,"resizeStop",void 0),we([k()],t.prototype,"destroyed",void 0),t=we([si],t),t}(Kt),Vo;(function(o){function t(u){var p=Ve("div",{className:El});document.body.appendChild(p);var d,f=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return typeof u=="string"?d=e({content:u,position:{X:"center",Y:"top"},isModal:!0,header:zo,buttons:f},p):d=e(r(u),p),d.close=function(){u&&u.close&&u.close.apply(d),d.destroy(),d.element.classList.contains("e-dlg-modal")?(d.element.parentElement.remove(),d.target.classList.remove(Ho)):d.element.remove()},d}o.alert=t;function i(u){var p=Ve("div",{className:Rl});document.body.appendChild(p);var d,f=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},{buttonModel:{content:"Cancel"},click:function(){this.hide()}}];return typeof u=="string"?d=e({position:{X:"center",Y:"top"},content:u,isModal:!0,header:zo,buttons:f},p):d=e(n(u),p),d.close=function(){u&&u.close&&u.close.apply(d),d.destroy(),d.element.classList.contains("e-dlg-modal")?(d.element.parentElement.remove(),d.target.classList.remove(Ho)):d.element.remove()},d}o.confirm=i;function e(u,p){var d=new fo(u);return d.appendTo(p),d}function r(u){var p={};return p.buttons=[],p=s(p,u),p=a(p,u),p}function n(u){var p={};return p.buttons=[],p=s(p,u),p=l(p,u),p}function s(u,p){return u.header=c(p.title)?null:p.title,u.content=c(p.content)?"":p.content,u.isModal=c(p.isModal)?!0:p.isModal,u.showCloseIcon=c(p.showCloseIcon)?!1:p.showCloseIcon,u.allowDragging=c(p.isDraggable)?!1:p.isDraggable,u.closeOnEscape=c(p.closeOnEscape)?!1:p.closeOnEscape,u.position=c(p.position)?{X:"center",Y:"top"}:p.position,u.animationSettings=c(p.animationSettings)?{effect:"Fade",duration:400,delay:0}:p.animationSettings,u.cssClass=c(p.cssClass)?"":p.cssClass,u.zIndex=c(p.zIndex)?1e3:p.zIndex,u.open=c(p.open)?null:p.open,u.width=c(p.width)?"auto":p.width,u.height=c(p.height)?"auto":p.height,u}function a(u,p){var d=[{buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}}];return c(p.okButton)?u.buttons=d:u.buttons[0]=h(u.buttons[0],p.okButton,d[0]),u}function l(u,p){var d={buttonModel:{isPrimary:!0,content:"OK"},click:function(){this.hide()}},f={buttonModel:{content:"Cancel"},click:function(){this.hide()}};return c(p.okButton)?u.buttons[0]=d:u.buttons[0]=h(u.buttons[0],p.okButton,d),c(p.cancelButton)?u.buttons[1]=f:u.buttons[1]=h(u.buttons[1],p.cancelButton,f),u}function h(u,p,d){var f=d;return c(p.text)||(f.buttonModel.content=p.text),c(p.icon)||(f.buttonModel.iconCss=p.icon),c(p.cssClass)||(f.buttonModel.cssClass=p.cssClass),c(p.click)||(f.click=p.click),c(p.isFlat)||(f.isFlat=p.isFlat),f}})(Vo||(Vo={}));var Al=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Ne=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},Cu=1500,Su=500,Wo=0,Go=8,bu=2,Xt=2,Zn="e-tooltip",Uo="e-rtl",xu="e-bigger",_o="e-icons",jo="e-tooltip-close",es="e-tooltip-wrap",Ko="e-tip-content",ji="e-arrow-tip",Qo="e-arrow-tip-outer",Hr="e-arrow-tip-inner",lr="e-tip-bottom",ts="e-tip-top",Yo="e-tip-left",is="e-tip-right",rs="e-popup",qr="e-popup-open",ns="e-popup-close",Vr="e-lib",wu="e-hidden",Xo="e-tooltip-popup-container",Iu=function(o){Al(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return Ne([C({effect:"FadeIn",duration:150,delay:0})],t.prototype,"open",void 0),Ne([C({effect:"FadeOut",duration:150,delay:0})],t.prototype,"close",void 0),t}(_e),Eu=function(o){Al(t,o);function t(i,e){var r=o.call(this,i,e)||this;return r.mouseMoveEvent=null,r.mouseMoveTarget=null,r.containerElement=null,r.isBodyContainer=!0,r}return t.prototype.initialize=function(){this.formatPosition(),T([this.element],Zn)},t.prototype.formatPosition=function(){var i,e;this.position.indexOf("Top")===0||this.position.indexOf("Bottom")===0?(i=this.position.split(/(?=[A-Z])/),this.tooltipPositionY=i[0],this.tooltipPositionX=i[1]):(e=this.position.split(/(?=[A-Z])/),this.tooltipPositionX=e[0],this.tooltipPositionY=e[1])},t.prototype.renderArrow=function(){this.setTipClass(this.position);var i=this.createElement("div",{className:ji+" "+this.tipClass});i.appendChild(this.createElement("div",{className:Qo+" "+this.tipClass})),i.appendChild(this.createElement("div",{className:Hr+" "+this.tipClass})),this.tooltipEle.appendChild(i)},t.prototype.setTipClass=function(i){i.indexOf("Right")===0?this.tipClass=Yo:i.indexOf("Bottom")===0?this.tipClass=ts:i.indexOf("Left")===0?this.tipClass=is:this.tipClass=lr},t.prototype.renderPopup=function(i){var e=this.mouseTrail?{top:0,left:0}:this.getTooltipPosition(i);this.tooltipEle.classList.remove(Vr),this.popupObj=new ao(this.tooltipEle,{height:this.height,width:this.width,position:{X:e.left,Y:e.top},enableRtl:this.enableRtl,open:this.openPopupHandler.bind(this),close:this.closePopupHandler.bind(this)})},t.prototype.getScalingFactor=function(i){if(!i)return{x:1,y:1};var e={x:1,y:1},r=i.closest('[style*="transform: scale"]');if(r&&r!=this.tooltipEle&&r.contains(this.tooltipEle)){var n=window.getComputedStyle(r),s=n.getPropertyValue("transform"),a=s.match(/matrix\(([^)]+)\)/)[1].split(",").map(parseFloat);e.x=a[0],e.y=a[3]}return e},t.prototype.getTooltipPosition=function(i){this.tooltipEle.style.display="block";var e=this.element.closest('[style*="zoom"]');e&&(e.contains(this.tooltipEle)||(this.tooltipEle.style.zoom=getComputedStyle(e).zoom));var r=bt(i,this.tooltipPositionX,this.tooltipPositionY,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect()),n=this.getScalingFactor(i),s=this.calculateTooltipOffset(this.position,n.x,n.y),a=this.calculateElementPosition(r,s),l=a[0],h=a[1],u=this.collisionFlipFit(i,l,h);return this.isBodyContainer||(u.top-=this.containerElement.getBoundingClientRect().top),u.left=u.left/n.x,u.top=u.top/n.y,this.tooltipEle.style.display="",u},t.prototype.windowResize=function(){this.reposition(this.findTarget())},t.prototype.reposition=function(i){if(this.popupObj&&i){var e=this.getTooltipPosition(i);this.popupObj.position={X:e.left,Y:e.top},this.popupObj.dataBind()}},t.prototype.openPopupHandler=function(){!this.mouseTrail&&this.needTemplateReposition()&&this.reposition(this.findTarget()),this.trigger("afterOpen",this.tooltipEventArgs),this.tooltipEventArgs=null},t.prototype.closePopupHandler=function(){this.isReact&&!(this.opensOn==="Click"&&typeof this.content=="function")&&this.clearTemplate(["content"]),this.clear(),this.trigger("afterClose",this.tooltipEventArgs),this.tooltipEventArgs=null},t.prototype.calculateTooltipOffset=function(i,e,r){e===void 0&&(e=1),r===void 0&&(r=1);var n={top:0,left:0},s,a,l,h,u,p,d,f;if(e!=1||r!=1){var g=this.tooltipEle.getBoundingClientRect(),v=void 0;l=Math.round(g.width),h=Math.round(g.height),u=q("."+ji,this.tooltipEle),u&&(v=u.getBoundingClientRect()),s=u?Math.round(v.width):0,a=u?Math.round(v.height):0,p=this.showTipPointer?Wo:Go,d=a/2+Xt+(h-this.tooltipEle.clientHeight*r),f=s/2+Xt+(l-this.tooltipEle.clientWidth*e)}else l=this.tooltipEle.offsetWidth,h=this.tooltipEle.offsetHeight,u=q("."+ji,this.tooltipEle),s=u?u.offsetWidth:0,a=u?u.offsetHeight:0,p=this.showTipPointer?Wo:Go,d=a/2+Xt+(this.tooltipEle.offsetHeight-this.tooltipEle.clientHeight),f=s/2+Xt+(this.tooltipEle.offsetWidth-this.tooltipEle.clientWidth);switch(this.mouseTrail&&(p+=bu),i){case"RightTop":n.left+=s+p,n.top-=h-d;break;case"RightCenter":n.left+=s+p,n.top-=h/2;break;case"RightBottom":n.left+=s+p,n.top-=d;break;case"BottomRight":n.top+=a+p,n.left-=f;break;case"BottomCenter":n.top+=a+p,n.left-=l/2;break;case"BottomLeft":n.top+=a+p,n.left-=l-f;break;case"LeftBottom":n.left-=s+l+p,n.top-=d;break;case"LeftCenter":n.left-=s+l+p,n.top-=h/2;break;case"LeftTop":n.left-=s+l+p,n.top-=h-d;break;case"TopLeft":n.top-=h+a+p,n.left-=l-f;break;case"TopRight":n.top-=h+a+p,n.left-=f;break;default:n.top-=h+a+p,n.left-=l/2;break}return n.left+=this.offsetX,n.top+=this.offsetY,n},t.prototype.updateTipPosition=function(i){var e=Ee("."+ji+",."+Qo+",."+Hr,this.tooltipEle),r=[lr,ts,Yo,is];F(e,r),this.setTipClass(i),T(e,this.tipClass)},t.prototype.adjustArrow=function(i,e,r,n){var s=q("."+ji,this.tooltipEle);if(!(this.showTipPointer===!1||s===null)){this.updateTipPosition(e);var a,l;this.tooltipEle.style.display="block";var h=this.tooltipEle.clientWidth,u=this.tooltipEle.clientHeight,p=q("."+Hr,this.tooltipEle),d=s.offsetWidth,f=s.offsetHeight;if(this.tooltipEle.style.display="",this.tipClass===lr||this.tipClass===ts){if(this.tipClass===lr?(l="99.9%",p.style.top="-"+(f-2)+"px"):(l=-(f-1)+"px",p.style.top="-"+(f-6)+"px"),i){var g=r!=="Center"||h>i.offsetWidth||this.mouseTrail;g&&r==="Left"||!g&&this.tipPointerPosition==="End"?a=h-d-Xt+"px":g&&r==="Right"||!g&&this.tipPointerPosition==="Start"?a=Xt+"px":g&&(this.tipPointerPosition==="End"||this.tipPointerPosition==="Start")?a=this.tipPointerPosition==="End"?i.offsetWidth+(this.tooltipEle.offsetWidth-i.offsetWidth)/2-d/2-Xt+"px":(this.tooltipEle.offsetWidth-i.offsetWidth)/2-d/2+Xt+"px":a=h/2-d/2+"px"}}else{this.tipClass===is?(a="99.9%",p.style.left="-"+(d-2)+"px"):(a=-(d-1)+"px",p.style.left=-d+(d-2)+"px");var g=n!=="Center"||u>i.offsetHeight||this.mouseTrail;g&&n==="Top"||!g&&this.tipPointerPosition==="End"?l=u-f-Xt+"px":g&&n==="Bottom"||!g&&this.tipPointerPosition==="Start"?l=Xt+"px":l=u/2-f/2+"px"}s.style.top=l,s.style.left=a}},t.prototype.renderContent=function(i){var e=q("."+Ko,this.tooltipEle);if(this.cssClass&&T([this.tooltipEle],this.cssClass.split(" ")),i&&!c(i.getAttribute("title"))&&(i.setAttribute("data-content",i.getAttribute("title")),i.removeAttribute("title")),c(this.content))i&&!c(i.getAttribute("data-content"))&&(e.innerHTML=i.getAttribute("data-content"));else if(e.innerHTML="",this.content instanceof HTMLElement)e.appendChild(this.content);else if(typeof this.content=="string")if(this.enableHtmlSanitizer&&this.setProperties({content:ti.sanitize(this.content)},!0),this.enableHtmlParse){var r=Ue(this.content),n=r({},this,"content",this.element.id+"content",void 0,void 0,e,this.root);n&&Oe(n,e)}else e.textContent=this.content;else{var s=Ue(this.content),n=s({},this,"content",this.element.id+"content",void 0,void 0,e);n&&Oe(n,e),this.renderReactTemplates()}},t.prototype.renderCloseIcon=function(){if(!this.isSticky){var i=this.tooltipEle.querySelector("."+_o+"."+jo);i&&Se(i);return}var e=this.createElement("div",{className:_o+" "+jo});this.tooltipEle.appendChild(e),b.add(e,Q.touchStartEvent,this.onStickyClose,this)},t.prototype.addDescribedBy=function(i,e){var r=(i.getAttribute("aria-describedby")||"").split(/\s+/);r.indexOf(e)<0&&r.push(e),Ie(i,{"aria-describedby":r.join(" ").trim(),"data-tooltip-id":e})},t.prototype.removeDescribedBy=function(i){var e=i.getAttribute("data-tooltip-id"),r=(i.getAttribute("aria-describedby")||"").split(/\s+/),n=r.indexOf(e);n!==-1&&r.splice(n,1),i.removeAttribute("data-tooltip-id");var s=r.join(" ").trim();s?i.setAttribute("aria-describedby",s):i.removeAttribute("aria-describedby")},t.prototype.tapHoldHandler=function(i){clearTimeout(this.autoCloseTimer),this.targetHover(i.originalEvent)},t.prototype.touchEndHandler=function(i){var e=this;if(!this.isSticky){var r=function(){e.close()};this.autoCloseTimer=setTimeout(r,Cu)}},t.prototype.targetClick=function(i){var e;this.target?e=D(i.target,this.target):e=this.element,!c(e)&&(e.getAttribute("data-tooltip-id")===null?this.targetHover(i):this.isSticky||this.hideTooltip(this.animation.close,i,e))},t.prototype.targetHover=function(i){var e;if(this.target?e=D(i.target,this.target):e=this.element,!(c(e)||e.getAttribute("data-tooltip-id")!==null&&this.closeDelay===0)){for(var r=[].slice.call(Ee('[data-tooltip-id= "'+this.ctrlId+'_content"]',document)),n=0,s=r;n<s.length;n++){var a=s[n];this.restoreElement(a)}this.showTooltip(e,this.animation.open,i)}},t.prototype.mouseMoveBeforeOpen=function(i){this.mouseMoveEvent=i},t.prototype.mouseMoveBeforeRemove=function(){this.mouseMoveTarget&&b.remove(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen)},t.prototype.showTooltip=function(i,e,r){var n=this;clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.openDelay&&this.mouseTrail&&(this.mouseMoveBeforeRemove(),this.mouseMoveTarget=i,b.add(this.mouseMoveTarget,"mousemove touchstart",this.mouseMoveBeforeOpen,this)),this.tooltipEventArgs={type:r?r.type:null,cancel:!1,target:i,event:r||null,element:this.tooltipEle,isInteracted:!c(r)};var s=function(a){n.beforeRenderCallback(a,i,r,e)};this.trigger("beforeRender",this.tooltipEventArgs,s.bind(this))},t.prototype.beforeRenderCallback=function(i,e,r,n){i.cancel?(this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove()):(this.isHidden=!1,c(this.tooltipEle)?(this.ctrlId=this.element.getAttribute("id")?tr(this.element.getAttribute("id")):tr("tooltip"),this.tooltipEle=this.createElement("div",{className:es+" "+rs+" "+Vr,attrs:{role:"tooltip","aria-hidden":"false",id:this.ctrlId+"_content"},styles:"width:"+Pe(this.width)+";height:"+Pe(this.height)+";position:absolute;"}),this.tooltipBeforeRender(e,this),this.tooltipAfterRender(e,r,n,this)):e&&(this.adjustArrow(e,this.position,this.tooltipPositionX,this.tooltipPositionY),this.addDescribedBy(e,this.ctrlId+"_content"),this.renderContent(e),Ti.stop(this.tooltipEle),this.reposition(e),this.tooltipAfterRender(e,r,n,this)))},t.prototype.appendContainer=function(i){typeof this.container=="string"?this.container==="body"?this.containerElement=document.body:(this.isBodyContainer=!1,this.containerElement=q(this.container,document)):this.container instanceof HTMLElement&&(this.containerElement=this.container,this.isBodyContainer=this.containerElement.tagName==="BODY"),this.isBodyContainer||T([this.containerElement],Xo),this.containerElement.appendChild(i.tooltipEle)},t.prototype.tooltipBeforeRender=function(i,e){i&&(Q.isDevice&&T([e.tooltipEle],xu),e.width!=="auto"&&(e.tooltipEle.style.maxWidth=Pe(e.width)),e.tooltipEle.appendChild(e.createElement("div",{className:Ko})),this.appendContainer(e),F([e.tooltipEle],wu),e.addDescribedBy(i,e.ctrlId+"_content"),e.renderContent(i),T([e.tooltipEle],qr),e.showTipPointer&&e.renderArrow(),e.renderCloseIcon(),e.renderPopup(i),e.adjustArrow(i,e.position,e.tooltipPositionX,e.tooltipPositionY),Ti.stop(e.tooltipEle),e.reposition(i))},t.prototype.tooltipAfterRender=function(i,e,r,n){if(i){F([n.tooltipEle],qr),T([n.tooltipEle],ns),n.tooltipEventArgs={type:e?e.type:null,cancel:!1,target:i,event:e||null,element:n.tooltipEle,isInteracted:!c(e)},n.needTemplateReposition()&&!n.mouseTrail&&(n.tooltipEle.style.display="none");var s=function(a){n.beforeOpenCallback(a,i,r,e)};n.trigger("beforeOpen",n.tooltipEventArgs,s.bind(n))}},t.prototype.beforeOpenCallback=function(i,e,r,n){var s=this;if(i.cancel)this.isHidden=!0,this.clear(),this.mouseMoveBeforeRemove(),this.restoreElement(e);else{var a={name:r.effect==="None"&&wi==="Enable"?"FadeIn":this.animation.open.effect,duration:r.duration,delay:r.delay,timingFunction:"easeOut"};if(r.effect==="None"&&(a=void 0),this.openDelay>0){var l=function(){s.mouseTrail&&b.add(e,"mousemove touchstart mouseenter",s.onMouseMove,s),s.popupObj&&(s.popupObj.show(a,e),s.mouseMoveEvent&&s.mouseTrail&&s.onMouseMove(s.mouseMoveEvent))};this.showTimer=setTimeout(l,this.openDelay)}else this.popupObj&&this.popupObj.show(a,e)}n&&this.wireMouseEvents(n,e)},t.prototype.needTemplateReposition=function(){var i=this;return!c(i.viewContainerRef)&&typeof i.viewContainerRef!="string"||this.isReact},t.prototype.checkCollision=function(i,e,r){var n={left:e,top:r,position:this.position,horizontal:this.tooltipPositionX,vertical:this.tooltipPositionY},s=to(this.tooltipEle,this.checkCollideTarget(),e,r);return s.length>0&&(n.horizontal=s.indexOf("left")>=0?"Right":s.indexOf("right")>=0?"Left":this.tooltipPositionX,n.vertical=s.indexOf("top")>=0?"Bottom":s.indexOf("bottom")>=0?"Top":this.tooltipPositionY),n},t.prototype.calculateElementPosition=function(i,e){return[this.isBodyContainer?i.left+e.left:i.left-this.containerElement.offsetLeft+e.left+window.pageXOffset+this.containerElement.scrollLeft,this.isBodyContainer?i.top+e.top:i.top-this.containerElement.offsetTop+e.top+window.pageYOffset+this.containerElement.scrollTop]},t.prototype.collisionFlipFit=function(i,e,r){var n=this.checkCollision(i,e,r),s=n.position;if(this.tooltipPositionY!==n.vertical&&(s=this.position.indexOf("Bottom")===0||this.position.indexOf("Top")===0?n.vertical+this.tooltipPositionX:this.tooltipPositionX+n.vertical),this.tooltipPositionX!==n.horizontal&&(s.indexOf("Left")===0&&(n.vertical=s==="LeftTop"||s==="LeftCenter"?"Top":"Bottom",s=n.vertical+"Left"),s.indexOf("Right")===0&&(n.vertical=s==="RightTop"||s==="RightCenter"?"Top":"Bottom",s=n.vertical+"Right"),n.horizontal=this.tooltipPositionX),this.tooltipEventArgs={type:null,cancel:!1,target:i,event:null,element:this.tooltipEle,collidedPosition:s},this.trigger("beforeCollision",this.tooltipEventArgs),this.tooltipEventArgs.cancel)s=this.position;else{var a=n.vertical,l=n.horizontal;if(n.position!==s){var h=bt(i,l,a,!this.isBodyContainer,this.isBodyContainer?null:this.containerElement.getBoundingClientRect());this.adjustArrow(i,s,l,a);var u=this.getScalingFactor(i),p=this.calculateTooltipOffset(s,u.x,u.y);p.top-=this.getOffSetPosition("TopBottom",s,this.offsetY),p.left-=this.getOffSetPosition("RightLeft",s,this.offsetX),n.position=s;var d=this.calculateElementPosition(h,p);n.left=d[0],n.top=d[1]}else this.adjustArrow(i,s,l,a)}var f={left:n.left,top:n.top},g=al(this.tooltipEle,this.checkCollideTarget(),{X:!0,Y:this.windowCollision},f);this.tooltipEle.style.display="block";var v=q("."+ji,this.tooltipEle);if(this.showTipPointer&&v!=null&&(s.indexOf("Bottom")===0||s.indexOf("Top")===0)){var m=parseInt(v.style.left,10)-(g.left-n.left);m<0?m=0:m+v.offsetWidth>this.tooltipEle.clientWidth&&(m=this.tooltipEle.clientWidth-v.offsetWidth),v.style.left=m.toString()+"px"}return this.tooltipEle.style.display="",f.left=g.left,f.top=g.top,f},t.prototype.getOffSetPosition=function(i,e,r){return i.indexOf(this.position.split(/(?=[A-Z])/)[0])!==-1&&i.indexOf(e.split(/(?=[A-Z])/)[0])!==-1?2*r:0},t.prototype.checkCollideTarget=function(){return!this.windowCollision&&this.target?this.element:null},t.prototype.hideTooltip=function(i,e,r){var n=this;if(this.closeDelay>0){clearTimeout(this.hideTimer),clearTimeout(this.showTimer);var s=function(){n.closeDelay&&n.tooltipEle&&n.isTooltipOpen||n.tooltipHide(i,e,r)};this.hideTimer=setTimeout(s,this.closeDelay)}else this.tooltipHide(i,e,r)},t.prototype.tooltipHide=function(i,e,r){var n=this,s;e?s=this.target?r||e.target:this.element:s=q('[data-tooltip-id= "'+this.ctrlId+'_content"]',document),this.tooltipEventArgs={type:e?e.type:null,cancel:!1,target:s,event:e||null,element:this.tooltipEle,isInteracted:!c(e)},this.trigger("beforeClose",this.tooltipEventArgs,function(a){a.cancel?n.isHidden=!1:(n.mouseMoveBeforeRemove(),n.popupHide(i,s,e))}),this.tooltipEventArgs=null},t.prototype.popupHide=function(i,e,r){e&&r&&this.restoreElement(e),this.isHidden=!0;var n={name:i.effect==="None"&&wi==="Enable"?"FadeOut":this.animation.close.effect,duration:i.duration,delay:i.delay,timingFunction:"easeIn"};i.effect==="None"&&(n=void 0),this.popupObj&&this.popupObj.hide(n)},t.prototype.restoreElement=function(i){this.unwireMouseEvents(i),c(i.getAttribute("data-content"))||(i.setAttribute("title",i.getAttribute("data-content")),i.removeAttribute("data-content")),this.removeDescribedBy(i)},t.prototype.clear=function(){var i=this.findTarget();i&&this.restoreElement(i),this.tooltipEle&&(F([this.tooltipEle],ns),T([this.tooltipEle],qr)),this.isHidden&&(this.popupObj&&this.popupObj.destroy(),this.tooltipEle&&Se(this.tooltipEle),this.tooltipEle=null,this.popupObj=null)},t.prototype.tooltipHover=function(i){this.tooltipEle&&(this.isTooltipOpen=!0)},t.prototype.tooltipMouseOut=function(i){this.isTooltipOpen=!1,this.hideTooltip(this.animation.close,i,this.findTarget())},t.prototype.onMouseOut=function(i){var e=i.relatedTarget;if(e&&!this.mouseTrail){var r=D(e,"."+es+"."+Vr+"."+rs);r?b.add(r,"mouseleave",this.tooltipElementMouseOut,this):(this.hideTooltip(this.animation.close,i,this.findTarget()),this.closeDelay===0&&this.clear())}else this.hideTooltip(this.animation.close,i,this.findTarget()),this.clear()},t.prototype.tooltipElementMouseOut=function(i){this.hideTooltip(this.animation.close,i,this.findTarget()),b.remove(this.element,"mouseleave",this.tooltipElementMouseOut),this.clear()},t.prototype.onStickyClose=function(i){this.close()},t.prototype.onMouseMove=function(i){var e=0,r=0;i.type.indexOf("touch")>-1?(i.preventDefault(),e=i.touches[0].pageX,r=i.touches[0].pageY):(e=i.pageX,r=i.pageY),Ti.stop(this.tooltipEle),F([this.tooltipEle],ns),T([this.tooltipEle],qr),this.adjustArrow(i.target,this.position,this.tooltipPositionX,this.tooltipPositionY);var n=this.getScalingFactor(i.target),s=this.calculateTooltipOffset(this.position,n.x,n.y),a=e+s.left+this.offsetX,l=r+s.top+this.offsetY,h=this.checkCollision(i.target,a,l);if(this.tooltipPositionX!==h.horizontal||this.tooltipPositionY!==h.vertical){var u=this.position.indexOf("Bottom")===0||this.position.indexOf("Top")===0?h.vertical+h.horizontal:h.horizontal+h.vertical;h.position=u,this.adjustArrow(i.target,h.position,h.horizontal,h.vertical);var p=this.calculateTooltipOffset(h.position,n.x,n.y);h.left=e+p.left-this.offsetX,h.top=r+p.top-this.offsetY}this.tooltipEle.style.left=h.left+"px",this.tooltipEle.style.top=h.top+"px"},t.prototype.keyDown=function(i){this.tooltipEle&&i.keyCode===27&&this.close()},t.prototype.touchEnd=function(i){this.tooltipEle&&D(i.target,"."+Zn)===null&&!this.isSticky&&this.close()},t.prototype.scrollHandler=function(i){this.tooltipEle&&!this.isSticky&&(D(i.target,"."+es+"."+Vr+"."+rs)||this.close())},t.prototype.render=function(){this.initialize(),this.wireEvents(this.opensOn),this.renderComplete()},t.prototype.preRender=function(){this.tipClass=lr,this.tooltipPositionX="Center",this.tooltipPositionY="Top",this.isHidden=!0},t.prototype.wireEvents=function(i){for(var e=this.getTriggerList(i),r=0,n=e;r<n.length;r++){var s=n[r];if(s==="Custom")return;s==="Focus"&&this.wireFocusEvents(),s==="Click"&&b.add(this.element,Q.touchStartEvent,this.targetClick,this),s==="Hover"&&(Q.isDevice?(this.touchModule=new en(this.element,{tapHoldThreshold:Su,tapHold:this.tapHoldHandler.bind(this)}),b.add(this.element,Q.touchEndEvent,this.touchEndHandler,this)):b.add(this.element,"mouseover",this.targetHover,this))}b.add(document,"touchend",this.touchEnd,this),b.add(document,"scroll wheel",this.scrollHandler,this),b.add(window,"resize",this.windowResize,this),b.add(document,"keydown",this.keyDown,this)},t.prototype.getTriggerList=function(i){return i==="Auto"&&(i=Q.isDevice?"Hover":"Hover Focus"),i.split(" ")},t.prototype.wireFocusEvents=function(){if(c(this.target))b.add(this.element,"focusin",this.targetHover,this);else{var i=[].slice.call(Ee(this.target,this.element));this.targetsList=i;for(var e=0,r=i;e<r.length;e++){var n=r[e];b.add(n,"focus",this.targetHover,this)}}},t.prototype.wireMouseEvents=function(i,e){this.tooltipEle&&(this.isSticky||(i.type==="focus"&&b.add(e,"blur",this.onMouseOut,this),i.type==="focusin"&&b.add(e,"focusout",this.onMouseOut,this),i.type==="mouseover"&&b.add(e,"mouseleave",this.onMouseOut,this),this.closeDelay&&(b.add(this.tooltipEle,"mouseenter",this.tooltipHover,this),b.add(this.tooltipEle,"mouseleave",this.tooltipMouseOut,this))),this.mouseTrail&&this.openDelay===0&&b.add(e,"mousemove touchstart mouseenter",this.onMouseMove,this))},t.prototype.unwireEvents=function(i){for(var e=this.getTriggerList(i),r=0,n=e;r<n.length;r++){var s=n[r];if(s==="Custom")return;s==="Focus"&&this.unwireFocusEvents(),s==="Click"&&b.remove(this.element,Q.touchStartEvent,this.targetClick),s==="Hover"&&(Q.isDevice?(this.touchModule&&this.touchModule.destroy(),b.remove(this.element,Q.touchEndEvent,this.touchEndHandler)):b.remove(this.element,"mouseover",this.targetHover))}b.remove(document,"touchend",this.touchEnd),b.remove(document,"scroll wheel",this.scrollHandler),b.remove(window,"resize",this.windowResize),b.remove(document,"keydown",this.keyDown)},t.prototype.unwireFocusEvents=function(){if(c(this.target))b.remove(this.element,"focusin",this.targetHover);else for(var i=[].slice.call(Ee(this.target,this.element)),e=0,r=i;e<r.length;e++){var n=r[e];b.remove(n,"focus",this.targetHover)}},t.prototype.unwireMouseEvents=function(i){if(!this.isSticky){for(var e=this.getTriggerList(this.opensOn),r=0,n=e;r<n.length;r++){var s=n[r];s==="Focus"&&(b.remove(i,"blur",this.onMouseOut),b.remove(i,"focusout",this.onMouseOut)),s==="Hover"&&!Q.isDevice&&b.remove(i,"mouseleave",this.onMouseOut)}this.closeDelay&&(b.remove(i,"mouseenter",this.tooltipHover),b.remove(i,"mouseleave",this.tooltipMouseOut))}this.mouseTrail&&b.remove(i,"mousemove touchstart mouseenter",this.onMouseMove)},t.prototype.findTarget=function(){var i=q('[data-tooltip-id= "'+this.ctrlId+'_content"]',document);return i},t.prototype.getModuleName=function(){return"tooltip"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.onPropertyChanged=function(i,e){for(var r=this.findTarget(),n=0,s=Object.keys(i);n<s.length;n++){var a=s[n];switch(a){case"width":this.tooltipEle&&r&&(this.tooltipEle.style.width=this.tooltipEle.style.maxWidth=Pe(i.width),this.reposition(r));break;case"height":this.tooltipEle&&r&&(this.tooltipEle.style.height=Pe(i.height),this.reposition(r));break;case"content":this.tooltipEle&&this.renderContent();break;case"opensOn":this.unwireEvents(e.opensOn),this.wireEvents(i.opensOn);break;case"position":if(this.formatPosition(),this.tooltipEle&&r){var l=q("."+Hr,this.tooltipEle);l&&(l.style.top=l.style.left=null),this.reposition(r)}break;case"tipPointerPosition":this.tooltipEle&&r&&this.reposition(r);break;case"offsetX":if(this.tooltipEle){var h=i.offsetX-e.offsetX;this.tooltipEle.style.left=(parseInt(this.tooltipEle.style.left,10)+h).toString()+"px"}break;case"offsetY":if(this.tooltipEle){var u=i.offsetY-e.offsetY;this.tooltipEle.style.top=(parseInt(this.tooltipEle.style.top,10)+u).toString()+"px"}break;case"cssClass":this.tooltipEle&&(e.cssClass&&F([this.tooltipEle],e.cssClass.split(" ")),i.cssClass&&T([this.tooltipEle],i.cssClass.split(" ")));break;case"enableRtl":this.tooltipEle&&(this.enableRtl?T([this.tooltipEle],Uo):F([this.tooltipEle],Uo));break;case"isSticky":this.tooltipEle&&r&&(this.renderCloseIcon(),this.reposition(r));break;case"container":c(this.containerElement)||F([this.containerElement],Xo),this.container=i.container,this.tooltipEle&&r&&(this.appendContainer(this),this.reposition(r))}}},t.prototype.open=function(i,e){c(e)&&(e=this.animation.open),c(i)&&(i=this.element),i.style.display!=="none"&&this.showTooltip(i,e)},t.prototype.close=function(i){i||(i=this.animation.close),this.hideTooltip(i)},t.prototype.refresh=function(i){if(this.tooltipEle&&this.renderContent(i),this.popupObj&&i&&this.reposition(i),!c(this.targetsList)&&!c(this.target)){var e=Ee(this.target,this.element);e.length!==this.targetsList.length&&(this.unwireEvents(this.opensOn),this.wireEvents(this.opensOn))}},t.prototype.destroy=function(){o.prototype.destroy.call(this),this.tooltipEle&&Se(this.tooltipEle),this.popupObj&&this.popupObj.destroy(),F([this.element],Zn),this.unwireEvents(this.opensOn),this.unwireMouseEvents(this.element),this.tooltipEle=null,this.popupObj=null;for(var i=Ee('[data-tooltip-id= "'+this.ctrlId+'_content"]',this.element),e=0,r=i;e<r.length;e++){var n=r[e];this.restoreElement(n)}},Ne([C("auto")],t.prototype,"width",void 0),Ne([C("auto")],t.prototype,"height",void 0),Ne([C()],t.prototype,"content",void 0),Ne([C("body")],t.prototype,"container",void 0),Ne([C()],t.prototype,"target",void 0),Ne([C("TopCenter")],t.prototype,"position",void 0),Ne([C(0)],t.prototype,"offsetX",void 0),Ne([C(0)],t.prototype,"offsetY",void 0),Ne([C(!0)],t.prototype,"showTipPointer",void 0),Ne([C(!0)],t.prototype,"enableHtmlParse",void 0),Ne([C(!1)],t.prototype,"windowCollision",void 0),Ne([C("Auto")],t.prototype,"tipPointerPosition",void 0),Ne([C("Auto")],t.prototype,"opensOn",void 0),Ne([C(!1)],t.prototype,"mouseTrail",void 0),Ne([C(!1)],t.prototype,"isSticky",void 0),Ne([Je({},Iu)],t.prototype,"animation",void 0),Ne([C(0)],t.prototype,"openDelay",void 0),Ne([C(0)],t.prototype,"closeDelay",void 0),Ne([C()],t.prototype,"cssClass",void 0),Ne([C(!1)],t.prototype,"enableHtmlSanitizer",void 0),Ne([C("")],t.prototype,"htmlAttributes",void 0),Ne([k()],t.prototype,"beforeRender",void 0),Ne([k()],t.prototype,"beforeOpen",void 0),Ne([k()],t.prototype,"afterOpen",void 0),Ne([k()],t.prototype,"beforeClose",void 0),Ne([k()],t.prototype,"afterClose",void 0),Ne([k()],t.prototype,"beforeCollision",void 0),Ne([k()],t.prototype,"created",void 0),Ne([k()],t.prototype,"destroyed",void 0),t=Ne([si],t),t}(Kt),ut={},Ru=30,Au=30,Jo=30,Tu=30,ku=30,Du=36,Lu=36,ss="e-spin-show",nn="e-spin-hide",$o="e-spin-material",Zo="e-spin-material3",ea="e-spin-fabric",ta="e-spin-fluent",ia="e-spin-tailwind",Fu="e-spin-bootstrap",ra="e-spin-bootstrap4",na="e-spin-bootstrap5",sa="e-spin-high-contrast",Rs="e-spinner-pane",go="e-spinner-inner",kn="e-path-circle",Mu="e-path-arc",Ou="e-spin-label",As="e-spin-template",oa=null,Nu=null;function Ir(o,t){var i;if(o.target){var e,r=c(t)?Ve:t,n=ic(o.target,r);if(!c(o.cssClass)){var s=o.cssClass.split(" ").filter(function(u){return u.trim()!==""});(i=n.wrap.classList).add.apply(i,s)}if(!c(o.template)||!c(oa)){var a=c(o.template)?oa:o.template;n.wrap.classList.add(As),Zu(n.wrap,a,Nu)}else{var l=c(o.type)?ju(n.wrap):o.type,h=c(o.width)?void 0:o.width;e=ec(h,l),Ku(l,n.wrap,e,r),c(o.label)||Pu(n.inner_wrap,o.label,r)}n.wrap.classList.add(nn),n=null}}function Pu(o,t,i){var e=i("div",{});return e.classList.add(Ou),e.innerHTML=t,o.appendChild(e),e}function Bu(o,t,i){var e=Ci();ut[""+e]={timeOut:0,type:"Material",radius:t},Ln(o,e,i,$o),Fn(t,o,"Material",$o)}function zu(o,t,i){var e=Ci();ut[""+e]={timeOut:0,type:"Material3",radius:t},Ln(o,e,i,Zo),Fn(t,o,"Material3",Zo)}function Hu(o,t,i){var e=Ci();ut[""+e]={timeOut:0,type:"Bootstrap4",radius:t},Ln(o,e,i,ra),Fn(t,o,"Bootstrap4",ra)}function qu(o,t,i){var e=Ci();ut[""+e]={timeOut:0,type:"Bootstrap5",radius:t},Ln(o,e,i,na),Fn(t,o,"Bootstrap5",na)}function Vu(o,t,i){var e={},r=0;ut[""+t].timeOut=0,e[""+t]=tc(t,i,0,0);var n={uniqueID:t,container:o,globalInfo:e,timeOutVar:r};Tl(n)}function Wu(o,t,i){var e=Ci();ut[""+e]={timeOut:0,type:"Fabric",radius:t},Dn(o,e,ea),Mn(t,o,ea)}function Gu(o,t,i){var e=Ci();ut[""+e]={timeOut:0,type:"Fluent",radius:t},Dn(o,e,ta),Mn(t,o,ta)}function Uu(o,t,i){var e=Ci();ut[""+e]={timeOut:0,type:"Tailwind",radius:t},Dn(o,e,ia),Mn(t,o,ia)}function _u(o,t,i){var e=Ci();ut[""+e]={timeOut:0,type:"HighContrast",radius:t},Dn(o,e,sa),Mn(t,o,sa)}function ju(o){var t=window.getComputedStyle(o,":after").getPropertyValue("content");return t.replace(/['"]+/g,"")}function Ku(o,t,i,e){var r=t.querySelector("."+go),n=r.querySelector("svg");switch(c(n)||r.removeChild(n),o){case"Material":Bu(r,i,e);break;case"Material3":zu(r,i,e);break;case"Fabric":Wu(r,i);break;case"Fluent":Gu(r,i);break;case"Bootstrap":Qu(r,i);break;case"HighContrast":_u(r,i);break;case"Bootstrap4":Hu(r,i,e);break;case"Bootstrap5":qu(r,i,e);break;case"Tailwind":case"Tailwind-dark":Uu(r,i);break}}function Qu(o,t,i){var e=Ci();ut[""+e]={timeOut:0,type:"Bootstrap",radius:t},Yu(o,e),Xu(o,t)}function Yu(o,t,i){var e=document.createElementNS("http://www.w3.org/2000/svg","svg"),r=64,n=32,s=2;e.setAttribute("id",t),e.setAttribute("class",Fu),e.setAttribute("viewBox","0 0 "+r+" "+r),o.insertBefore(e,o.firstChild);for(var a=0;a<=7;a++){var l=document.createElementNS("http://www.w3.org/2000/svg","circle");l.setAttribute("class",kn+"_"+a),l.setAttribute("r",s+""),l.setAttribute("transform","translate("+n+","+n+")"),e.appendChild(l)}}function Xu(o,t){var i=o.querySelector("svg.e-spin-bootstrap"),e=0,r=0,n=24;i.style.width=i.style.height=t+"px";for(var s=90,a=0;a<=7;a++){var l=Ts(e,r,n,s),h=i.querySelector("."+kn+"_"+a);h.setAttribute("cx",l.x+""),h.setAttribute("cy",l.y+""),s=s>=360?0:s,s=s+45}}function Ju(o,t){var i=[],e=o,r=t,n=!1,s=1;a(e);function a(l){i.push(l),(l!==r||s===1)&&(l<=e&&l>1&&!n?l=parseFloat((l-.2).toFixed(2)):l===1?(l=7,l=parseFloat((l+.2).toFixed(2)),n=!0):l<8&&n?(l=parseFloat((l+.2).toFixed(2)),l===8&&(n=!1)):l<=8&&!n&&(l=parseFloat((l-.2).toFixed(2))),++s,a(l))}return i}function $u(o){for(var t=o.querySelector("svg.e-spin-bootstrap"),i=t.getAttribute("id"),e=1;e<=8;e++){var r=o.getElementsByClassName("e-path-circle_"+(e===8?0:e))[0];n(r,e,e,Ju(e,e),i)}function n(s,a,l,h,u){var p=0;d(a);function d(f){ut[""+u].isAnimate&&(++p,s.setAttribute("r",f+""),p>=h.length&&(p=0),ut[u].timeOut=setTimeout(d.bind(null,h[p]),18))}}}function Zu(o,t,i){c(i)||o.classList.add(i);var e=o.querySelector(".e-spinner-inner");e.innerHTML=t}function ec(o,t){var i;switch(t){case"Material":i=Ru;break;case"Material3":i=Au;break;case"Fabric":i=Jo;break;case"Tailwind":case"Tailwind-dark":i=Jo;break;case"Fluent":i=Tu;break;case"Bootstrap4":i=Du;break;case"Bootstrap5":i=Lu;break;default:i=ku}return o=o?parseFloat(o+""):i,t==="Bootstrap"?o:o/2}function tc(o,t,i,e){return{radius:t,count:i,previousId:e}}function Ci(){for(var o="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)o+=t.charAt(Math.floor(Math.random()*t.length));return o}function Dn(o,t,i,e){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("id",t),r.setAttribute("class",i);var n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",kn);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("class",Mu),o.insertBefore(r,o.firstChild),r.appendChild(n),r.appendChild(s)}function Ln(o,t,i,e){var r=document.createElementNS("http://www.w3.org/2000/svg","svg"),n=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("class",e),r.setAttribute("id",t),n.setAttribute("class",kn),o.insertBefore(r,o.firstChild),r.appendChild(n)}function ic(o,t){var i=t("div",{}),e=t("div",{});return i.classList.add(Rs),e.classList.add(go),e.setAttribute("aria-disabled","true"),o.appendChild(i),i.appendChild(e),{wrap:i,inner_wrap:e}}function Tl(o){var t=1,i=149,e=1333,r=75;rc(t,i,oc,e,o.globalInfo[o.uniqueID].count,r,o),o.globalInfo[o.uniqueID].count=++o.globalInfo[o.uniqueID].count%4}function rc(o,t,i,e,r,n,s){var a=++s.globalInfo[s.uniqueID].previousId,l=new Date().getTime(),h=t-o,u=nc(s.globalInfo[s.uniqueID].radius*2+""),p=kl(u),d=-90*(s.globalInfo[s.uniqueID].count||0);f(s);function f(v){var m=Math.max(0,Math.min(new Date().getTime()-l,e));g(i(m,o,h,e),v.container),a===v.globalInfo[v.uniqueID].previousId&&m<e?ut[v.uniqueID].timeOut=setTimeout(f.bind(null,v),1):Tl(v)}function g(v,m){if(!c(m.querySelector("svg.e-spin-material"))||!c(m.querySelector("svg.e-spin-material3"))){var y=void 0;if(!c(m.querySelector("svg.e-spin-material"))&&!c(m.querySelector("svg.e-spin-material").querySelector("path.e-path-circle"))?y=m.querySelector("svg.e-spin-material"):!c(m.querySelector("svg.e-spin-material3"))&&!c(m.querySelector("svg.e-spin-material3").querySelector("path.e-path-circle"))&&(y=m.querySelector("svg.e-spin-material3")),!c(y)){var I=y.querySelector("path.e-path-circle");I.setAttribute("stroke-dashoffset",Dl(u,p,v,n)+""),I.setAttribute("transform","rotate("+d+" "+u/2+" "+u/2+")")}}}}function Fn(o,t,i,e){var r=o*2,n=t.querySelector("svg."+e),s=n.querySelector("path.e-path-circle"),a=kl(r),l=r/2+"px";n.setAttribute("viewBox","0 0 "+r+" "+r),n.style.width=n.style.height=r+"px",n.style.transformOrigin=l+" "+l+" "+l,s.setAttribute("d",sc(r,a)),(i==="Material"||i==="Material3")&&(s.setAttribute("stroke-width",a+""),s.setAttribute("stroke-dasharray",(r-a)*Math.PI*.75+""),s.setAttribute("stroke-dashoffset",Dl(r,a,1,75)+""))}function nc(o){var t=parseFloat(o);return t}function sc(o,t){var i=o/2,e=t/2;return"M"+i+","+e+"A"+(i-e)+","+(i-e)+" 0 1 1 "+e+","+i}function kl(o){return 10/100*o}function Dl(o,t,i,e){return(o-t)*Math.PI*(3*e/100-i/100)}function oc(o,t,i,e){var r=(o/=e)*o,n=r*o;return t+i*(6*n*r+-15*r*r+10*n)}function Mn(o,t,i){var e=o,r=o,n=o*2,s=315,a=45,l=t.querySelector("."+i),h=l.querySelector(".e-path-circle"),u=l.querySelector(".e-path-arc"),p=n/2+"px";h.setAttribute("d",lc(e,r,o)),u.setAttribute("d",ac(e,r,o,s,a)),l.setAttribute("viewBox","0 0 "+n+" "+n),l.style.transformOrigin=p+" "+p+" "+p,l.style.width=l.style.height=n+"px"}function Ts(o,t,i,e){var r=(e-90)*Math.PI/180;return{x:o+i*Math.cos(r),y:t+i*Math.sin(r)}}function ac(o,t,i,e,r){var n=Ts(o,t,i,r),s=Ts(o,t,i,e),a=["M",n.x,n.y,"A",i,i,0,0,0,s.x,s.y].join(" ");return a}function lc(o,t,i){var e=["M",o,t,"m",-i,0,"a",i,i,0,1,0,i*2,0,"a",i,i,0,1,0,-i*2,0].join(" ");return e}function Wi(o){Ll(o,!1),o=null}function Ll(o,t){var i;if(o)if(o.classList.contains(Rs))i=o;else{var e=o.querySelectorAll("."+Rs);if(Q.isIE){for(var r=0;r<e.length;r++)if(e[r].parentElement&&e[r].parentElement===o){i=e[r];break}}else i=Array.from(e).find(function(h){return h.parentElement===o})||null}if(o&&i){var n=i.querySelector("."+go),s=void 0;if(s=t?!i.classList.contains(As)&&!i.classList.contains(nn):!i.classList.contains(As)&&!i.classList.contains(ss),s){var a=i.querySelector("svg");if(c(a))return;var l=a.getAttribute("id");switch(ut[""+l].isAnimate=!t,ut[""+l].type){case"Material":case"Material3":t?clearTimeout(ut[l].timeOut):Vu(n,l,ut[l].radius);break;case"Bootstrap":t?clearTimeout(ut[l].timeOut):$u(n);break}}t?ot(i,[nn],[ss]):ot(i,[ss],[nn]),o=null}}function Er(o){Ll(o,!0),o=null}var hc=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Ze=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},uc="e-clear-icon-hide",aa="e-input-focus",os=["title","style","class"],cc=function(o){hc(t,o);function t(i,e){var r=o.call(this,i,e)||this;return r.previousValue=null,r.isAngular=!1,r.isHiddenInput=!1,r.isForm=!1,r.inputPreviousValue=null,r.isVue=!1,r.textboxOptions=i,r}return t.prototype.onPropertyChanged=function(i,e){for(var r=0,n=Object.keys(i);r<n.length;r++){var s=n[r];switch(s){case"floatLabelType":ce.removeFloating(this.textboxWrapper),ce.addFloating(this.respectiveElement,this.floatLabelType,this.placeholder);break;case"enabled":ce.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container),this.bindClearEvent();break;case"width":ce.setWidth(i.width,this.textboxWrapper.container);break;case"value":{var a=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.isBlank(this.value)||(this.value=this.value.toString()),this.isProtectedOnChange=a,ce.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.inputPreviousValue=this.respectiveElement.value,(this.isAngular||this.isVue)&&this.preventChange===!0?(this.previousValue=this.isAngular?this.value:this.previousValue,this.preventChange=!1):(c(this.isAngular)||!this.isAngular||this.isAngular&&!this.preventChange||this.isAngular&&c(this.preventChange))&&this.raiseChangeEvent()}break;case"htmlAttributes":this.updateHTMLAttrToElement(),this.updateHTMLAttrToWrapper(),this.checkAttributes(!0),this.multiline&&!c(this.textarea)?ce.validateInputType(this.textboxWrapper.container,this.textarea):ce.validateInputType(this.textboxWrapper.container,this.element);break;case"readonly":ce.setReadonly(this.readonly,this.respectiveElement);break;case"type":this.respectiveElement.tagName!=="TEXTAREA"&&(this.respectiveElement.setAttribute("type",this.type),ce.validateInputType(this.textboxWrapper.container,this.element),this.raiseChangeEvent());break;case"showClearButton":ce.setClearButton(this.showClearButton,this.respectiveElement,this.textboxWrapper),this.bindClearEvent();break;case"enableRtl":ce.setEnableRtl(this.enableRtl,[this.textboxWrapper.container]);break;case"placeholder":ce.setPlaceholder(this.placeholder,this.respectiveElement),ce.calculateWidth(this.respectiveElement,this.textboxWrapper.container);break;case"autocomplete":this.autocomplete!=="on"&&this.autocomplete!==""?this.respectiveElement.autocomplete=this.autocomplete:this.removeAttributes(["autocomplete"]);break;case"cssClass":this.updateCssClass(i.cssClass,e.cssClass);break;case"locale":this.globalize=new Cr(this.locale),this.l10n.setLocale(this.locale),this.setProperties({placeholder:this.l10n.getConstant("placeholder")},!0),ce.setPlaceholder(this.placeholder,this.respectiveElement);break}}},t.prototype.getModuleName=function(){return"textbox"},t.prototype.isBlank=function(i){return!i||/^\s*$/.test(i)},t.prototype.preRender=function(){if(this.cloneElement=this.element.cloneNode(!0),this.formElement=D(this.element,"form"),c(this.formElement)||(this.isForm=!0),this.element.tagName==="EJS-TEXTBOX"){var i=N("ej2_instances",this.element),e=this.multiline?this.createElement("textarea"):this.createElement("input"),r=0;for(r;r<this.element.attributes.length;r++){var n=this.element.attributes[r].nodeName;n!=="id"&&n!=="class"?(e.setAttribute(n,this.element.attributes[r].nodeValue),e.innerHTML=this.element.innerHTML,n==="name"&&this.element.removeAttribute("name")):n==="class"&&e.setAttribute(n,this.element.className.split(" ").filter(function(l){return l.indexOf("ng-")!==0}).join(" "))}this.element.appendChild(e),this.element=e,ht("ej2_instances",i,this.element)}this.updateHTMLAttrToElement(),this.checkAttributes(!1),(c(this.textboxOptions)||this.textboxOptions.value===void 0)&&this.element.value!==""&&this.setProperties({value:this.element.value},!0),this.element.tagName!=="TEXTAREA"&&this.element.setAttribute("type",this.type),this.type==="text"&&this.element.setAttribute("role","textbox"),this.globalize=new Cr(this.locale);var s={placeholder:this.placeholder};if(this.l10n=new yr("textbox",s,this.locale),this.l10n.getConstant("placeholder")!==""&&this.setProperties({placeholder:this.placeholder||this.l10n.getConstant("placeholder")},!0),this.element.hasAttribute("id")||this.element.setAttribute("id",tr("textbox")),this.element.hasAttribute("name")||this.element.setAttribute("name",this.element.getAttribute("id")),this.element.tagName==="INPUT"&&this.multiline){this.isHiddenInput=!0,this.textarea=this.createElement("textarea"),this.element.parentNode.insertBefore(this.textarea,this.element),this.element.setAttribute("type","hidden"),this.textarea.setAttribute("name",this.element.getAttribute("name")),this.element.removeAttribute("name"),this.textarea.setAttribute("role",this.element.getAttribute("role")),this.element.removeAttribute("role"),this.textarea.setAttribute("id",tr("textarea"));for(var a=["placeholder","disabled","value","readonly","type","autocomplete"],r=0;r<this.element.attributes.length;r++){var n=this.element.attributes[r].nodeName;this.element.hasAttribute(n)&&os.indexOf(n)<0&&!(n==="id"||n==="type"||n==="e-mappinguid")&&(this.textarea.setAttribute(n,this.element.attributes[r].nodeValue),a.indexOf(n)<0&&(this.element.removeAttribute(n),r--))}}},t.prototype.checkAttributes=function(i){for(var e=i?c(this.htmlAttributes)?[]:Object.keys(this.htmlAttributes):["placeholder","disabled","value","readonly","type","autocomplete"],r=0,n=e;r<n.length;r++){var s=n[r];if(!c(this.element.getAttribute(s)))switch(s){case"disabled":if(c(this.textboxOptions)||this.textboxOptions.enabled===void 0||i){var a=!(this.element.getAttribute(s)==="disabled"||this.element.getAttribute(s)===""||this.element.getAttribute(s)==="true");this.setProperties({enabled:a},!i)}break;case"readonly":if(c(this.textboxOptions)||this.textboxOptions.readonly===void 0||i){var l=this.element.getAttribute(s)==="readonly"||this.element.getAttribute(s)===""||this.element.getAttribute(s)==="true";this.setProperties({readonly:l},!i)}break;case"placeholder":(c(this.textboxOptions)||this.textboxOptions.placeholder===void 0||i)&&this.setProperties({placeholder:this.element.placeholder},!i);break;case"autocomplete":if(c(this.textboxOptions)||this.textboxOptions.autocomplete===void 0||i){var h=this.element.autocomplete==="off"?"off":"on";this.setProperties({autocomplete:h},!i)}break;case"value":(c(this.textboxOptions)||this.textboxOptions.value===void 0||i)&&this.element.value!==""&&this.setProperties({value:this.element.value},!i);break;case"type":(c(this.textboxOptions)||this.textboxOptions.type===void 0||i)&&this.setProperties({type:this.element.type},!i);break}}},t.prototype.render=function(){var i=this.cssClass;!c(this.cssClass)&&this.cssClass!==""&&(i=this.getInputValidClassList(this.cssClass)),this.respectiveElement=this.isHiddenInput?this.textarea:this.element,this.textboxWrapper=ce.createInput({element:this.respectiveElement,floatLabelType:this.floatLabelType,properties:{enabled:this.enabled,enableRtl:this.enableRtl,cssClass:i,readonly:this.readonly,placeholder:this.placeholder,showClearButton:this.showClearButton}}),this.updateHTMLAttrToWrapper(),this.isHiddenInput&&this.respectiveElement.parentNode.insertBefore(this.element,this.respectiveElement),this.wireEvents(),c(this.value)||(ce.setValue(this.value,this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value)),c(this.value)||(this.initialValue=this.value,this.setInitialValue()),this.autocomplete!=="on"&&this.autocomplete!==""?this.respectiveElement.autocomplete=this.autocomplete:!c(this.textboxOptions)&&this.textboxOptions.autocomplete!==void 0&&this.removeAttributes(["autocomplete"]),this.previousValue=this.value,this.inputPreviousValue=this.value,this.respectiveElement.defaultValue=this.respectiveElement.value,ce.setWidth(this.width,this.textboxWrapper.container),!c(D(this.element,"fieldset"))&&D(this.element,"fieldset").disabled&&(this.enabled=!1),this.renderComplete()},t.prototype.updateHTMLAttrToWrapper=function(){if(!c(this.htmlAttributes))for(var i=0,e=Object.keys(this.htmlAttributes);i<e.length;i++){var r=e[i];if(os.indexOf(r)>-1)if(r==="class"){var n=this.getInputValidClassList(this.htmlAttributes[""+r]);n!==""&&T([this.textboxWrapper.container],n.split(" "))}else if(r==="style"){var s=this.textboxWrapper.container.getAttribute(r);s=c(s)?this.htmlAttributes[""+r]:s+this.htmlAttributes[""+r],this.textboxWrapper.container.setAttribute(r,s)}else this.textboxWrapper.container.setAttribute(r,this.htmlAttributes[""+r])}},t.prototype.updateHTMLAttrToElement=function(){if(!c(this.htmlAttributes))for(var i=0,e=Object.keys(this.htmlAttributes);i<e.length;i++){var r=e[i];os.indexOf(r)<0&&(this.multiline&&!c(this.textarea)?this.textarea.setAttribute(r,this.htmlAttributes[""+r]):this.element.setAttribute(r,this.htmlAttributes[""+r]))}},t.prototype.updateCssClass=function(i,e){ce.setCssClass(this.getInputValidClassList(i),[this.textboxWrapper.container],this.getInputValidClassList(e))},t.prototype.getInputValidClassList=function(i){var e=i;return!c(i)&&i!==""&&(e=i.replace(/\s+/g," ").trim()),e},t.prototype.setInitialValue=function(){this.isAngular||this.respectiveElement.setAttribute("value",this.initialValue)},t.prototype.wireEvents=function(){b.add(this.respectiveElement,"focus",this.focusHandler,this),b.add(this.respectiveElement,"blur",this.focusOutHandler,this),b.add(this.respectiveElement,"keydown",this.keydownHandler,this),b.add(this.respectiveElement,"input",this.inputHandler,this),b.add(this.respectiveElement,"change",this.changeHandler,this),this.isForm&&b.add(this.formElement,"reset",this.resetForm,this),this.bindClearEvent(),!c(this.textboxWrapper.container.querySelector(".e-float-text"))&&this.floatLabelType==="Auto"&&this.textboxWrapper.container.classList.contains("e-autofill")&&this.textboxWrapper.container.classList.contains("e-outline")&&b.add(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler,this)},t.prototype.animationHandler=function(){this.textboxWrapper.container.classList.add("e-valid-input");var i=this.textboxWrapper.container.querySelector(".e-float-text");c(i)||(i.classList.add("e-label-top"),i.classList.contains("e-label-bottom")&&i.classList.remove("e-label-bottom"))},t.prototype.resetValue=function(i){var e=this.isProtectedOnChange;this.isProtectedOnChange=!0,this.value=i,i==null&&this.textboxWrapper.container.classList.contains("e-valid-input")&&this.textboxWrapper.container.classList.remove("e-valid-input"),this.isProtectedOnChange=e},t.prototype.resetForm=function(){if(this.isAngular?this.resetValue(""):this.resetValue(this.initialValue),!c(this.textboxWrapper)){var i=this.textboxWrapper.container.querySelector(".e-float-text");!c(i)&&this.floatLabelType!=="Always"&&(c(this.initialValue)||this.initialValue===""?(i.classList.add("e-label-bottom"),i.classList.remove("e-label-top")):this.initialValue!==""&&(i.classList.add("e-label-top"),i.classList.remove("e-label-bottom")))}},t.prototype.focusHandler=function(i){var e={container:this.textboxWrapper.container,event:i,value:this.value};this.trigger("focus",e)},t.prototype.focusOutHandler=function(i){!(this.previousValue===null&&this.value===null&&this.respectiveElement.value==="")&&this.previousValue!==this.value&&this.raiseChangeEvent(i,!0);var e={container:this.textboxWrapper.container,event:i,value:this.value};this.trigger("blur",e)},t.prototype.keydownHandler=function(i){(i.keyCode===13||i.keyCode===9)&&!((this.previousValue===null||this.previousValue==="")&&(this.value===null||this.value==="")&&this.respectiveElement.value==="")&&this.setProperties({value:this.respectiveElement.value},!0)},t.prototype.inputHandler=function(i){var e=this,r={event:i,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};this.inputPreviousValue=this.respectiveElement.value,this.isAngular&&(e.localChange({value:this.respectiveElement.value}),this.preventChange=!0),this.isVue&&(this.preventChange=!0),this.trigger("input",r),i.stopPropagation()},t.prototype.changeHandler=function(i){this.setProperties({value:this.respectiveElement.value},!0),this.previousValue!=this.value&&this.raiseChangeEvent(i,!0),i.stopPropagation()},t.prototype.raiseChangeEvent=function(i,e){var r={event:i,value:this.value,previousValue:this.previousValue,container:this.textboxWrapper.container,isInteraction:e||!1,isInteracted:e||!1};this.preventChange=!1,this.trigger("change",r),this.previousValue=this.value,this.element.tagName==="INPUT"&&this.multiline&&Q.info.name==="mozilla"&&(this.element.value=this.respectiveElement.value)},t.prototype.bindClearEvent=function(){this.showClearButton&&(this.enabled?b.add(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler,this):b.remove(this.textboxWrapper.clearButton,"mousedown touchstart",this.resetInputHandler))},t.prototype.resetInputHandler=function(i){if(i.preventDefault(),!this.textboxWrapper.clearButton.classList.contains(uc)||this.textboxWrapper.container.classList.contains("e-static-clear")){ce.setValue("",this.respectiveElement,this.floatLabelType,this.showClearButton),this.isHiddenInput&&(this.element.value=this.respectiveElement.value),this.setProperties({value:this.respectiveElement.value},!0);var e={event:i,value:this.respectiveElement.value,previousValue:this.inputPreviousValue,container:this.textboxWrapper.container};if(this.trigger("input",e),this.inputPreviousValue=this.respectiveElement.value,this.raiseChangeEvent(i,!0),D(this.element,"form")){var r=this.element,n=document.createEvent("KeyboardEvent");n.initEvent("keyup",!1,!0),r.dispatchEvent(n)}}},t.prototype.unWireEvents=function(){b.remove(this.respectiveElement,"focus",this.focusHandler),b.remove(this.respectiveElement,"blur",this.focusOutHandler),b.remove(this.respectiveElement,"keydown",this.keydownHandler),b.remove(this.respectiveElement,"input",this.inputHandler),b.remove(this.respectiveElement,"change",this.changeHandler),this.isForm&&b.remove(this.formElement,"reset",this.resetForm),!c(this.textboxWrapper.container.querySelector(".e-float-text"))&&this.floatLabelType==="Auto"&&this.textboxWrapper.container.classList.contains("e-outline")&&this.textboxWrapper.container.classList.contains("e-autofill")&&b.remove(this.textboxWrapper.container.querySelector(".e-float-text"),"animationstart",this.animationHandler)},t.prototype.destroy=function(){this.unWireEvents(),this.element.tagName==="INPUT"&&this.multiline&&(Ce(this.textboxWrapper.container.getElementsByTagName("textarea")[0]),this.respectiveElement=this.element,this.element.removeAttribute("type")),this.respectiveElement.value=this.respectiveElement.defaultValue,this.respectiveElement.classList.remove("e-input"),this.removeAttributes(["aria-disabled","aria-readonly","aria-labelledby"]),c(this.textboxWrapper)||(this.textboxWrapper.container.insertAdjacentElement("afterend",this.respectiveElement),Ce(this.textboxWrapper.container)),this.textboxWrapper=null,ce.destroy(),o.prototype.destroy.call(this)},t.prototype.addIcon=function(i,e){ce.addIcon(i,e,this.textboxWrapper.container,this.respectiveElement,this.createElement)},t.prototype.getPersistData=function(){var i=["value"];return this.addOnPersist(i)},t.prototype.addAttributes=function(i){for(var e=0,r=Object.keys(i);e<r.length;e++){var n=r[e];n==="disabled"?(this.setProperties({enabled:!1},!0),ce.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):n==="readonly"?(this.setProperties({readonly:!0},!0),ce.setReadonly(this.readonly,this.respectiveElement)):n==="class"?this.respectiveElement.classList.add(i[""+n]):n==="placeholder"?(this.setProperties({placeholder:i[""+n]},!0),ce.setPlaceholder(this.placeholder,this.respectiveElement)):n==="rows"&&this.respectiveElement.tagName==="TEXTAREA"?this.respectiveElement.setAttribute(n,i[""+n]):this.respectiveElement.setAttribute(n,i[""+n])}},t.prototype.removeAttributes=function(i){for(var e=0,r=i;e<r.length;e++){var n=r[e];n==="disabled"?(this.setProperties({enabled:!0},!0),ce.setEnabled(this.enabled,this.respectiveElement,this.floatLabelType,this.textboxWrapper.container)):n==="readonly"?(this.setProperties({readonly:!1},!0),ce.setReadonly(this.readonly,this.respectiveElement)):n==="placeholder"?(this.setProperties({placeholder:null},!0),ce.setPlaceholder(this.placeholder,this.respectiveElement)):this.respectiveElement.removeAttribute(n)}},t.prototype.focusIn=function(){document.activeElement!==this.respectiveElement&&this.enabled&&(this.respectiveElement.focus(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&T([this.textboxWrapper.container],[aa]))},t.prototype.focusOut=function(){document.activeElement===this.respectiveElement&&this.enabled&&(this.respectiveElement.blur(),(this.textboxWrapper.container.classList.contains("e-input-group")||this.textboxWrapper.container.classList.contains("e-outline")||this.textboxWrapper.container.classList.contains("e-filled"))&&F([this.textboxWrapper.container],[aa]))},Ze([C("text")],t.prototype,"type",void 0),Ze([C(!1)],t.prototype,"readonly",void 0),Ze([C(null)],t.prototype,"value",void 0),Ze([C("Never")],t.prototype,"floatLabelType",void 0),Ze([C("")],t.prototype,"cssClass",void 0),Ze([C(null)],t.prototype,"placeholder",void 0),Ze([C("on")],t.prototype,"autocomplete",void 0),Ze([C({})],t.prototype,"htmlAttributes",void 0),Ze([C(!1)],t.prototype,"multiline",void 0),Ze([C(!0)],t.prototype,"enabled",void 0),Ze([C(!1)],t.prototype,"showClearButton",void 0),Ze([C(!1)],t.prototype,"enablePersistence",void 0),Ze([C(null)],t.prototype,"width",void 0),Ze([k()],t.prototype,"created",void 0),Ze([k()],t.prototype,"destroyed",void 0),Ze([k()],t.prototype,"change",void 0),Ze([k()],t.prototype,"blur",void 0),Ze([k()],t.prototype,"focus",void 0),Ze([k()],t.prototype,"input",void 0),t=Ze([si],t),t}(Kt),pc=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Fl=function(o){pc(t,o);function t(i){var e=o.call(this,i)||this;return e.initRenderCalled=!1,e.checkInjectedModules=!1,e.statelessTemplateProps=null,e.templateProps=null,e.immediateRender=!0,e.portals=[],e}return t.prototype.render=function(){if((this.element&&!this.initRenderCalled||this.refreshing)&&!this.isReactForeceUpdate)o.prototype.render.call(this),this.initRenderCalled=!0;else return Xe.createElement(Xe.Fragment,null,[].concat(Xe.createElement("input",this.getDefaultAttributes()),this.portals))},t}(cc);Fr(Fl,[Lr,Xe.Component]);var St="",sn="",hr="",it=[],dc="e-active",Sn="";function Wr(o,t,i,e,r,n,s,a,l){!n||St===""?hr!=""?(St=hr+String.fromCharCode(o),hr=""):St+=String.fromCharCode(o):St==sn&&(hr=String.fromCharCode(o)),a?(setTimeout(function(){hr=""},700),setTimeout(function(){St=""},3e3)):setTimeout(function(){St=""},1e3);var h;if(St=e?St.toLowerCase():St,Sn===r&&sn===St&&!l){for(var u=0;u<it.length;u++){if(it[u].classList.contains(dc)){h=u;break}if(s&&it[u].textContent.toLowerCase()===s.toLowerCase()){h=u;break}}return h=h+1,a?it[h]&&it.length-1!=h?it[h]:it[it.length]:it[h]?it[h]:it[0]}else{var p=t,d=St.length,f=void 0,g=void 0;i=i?i+1:0;var u=i;it=[];do u===p.length&&(u=-1),u===-1?h=0:h=u,g=p[h],f=e?g.innerText.toLowerCase():g.innerText,f.substr(0,d)===St&&it.push(p[h]),u++;while(u!==i);if(sn=St,Sn=r,a){for(var v=!1,m=0;m<it.length;m++)if(s&&it[m].textContent.toLowerCase()===s.toLowerCase()){h=m,v=!0;break}return s&&v&&(h=h+1),it[h]?it[h]:it[0]}return it[0]}}function fc(o){Sn===o&&(Sn="",sn="",St="",it=[])}var se=function(){function o(t){return this.subQuery=null,this.isChild=!1,this.distincts=[],this.queries=[],this.key="",this.fKey="",typeof t=="string"?this.fromTable=t:t&&t instanceof Array&&(this.lookups=t),this.expands=[],this.sortedColumns=[],this.groupedColumns=[],this.subQuery=null,this.isChild=!1,this.params=[],this.lazyLoad=[],this}return o.prototype.setKey=function(t){return this.key=t,this},o.prototype.using=function(t){return this.dataManager=t,this},o.prototype.execute=function(t,i,e,r){return t=t||this.dataManager,t?t.executeQuery(this,i,e,r):A.throwError('Query - execute() : dataManager needs to be is set using "using" function or should be passed as argument')},o.prototype.executeLocal=function(t){return t=t||this.dataManager,t?t.executeLocal(this):A.throwError('Query - executeLocal() : dataManager needs to be is set using "using" function or should be passed as argument')},o.prototype.clone=function(){var t=new o;return t.queries=this.queries.slice(0),t.key=this.key,t.isChild=this.isChild,t.dataManager=this.dataManager,t.fromTable=this.fromTable,t.params=this.params.slice(0),t.expands=this.expands.slice(0),t.sortedColumns=this.sortedColumns.slice(0),t.groupedColumns=this.groupedColumns.slice(0),t.subQuerySelector=this.subQuerySelector,t.subQuery=this.subQuery,t.fKey=this.fKey,t.isCountRequired=this.isCountRequired,t.distincts=this.distincts.slice(0),t.lazyLoad=this.lazyLoad.slice(0),t},o.prototype.from=function(t){return this.fromTable=t,this},o.prototype.addParams=function(t,i){return typeof i=="function"?this.params.push({key:t,fn:i}):this.params.push({key:t,value:i}),this},o.prototype.distinct=function(t){return typeof t=="string"?this.distincts=[].slice.call([t],0):this.distincts=t.slice(0),this},o.prototype.expand=function(t){return typeof t=="string"?this.expands=[].slice.call([t],0):this.expands=t.slice(0),this},o.prototype.where=function(t,i,e,r,n,s){i=i?i.toLowerCase():null;var a=null;return typeof t=="string"?a=new be(t,i,e,r,n,s):t instanceof be&&(a=t),this.queries.push({fn:"onWhere",e:a}),this},o.prototype.search=function(t,i,e,r,n){typeof i=="string"&&(i=[i]),(!e||e==="none")&&(e="contains");var s=A.fnOperators[e];return this.queries.push({fn:"onSearch",e:{fieldNames:i,operator:e,searchKey:t,ignoreCase:r,ignoreAccent:n,comparer:s}}),this},o.prototype.sortBy=function(t,i,e){return this.sortByForeignKey(t,i,e)},o.prototype.sortByForeignKey=function(t,i,e,r){var n=c(r)?"ascending":r,s,a;if(typeof t=="string"&&A.endsWith(t.toLowerCase()," desc")&&(t=t.replace(/ desc$/i,""),i="descending"),(!i||typeof i=="string")&&(n=i?i.toLowerCase():"ascending",i=A.fnSort(i)),e){s=o.filterQueries(this.queries,"onSortBy");for(var l=0;l<s.length;l++)if(a=s[l].e.fieldName,typeof a=="string"){if(a===t)return this}else if(a instanceof Array){for(var h=0;h<a.length;h++)if(a[h]===t||t.toLowerCase()===a[h]+" desc")return this}}return this.queries.push({fn:"onSortBy",e:{fieldName:t,comparer:i,direction:n}}),this},o.prototype.sortByDesc=function(t){return this.sortBy(t,"descending")},o.prototype.group=function(t,i,e){return this.sortBy(t,null,!0),this.queries.push({fn:"onGroup",e:{fieldName:t,comparer:i||null,format:e||null}}),this},o.prototype.page=function(t,i){return this.queries.push({fn:"onPage",e:{pageIndex:t,pageSize:i}}),this},o.prototype.range=function(t,i){return this.queries.push({fn:"onRange",e:{start:t,end:i}}),this},o.prototype.take=function(t){return this.queries.push({fn:"onTake",e:{nos:t}}),this},o.prototype.skip=function(t){return this.queries.push({fn:"onSkip",e:{nos:t}}),this},o.prototype.select=function(t){return typeof t=="string"&&(t=[].slice.call([t],0)),this.queries.push({fn:"onSelect",e:{fieldNames:t}}),this},o.prototype.hierarchy=function(t,i){return this.subQuerySelector=i,this.subQuery=t,this},o.prototype.foreignKey=function(t){return this.fKey=t,this},o.prototype.requiresCount=function(){return this.isCountRequired=!0,this},o.prototype.aggregate=function(t,i){return this.queries.push({fn:"onAggregates",e:{field:i,type:t}}),this},o.filterQueries=function(t,i){return t.filter(function(e){return e.fn===i})},o.filterQueryLists=function(t,i){for(var e=t.filter(function(s){return i.indexOf(s.fn)!==-1}),r={},n=0;n<e.length;n++)r[e[n].fn]||(r[e[n].fn]=e[n].e);return r},o}(),be=function(){function o(t,i,e,r,n,s){return r===void 0&&(r=!1),this.ignoreAccent=!1,this.isComplex=!1,typeof t=="string"?(this.field=t,this.operator=i.toLowerCase(),this.value=e,this.matchCase=s,this.ignoreCase=r,this.ignoreAccent=n,this.isComplex=!1,this.comparer=A.fnOperators.processOperator(this.operator)):(t instanceof o&&e instanceof o||e instanceof Array)&&(this.isComplex=!0,this.condition=i.toLowerCase(),this.predicates=[t],this.matchCase=t.matchCase,this.ignoreCase=t.ignoreCase,this.ignoreAccent=t.ignoreAccent,e instanceof Array?[].push.apply(this.predicates,e):this.predicates.push(e)),this}return o.and=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return o.combinePredicates([].slice.call(t,0),"and")},o.prototype.and=function(t,i,e,r,n){return o.combine(this,t,i,e,"and",r,n)},o.or=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return o.combinePredicates([].slice.call(t,0),"or")},o.prototype.or=function(t,i,e,r,n){return o.combine(this,t,i,e,"or",r,n)},o.ornot=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return o.combinePredicates([].slice.call(t,0),"or not")},o.prototype.ornot=function(t,i,e,r,n){return o.combine(this,t,i,e,"ornot",r,n)},o.andnot=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return o.combinePredicates([].slice.call(t,0),"and not")},o.prototype.andnot=function(t,i,e,r,n){return o.combine(this,t,i,e,"andnot",r,n)},o.fromJson=function(t){if(t instanceof Array){for(var i=[],e=0,r=t.length;e<r;e++)i.push(this.fromJSONData(t[e]));return i}var n=t;return this.fromJSONData(n)},o.prototype.validate=function(t){var i=this.predicates?this.predicates:[],e,r;if(!this.isComplex&&this.comparer)return this.condition&&this.condition.indexOf("not")!==-1?(this.condition=this.condition.split("not")[0]===""?void 0:this.condition.split("not")[0],!this.comparer.call(this,A.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent)):this.comparer.call(this,A.getObject(this.field,t),this.value,this.ignoreCase,this.ignoreAccent);this.condition&&this.condition.indexOf("not")!==-1?r=this.condition.indexOf("and")!==-1:r=this.condition==="and";for(var n=0;n<i.length;n++)if(n>0&&this.condition&&this.condition.indexOf("not")!==-1&&(i[n].condition=i[n].condition?i[n].condition+"not":"not"),e=i[n].validate(t),r){if(!e)return!1}else if(e)return!0;return r},o.prototype.toJson=function(){var t,i;if(this.isComplex){t=[],i=this.predicates;for(var e=0;e<i.length;e++)t.push(i[e].toJson())}return{isComplex:this.isComplex,field:this.field,operator:this.operator,value:this.value,ignoreCase:this.ignoreCase,ignoreAccent:this.ignoreAccent,condition:this.condition,predicates:t,matchCase:this.matchCase}},o.combinePredicates=function(t,i){if(t.length===1){if(!(t[0]instanceof Array))return t[0];t=t[0]}return new o(t[0],i,t.slice(1))},o.combine=function(t,i,e,r,n,s,a){return i instanceof o?o[n](t,i):typeof i=="string"?o[n](t,new o(i,e,r,s,a)):A.throwError("Predicate - "+n+" : invalid arguments")},o.fromJSONData=function(t){for(var i=t.predicates||[],e=i.length,r=[],n,s=0;s<e;s++)r.push(this.fromJSONData(i[s]));return t.isComplex?n=new o(r[0],t.condition,r.slice(1)):n=new o(t.field,t.operator,t.value,t.ignoreCase,t.ignoreAccent),n},o}(),la={GroupGuid:"{271bbba0-1ee7}"},A=function(){function o(){}return o.getValue=function(t,i){return typeof t=="function"?t.call(i||{}):t},o.endsWith=function(t,i){return t.slice&&t.slice(-i.length)===i},o.notEndsWith=function(t,i){return t.slice&&t.slice(-i.length)!==i},o.startsWith=function(t,i){return t.slice(0,i.length)===i},o.notStartsWith=function(t,i){return t.slice(0,i.length)!==i},o.wildCard=function(t,i){var e,r;if(i.indexOf("[")!==-1&&(i=i.split("[").join("[[]")),i.indexOf("(")!==-1&&(i=i.split("(").join("[(]")),i.indexOf(")")!==-1&&(i=i.split(")").join("[)]")),i.indexOf("\\")!==-1&&(i=i.split("\\").join("[\\\\]")),i.indexOf("*")!==-1){i.charAt(0)!=="*"&&(i="^"+i),i.charAt(i.length-1)!=="*"&&(i=i+"$"),e=i.split("*");for(var n=0;n<e.length;n++)e[n].indexOf(".")===-1?e[n]=e[n]+".*":e[n]=e[n]+"*";i=e.join("")}(i.indexOf("%3f")!==-1||i.indexOf("?")!==-1)&&(r=i.indexOf("%3f")!==-1?i.split("%3f"):i.split("?"),i=r.join("."));var s=new RegExp(i,"g");return s.test(t)},o.like=function(t,i){return i.indexOf("%")!==-1?i.charAt(0)==="%"&&i.lastIndexOf("%")<2?(i=i.substring(1,i.length),o.startsWith(o.toLowerCase(t),o.toLowerCase(i))):i.charAt(i.length-1)==="%"&&i.indexOf("%")>i.length-3?(i=i.substring(0,i.length-1),o.endsWith(o.toLowerCase(t),o.toLowerCase(i))):(i.lastIndexOf("%")!==i.indexOf("%")&&i.lastIndexOf("%")>i.indexOf("%")+1&&(i=i.substring(i.indexOf("%")+1,i.lastIndexOf("%"))),t.indexOf(i)!==-1):!1},o.fnSort=function(t){return t=t?o.toLowerCase(t):"ascending",t==="ascending"?this.fnAscending:this.fnDescending},o.fnAscending=function(t,i){return c(t)&&c(i)||i==null?-1:typeof t=="string"?t.localeCompare(i):t==null?1:t-i},o.fnDescending=function(t,i){return c(t)&&c(i)?-1:i==null?1:typeof t=="string"?t.localeCompare(i)*-1:t==null?-1:i-t},o.extractFields=function(t,i){for(var e={},r=0;r<i.length;r++)e=this.setValue(i[r],this.getObject(i[r],t),e);return e},o.select=function(t,i){for(var e=[],r=0;r<t.length;r++)e.push(this.extractFields(t[r],i));return e},o.group=function(t,i,e,r,n,s,a){r=r||1;var l=t,h="GroupGuid";if(l.GroupGuid===la[h]){for(var u=function(S){if(c(n))l[S].items=p.group(l[S].items,i,e,l.level+1,null,s,a),l[S].count=l[S].items.length;else{var R=-1,L=n.filter(function(P){return P.key===l[S].key});R=n.indexOf(L[0]),l[S].items=p.group(l[S].items,i,e,l.level+1,n[R].items,s,a),l[S].count=n[R].count}},p=this,d=0;d<l.length;d++)u(d);return l.childLevels+=1,l}var f={},g=[];g.GroupGuid=la[h],g.level=r,g.childLevels=0,g.records=l;for(var v=function(S){var R=m.getVal(l,S,i);if(c(s)||(R=s(R,i)),!f[R]&&(f[R]={key:R,count:0,items:[],aggregates:{},field:i},g.push(f[R]),!c(n))){var L=n.filter(function(P){return P.key===f[R].key});f[R].count=L[0].count}f[R].count=c(n)?f[R].count+=1:f[R].count,(!a||a&&e.length)&&f[R].items.push(l[S])},m=this,y=0;y<l.length;y++)v(y);if(e&&e.length)for(var I=function(S){for(var R={},L=void 0,P=e,J=0;J<e.length;J++)if(L=o.aggregates[e[J].type],c(n))L&&(R[P[J].field+" - "+P[J].type]=L(g[S].items,P[J].field));else{var he=n.filter(function(pe){return pe.key===g[S].key});L&&(R[P[J].field+" - "+P[J].type]=L(he[0].items,P[J].field))}g[S].aggregates=R},y=0;y<g.length;y++)I(y);if(a&&g.length&&e.length)for(var y=0;y<g.length;y++)g[y].items=[];return l.length&&g||l},o.buildHierarchy=function(t,i,e,r,n){var s,a={},l;for(r.result&&(r=r.result),r.GroupGuid&&this.throwError("DataManager: Do not have support Grouping in hierarchy"),s=0;s<r.length;s++){var h=this.getObject(t,r[s]);l=a[h]||(a[h]=[]),l.push(r[s])}for(s=0;s<e.length;s++){var h=this.getObject(n||t,e[s]);e[s][i]=a[h]}},o.getFieldList=function(t,i,e){if(e===void 0&&(e=""),i==null)return this.getFieldList(t,[],e);for(var r=t,n=Object.keys(t),s=0,a=n;s<a.length;s++){var l=a[s];typeof r[l]=="object"&&!(r[l]instanceof Array)?this.getFieldList(r[l],i,e+l+"."):i.push(e+l)}return i},o.getObject=function(t,i){if(!t)return i;if(i){if(t.indexOf(".")===-1){var e=t.charAt(0).toLowerCase()+t.slice(1),r=t.charAt(0).toUpperCase()+t.slice(1);return c(i[t])?c(i[e])?c(i[r])?null:i[r]:i[e]:i[t]}for(var n=i,s=t.split("."),a=0;a<s.length&&n!=null;a++){if(n=n[s[a]],n===void 0){var l=s[a].charAt(0).toUpperCase()+s[a].slice(1);n=i[l]||i[l.charAt(0).toLowerCase()+l.slice(1)]||null}i=n}return n}},o.setValue=function(t,i,e){var r=t.toString().split("."),n=e||{},s=n,a,l=r.length,h;for(a=0;a<l;a++)h=r[a],a+1===l?s[h]=i===void 0?void 0:i:c(s[h])&&(s[h]={}),s=s[h];return n},o.sort=function(t,i,e){if(t.length<=1)return t;var r=parseInt((t.length/2).toString(),10),n=t.slice(0,r),s=t.slice(r);return n=this.sort(n,i,e),s=this.sort(s,i,e),this.merge(n,s,i,e)},o.ignoreDiacritics=function(t){if(typeof t!="string")return t;var i=t.split(""),e=i.map(function(r){return r in o.diacritics?o.diacritics[r]:r});return e.join("")},o.merge=function(t,i,e,r){for(var n=[],s;t.length>0||i.length>0;)t.length>0&&i.length>0?r?s=r(this.getVal(t,0,e),this.getVal(i,0,e),t[0],i[0])<=0?t:i:s=t[0][e]<t[0][e]?t:i:s=t.length>0?t:i,n.push(s.shift());return n},o.getVal=function(t,i,e){return e?this.getObject(e,t[i]):t[i]},o.toLowerCase=function(t){return t?typeof t=="string"?t.toLowerCase():t.toString():t===0||t===!1?t.toString():""},o.callAdaptorFunction=function(t,i,e,r){if(i in t){var n=t[i](e,r);c(n)||(e=n)}return e},o.getAddParams=function(t,i,e){var r={};return o.callAdaptorFunction(t,"addParams",{dm:i,query:e,params:e.params,reqParams:r}),r},o.isPlainObject=function(t){return!!t&&t.constructor===Object},o.isCors=function(){var t=null,i="XMLHttpRequest";try{t=new window[i]}catch{}return!!t&&"withCredentials"in t},o.getGuid=function(t){var i="0123456789abcdef",e;return(t||"")+"00000000-0000-4000-0000-000000000000".replace(/0/g,function(r,n){if("crypto"in window&&"getRandomValues"in crypto){var s=new Uint8Array(1);window.crypto.getRandomValues(s),e=s[0]%16|0}else e=Math.random()*16|0;return i[n===19?e&3|8:e]})},o.isNull=function(t){return t==null},o.getItemFromComparer=function(t,i,e){var r,n,s,a=0,l=typeof o.getVal(t,0,i)=="string";if(t.length)for(;c(r)&&a<t.length;)r=o.getVal(t,a,i),s=t[a++];for(;a<t.length;a++)n=o.getVal(t,a,i),!c(n)&&(l&&(r=+r,n=+n),e(r,n)>0&&(r=n,s=t[a]));return s},o.distinct=function(t,i,e){e=c(e)?!1:e;var r=[],n,s={};return t.forEach(function(a,l){n=typeof t[l]=="object"?o.getVal(t,l,i):t[l],n in s||(r.push(e?t[l]:n),s[n]=1)}),r},o.processData=function(t,i){var e=this.prepareQuery(t),r=new V(i);t.requiresCounts&&e.requiresCount();var n=r.executeLocal(e),s={result:t.requiresCounts?n.result:n,count:n.count,aggregates:JSON.stringify(n.aggregates)};return t.requiresCounts?s:n},o.prepareQuery=function(t){var i=this,e=new se;if(t.select&&e.select(t.select),t.where){var r=o.parse.parseJson(t.where);r.filter(function(s){if(c(s.condition))e.where(s.field,s.operator,s.value,s.ignoreCase,s.ignoreAccent);else{var a=[];s.field?a.push(new be(s.field,s.operator,s.value,s.ignoreCase,s.ignoreAccent)):a=a.concat(i.getPredicate(s.predicates)),s.condition==="or"?e.where(be.or(a)):s.condition==="and"&&e.where(be.and(a))}})}if(t.search){var n=o.parse.parseJson(t.search);n.filter(function(s){return e.search(s.key,s.fields,s.operator,s.ignoreCase,s.ignoreAccent)})}return t.aggregates&&t.aggregates.filter(function(s){return e.aggregate(s.type,s.field)}),t.sorted&&t.sorted.filter(function(s){return e.sortBy(s.name,s.direction)}),t.skip&&e.skip(t.skip),t.take&&e.take(t.take),t.group&&t.group.filter(function(s){return e.group(s)}),e},o.getPredicate=function(t){for(var i=[],e=0;e<t.length;e++){var r=t[e];if(r.field)i.push(new be(r.field,r.operator,r.value,r.ignoreCase,r.ignoreAccent));else{for(var n=[],s=this.getPredicate(r.predicates),a=0,l=Object.keys(s);a<l.length;a++){var h=l[a];n.push(s[h])}i.push(r.condition==="or"?be.or(n):be.and(n))}}return i},o.serverTimezoneOffset=null,o.timeZoneHandling=!0,o.throwError=function(t){try{throw new Error(t)}catch(i){throw i.message+`
`+i.stack}},o.aggregates={sum:function(t,i){for(var e=0,r,n=typeof o.getVal(t,0,i)!="number",s=0;s<t.length;s++)r=o.getVal(t,s,i),!isNaN(r)&&r!==null&&(n&&(r=+r),e+=r);return e},average:function(t,i){return o.aggregates.sum(t,i)/t.length},min:function(t,i){var e;return typeof i=="function"&&(e=i,i=null),o.getObject(i,o.getItemFromComparer(t,i,e||o.fnAscending))},max:function(t,i){var e;return typeof i=="function"&&(e=i,i=null),o.getObject(i,o.getItemFromComparer(t,i,e||o.fnDescending))},truecount:function(t,i){return new V(t).executeLocal(new se().where(i,"equal",!0,!0)).length},falsecount:function(t,i){return new V(t).executeLocal(new se().where(i,"equal",!1,!0)).length},count:function(t,i){return t.length}},o.operatorSymbols={"<":"lessthan",">":"greaterthan","<=":"lessthanorequal",">=":"greaterthanorequal","==":"equal","!=":"notequal","*=":"contains","$=":"endswith","^=":"startswith"},o.odBiOperator={"<":" lt ",">":" gt ","<=":" le ",">=":" ge ","==":" eq ","!=":" ne ",lessthan:" lt ",lessthanorequal:" le ",greaterthan:" gt ",greaterthanorequal:" ge ",equal:" eq ",notequal:" ne "},o.odUniOperator={"$=":"endswith","^=":"startswith","*=":"substringof",endswith:"endswith",startswith:"startswith",contains:"substringof",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not substringof",wildcard:"wildcard",like:"like"},o.odv4UniOperator={"$=":"endswith","^=":"startswith","*=":"contains",endswith:"endswith",startswith:"startswith",contains:"contains",doesnotendwith:"not endswith",doesnotstartwith:"not startswith",doesnotcontain:"not contains",wildcard:"wildcard",like:"like"},o.diacritics={"":"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A","":"A","":"A","":"AA",:"AE",:"AE",:"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B",:"B",:"B",:"B",:"B","":"B",:"B",:"B","":"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C",:"C","":"C","":"C","":"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D",:"D","":"D",:"DZ",:"DZ",:"Dz",:"Dz","":"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E","":"F",:"F",:"F",:"F","":"F","":"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"G","":"G","":"G","":"G","":"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H",:"H","":"H","":"H","":"H","":"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I","":"J",:"J",:"J","":"J","":"K",:"K",:"K",:"K",:"K",:"K",:"K",:"K","":"K","":"K","":"K","":"K","":"K","":"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L",:"L","":"L","":"L","":"L","":"L","":"L","":"L",:"LJ",:"Lj","":"M",:"M",:"M",:"M",:"M","":"M",:"M","":"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N",:"N","":"N",:"N","":"N","":"N",:"NJ",:"Nj","":"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O","":"O","":"O",:"OI","":"OO",:"OU","":"P",:"P",:"P",:"P",:"P","":"P","":"P","":"P","":"P","":"Q",:"Q","":"Q","":"Q","":"Q","":"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R",:"R","":"R","":"R","":"R","":"R","":"R","":"S",:"S","":"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"S","":"S","":"S","":"S","":"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T",:"T","":"T","":"T","":"TZ","":"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U","":"U","":"V",:"V",:"V",:"V",:"V","":"V","":"V","":"VY","":"W",:"W",:"W",:"W",:"W",:"W",:"W",:"W","":"W","":"X",:"X",:"X",:"X","":"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y","":"Y","":"Y","":"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z",:"Z","":"Z","":"Z","":"Z","":"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a","":"a",:"a","":"aa",:"ae",:"ae",:"ae","":"ao","":"au","":"av","":"av","":"ay","":"b",:"b",:"b",:"b",:"b",:"b",:"b",:"b","":"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c",:"c","":"c","":"c","":"c","":"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d",:"d","":"d",:"dz",:"dz","":"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e","":"e",:"e",:"e","":"f",:"f",:"f",:"f","":"f","":"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"g","":"g","":"g","":"g","":"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h",:"h","":"h","":"h",:"h",:"hv","":"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i","":"j",:"j",:"j",:"j","":"j","":"k",:"k",:"k",:"k",:"k",:"k",:"k",:"k","":"k","":"k","":"k","":"k","":"k","":"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l",:"l","":"l","":"l","":"l","":"l",:"lj","":"m",:"m",:"m",:"m",:"m",:"m",:"m","":"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n",:"n","":"n","":"n",:"nj","":"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o","":"o","":"o",:"o",:"oi",:"ou","":"oo","":"p",:"p",:"p",:"p",:"p","":"p","":"p","":"p","":"p","":"q",:"q","":"q","":"q","":"q","":"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r",:"r","":"r",:"r","":"r","":"r","":"r","":"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"s","":"s","":"s","":"s",:"s","":"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t",:"t","":"t","":"t","":"tz","":"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u","":"v",:"v",:"v",:"v",:"v","":"v",:"v","":"vy","":"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w",:"w","":"w","":"x",:"x",:"x",:"x","":"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y","":"y","":"y","":"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z",:"z","":"z","":"z","":"z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""},o.fnOperators={equal:function(t,i,e,r){return r&&(t=o.ignoreDiacritics(t),i=o.ignoreDiacritics(i)),e?o.toLowerCase(t)===o.toLowerCase(i):t===i},notequal:function(t,i,e,r){return r&&(t=o.ignoreDiacritics(t),i=o.ignoreDiacritics(i)),!o.fnOperators.equal(t,i,e)},lessthan:function(t,i,e){return e?o.toLowerCase(t)<o.toLowerCase(i):(c(t)&&(t=void 0),t<i)},greaterthan:function(t,i,e){return e?o.toLowerCase(t)>o.toLowerCase(i):t>i},lessthanorequal:function(t,i,e){return e?o.toLowerCase(t)<=o.toLowerCase(i):(c(t)&&(t=void 0),t<=i)},greaterthanorequal:function(t,i,e){return e?o.toLowerCase(t)>=o.toLowerCase(i):t>=i},contains:function(t,i,e,r){return r&&(t=o.ignoreDiacritics(t),i=o.ignoreDiacritics(i)),e?!c(t)&&!c(i)&&o.toLowerCase(t).indexOf(o.toLowerCase(i))!==-1:!c(t)&&!c(i)&&t.toString().indexOf(i)!==-1},doesnotcontain:function(t,i,e,r){return r&&(t=o.ignoreDiacritics(t),i=o.ignoreDiacritics(i)),e?!c(t)&&!c(i)&&o.toLowerCase(t).indexOf(o.toLowerCase(i))===-1:!c(t)&&!c(i)&&t.toString().indexOf(i)===-1},isnotnull:function(t){return t!=null},isnull:function(t){return t==null},startswith:function(t,i,e,r){return r&&(t=o.ignoreDiacritics(t),i=o.ignoreDiacritics(i)),e?t&&i&&o.startsWith(o.toLowerCase(t),o.toLowerCase(i)):t&&i&&o.startsWith(t,i)},doesnotstartwith:function(t,i,e,r){return r&&(t=o.ignoreDiacritics(t),i=o.ignoreDiacritics(i)),e?t&&i&&o.notStartsWith(o.toLowerCase(t),o.toLowerCase(i)):t&&i&&o.notStartsWith(t,i)},like:function(t,i,e,r){return r&&(t=o.ignoreDiacritics(t),i=o.ignoreDiacritics(i)),e?t&&i&&o.like(o.toLowerCase(t),o.toLowerCase(i)):t&&i&&o.like(t,i)},isempty:function(t){return t===void 0||t===""},isnotempty:function(t){return t!==void 0&&t!==""},wildcard:function(t,i,e,r){return r&&(t=o.ignoreDiacritics(t),i=o.ignoreDiacritics(i)),e?(t||typeof t=="boolean")&&i&&typeof t!="object"&&o.wildCard(o.toLowerCase(t),o.toLowerCase(i)):(t||typeof t=="boolean")&&i&&o.wildCard(t,i)},endswith:function(t,i,e,r){return r&&(t=o.ignoreDiacritics(t),i=o.ignoreDiacritics(i)),e?t&&i&&o.endsWith(o.toLowerCase(t),o.toLowerCase(i)):t&&i&&o.endsWith(t,i)},doesnotendwith:function(t,i,e,r){return r&&(t=o.ignoreDiacritics(t),i=o.ignoreDiacritics(i)),e?t&&i&&o.notEndsWith(o.toLowerCase(t),o.toLowerCase(i)):t&&i&&o.notEndsWith(t,i)},processSymbols:function(t){var i=o.operatorSymbols[t];if(i){var e=o.fnOperators[i];return e}return o.throwError("Query - Process Operator : Invalid operator")},processOperator:function(t){var i=o.fnOperators[t];return i||o.fnOperators.processSymbols(t)}},o.parse={parseJson:function(t){return typeof t=="string"&&(/^[\s]*\[|^[\s]*\{(.)+:/g.test(t)||t.indexOf('"')===-1)?t=JSON.parse(t,o.parse.jsonReviver):t instanceof Array?o.parse.iterateAndReviveArray(t):typeof t=="object"&&t!==null&&o.parse.iterateAndReviveJson(t),t},iterateAndReviveArray:function(t){for(var i=0;i<t.length;i++)typeof t[i]=="object"&&t[i]!==null?o.parse.iterateAndReviveJson(t[i]):typeof t[i]=="string"&&(!/^[\s]*\[|^[\s]*\{(.)+:|\"/g.test(t[i])||t[i].toString().indexOf('"')===-1)?t[i]=o.parse.jsonReviver("",t[i]):t[i]=o.parse.parseJson(t[i])},iterateAndReviveJson:function(t){for(var i,e=Object.keys(t),r=0,n=e;r<n.length;r++){var s=n[r];o.startsWith(s,"__")||(i=t[s],typeof i=="object"?i instanceof Array?o.parse.iterateAndReviveArray(i):i&&o.parse.iterateAndReviveJson(i):t[s]=o.parse.jsonReviver(t[s],i))}},jsonReviver:function(t,i){if(typeof i=="string"){var e=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i),r=o.timeZoneHandling?o.serverTimezoneOffset:null;if(e)return o.dateParse.toTimeZone(new Date(parseInt(e[1],10)),r,!0);if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var n=i.indexOf("Z")>-1||i.indexOf("z")>-1,s=i.split(/[^0-9.]/);if(n){if(s[5].indexOf(".")>-1){var a=s[5].split(".");s[5]=a[0],s[6]=new Date(i).getUTCMilliseconds().toString()}else s[6]="00";i=o.dateParse.toTimeZone(new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5]?s[5]:"00",10),parseInt(s[6],10)),o.serverTimezoneOffset,!1)}else{var l=new Date(parseInt(s[0],10),parseInt(s[1],10)-1,parseInt(s[2],10),parseInt(s[3],10),parseInt(s[4],10),parseInt(s[5]?s[5]:"00",10)),h=parseInt(s[6],10),u=parseInt(s[7],10);if(isNaN(h)&&isNaN(u))return l;i.indexOf("+")>-1?l.setHours(l.getHours()-h,l.getMinutes()-u):l.setHours(l.getHours()+h,l.getMinutes()+u),i=o.dateParse.toTimeZone(l,o.serverTimezoneOffset,!1)}o.serverTimezoneOffset==null&&(i=o.dateParse.addSelfOffset(i))}}return i},isJson:function(t){return typeof t[0]=="string"?t:o.parse.parseJson(t)},isGuid:function(t){var i=/[A-Fa-f0-9]{8}(?:-[A-Fa-f0-9]{4}){3}-[A-Fa-f0-9]{12}/i,e=i.exec(t);return e!=null},replacer:function(t,i){return o.isPlainObject(t)?o.parse.jsonReplacer(t,i):t instanceof Array?o.parse.arrayReplacer(t):t instanceof Date?o.parse.jsonReplacer({val:t},i).val:t},jsonReplacer:function(t,i){for(var e,r=Object.keys(t),n=0,s=r;n<s.length;n++){var a=s[n];if(e=t[a],e instanceof Date){var l=e;o.serverTimezoneOffset==null?t[a]=o.dateParse.toTimeZone(l,null).toJSON():(l=new Date(+l+o.serverTimezoneOffset*36e5),t[a]=o.dateParse.toTimeZone(o.dateParse.addSelfOffset(l),null).toJSON())}}return t},arrayReplacer:function(t){for(var i=0;i<t.length;i++)o.isPlainObject(t[i])?t[i]=o.parse.jsonReplacer(t[i]):t[i]instanceof Date&&(t[i]=o.parse.jsonReplacer({date:t[i]}).date);return t},jsonDateReplacer:function(t,i){if(t==="value"&&i){if(typeof i=="string"){var e=/^\/Date\(([+-]?[0-9]+)([+-][0-9]{4})?\)\/$/.exec(i);if(e)i=o.dateParse.toTimeZone(new Date(parseInt(e[1],10)),null,!0);else if(/^(\d{4}\-\d\d\-\d\d([tT][\d:\.]*){1})([zZ]|([+\-])(\d\d):?(\d\d))?$/.test(i)){var r=i.split(/[^0-9]/);i=o.dateParse.toTimeZone(new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10),parseInt(r[3],10),parseInt(r[4],10),parseInt(r[5],10)),null,!0)}}if(i instanceof Date)return i=o.dateParse.addSelfOffset(i),o.serverTimezoneOffset===null?o.dateParse.toTimeZone(o.dateParse.addSelfOffset(i),null).toJSON():(i=o.dateParse.toTimeZone(i,i.getTimezoneOffset()/60-o.serverTimezoneOffset,!1),i.toJSON())}return i}},o.dateParse={addSelfOffset:function(t){return new Date(+t-t.getTimezoneOffset()*6e4)},toUTC:function(t){return new Date(+t+t.getTimezoneOffset()*6e4)},toTimeZone:function(t,i,e){if(i===null)return t;var r=e?o.dateParse.toUTC(t):t;return new Date(+r-i*36e5)},toLocalTime:function(t){var i=t,e=-i.getTimezoneOffset(),r=e>=0?"+":"-",n=function(a){var l=Math.floor(Math.abs(a));return(l<10?"0":"")+l},s=i.getFullYear()+"-"+n(i.getMonth()+1)+"-"+n(i.getDate())+"T"+n(i.getHours())+":"+n(i.getMinutes())+":"+n(i.getSeconds())+r+n(e/60)+":"+n(e%60);return s}},o}(),oi=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),gc={GroupGuid:"{271bbba0-1ee7}"},Ml=function(){function o(t){this.options={from:"table",requestType:"json",sortBy:"sorted",select:"select",skip:"skip",group:"group",take:"take",search:"search",count:"requiresCounts",where:"where",aggregates:"aggregates",expand:"expand"},this.type=o,this.dataSource=t,this.pvt={}}return o.prototype.processResponse=function(t,i,e,r){return t},o}(),ks=function(o){oi(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.processQuery=function(i,e){for(var r=i.dataSource.json.slice(0),n=r.length,s=!0,a,l,h={},u=0,p=[],d,f=0;f<e.lazyLoad.length;f++)u++,h[e.lazyLoad[f].key]=e.lazyLoad[f].value;for(var g={},f=0;f<e.queries.length;f++){if(l=e.queries[f],(l.fn==="onPage"||l.fn==="onGroup")&&e.lazyLoad.length){l.fn==="onGroup"&&p.push(l.e),l.fn==="onPage"&&(d=l.e);continue}a=this[l.fn].call(this,r,l.e,e),l.fn==="onAggregates"?g[l.e.field+" - "+l.e.type]=a:r=a!==void 0?a:r,(l.fn==="onPage"||l.fn==="onSkip"||l.fn==="onTake"||l.fn==="onRange")&&(s=!1),s&&(n=r.length)}if(u){var v={query:e,lazyLoad:h,result:r,group:p,page:d},m=this.lazyLoadGroup(v);r=m.result,n=m.count}return e.isCountRequired&&(r={result:r,count:n,aggregates:g}),r},t.prototype.lazyLoadGroup=function(i){var e=0,r=this.getAggregate(i.query),n=i.result;if(c(i.lazyLoad.onDemandGroupInfo)){var l=i.group[0].fieldName;n=A.group(n,l,r,null,null,i.group[0].comparer,!0),e=n.length;var h=n;i.page&&(n=this.onPage(n,i.page,i.query)),this.formGroupResult(n,h)}else{for(var s=i.lazyLoad.onDemandGroupInfo,a=s.where.length-1;a>=0;a--)n=this.onWhere(n,s.where[a]);if(i.group.length!==s.level){var l=i.group[s.level].fieldName;n=A.group(n,l,r,null,null,i.group[0].comparer,!0)}e=n.length;var h=n;n=n.slice(s.skip),n=n.slice(0,s.take),i.group.length!==s.level&&this.formGroupResult(n,h)}return{result:n,count:e}},t.prototype.formGroupResult=function(i,e){if(i.length&&e.length){var r="GroupGuid",n="childLevels",s="level",a="records";i[r]=e[r],i[n]=e[n],i[s]=e[s],i[a]=e[a]}return i},t.prototype.getAggregate=function(i){var e=se.filterQueries(i.queries,"onAggregates"),r=[];if(e.length)for(var n=void 0,s=0;s<e.length;s++)n=e[s].e,r.push({type:n.type,field:A.getValue(n.field,i)});return r},t.prototype.batchRequest=function(i,e,r){var n,s=e.deletedRecords.length;for(n=0;n<e.addedRecords.length;n++)this.insert(i,e.addedRecords[n]);for(n=0;n<e.changedRecords.length;n++)this.update(i,r.key,e.changedRecords[n]);for(n=0;n<s;n++)this.remove(i,r.key,e.deletedRecords[n]);return e},t.prototype.onWhere=function(i,e){return!i||!i.length?i:i.filter(function(r){if(e)return e.validate(r)})},t.prototype.onAggregates=function(i,e){var r=A.aggregates[e.type];return!i||!r||i.length===0?null:r(i,e.field)},t.prototype.onSearch=function(i,e){return!i||!i.length?i:(e.fieldNames.length===0&&A.getFieldList(i[0],e.fieldNames),i.filter(function(r){for(var n=0;n<e.fieldNames.length;n++)if(e.comparer.call(r,A.getObject(e.fieldNames[n],r),e.searchKey,e.ignoreCase,e.ignoreAccent))return!0;return!1}))},t.prototype.onSortBy=function(i,e,r){if(!i||!i.length)return i;var n,s=A.getValue(e.fieldName,r);if(!s)return i.sort(e.comparer);if(s instanceof Array){s=s.slice(0);for(var a=s.length-1;a>=0;a--)s[a]&&(n=e.comparer,A.endsWith(s[a]," desc")&&(n=A.fnSort("descending"),s[a]=s[a].replace(" desc","")),i=A.sort(i,s[a],n));return i}return A.sort(i,s,e.comparer)},t.prototype.onGroup=function(i,e,r){if(!i||!i.length)return i;var n=this.getAggregate(r);return A.group(i,A.getValue(e.fieldName,r),n,null,null,e.comparer)},t.prototype.onPage=function(i,e,r){var n=A.getValue(e.pageSize,r),s=(A.getValue(e.pageIndex,r)-1)*n,a=s+n;return!i||!i.length?i:i.slice(s,a)},t.prototype.onRange=function(i,e){return!i||!i.length?i:i.slice(A.getValue(e.start),A.getValue(e.end))},t.prototype.onTake=function(i,e){return!i||!i.length?i:i.slice(0,A.getValue(e.nos))},t.prototype.onSkip=function(i,e){return!i||!i.length?i:i.slice(A.getValue(e.nos))},t.prototype.onSelect=function(i,e){return!i||!i.length?i:A.select(i,A.getValue(e.fieldNames))},t.prototype.insert=function(i,e,r,n,s){return c(s)?i.dataSource.json.push(e):i.dataSource.json.splice(s,0,e)},t.prototype.remove=function(i,e,r,n){var s=i.dataSource.json,a;for(typeof r=="object"&&!(r instanceof Date)&&(r=A.getObject(e,r)),a=0;a<s.length&&A.getObject(e,s[a])!==r;a++);return a!==s.length?s.splice(a,1):null},t.prototype.update=function(i,e,r,n){var s=i.dataSource.json,a,l;for(c(e)||(l=N(e,r)),a=0;a<s.length&&!(!c(e)&&N(e,s[a])===l);a++);return a<s.length?ei(s[a],r):null},t}(Ml),Dt=function(o){oi(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.processQuery=function(i,e,r){var n=this.getQueryRequest(e),s=se.filterQueryLists(e.queries,["onSelect","onPage","onSkip","onTake","onRange"]),a=e.params,l=i.dataSource.url,h,u,p=null,d=this.options,f={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};"onPage"in s?(h=s.onPage,u=A.getValue(h.pageIndex,e),p=A.getValue(h.pageSize,e),u=(u-1)*p):"onRange"in s&&(h=s.onRange,u=h.start,p=h.end-h.start);for(var g=0;g<n.sorts.length;g++)h=A.getValue(n.sorts[g].e.fieldName,e),f.sorts.push(A.callAdaptorFunction(this,"onEachSort",{name:h,direction:n.sorts[g].e.direction},e));r&&(h=this.getFiltersFrom(r,e),h&&f.filters.push(A.callAdaptorFunction(this,"onEachWhere",h.toJson(),e)));for(var g=0;g<n.filters.length;g++){var v=A.callAdaptorFunction(this,"onEachWhere",n.filters[g].e.toJson(),e);this.getModuleName&&this.getModuleName()==="ODataV4Adaptor"&&!c(n.filters[g].e.key)&&n.filters.length>1&&(v="("+v+")"),f.filters.push(v);for(var m=typeof f.filters[g]=="object"?Object.keys(f.filters[g]):[],y=0,I=m;y<I.length;y++){var S=I[y];A.isNull(f[S])&&delete f[S]}}for(var g=0;g<n.searches.length;g++)h=n.searches[g].e,f.searches.push(A.callAdaptorFunction(this,"onEachSearch",{fields:h.fieldNames,operator:h.operator,key:h.searchKey,ignoreCase:h.ignoreCase},e));for(var g=0;g<n.groups.length;g++)f.groups.push(A.getValue(n.groups[g].e.fieldName,e));for(var g=0;g<n.aggregates.length;g++)h=n.aggregates[g].e,f.aggregates.push({type:h.type,field:A.getValue(h.field,e)});var R={};if(this.getRequestQuery(d,e,s,f,R),A.callAdaptorFunction(this,"addParams",{dm:i,query:e,params:a,reqParams:R}),e.lazyLoad.length)for(var g=0;g<e.lazyLoad.length;g++)R[e.lazyLoad[g].key]=e.lazyLoad[g].value;for(var L=Object.keys(R),P=0,J=L;P<J.length;P++){var S=J[P];(A.isNull(R[S])||R[S]===""||R[S].length===0)&&delete R[S]}!(d.skip in R&&d.take in R)&&p!==null&&(R[d.skip]=A.callAdaptorFunction(this,"onSkip",u,e),R[d.take]=A.callAdaptorFunction(this,"onTake",p,e));var he=this.pvt;return this.pvt={},this.options.requestType==="json"?{data:JSON.stringify(R,A.parse.jsonDateReplacer),url:l,pvtData:he,type:"POST",contentType:"application/json; charset=utf-8"}:(h=this.convertToQueryString(R,e,i),h=(i.dataSource.url.indexOf("?")!==-1?"&":"/")+h,{type:"GET",url:h.length?l.replace(/\/*$/,h):l,pvtData:he})},t.prototype.getRequestQuery=function(i,e,r,n,s){var a="param",l=s;l[i.from]=e.fromTable,i.apply&&e.distincts.length&&(l[i.apply]="onDistinct"in this?A.callAdaptorFunction(this,"onDistinct",e.distincts):""),!e.distincts.length&&i.expand&&(l[i.expand]="onExpand"in this&&"onSelect"in r?A.callAdaptorFunction(this,"onExpand",{selects:A.getValue(r.onSelect.fieldNames,e),expands:e.expands},e):e.expands),l[i.select]="onSelect"in r&&!e.distincts.length?A.callAdaptorFunction(this,"onSelect",A.getValue(r.onSelect.fieldNames,e),e):"",l[i.count]=e.isCountRequired?A.callAdaptorFunction(this,"onCount",e.isCountRequired,e):"",l[i.search]=n.searches.length?A.callAdaptorFunction(this,"onSearch",n.searches,e):"",l[i.skip]="onSkip"in r?A.callAdaptorFunction(this,"onSkip",A.getValue(r.onSkip.nos,e),e):"",l[i.take]="onTake"in r?A.callAdaptorFunction(this,"onTake",A.getValue(r.onTake.nos,e),e):"",l[i.where]=n.filters.length||n.searches.length?A.callAdaptorFunction(this,"onWhere",n.filters,e):"",l[i.sortBy]=n.sorts.length?A.callAdaptorFunction(this,"onSortBy",n.sorts,e):"",l[i.group]=n.groups.length?A.callAdaptorFunction(this,"onGroup",n.groups,e):"",l[i.aggregates]=n.aggregates.length?A.callAdaptorFunction(this,"onAggregates",n.aggregates,e):"",l[a]=[]},t.prototype.convertToQueryString=function(i,e,r){return""},t.prototype.processResponse=function(i,e,r,n,s,a){if(n&&n.headers.get("Content-Type")&&n.headers.get("Content-Type").indexOf("application/json")!==-1){var l=A.timeZoneHandling;e&&!e.timeZoneHandling&&(A.timeZoneHandling=!1),i=A.parse.parseJson(i),A.timeZoneHandling=l}var h=s,u=h.pvtData||{},p=i?i.groupDs:[];if(n&&n.headers.get("Content-Type")&&n.headers.get("Content-Type").indexOf("xml")!==-1)return r.isCountRequired?{result:[],count:0}:[];var d=JSON.parse(h.data);if(d&&d.action==="batch"&&i&&i.addedRecords)return a.addedRecords=i.addedRecords,a;i&&i.d&&(i=i.d);var f={};i&&"count"in i&&(f.count=i.count),f.result=i&&i.result?i.result:i;var g=!1;if(Array.isArray(i.result)&&i.result.length){var v="key",m="value",y="level";if(c(i.result[0][v])||(f.result=this.formRemoteGroupedData(f.result,1,u.groups.length-1)),r&&r.lazyLoad.length&&u.groups.length){for(var I=0;I<r.lazyLoad.length;I++)if(r.lazyLoad[I][v]==="onDemandGroupInfo"){var S=r.lazyLoad[I][m][y];u.groups.length===S&&(g=!0)}}}return g||this.getAggregateResult(u,i,f,p,r),A.isNull(f.count)?f.result:{result:f.result,count:f.count,aggregates:f.aggregates}},t.prototype.formRemoteGroupedData=function(i,e,r){for(var n=0;n<i.length;n++)i[n].items.length&&Object.keys(i[n].items[0]).indexOf("key")>-1&&this.formRemoteGroupedData(i[n].items,e+1,r-1);var s="GroupGuid",a="childLevels",l="level",h="records";return i[s]=gc[s],i[l]=e,i[a]=r,i[h]=i[0].items.length?this.getGroupedRecords(i,!c(i[0].items[h])):[],i},t.prototype.getGroupedRecords=function(i,e){for(var r=[],n="records",s=0;s<i.length;s++)if(e)r=r.concat(i[s].items[n]);else for(var a=0;a<i[s].items.length;a++)r.push(i[s].items[a]);return r},t.prototype.onGroup=function(i){return this.pvt.groups=i,i},t.prototype.onAggregates=function(i){this.pvt.aggregates=i},t.prototype.batchRequest=function(i,e,r,n,s){var a,l;return{type:"POST",url:i.dataSource.batchUrl||i.dataSource.crudUrl||i.dataSource.removeUrl||i.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(_({},{changed:e.changedRecords,added:e.addedRecords,deleted:e.deletedRecords,action:"batch",table:r[a],key:r[l]},A.getAddParams(this,i,n)))}},t.prototype.beforeSend=function(i,e){},t.prototype.insert=function(i,e,r,n){return{url:i.dataSource.insertUrl||i.dataSource.crudUrl||i.dataSource.url,data:JSON.stringify(_({},{value:e,table:r,action:"insert"},A.getAddParams(this,i,n)))}},t.prototype.remove=function(i,e,r,n,s){return{type:"POST",url:i.dataSource.removeUrl||i.dataSource.crudUrl||i.dataSource.url,data:JSON.stringify(_({},{key:r,keyColumn:e,table:n,action:"remove"},A.getAddParams(this,i,s)))}},t.prototype.update=function(i,e,r,n,s){return{type:"POST",url:i.dataSource.updateUrl||i.dataSource.crudUrl||i.dataSource.url,data:JSON.stringify(_({},{value:r,action:"update",keyColumn:e,key:A.getObject(e,r),table:n},A.getAddParams(this,i,s)))}},t.prototype.getFiltersFrom=function(i,e){var r=e.fKey,n,s=r,a=e.key,l=[];typeof i[0]!="object"&&(s=null);for(var h=0;h<i.length;h++)typeof i[0]=="object"?n=A.getObject(a||s,i[h]):n=i[h],l.push(new be(r,"equal",n));return be.or(l)},t.prototype.getAggregateResult=function(i,e,r,n,s){var a=e;if(e&&e.result&&(a=e.result),i&&i.aggregates&&i.aggregates.length){var l=i.aggregates,h=void 0,u=a,p={};e.aggregate&&(u=e.aggregate);for(var d=0;d<l.length;d++)h=A.aggregates[l[d].type],h&&(p[l[d].field+" - "+l[d].type]=h(u,l[d].field));r.aggregates=p}var f="key",g=Array.isArray(e.result)&&e.result.length&&!c(e.result[0][f]);if(i&&i.groups&&i.groups.length&&!g){for(var v=i.groups,d=0;d<v.length;d++){var m=null;c(n)||(n=A.group(n,v[d]));var y=se.filterQueries(s.queries,"onGroup")[d].e;a=A.group(a,v[d],i.aggregates,m,n,y.comparer)}r.result=a}return r},t.prototype.getQueryRequest=function(i){var e={sorts:[],groups:[],filters:[],searches:[],aggregates:[]};return e.sorts=se.filterQueries(i.queries,"onSortBy"),e.groups=se.filterQueries(i.queries,"onGroup"),e.filters=se.filterQueries(i.queries,"onWhere"),e.searches=se.filterQueries(i.queries,"onSearch"),e.aggregates=se.filterQueries(i.queries,"onAggregates"),e},t.prototype.addParams=function(i){var e=i.reqParams;i.params.length&&(e.params={});for(var r=0,n=i.params;r<n.length;r++){var s=n[r];if(e[s.key])throw new Error("Query() - addParams: Custom Param is conflicting other request arguments");e[s.key]=s.value,s.fn&&(e[s.key]=s.fn.call(i.query,s.key,i.query,i.dm)),e.params[s.key]=e[s.key]}},t}(Ml),$i=function(o){oi(t,o);function t(i){var e=o.call(this)||this;return e.options=_({},e.options,{requestType:"get",accept:"application/json;odata=light;q=1,application/json;odata=verbose;q=0.5",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$inlinecount",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:`Content-Type: application/http
Content-Transfer-Encoding: binary `,batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PUT"}),_(e.options,i||{}),e}return t.prototype.getModuleName=function(){return"ODataAdaptor"},t.prototype.onPredicate=function(i,e,r){var n="",s,a,l=i.value,h=typeof l,u=i.field?t.getField(i.field):null;if(l instanceof Date&&(l="datetime'"+A.parse.replacer(l)+"'"),h==="string"&&(l=l.replace(/'/g,"''"),i.ignoreCase&&(l=l.toLowerCase()),i.operator!=="like"&&(l=encodeURIComponent(l)),i.operator!=="wildcard"&&i.operator!=="like"&&(l="'"+l+"'"),r&&(u="cast("+u+", 'Edm.String')"),A.parse.isGuid(l)&&(a="guid"),i.ignoreCase&&(a||(u="tolower("+u+")"),l=l.toLowerCase())),i.operator==="isempty"||i.operator==="isnull"||i.operator==="isnotempty"||i.operator==="isnotnull"?(s=i.operator.indexOf("isnot")!==-1?A.odBiOperator.notequal:A.odBiOperator.equal,l=i.operator==="isnull"||i.operator==="isnotnull"?null:"''"):s=A.odBiOperator[i.operator],s)return n+=u,n+=s,a&&(n+=a),n+l;if(!c(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?s=A.odv4UniOperator[i.operator]:s=A.odUniOperator[i.operator],s==="like")l=l,l.indexOf("%")!==-1&&(l.charAt(0)==="%"&&l.lastIndexOf("%")<2?(l=l.substring(1,l.length),s=!c(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.startswith:A.odUniOperator.startswith):l.charAt(l.length-1)==="%"&&l.indexOf("%")>l.length-3?(l=l.substring(0,l.length-1),s=!c(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.endswith:A.odUniOperator.endswith):l.lastIndexOf("%")!==l.indexOf("%")&&l.lastIndexOf("%")>l.indexOf("%")+1?(l=l.substring(l.indexOf("%")+1,l.lastIndexOf("%")),s=!c(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains):s=!c(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains),l=encodeURIComponent(l),l="'"+l+"'";else if(s==="wildcard")if(l=l,l.indexOf("*")!==-1){var p=l.split("*"),d=void 0,f=0;if(l.indexOf("*")!==0&&p[0].indexOf("%3f")===-1&&p[0].indexOf("?")===-1&&(d=p[0],d="'"+d+"'",s=!c(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.startswith:A.odUniOperator.startswith,n+=s+"(",n+=u+",",a&&(n+=a),n+=d+")",f++),l.lastIndexOf("*")!==l.length-1&&p[p.length-1].indexOf("%3f")===-1&&p[p.length-1].indexOf("?")===-1&&(d=p[p.length-1],d="'"+d+"'",s=!c(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.endswith:A.odUniOperator.endswith,f>0&&(n+=" and "),n+=s+"(",n+=u+",",a&&(n+=a),n+=d+")",f++),p.length>2){for(var g=1;g<p.length-1;g++)if(p[g].indexOf("%3f")===-1&&p[g].indexOf("?")===-1){if(d=p[g],d="'"+d+"'",s=!c(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains,f>0&&(n+=" and "),s==="substringof"||s==="not substringof"){var v=d;d=u,u=v}n+=s+"(",n+=u+",",a&&(n+=a),n+=d+")",f++}}f===0?(s=!c(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains,(l.indexOf("?")!==-1||l.indexOf("%3f")!==-1)&&(l=l.indexOf("?")!==-1?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'"):s="wildcard"}else s=!c(this.getModuleName)&&this.getModuleName()==="ODataV4Adaptor"?A.odv4UniOperator.contains:A.odUniOperator.contains,(l.indexOf("?")!==-1||l.indexOf("%3f")!==-1)&&(l=l.indexOf("?")!==-1?l.split("?").join(""):l.split("%3f").join("")),l="'"+l+"'";if(s==="substringof"||s==="not substringof"){var v=l;l=u,u=v}return s!=="wildcard"&&(n+=s+"(",n+=u+",",a&&(n+=a),n+=l+")"),n},t.prototype.addParams=function(i){o.prototype.addParams.call(this,i),delete i.reqParams.params},t.prototype.onComplexPredicate=function(i,e,r){for(var n=[],s=0;s<i.predicates.length;s++)n.push("("+this.onEachWhere(i.predicates[s],e,r)+")");return n.join(" "+i.condition+" ")},t.prototype.onEachWhere=function(i,e,r){return i.isComplex?this.onComplexPredicate(i,e,r):this.onPredicate(i,e,r)},t.prototype.onWhere=function(i){return this.pvt.search&&i.push(this.onEachWhere(this.pvt.search,null,!0)),i.join(" and ")},t.prototype.onEachSearch=function(i){i.fields&&i.fields.length===0&&A.throwError("Query() - Search : oData search requires list of field names to search");for(var e=this.pvt.search||[],r=0;r<i.fields.length;r++)e.push(new be(i.fields[r],i.operator,i.key,i.ignoreCase));this.pvt.search=e},t.prototype.onSearch=function(i){return this.pvt.search=be.or(this.pvt.search),""},t.prototype.onEachSort=function(i){var e=[];if(i.name instanceof Array)for(var r=0;r<i.name.length;r++)e.push(t.getField(i.name[r])+(i.direction==="descending"?" desc":""));else e.push(t.getField(i.name)+(i.direction==="descending"?" desc":""));return e.join(",")},t.prototype.onSortBy=function(i){return i.reverse().join(",")},t.prototype.onGroup=function(i){return this.pvt.groups=i,[]},t.prototype.onSelect=function(i){for(var e=0;e<i.length;e++)i[e]=t.getField(i[e]);return i.join(",")},t.prototype.onAggregates=function(i){return this.pvt.aggregates=i,""},t.prototype.onCount=function(i){return i===!0?"allpages":""},t.prototype.beforeSend=function(i,e,r){A.endsWith(r.url,this.options.batch)&&r.type.toLowerCase()==="post"?(e.headers.set("Accept",this.options.multipartAccept),e.headers.set("DataServiceVersion","2.0")):e.headers.set("Accept",this.options.accept),e.headers.set("DataServiceVersion","2.0"),e.headers.set("MaxDataServiceVersion","2.0")},t.prototype.processResponse=function(i,e,r,n,s,a){var l="odata.metadata";if(s&&s.type==="GET"&&!this.rootUrl&&i[l]){var h=i[l].split("/$metadata#");this.rootUrl=h[0],this.resourceTableName=h[1]}var u="pvtData";if(!c(i.d)){var p=r&&r.isCountRequired?i.d.results:i.d,d="__metadata";if(!c(p))for(var f=0;f<p.length;f++)c(p[f][d])||delete p[f][d]}var g=s&&s[u],v=this.processBatchResponse(i,r,n,s,a);if(v)return v;var m=n&&s.fetchRequest.headers.get("DataServiceVersion"),y=null,I=m&&parseInt(m,10)||2;if(r&&r.isCountRequired){var S="__count";(i[S]||i["odata.count"])&&(y=i[S]||i["odata.count"]),i.d&&(i=i.d),(i[S]||i["odata.count"])&&(y=i[S]||i["odata.count"])}I===3&&i.value&&(i=i.value),i.d&&(i=i.d),I<3&&i.results&&(i=i.results);var R={};return R.count=y,R.result=i,this.getAggregateResult(g,i,R,null,r),A.isNull(y)?R.result:{result:R.result,count:R.count,aggregates:R.aggregates}},t.prototype.convertToQueryString=function(i,e,r){var n=[],s="table",a=i[s]||"",l="$format";delete i[s],r.dataSource.requiresFormat&&(i[l]="json");for(var h=Object.keys(i),u=0,p=h;u<p.length;u++){var d=p[u];n.push(d+"="+i[d])}return n=n.join("&"),r.dataSource.url&&r.dataSource.url.indexOf("?")!==-1&&!a?n:n.length?a+"?"+n:a||""},t.prototype.localTimeReplacer=function(i,e){for(var r=0,n=c(e)?[]:Object.keys(e);r<n.length;r++){var s=n[r];e[s]instanceof Date&&(e[s]=A.dateParse.toLocalTime(e[s]))}return e},t.prototype.insert=function(i,e,r){return{url:(i.dataSource.insertUrl||i.dataSource.url).replace(/\/*$/,r?"/"+r:""),data:JSON.stringify(e,this.options.localTime?this.localTimeReplacer:null)}},t.prototype.remove=function(i,e,r,n){var s;return typeof r=="string"&&!A.parse.isGuid(r)?s="('"+r+"')":s="("+r+")",{type:"DELETE",url:(i.dataSource.removeUrl||i.dataSource.url).replace(/\/*$/,n?"/"+n:"")+s}},t.prototype.update=function(i,e,r,n,s,a){this.options.updateType==="PATCH"&&!c(a)&&(r=this.compareAndRemove(r,a,e));var l;return typeof r[e]=="string"&&!A.parse.isGuid(r[e])?l="('"+r[e]+"')":l="("+r[e]+")",{type:this.options.updateType,url:(i.dataSource.updateUrl||i.dataSource.url).replace(/\/*$/,n?"/"+n:"")+l,data:JSON.stringify(r,this.options.localTime?this.localTimeReplacer:null),accept:this.options.accept}},t.prototype.batchRequest=function(i,e,r,n,s){var a=r.guid=A.getGuid(this.options.batchPre),l=this.rootUrl?this.rootUrl+"/"+this.options.batch:i.dataSource.url.replace(/\/*$/,"/"+this.options.batch);r.url=this.resourceTableName?this.resourceTableName:r.url;var h={url:r.url,key:r.key,cid:1,cSet:A.getGuid(this.options.changeSet)},u="--"+a+`
`;return u+="Content-Type: multipart/mixed; boundary="+h.cSet.replace("--","")+`
`,this.pvt.changeSet=0,u+=this.generateInsertRequest(e.addedRecords,h,i),u+=this.generateUpdateRequest(e.changedRecords,h,i,s?s.changedRecords:[]),u+=this.generateDeleteRequest(e.deletedRecords,h,i),u+=h.cSet+`--
`,u+="--"+a+"--",{type:"POST",url:l,dataType:"json",contentType:"multipart/mixed; charset=UTF-8;boundary="+a,data:u}},t.prototype.generateDeleteRequest=function(i,e,r){if(!i)return"";var n="",s={method:"DELETE ",url:function(a,l,h){var u=A.getObject(h,a[l]);if(typeof u=="number"||A.parse.isGuid(u))return"("+u+")";if(u instanceof Date){var p=a[l][h];return"("+p.toJSON()+")"}else return"('"+u+"')"},data:function(a,l){return""}};return n=this.generateBodyContent(i,e,s,r),n+`
`},t.prototype.generateInsertRequest=function(i,e,r){if(!i)return"";var n="",s={method:"POST ",url:function(a,l,h){return""},data:function(a,l){return JSON.stringify(a[l])+`

`}};return n=this.generateBodyContent(i,e,s,r),n},t.prototype.generateUpdateRequest=function(i,e,r,n){var s=this;if(!i)return"";var a="";i.forEach(function(h){return h=s.compareAndRemove(h,n.filter(function(u){return A.getObject(e.key,u)===A.getObject(e.key,h)})[0],e.key)});var l={method:this.options.updateType+" ",url:function(h,u,p){if(typeof h[u][p]=="number"||A.parse.isGuid(h[u][p]))return"("+h[u][p]+")";if(h[u][p]instanceof Date){var d=h[u][p];return"("+d.toJSON()+")"}else return"('"+h[u][p]+"')"},data:function(h,u){return JSON.stringify(h[u])+`

`}};return a=this.generateBodyContent(i,e,l,r),a},t.getField=function(i){return i.replace(/\./g,"/")},t.prototype.generateBodyContent=function(i,e,r,n){for(var s="",a=0;a<i.length;a++)s+=`
`+e.cSet+`
`,s+=this.options.changeSetContent+`

`,s+=r.method,r.method==="POST "?s+=(n.dataSource.insertUrl||n.dataSource.crudUrl||e.url)+r.url(i,a,e.key)+` HTTP/1.1
`:r.method==="PUT "||r.method==="PATCH "?s+=(n.dataSource.updateUrl||n.dataSource.crudUrl||e.url)+r.url(i,a,e.key)+` HTTP/1.1
`:r.method==="DELETE "&&(s+=(n.dataSource.removeUrl||n.dataSource.crudUrl||e.url)+r.url(i,a,e.key)+` HTTP/1.1
`),s+="Accept: "+this.options.accept+`
`,s+="Content-Id: "+this.pvt.changeSet+++`
`,s+=this.options.batchChangeSetContentType+`
`,c(i[a]["@odata.etag"])?s+=`
`:(s+="If-Match: "+i[a]["@odata.etag"]+`

`,delete i[a]["@odata.etag"]),s+=r.data(i,a);return s},t.prototype.processBatchResponse=function(i,e,r,n,s){if(r&&r.headers.get("Content-Type")&&r.headers.get("Content-Type").indexOf("xml")!==-1)return e.isCountRequired?{result:[],count:0}:[];if(n&&this.options.batch&&A.endsWith(n.url,this.options.batch)&&n.type.toLowerCase()==="post"){var a=r.headers.get("Content-Type"),l=void 0,h=void 0,u=i+"";if(a=a.substring(a.indexOf("=batchresponse")+1),u=u.split(a),u.length<2)return{};u=u[1];var p=/(?:\bContent-Type.+boundary=)(changesetresponse.+)/i.exec(u);p&&u.replace(p[0],"");var d=p?p[1]:"";u=u.split(d);for(var f=u.length;f>-1;f--)!/\bContent-ID:/i.test(u[f])||!/\bHTTP.+201/.test(u[f])||(l=parseInt(/\bContent-ID: (\d+)/i.exec(u[f])[1],10),s.addedRecords[l]&&(h=A.parse.parseJson(/^\{.+\}/m.exec(u[f])[0]),_({},s.addedRecords[l],this.processResponse(h))));return s}return null},t.prototype.compareAndRemove=function(i,e,r){var n=this;return c(e)||Object.keys(i).forEach(function(s){if(s!==r&&s!=="@odata.etag")if(A.isPlainObject(i[s])){n.compareAndRemove(i[s],e[s]);var a=Object.keys(i[s]).filter(function(l){return l!=="@odata.etag"});a.length===0&&delete i[s]}else(i[s]===e[s]||i[s]&&e[s]&&i[s].valueOf()===e[s].valueOf())&&delete i[s]}),i},t}(Dt);(function(o){oi(t,o);function t(i){var e=o.call(this,i)||this;return e.options=_({},e.options,{requestType:"get",accept:"application/json, text/javascript, */*; q=0.01",multipartAccept:"multipart/mixed",sortBy:"$orderby",select:"$select",skip:"$skip",take:"$top",count:"$count",search:"$search",where:"$filter",expand:"$expand",batch:"$batch",changeSet:"--changeset_",batchPre:"batch_",contentId:"Content-Id: ",batchContent:"Content-Type: multipart/mixed; boundary=",changeSetContent:`Content-Type: application/http
Content-Transfer-Encoding: binary `,batchChangeSetContentType:"Content-Type: application/json; charset=utf-8 ",updateType:"PATCH",localTime:!1,apply:"$apply"}),_(e.options,i||{}),e}return t.prototype.getModuleName=function(){return"ODataV4Adaptor"},t.prototype.onCount=function(i){return i===!0?"true":""},t.prototype.onPredicate=function(i,e,r){var n="",s=i.value,a=s instanceof Date;if(e instanceof se)for(var l=this.getQueryRequest(e),h=0;h<l.filters.length;h++)l.filters[h].e.key===i.value&&(r=!0);return n=o.prototype.onPredicate.call(this,i,e,r),a&&(n=n.replace(/datetime'(.*)'$/,"$1")),A.parse.isGuid(s)&&(n=n.replace("guid","").replace(/'/g,"")),n},t.prototype.onEachSearch=function(i){var e=this.pvt.searches||[];e.push(i.key),this.pvt.searches=e},t.prototype.onSearch=function(i){return this.pvt.searches.join(" OR ")},t.prototype.onExpand=function(i){var e=this,r={},n={},s=i.expands.slice(),a=[],l=i.selects.filter(function(h){return h.indexOf(".")>-1});return l.forEach(function(h){var u=h.split(".");if(u[0]in r||(r[u[0]]=[]),u.length===2)r[u[0]].length&&Object.keys(r).indexOf(u[0])!==-1?r[u[0]][0].indexOf("$expand")!==-1&&r[u[0]][0].indexOf(";$select=")===-1?r[u[0]][0]=r[u[0]][0]+";$select="+u[1]:r[u[0]][0]=r[u[0]][0]+","+u[1]:r[u[0]].push("$select="+u[1]);else{for(var p="$select="+u[u.length-1],d="",f="",g=1;g<u.length-1;g++)d=d+"$expand="+u[g]+"(",f=f+")";var v=d+p+f;if(r[u[0]].length&&Object.keys(r).indexOf(u[0])!==-1&&e.expandQueryIndex(r[u[0]],!0)){var m=e.expandQueryIndex(r[u[0]]);r[u[0]][m]=r[u[0]][m]+v.replace("$expand=",",")}else r[u[0]].push(v)}}),Object.keys(r).forEach(function(h){s.indexOf(h)===-1&&s.push(h)}),s.forEach(function(h){n[h]=h in r?h+"("+r[h].join(";")+")":h}),Object.keys(n).forEach(function(h){return a.push(n[h])}),a.join(",")},t.prototype.expandQueryIndex=function(i,e){for(var r=0;r<i.length;r++)if(i[r].indexOf("$expand")!==-1)return e?!0:r;return e?!1:0},t.prototype.onDistinct=function(i){var e=i.map(function(r){return $i.getField(r)}).join(",");return"groupby(("+e+"))"},t.prototype.onSelect=function(i){return o.prototype.onSelect.call(this,i.filter(function(e){return e.indexOf(".")===-1}))},t.prototype.beforeSend=function(i,e,r){(r.type==="POST"||r.type==="PUT"||r.type==="PATCH")&&e.headers.set("Prefer","return=representation"),e.headers.set("Accept",this.options.accept)},t.prototype.processResponse=function(i,e,r,n,s,a){var l="@odata.context",h="@context";if(s&&s.type==="GET"&&!this.rootUrl&&(i[l]||i[h])){var u=i[l]?i[l].split("/$metadata#"):i[h].split("/$metadata#");this.rootUrl=u[0],this.resourceTableName=u[1]}var p="pvtData",d=s&&s[p],f=o.prototype.processBatchResponse.call(this,i,r,n,s,a);if(f)return f;var g=null,v="@odata.count",m="@count";r&&r.isCountRequired&&(v in i?g=i[v]:m in i&&(g=i[m])),i=c(i.value)?i:i.value;var y={};return y.count=g,y.result=i,this.getAggregateResult(d,i,y,null,r),A.isNull(g)?y.result:{result:y.result,count:g,aggregates:y.aggregates}},t})($i);(function(o){oi(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.getModuleName=function(){return"WebApiAdaptor"},t.prototype.insert=function(i,e,r){return{type:"POST",url:i.dataSource.url,data:JSON.stringify(e)}},t.prototype.remove=function(i,e,r,n){return{type:"DELETE",url:i.dataSource.url+"/"+r,data:JSON.stringify(r)}},t.prototype.update=function(i,e,r,n){return{type:"PUT",url:i.dataSource.url,data:JSON.stringify(r)}},t.prototype.batchRequest=function(i,e,r){var n=this,s=r.guid=A.getGuid(this.options.batchPre),a=i.dataSource.url.replace(/\/*$/,"/"+this.options.batch);r.url=this.resourceTableName?this.resourceTableName:r.url;for(var l=[],h=function(g,v){e.addedRecords.forEach(function(m,y){var I={method:"POST ",url:function(S,R,L){return""},data:function(S,R){return JSON.stringify(S[R])+`

`}};l.push("--"+s),l.push("Content-Type: application/http; msgtype=request",""),l.push("POST /api/"+(i.dataSource.insertUrl||i.dataSource.crudUrl||r.url)+I.url(e.addedRecords,g,r.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",m?JSON.stringify(m):"")})},u=0,p=e.addedRecords.length;u<p;u++)h(u);for(var d=function(g,v){e.changedRecords.forEach(function(m,y){var I={method:n.options.updateType+" ",url:function(S,R,L){return""},data:function(S,R){return JSON.stringify(S[R])+`

`}};l.push("--"+s),l.push("Content-Type: application/http; msgtype=request",""),l.push("PUT /api/"+(i.dataSource.updateUrl||i.dataSource.crudUrl||r.url)+I.url(e.changedRecords,g,r.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",m?JSON.stringify(m):"")})},u=0,p=e.changedRecords.length;u<p;u++)d(u);for(var f=function(g,v){e.deletedRecords.forEach(function(m,y){var I={mtd:"DELETE ",url:function(S,R,L){var P=A.getObject(L,S[R]);if(typeof P=="number"||A.parse.isGuid(P))return"/"+P;if(P instanceof Date){var J=S[R][L];return"/"+J.toJSON()}else return"/'"+P+"'"},data:function(S,R){return""}};l.push("--"+s),l.push("Content-Type: application/http; msgtype=request",""),l.push("DELETE /api/"+(i.dataSource.removeUrl||i.dataSource.crudUrl||r.url)+I.url(e.deletedRecords,g,r.key)+" HTTP/1.1"),l.push("Content-Type: application/json; charset=utf-8"),l.push("Host: "+location.host),l.push("",m?JSON.stringify(m):"")})},u=0,p=e.deletedRecords.length;u<p;u++)f(u);return l.push("--"+s+"--",""),{type:"POST",url:a,contentType:"multipart/mixed; boundary="+s,data:l.join(`\r
`)}},t.prototype.beforeSend=function(i,e,r){e.headers.set("Accept","application/json, text/javascript, */*; q=0.01")},t.prototype.processResponse=function(i,e,r,n,s,a){var l="pvtData",h=s&&s[l],u=null,p={};if(s&&s.type.toLowerCase()!=="post"){var d=n&&s.fetchRequest.headers.get("DataServiceVersion"),f=d&&parseInt(d,10)||2;r&&r.isCountRequired&&(A.isNull(i.Count)||(u=i.Count)),f<3&&i.Items&&(i=i.Items),p.count=u,p.result=i,this.getAggregateResult(h,i,p,null,r)}return p.result=p.result||i,A.isNull(u)?p.result:{result:p.result,count:p.count,aggregates:p.aggregates}},t})($i);(function(o){oi(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.processQuery=function(i,e,r){var n=new Dt().processQuery(i,e,r),s="data",a=A.parse.parseJson(n[s]),l={},h="value";if(a.param)for(var u=0;u<a.param.length;u++){var p=a.param[u],d=Object.keys(p)[0];l[d]=p[d]}l[h]=a;var f="pvtData",g="url";return{data:JSON.stringify(l),url:n[g],pvtData:n[f],type:"POST",contentType:"application/json; charset=utf-8"}},t})(Dt);var Ol=function(o){oi(t,o);function t(){var i=o.call(this)||this;return ht("beforeSend",Dt.prototype.beforeSend,i),i}return t.prototype.insert=function(i,e,r,n,s){return this.pvt.position=s,this.updateType="add",{url:i.dataSource.insertUrl||i.dataSource.crudUrl||i.dataSource.url,data:JSON.stringify(_({},{value:e,table:r,action:"insert"},A.getAddParams(this,i,n)))}},t.prototype.remove=function(i,e,r,n,s){return o.prototype.remove.call(this,i,e,r),{type:"POST",url:i.dataSource.removeUrl||i.dataSource.crudUrl||i.dataSource.url,data:JSON.stringify(_({},{key:r,keyColumn:e,table:n,action:"remove"},A.getAddParams(this,i,s)))}},t.prototype.update=function(i,e,r,n,s){return this.updateType="update",this.updateKey=e,{type:"POST",url:i.dataSource.updateUrl||i.dataSource.crudUrl||i.dataSource.url,data:JSON.stringify(_({},{value:r,action:"update",keyColumn:e,key:r[e],table:n},A.getAddParams(this,i,s)))}},t.prototype.processResponse=function(i,e,r,n,s,a,l){var h,u=s?JSON.parse(s.data):i;if(i=u.action==="batch"?A.parse.parseJson(i):i,this.updateType==="add"&&o.prototype.insert.call(this,e,i,null,null,this.pvt.position),this.updateType==="update"&&o.prototype.update.call(this,e,this.updateKey,i),this.updateType=void 0,i.added)for(h=0;h<i.added.length;h++)o.prototype.insert.call(this,e,i.added[h]);if(i.changed)for(h=0;h<i.changed.length;h++)o.prototype.update.call(this,e,l.key,i.changed[h]);if(i.deleted)for(h=0;h<i.deleted.length;h++)o.prototype.remove.call(this,e,l.key,i.deleted[h]);return i},t.prototype.batchRequest=function(i,e,r,n,s){return{type:"POST",url:i.dataSource.batchUrl||i.dataSource.crudUrl||i.dataSource.url,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(_({},{changed:e.changedRecords,added:e.addedRecords,deleted:e.deletedRecords,action:"batch",table:r.url,key:r.key},A.getAddParams(this,i,n)))}},t.prototype.addParams=function(i){var e=new Dt;e.addParams(i)},t}(ks),vc=function(o){oi(t,o);function t(i){var e=o.call(this)||this;return e.options=_({},e.options,{getData:new Function,addRecord:new Function,updateRecord:new Function,deleteRecord:new Function,batchUpdate:new Function}),_(e.options,i||{}),e}return t.prototype.getModuleName=function(){return"CustomDataAdaptor"},t}(Dt);(function(o){oi(t,o);function t(i){var e=o.call(this)||this;return e.opt=i,e.schema=e.opt.response,e.query=e.opt.query,e.getVariables=e.opt.getVariables?e.opt.getVariables:function(){},e.getQuery=function(){return e.query},e}return t.prototype.getModuleName=function(){return"GraphQLAdaptor"},t.prototype.processQuery=function(i,e){var r=o.prototype.processQuery.apply(this,arguments),n=JSON.parse(r.data),s=["skip","take","sorted","table","select","where","search","requiresCounts","aggregates","params"],a={},l="searchwhereparams";s.filter(function(p){a[p]=l.indexOf(p)>-1?JSON.stringify(n[p]):n[p]});var h=this.getVariables()||{};h.datamanager=a;var u=JSON.stringify({query:this.getQuery(),variables:h});return r.data=u,r},t.prototype.processResponse=function(i,e,r,n,s){var a=i,l,h,u=N(this.schema.result,a.data);this.schema.count&&(l=N(this.schema.count,a.data)),this.schema.aggregates&&(h=N(this.schema.aggregates,a.data),h=c(h)?h:A.parse.parseJson(h));var p=s.pvtData||{},d={result:u,aggregates:h},f=d;return p&&p.groups&&p.groups.length&&this.getAggregateResult(p,f,d,null,r),c(l)?d.result:{result:d.result,count:l,aggregates:h}},t.prototype.insert=function(){var i=o.prototype.insert.apply(this,arguments);return this.generateCrudData(i,"insert")},t.prototype.update=function(){var i=o.prototype.update.apply(this,arguments);return this.generateCrudData(i,"update")},t.prototype.remove=function(){var i=o.prototype.remove.apply(this,arguments);return this.generateCrudData(i,"remove")},t.prototype.batchRequest=function(i,e,r,n,s){var a=o.prototype.batchRequest.apply(this,arguments),l=JSON.parse(a.data);return l.key=r.key,a.data=JSON.stringify(l),this.generateCrudData(a,"batch")},t.prototype.generateCrudData=function(i,e){var r=JSON.parse(i.data);return i.data=JSON.stringify({query:this.opt.getMutation(e),variables:r}),i},t})(Dt);var mc=function(o){oi(t,o);function t(i,e,r){var n=o.call(this)||this;n.isCrudAction=!1,n.isInsertAction=!1,c(i)||(n.cacheAdaptor=i),n.pageSize=r,n.guidId=A.getGuid("cacheAdaptor");var s={keys:[],results:[]};window.localStorage.setItem(n.guidId,JSON.stringify(s));var a=n.guidId;return c(e)||setInterval(function(){for(var l=A.parse.parseJson(window.localStorage.getItem(a)),h=[],u=0;u<l.results.length;u++){var p=+new Date,d=+new Date(l.results[u].timeStamp);l.results[u].timeStamp=p-d,p-d>e&&h.push(u)}for(var u=0;u<h.length;u++)l.results.splice(h[u],1),l.keys.splice(h[u],1);window.localStorage.removeItem(a),window.localStorage.setItem(a,JSON.stringify(l))},e),n}return t.prototype.generateKey=function(i,e){var r=this.getQueryRequest(e),n=se.filterQueryLists(e.queries,["onSelect","onPage","onSkip","onTake","onRange"]),s=i,a="onPage";a in n&&(s+=n[a].pageIndex),r.sorts.forEach(function(d){s+=d.e.direction+d.e.fieldName}),r.groups.forEach(function(d){s+=d.e.fieldName}),r.searches.forEach(function(d){s+=d.e.searchKey});for(var l=0;l<r.filters.length;l++){var h=r.filters[l];if(h.e.isComplex){var u=e.clone();u.queries=[];for(var p=0;p<h.e.predicates.length;p++)u.queries.push({fn:"onWhere",e:h.e.predicates[p],filter:e.queries.filter});s+=h.e.condition+this.generateKey(i,u)}else s+=h.e.field+h.e.operator+h.e.value}return s},t.prototype.processQuery=function(i,e,r){var n=this.generateKey(i.dataSource.url,e),s=A.parse.parseJson(window.localStorage.getItem(this.guidId)),a=s?s.results[s.keys.indexOf(n)]:null;return a!=null&&!this.isCrudAction&&!this.isInsertAction?a:(this.isCrudAction=null,this.isInsertAction=null,this.cacheAdaptor.processQuery.apply(this.cacheAdaptor,[].slice.call(arguments,0)))},t.prototype.processResponse=function(i,e,r,n,s,a){if(this.isInsertAction||s&&this.cacheAdaptor.options.batch&&A.endsWith(s.url,this.cacheAdaptor.options.batch)&&s.type.toLowerCase()==="post")return this.cacheAdaptor.processResponse(i,e,r,n,s,a);i=this.cacheAdaptor.processResponse.apply(this.cacheAdaptor,[].slice.call(arguments,0));var l=r?this.generateKey(e.dataSource.url,r):e.dataSource.url,h={};h=A.parse.parseJson(window.localStorage.getItem(this.guidId));var u=h.keys.indexOf(l);for(u!==-1&&(h.results.splice(u,1),h.keys.splice(u,1)),h.results[h.keys.push(l)-1]={keys:l,result:i.result,timeStamp:new Date,count:i.count};h.results.length>this.pageSize;)h.results.splice(0,1),h.keys.splice(0,1);return window.localStorage.setItem(this.guidId,JSON.stringify(h)),i},t.prototype.beforeSend=function(i,e,r){!c(this.cacheAdaptor.options.batch)&&A.endsWith(r.url,this.cacheAdaptor.options.batch)&&r.type.toLowerCase()==="post"&&e.headers.set("Accept",this.cacheAdaptor.options.multipartAccept),i.dataSource.crossDomain||e.headers.set("Accept",this.cacheAdaptor.options.accept)},t.prototype.update=function(i,e,r,n){return this.isCrudAction=!0,this.cacheAdaptor.update(i,e,r,n)},t.prototype.insert=function(i,e,r){return this.isInsertAction=!0,this.cacheAdaptor.insert(i,e,r)},t.prototype.remove=function(i,e,r,n){return this.isCrudAction=!0,this.cacheAdaptor.remove(i,e,r,n)},t.prototype.batchRequest=function(i,e,r){return this.cacheAdaptor.batchRequest(i,e,r)},t}(Dt),V=function(){function o(t,i,e){var r=this;this.dateParse=!0,this.timeZoneHandling=!0,this.persistQuery={},this.isInitialLoad=!1,this.requests=[],this.isInitialLoad=!0,!t&&!this.dataSource&&(t=[]),e=e||t.adaptor,t&&t.timeZoneHandling===!1&&(this.timeZoneHandling=t.timeZoneHandling);var n;return t instanceof Array?n={json:t,offline:!0}:typeof t=="object"?(t.json||(t.json=[]),t.enablePersistence||(t.enablePersistence=!1),t.id||(t.id=""),t.ignoreOnPersist||(t.ignoreOnPersist=[]),n={url:t.url,insertUrl:t.insertUrl,removeUrl:t.removeUrl,updateUrl:t.updateUrl,crudUrl:t.crudUrl,batchUrl:t.batchUrl,json:t.json,headers:t.headers,accept:t.accept,data:t.data,timeTillExpiration:t.timeTillExpiration,cachingPageSize:t.cachingPageSize,enableCaching:t.enableCaching,requestType:t.requestType,key:t.key,crossDomain:t.crossDomain,jsonp:t.jsonp,dataType:t.dataType,offline:t.offline!==void 0?t.offline:t.adaptor instanceof Ol||t.adaptor instanceof vc?!1:!t.url,requiresFormat:t.requiresFormat,enablePersistence:t.enablePersistence,id:t.id,ignoreOnPersist:t.ignoreOnPersist}):A.throwError("DataManager: Invalid arguments"),n.requiresFormat===void 0&&!A.isCors()&&(n.requiresFormat=c(n.crossDomain)?!0:n.crossDomain),n.dataType===void 0&&(n.dataType="json"),this.dataSource=n,this.defaultQuery=i,this.dataSource.enablePersistence&&this.dataSource.id&&window.addEventListener("unload",this.setPersistData.bind(this)),n.url&&n.offline&&!n.json.length?(this.isDataAvailable=!1,this.adaptor=e||new $i,this.dataSource.offline=!1,this.ready=this.executeQuery(i||new se),this.ready.then(function(s){r.dataSource.offline=!0,r.isDataAvailable=!0,n.json=s.result,r.adaptor=new ks})):this.adaptor=n.offline?new ks:new $i,!n.jsonp&&this.adaptor instanceof $i&&(n.jsonp="callback"),this.adaptor=e||this.adaptor,n.enableCaching&&(this.adaptor=new mc(this.adaptor,n.timeTillExpiration,n.cachingPageSize)),this}return o.prototype.getPersistedData=function(t){var i=localStorage.getItem(t||this.dataSource.id);return JSON.parse(i)},o.prototype.setPersistData=function(t,i,e){localStorage.setItem(i||this.dataSource.id,JSON.stringify(e||this.persistQuery))},o.prototype.setPersistQuery=function(t){var i=this,e=this.getPersistedData();if(this.isInitialLoad&&e&&Object.keys(e).length){this.persistQuery=e,this.persistQuery.queries=this.persistQuery.queries.filter(function(n){if(i.dataSource.ignoreOnPersist&&i.dataSource.ignoreOnPersist.length&&n.fn&&i.dataSource.ignoreOnPersist.some(function(l){return n.fn===l}))return!1;if(n.fn==="onWhere"){var s=n.e;if(s&&s.isComplex&&s.predicates instanceof Array){var a=s.predicates.map(function(l){if(l.predicates&&l.predicates instanceof Array){var h=l.predicates.map(function(m){var y=m.field,I=m.operator,S=m.value,R=m.ignoreCase,L=m.ignoreAccent,P=m.matchCase;return new be(y,I,S,R,L,P)});return l.condition==="and"?be.and(h):be.or(h)}else{var u=l.field,p=l.operator,d=l.value,f=l.ignoreCase,g=l.ignoreAccent,v=l.matchCase;return new be(u,p,d,f,g,v)}});n.e=new be(a[0],s.condition,a.slice(1))}}return!0});var r=_(new se,this.persistQuery);return this.isInitialLoad=!1,r}else return this.persistQuery=t,this.isInitialLoad=!1,t},o.prototype.setDefaultQuery=function(t){return this.defaultQuery=t,this},o.prototype.executeLocal=function(t){!this.defaultQuery&&!(t instanceof se)&&A.throwError("DataManager - executeLocal() : A query is required to execute"),this.dataSource.json||A.throwError("DataManager - executeLocal() : Json data is required to execute"),this.dataSource.enablePersistence&&this.dataSource.id&&(t=this.setPersistQuery(t)),t=t||this.defaultQuery;var i=this.adaptor.processQuery(this,t);if(t.subQuery){var e=t.subQuery.fromTable,r=t.subQuery.lookups,n=t.isCountRequired?i.result:i;r&&r instanceof Array&&A.buildHierarchy(t.subQuery.fKey,e,n,r,t.subQuery.key);for(var s=0;s<n.length;s++)n[s][e]instanceof Array&&(n[s]=_({},{},n[s]),n[s][e]=this.adaptor.processResponse(t.subQuery.using(new o(n[s][e].slice(0))).executeLocal(),this,t))}return this.adaptor.processResponse(i,this,t)},o.prototype.executeQuery=function(t,i,e,r){var n=this,s="makeRequest";this.dataSource.enablePersistence&&this.dataSource.id&&(t=this.setPersistQuery(t)),typeof t=="function"&&(r=e,e=i,i=t,t=null),t||(t=this.defaultQuery),t instanceof se||A.throwError("DataManager - executeQuery() : A query is required to execute");var a=new xt,l={query:t};if(!this.dataSource.offline&&this.dataSource.url!==void 0&&this.dataSource.url!==""||!c(this.adaptor[s])||this.isCustomDataAdaptor(this.adaptor)){var h=this.adaptor.processQuery(this,t);c(this.adaptor[s])?!c(h.url)||this.isCustomDataAdaptor(this.adaptor)?(this.requests=[],this.makeRequest(h,a,l,t)):(l=o.getDeferedArgs(t,h,l),a.resolve(l)):this.adaptor[s](h,a,l,t)}else o.nextTick(function(){var u=n.executeLocal(t);l=o.getDeferedArgs(t,u,l),a.resolve(l)});return(i||e)&&a.promise.then(i,e),r&&a.promise.then(r,r),a.promise},o.getDeferedArgs=function(t,i,e){return t.isCountRequired?(e.result=i.result,e.count=i.count,e.aggregates=i.aggregates):e.result=i,e},o.nextTick=function(t){(window.setImmediate||window.setTimeout)(t,0)},o.prototype.extendRequest=function(t,i,e){return _({},{type:"GET",dataType:this.dataSource.dataType,crossDomain:this.dataSource.crossDomain,jsonp:this.dataSource.jsonp,cache:!0,processData:!1,onSuccess:i,onFailure:e},t)},o.prototype.makeRequest=function(t,i,e,r){var n=this,s=!!r.subQuerySelector,a=function(m){e.error=m,i.reject(e)},l=function(m,y,I,S,R,L,P){e.xhr=I,e.count=y?parseInt(y.toString(),10):0,e.result=m,e.request=S,e.aggregates=L,e.actual=R,e.virtualSelectRecords=P,i.resolve(e)},h=function(m,y){var I=new xt,S={parent:e};r.subQuery.isChild=!0;var R=n.adaptor.processQuery(n,r.subQuery,m?n.adaptor.processResponse(m):y),L=n.makeRequest(R,I,S,r.subQuery);return s||I.then(function(P){m&&(A.buildHierarchy(r.subQuery.fKey,r.subQuery.fromTable,m,P,r.subQuery.key),l(m,P.count,P.xhr))},a),L},u=function(m,y){if(n.isGraphQLAdaptor(n.adaptor)&&!c(m.errors))return a(m.errors);n.isCustomDataAdaptor(n.adaptor)&&(y=_({},n.fetchReqOption,y)),y.contentType.indexOf("xml")===-1&&n.dateParse&&(m=A.parse.parseJson(m));var I=n.adaptor.processResponse(m,n,r,y.fetchRequest,y),S=0,R=null,L="virtualSelectRecords",P=m[L];if(r.isCountRequired&&(S=I.count,R=I.aggregates,I=I.result),!r.subQuery){l(I,S,y.fetchRequest,y.type,m,R,P);return}s||h(I,y)},p=this.extendRequest(t,u,a);if(this.isCustomDataAdaptor(this.adaptor)){this.fetchReqOption=p;var f=p;this.adaptor.options.getData({data:f.data,onSuccess:f.onSuccess,onFailure:f.onFailure})}else{var d=new zn(p);d.beforeSend=function(){n.beforeSend(d.fetchRequest,d)},p=d.send(),p.catch(function(m){return!0}),this.requests.push(d)}if(s){var g=void 0,v=r.subQuerySelector.call(this,{query:r.subQuery,parent:r});v&&v.length?(g=Promise.all([p,h(null,v)]),g.then(function(){for(var m=[],y=0;y<arguments.length;y++)m[y]=arguments[y];var I=m[0],S=n.adaptor.processResponse(I[0],n,r,n.requests[0].fetchRequest,n.requests[0]),R=0;r.isCountRequired&&(R=S.count,S=S.result);var L=n.adaptor.processResponse(I[1],n,r.subQuery,n.requests[1].fetchRequest,n.requests[1]);R=0,r.subQuery.isCountRequired&&(R=L.count,L=L.result),A.buildHierarchy(r.subQuery.fKey,r.subQuery.fromTable,S,L,r.subQuery.key),s=!1,l(S,R,n.requests[0].fetchRequest)})):s=!1}return p},o.prototype.beforeSend=function(t,i){this.adaptor.beforeSend(this,t,i);for(var e=this.dataSource.headers,r,n=0;e&&n<e.length;n++){r=[];for(var s=Object.keys(e[n]),a=0,l=s;a<l.length;a++){var h=l[a];r.push(h),t.headers.set(h,e[n][h])}}},o.prototype.saveChanges=function(t,i,e,r,n){var s=this;e instanceof se&&(r=e,e=null);var a={url:e,key:i||this.dataSource.key},l=this.adaptor.batchRequest(this,t,a,r||new se,n),h="dofetchRequest";if(this.dataSource.offline)return l;if(c(this.adaptor[h])){if(this.isCustomDataAdaptor(this.adaptor))return this.dofetchRequest(l,this.adaptor.options.batchUpdate);var u=new xt,p=new zn(l);return p.beforeSend=function(){s.beforeSend(p.fetchRequest,p)},p.onSuccess=function(d,f){s.isGraphQLAdaptor(s.adaptor)&&(c(d.errors)||p.onFailure(JSON.stringify(d.errors))),u.resolve(s.adaptor.processResponse(d,s,null,f.fetchRequest,f,t,a))},p.onFailure=function(d){u.reject([{error:d}])},p.send().catch(function(d){return!0}),u.promise}else return this.adaptor[h](l)},o.prototype.insert=function(t,i,e,r){i instanceof se&&(e=i,i=null);var n=this.adaptor.insert(this,t,i,e,r),s="dofetchRequest";return this.dataSource.offline?n:c(this.adaptor[s])?this.dofetchRequest(n,this.adaptor.options.addRecord):this.adaptor[s](n)},o.prototype.remove=function(t,i,e,r){typeof i=="object"&&(i=A.getObject(t,i)),e instanceof se&&(r=e,e=null);var n=this.adaptor.remove(this,t,i,e,r),s="dofetchRequest";if(this.dataSource.offline)return n;if(c(this.adaptor[s])){var a=this.adaptor.options.deleteRecord;return this.dofetchRequest(n,a)}else return this.adaptor[s](n)},o.prototype.update=function(t,i,e,r,n){e instanceof se&&(r=e,e=null);var s=this.adaptor.update(this,t,i,e,r,n),a="dofetchRequest";if(this.dataSource.offline)return s;if(c(this.adaptor[a])){var l=this.adaptor.options.updateRecord;return this.dofetchRequest(s,l)}else return this.adaptor[a](s)},o.prototype.isCustomDataAdaptor=function(t){return this.adaptor.getModuleName&&this.adaptor.getModuleName()==="CustomDataAdaptor"},o.prototype.isGraphQLAdaptor=function(t){return this.adaptor.getModuleName&&this.adaptor.getModuleName()==="GraphQLAdaptor"},o.prototype.successFunc=function(t,i){if(this.isGraphQLAdaptor(this.adaptor)){var e=JSON.parse(t);c(e.errors)||this.failureFunc(JSON.stringify(e.errors))}this.isCustomDataAdaptor(this.adaptor)&&(i=_({},this.fetchReqOption,i));try{A.parse.parseJson(t)}catch{t=[]}t=this.adaptor.processResponse(A.parse.parseJson(t),this,null,i.fetchRequest,i),this.fetchDeffered.resolve(t)},o.prototype.failureFunc=function(t){this.fetchDeffered.reject([{error:t}])},o.prototype.dofetchRequest=function(t,i){var e=this;if(t=_({},{type:"POST",contentType:"application/json; charset=utf-8",processData:!1},t),this.fetchDeffered=new xt,this.isCustomDataAdaptor(this.adaptor))this.fetchReqOption=t,i.call(this,{data:t.data,onSuccess:this.successFunc.bind(this),onFailure:this.failureFunc.bind(this)});else{var r=new zn(t);r.beforeSend=function(){e.beforeSend(r.fetchRequest,r)},r.onSuccess=this.successFunc.bind(this),r.onFailure=this.failureFunc.bind(this),r.send().catch(function(n){return!0})}return this.fetchDeffered.promise},o.prototype.clearPersistence=function(){window.removeEventListener("unload",this.setPersistData.bind(this)),this.dataSource.enablePersistence=!1,this.persistQuery={},window.localStorage.setItem(this.dataSource.id,"[]")},o}(),xt=function(){function o(){var t=this;this.promise=new Promise(function(i,e){t.resolve=i,t.reject=e}),this.then=this.promise.then.bind(this.promise),this.catch=this.promise.catch.bind(this.promise)}return o}(),ke={li:"e-list-item",ul:"e-list-parent e-ul",group:"e-list-group-item",icon:"e-list-icon",text:"e-list-text",check:"e-list-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-list-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-list-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"},He;(function(o){o.defaultMappedFields={id:"id",text:"text",url:"url",value:"value",isChecked:"isChecked",enabled:"enabled",expanded:"expanded",selected:"selected",iconCss:"iconCss",child:"child",isVisible:"isVisible",hasChildren:"hasChildren",tooltip:"tooltip",htmlAttributes:"htmlAttributes",urlAttributes:"urlAttributes",imageAttributes:"imageAttributes",imageUrl:"imageUrl",groupBy:null,sortBy:null};var t={level:1,listRole:"presentation",itemRole:"presentation",groupItemRole:"group",itemText:"list-item",wrapperRole:"presentation"},i={showCheckBox:!1,showIcon:!1,enableHtmlSanitizer:!1,expandCollapse:!1,fields:o.defaultMappedFields,ariaAttributes:t,listClass:"",itemClass:"",processSubChild:!1,sortOrder:"None",template:null,groupTemplate:null,headerTemplate:null,expandIconClass:"e-icon-collapsible",moduleName:"list",expandIconPosition:"Right",itemNavigable:!1};function e(B,H,O,U,re){var j=_({},i,O),W=_({},t,j.ariaAttributes),G=g(H).typeof;return G==="string"||G==="number"?r(B,H,U,O,re):a(B,H,O,W.level,U,re)}o.createList=e;function r(B,H,O,U,re){var j=n(B,H,O,U,re);return pe(B,j,null,U)}o.createListFromArray=r;function n(B,H,O,U,re){var j=[],W=_({},i,U);ke=P(W.moduleName);for(var G=S(),te=0;te<H.length;te++)if(!c(H[te])){var me=void 0;if(W.itemCreating&&typeof W.itemCreating=="function"){var xe={dataSource:H,curData:H[te],text:H[te],options:W};W.itemCreating(xe)}if(O?me=L(B,H[te],void 0,null,null,[],null,G,te,U):me=he(B,H[te],void 0,null,null,U,re),W.itemCreated&&typeof W.itemCreated=="function"){var xe={dataSource:H,curData:H[te],text:H[te],item:me,options:W};W.itemCreated(xe)}j.push(me)}return j}o.createListItemFromArray=n;function s(B,H,O,U,re,j){var W=_({},i,O);ke=P(W.moduleName);var G=j&&(j.getModuleName()==="listview"||j.getModuleName()==="multiselect")?W.fields:_({},o.defaultMappedFields,W.fields),te=_({},t,W.ariaAttributes),me,xe=[];U&&(te.level=U);var ye=[],oe,ie;H&&H.length&&!c(g(H).item)&&!g(H).item.hasOwnProperty(G.id)&&(me=S());for(var ve=0;ve<H.length;ve++){var ae=ur(H[ve],G);if(!c(H[ve])){if(W.itemCreating&&typeof W.itemCreating=="function"){var ze={dataSource:H,curData:H[ve],text:ae[G.text],options:W,fields:G};W.itemCreating(ze)}var We=H[ve];W.itemCreating&&typeof W.itemCreating=="function"&&(ae=ur(H[ve],G)),ae.hasOwnProperty(G.id)&&!c(ae[G.id])&&(me=ae[G.id]);var fe=[];if(W.showCheckBox&&(W.itemNavigable&&(ae[G.url]||ae[G.urlAttributes])?xe.push(B("input",{className:ke.check,attrs:{type:"checkbox"}})):fe.push(B("input",{className:ke.check,attrs:{type:"checkbox"}}))),re===!0)W.showIcon&&ae.hasOwnProperty(G.iconCss)&&!c(ae[G.iconCss])&&fe.push(B("span",{className:ke.icon+" "+ae[G.iconCss]})),oe=L(B,We,ae,G,W.itemClass,fe,!!(We.hasOwnProperty("isHeader")&&We.isHeader),me,ve,O),ie=oe.querySelector("."+ke.anchorWrap),W.itemNavigable&&xe.length&&zt(xe,oe.firstElementChild);else{if(oe=he(B,We,ae,G,W.itemClass,O,j),oe.classList.add(ke.level+"-"+te.level),oe.setAttribute("aria-level",te.level.toString()),(te.groupItemRole==="presentation"||te.itemRole==="presentation")&&oe.removeAttribute("aria-level"),ie=oe.querySelector("."+ke.anchorWrap),ae.hasOwnProperty(G.tooltip)){var x=ae[G.tooltip];if(O&&O.enableHtmlSanitizer)x=ti.sanitize(x);else{var E=B("span",{innerHTML:x});x=E.innerText,E=null}oe.setAttribute("title",x)}if(ae.hasOwnProperty(G.htmlAttributes)&&ae[G.htmlAttributes]){var z=ae[G.htmlAttributes];z.hasOwnProperty("class")&&typeof z.class=="string"&&z.class.trim()===""&&delete z.class,v(oe,z)}if(ae.hasOwnProperty(G.enabled)&&ae[G.enabled]===!1&&oe.classList.add(ke.disabled),ae.hasOwnProperty(G.isVisible)&&ae[G.isVisible]===!1&&(oe.style.display="none"),ae.hasOwnProperty(G.imageUrl)&&!c(ae[G.imageUrl])&&!W.template){var K={src:ae[G.imageUrl]};ei(K,ae[G.imageAttributes]);var Y=B("img",{className:ke.image,attrs:K});ie?ie.insertAdjacentElement("afterbegin",Y):zt([Y],oe.firstElementChild)}if(W.showIcon&&ae.hasOwnProperty(G.iconCss)&&!c(ae[G.iconCss])&&!W.template){var X=B("div",{className:ke.icon+" "+ae[G.iconCss]});ie?ie.insertAdjacentElement("afterbegin",X):zt([X],oe.firstElementChild)}fe.length&&zt(fe,oe.firstElementChild),W.itemNavigable&&xe.length&&zt(xe,oe.firstElementChild),R(B,ae,G,H,W,oe,te.level)}if(ie&&T([oe],[ke.navigable]),W.itemCreated&&typeof W.itemCreated=="function"){var ze={dataSource:H,curData:H[ve],text:ae[G.text],item:oe,options:W,fields:G};W.itemCreated(ze)}xe=[],ye.push(oe)}}return ye}o.createListItemFromJson=s;function a(B,H,O,U,re,j){var W=_({},i,O),G=s(B,H,O,U,re,j);return pe(B,G,W.listClass,O)}o.createListFromJson=a;function l(B,H,O){if(ke=P(i.moduleName),!(!B||!B.length)){var U,re,j=Array.prototype.slice.call(B);for(H?re=h(H,j):re=O===!0?j.length:-1,U=j[re+(O===!0?-1:1)];U&&(!Hi(U)||U.classList.contains(ke.disabled));)re=re+(O===!0?-1:1),U=j[re];return U}}o.getSiblingLI=l;function h(B,H){if(!(!H||!B)){var O=H;return O=Array.prototype.slice.call(H),O.indexOf(B)}}o.indexOf=h;function u(B,H,O){O===void 0&&(O="None");var U=_({},o.defaultMappedFields,H),re=new se().group(U.groupBy);re=p(O,"key",re);var j=d(B,re);B=[];for(var W=0;W<j.length;W++){var G=j[W].items,te={},me="isHeader";te[U.text]=j[W].key,te[""+me]=!0;var xe=U.text;xe==="id"&&(xe="text",te[""+xe]=j[W].key),te._id="group-list-item-"+(j[W].key?j[W].key.toString().trim():"undefined"),te.items=G,B.push(te);for(var ye=0;ye<G.length;ye++)B.push(G[ye])}return B}o.groupDataSource=u;function p(B,H,O){if(O===void 0&&(O=new se),B==="Ascending")O.sortBy(H,"ascending",!0);else if(B==="Descending")O.sortBy(H,"descending",!0);else for(var U=0;U<O.queries.length;U++)O.queries[U].fn==="onSortBy"&&O.queries.splice(U,1);return O}o.addSorting=p;function d(B,H){return new V(B).executeLocal(H)}o.getDataSource=d;function f(B,H){var O=_({},i,H),U=_({},o.defaultMappedFields,O.fields),re=B.cloneNode(!0),j=[];re.classList.add("json-parent");var W=re.querySelectorAll(".json-parent>li");re.classList.remove("json-parent");for(var G=0;G<W.length;G++){for(var te=W[G],me=te.querySelector("a"),xe=te.querySelector("ul"),ye={},oe=me?me.childNodes:te.childNodes,ie=Object.keys(oe),ve=0;ve<oe.length;ve++)oe[Number(ie[ve])].hasChildNodes()||(ye[U.text]=oe[Number(ie[ve])].textContent);var ae=m(te);ae.id?(ye[U.id]=ae.id,delete ae.id):ye[U.id]=S(),Object.keys(ae).length&&(ye[U.htmlAttributes]=ae),me&&(ae=m(me),Object.keys(ae).length&&(ye[U.urlAttributes]=ae)),xe&&(ye[U.child]=f(xe,H)),j.push(ye)}return j}o.createJsonFromElement=f;function g(B){for(var H={typeof:null,item:null},O=0;O<B.length;O++)if(!c(B[O]))return H={typeof:typeof B[O],item:B[O]};return H}function v(B,H){var O={};ei(O,H),O.class&&(T([B],O.class.split(" ")),delete O.class),Ie(B,O)}function m(B){for(var H={},O=B.attributes,U=0;U<O.length;U++)H[O[U].nodeName]=O[U].nodeValue;return H}function y(B,H,O,U,re,j){ke=P(i.moduleName);for(var W=B("ul",{className:ke.ul,attrs:{role:"presentation"}}),G=_({},i,re),te=_({},o.defaultMappedFields,U),me=Gr(H),xe=[],ye,oe=S(),ie=0;ie<O.length;ie++){var ve=ur(O[ie],te),ae=O[ie],ze=ae.isHeader;if(typeof O[ie]=="string"||typeof O[ie]=="number"?ye=ae:ye=ve[te.value],G.itemCreating&&typeof G.itemCreating=="function"){var We={dataSource:O,curData:ae,text:ye,options:G,fields:te};G.itemCreating(We)}G.itemCreating&&typeof G.itemCreating=="function"&&(ve=ur(O[ie],te),typeof O[ie]=="string"||typeof O[ie]=="number"?ye=ae:ye=ve[te.value]);var fe=B("li",{id:oe+"-"+ie,className:ze?ke.group:ke.li,attrs:{role:"presentation"}});if(ze)typeof O[ie]=="string"||typeof O[ie]=="number"?fe.innerText=ae:fe.innerText=ve[te.text];else{var x=ze?G.groupTemplateID:G.templateID;if(ze)if(j&&j.getModuleName()!=="listview"){var E=me(ae,j,"headerTemplate",x,!!G.isStringTemplate,null,fe);E&&Oe(E,fe)}else Oe(me(ae,j,"headerTemplate",x,!!G.isStringTemplate),fe);else if(j&&j.getModuleName()!=="listview"){var E=me(ae,j,"template",x,!!G.isStringTemplate,null,fe);E&&Oe(E,fe)}else Oe(me(ae,j,"template",x,!!G.isStringTemplate),fe);fe.setAttribute("data-value",c(ye)?"null":ye),fe.setAttribute("role","option")}if(G.itemCreated&&typeof G.itemCreated=="function"){var We={dataSource:O,curData:ae,text:ye,item:fe,options:G,fields:te};G.itemCreated(We)}xe.push(fe)}return Oe(xe,W),W}o.renderContentTemplate=y;function I(B,H,O,U,re,j){for(var W=Gr(B),G=_({},o.defaultMappedFields,O),te=_({},i,re),me=G.groupBy,xe=0,ye=U;xe<ye.length;xe++){var oe=ye[xe],ie={};if(ie[""+me]=oe.textContent,oe.innerHTML="",j&&j.getModuleName()!=="listview"){var ve=W(ie,j,"groupTemplate",te.groupTemplateID,!!te.isStringTemplate,null,oe);ve&&Oe(ve,oe)}else Oe(W(ie,j,"groupTemplate",te.groupTemplateID,!!te.isStringTemplate),oe)}return U}o.renderGroupTemplate=I;function S(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}o.generateId=S;function R(B,H,O,U,re,j,W){var G=H[O.child]||[],te=H[O.hasChildren];if(G.length&&(te=!0,j.classList.add(ke.hasChild),re.processSubChild)){var me=a(B,G,re,++W);j.appendChild(me)}if(re.expandCollapse&&te&&!re.template){j.firstElementChild.classList.add(ke.iconWrapper);var xe=re.expandIconPosition==="Left"?zt:Oe;xe([B("div",{className:"e-icons "+re.expandIconClass})],j.querySelector("."+ke.textContent))}}function L(B,H,O,U,re,j,W,G,te,me){var xe=_({},i,me),ye=_({},t,xe.ariaAttributes),oe=H,ie=H,ve;typeof H!="string"&&typeof H!="number"&&typeof H!="boolean"&&(ve=H,oe=typeof O[U.text]=="boolean"||typeof O[U.text]=="number"?O[U.text]:O[U.text]||"",ie=O[U.value]);var ae;!c(ve)&&!c(O[U.id])&&O[U.id]!==""?ae=G:ae=G+"-"+te;var ze=B("li",{className:(W===!0?ke.group:ke.li)+" "+(c(re)?"":re),id:ae,attrs:ye.groupItemRole!==""&&ye.itemRole!==""?{role:W===!0?ye.groupItemRole:ye.itemRole}:{}});return ve&&O.hasOwnProperty(U.enabled)&&O[U.enabled].toString()==="false"&&ze.classList.add(ke.disabled),W?ze.innerText=oe:(ze.setAttribute("data-value",c(ie)?"null":ie),ze.setAttribute("role","option"),ve&&O.hasOwnProperty(U.htmlAttributes)&&O[U.htmlAttributes]&&v(ze,O[U.htmlAttributes]),j.length&&!xe.itemNavigable&&Oe(j,ze),ve&&(O[U.url]||O[U.urlAttributes]&&O[U.urlAttributes].href)?ze.appendChild(J(B,ve,U,oe,j,xe.itemNavigable)):(j.length&&xe.itemNavigable&&Oe(j,ze),ze.appendChild(document.createTextNode(oe)))),ze}function P(B){return{li:"e-"+B+"-item",ul:"e-"+B+"-parent e-ul",group:"e-"+B+"-group-item",icon:"e-"+B+"-icon",text:"e-"+B+"-text",check:"e-"+B+"-check",checked:"e-checked",selected:"e-selected",expanded:"e-expanded",textContent:"e-text-content",hasChild:"e-has-child",level:"e-level",url:"e-"+B+"-url",collapsible:"e-icon-collapsible",disabled:"e-disabled",image:"e-"+B+"-img",iconWrapper:"e-icon-wrapper",anchorWrap:"e-anchor-wrap",navigable:"e-navigable"}}function J(B,H,O,U,re,j){var W=ur(H,O),G={href:W[O.url]};W.hasOwnProperty(O.urlAttributes)&&W[O.urlAttributes]&&(ei(G,W[O.urlAttributes]),G.href=W[O.url]?W[O.url]:W[O.urlAttributes].href);var te;if(!j)te=B("a",{className:ke.text+" "+ke.url,innerHTML:U});else{te=B("a",{className:ke.text+" "+ke.url});var me=B("div",{className:ke.anchorWrap});re&&re.length&&Oe(re,me),me.appendChild(document.createTextNode(U)),Oe([me],te)}return v(te,G),te}function he(B,H,O,U,re,j,W){var G=_({},i,j),te=_({},t,G.ariaAttributes),me=H,xe,ye,oe;typeof H!="string"&&typeof H!="number"&&(oe=H,me=O[U.text]||"",xe=c(O._id)?O[U.id]:O._id,ye=!!(H.hasOwnProperty("isHeader")&&H.isHeader)),j&&j.enableHtmlSanitizer&&(me=me);var ie=B("li",{className:(ye===!0?ke.group:ke.li)+" "+(c(re)?"":re),attrs:te.groupItemRole!==""&&te.itemRole!==""?{role:ye===!0?te.groupItemRole:te.itemRole}:{}});if(c(xe)?ie.setAttribute("data-uid",S()):ie.setAttribute("data-uid",xe),ye&&j&&j.groupTemplate){var ve=Gr(j.groupTemplate);if(W&&W.getModuleName()!=="listview"){var ae=ve(H,W,"groupTemplate",G.groupTemplateID,!!G.isStringTemplate,null,ie);ae&&Oe(ae,ie)}else Oe(ve(H,W,"groupTemplate",G.groupTemplateID,!!G.isStringTemplate),ie)}else if(!ye&&j&&j.template){var ve=Gr(j.template);if(W&&W.getModuleName()!=="listview"){var ae=ve(H,W,"template",G.templateID,!!G.isStringTemplate,null,ie);ae&&Oe(ae,ie)}else Oe(ve(H,W,"template",G.templateID,!!G.isStringTemplate),ie)}else{var ze=B("div",{className:ke.textContent,attrs:te.wrapperRole!==""?{role:te.wrapperRole}:{}});if(oe&&(O[U.url]||O[U.urlAttributes]&&O[U.urlAttributes].href))ze.appendChild(J(B,oe,U,me,null,G.itemNavigable));else{var We=B("span",{className:ke.text,attrs:te.itemText!==""?{role:te.itemText}:{}});j&&j.enableHtmlSanitizer?We.innerText=ti.sanitize(me):We.innerHTML=me,ze.appendChild(We)}ie.appendChild(ze)}return ie}function pe(B,H,O,U){var re=_({},i,U),j=_({},t,re.ariaAttributes);ke=P(re.moduleName);var W=B("ul",{className:ke.ul+" "+(c(O)?"":O),attrs:j.listRole!==""?{role:j.listRole}:{}});return Oe(H,W),W}o.generateUL=pe;function Re(B,H,O,U){var re=_({},i,U);ke=P(re.moduleName);var j=re.expandIconPosition==="Left"?zt:Oe;return j([B("div",{className:"e-icons "+re.expandIconClass+" "+(c(O)?"":O)})],H.querySelector("."+ke.textContent)),H}o.generateIcon=Re})(He||(He={}));function ur(o,t){var i={};if(c(o)||typeof o=="string"||typeof o=="number"||!c(o.isHeader))return o;for(var e=0,r=Object.keys(t);e<r.length;e++){var n=r[e],s=t[""+n],a=!c(s)&&typeof s=="string"?N(s,o):void 0;c(a)||(i[""+s]=a)}return i}function Gr(o){if(o)try{return typeof o!="function"&&document.querySelector(o)?Ue(document.querySelector(o).innerHTML.trim()):Ue(o)}catch{return Ue(o)}}var Nl=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Ge=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},yc=function(o){Nl(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return Ge([C()],t.prototype,"text",void 0),Ge([C()],t.prototype,"value",void 0),Ge([C()],t.prototype,"iconCss",void 0),Ge([C()],t.prototype,"groupBy",void 0),Ge([C()],t.prototype,"htmlAttributes",void 0),t}(_e),ee={root:"e-dropdownbase",rtl:"e-rtl",content:"e-content",selected:"e-active",hover:"e-hover",noData:"e-nodata",fixedHead:"e-fixed-head",focus:"e-item-focus",li:"e-list-item",group:"e-list-group-item",disabled:"e-disabled",grouping:"e-dd-group"},Cc="ItemTemplate",Sc="DisplayTemplate",bc="SpinnerTemplate",xc="ValueTemplate",wc="GroupTemplate",Ic="HeaderTemplate",Ec="FooterTemplate",Rc="NoRecordsTemplate",Ac="ActionFailureTemplate",Tc="e-hide-group-header",kc=function(o){Nl(t,o);function t(i,e){var r=o.call(this,i,e)||this;return r.preventChange=!1,r.isAngular=!1,r.isPreventChange=!1,r.isDynamicDataChange=!1,r.addedNewItem=!1,r.isAddNewItemTemplate=!1,r.isRequesting=!1,r.isVirtualizationEnabled=!1,r.isAllowFiltering=!1,r.virtualizedItemsCount=0,r.totalItemCount=0,r.dataCount=0,r.isRemoteDataUpdated=!1,r.isIncrementalRequest=!1,r.itemCount=10,r}return t.prototype.getPropObject=function(i,e,r){var n=new Object,s=new Object,a=function(h){return h};n[a(i)]=e[a(i)],s[a(i)]=r[a(i)];var l=new Object;return l.newProperty=n,l.oldProperty=s,l},t.prototype.getValueByText=function(i,e,r){var n=null;return c(this.listData)||(e?n=this.checkValueCase(i,!0,r):n=this.checkValueCase(i,!1,r)),n},t.prototype.checkValueCase=function(i,e,r,n){var s=this,a=null;n&&(a=i);var l=this.listData,h=this.fields,u=this.typeOfData(l).typeof;if(u==="string"||u==="number"||u==="boolean")for(var p=0,d=l;p<d.length;p++){var f=d[p];c(f)||(r?a=this.checkingAccent(String(f),i,e):e?this.checkIgnoreCase(String(f),i)&&(a=this.getItemValue(String(f),i,e)):this.checkNonIgnoreCase(String(f),i)&&(a=this.getItemValue(String(f),i,e,n)))}else if(e)l.filter(function(v){var m=N(h.value,v);!c(m)&&s.checkIgnoreCase(N(h.text,v).toString(),i)&&(a=N(h.value,v))});else if(n){var g=null;g=a,l.filter(function(v){var m=N(h.value,v);!c(m)&&!c(a)&&m.toString()===g.toString()&&(a=N(h.text,v))})}else l.filter(function(v){s.checkNonIgnoreCase(N(h.text,v),i)&&(a=N(h.value,v))});return a},t.prototype.checkingAccent=function(i,e,r){var n=A.ignoreDiacritics(String(i)),s=A.ignoreDiacritics(e.toString()),a=null;return r?this.checkIgnoreCase(n,s)&&(a=this.getItemValue(String(i),e,r)):this.checkNonIgnoreCase(String(i),e)&&(a=this.getItemValue(String(i),e,r)),a},t.prototype.checkIgnoreCase=function(i,e){return String(i).toLowerCase()===e.toString().toLowerCase()},t.prototype.checkNonIgnoreCase=function(i,e){return String(i)===e.toString()},t.prototype.getItemValue=function(i,e,r,n){var s=null,a=this.listData,l=this.typeOfData(a).typeof;return n?s=i.toString():r?s=l==="string"?String(i):this.getFormattedValue(String(i)):s=l==="string"?e:this.getFormattedValue(e),s},t.prototype.templateCompiler=function(i){var e=!1;if(typeof i!="function"&&i)try{e=!!Ee(i,document).length}catch{e=!1}return e},t.prototype.l10nUpdate=function(i){var e=this.getModuleName()==="listbox"?this.ulElement:this.list;if(this.noRecordsTemplate!=="No records found"||this.actionFailureTemplate!=="Request failed"){var r=i?this.actionFailureTemplate:this.noRecordsTemplate,n=void 0,s=i?this.actionFailureTemplateId:this.noRecordsTemplateId;e.innerHTML="";var a=this.templateCompiler(r);typeof r!="function"&&a?n=Ue(q(r,document).innerHTML.trim()):n=Ue(r);var l=i?"actionFailureTemplate":"noRecordsTemplate",h=void 0;if(this.isReact&&typeof r=="function"?h=n({},this,l,s,this.isStringTemplate,null):h=n({},this,l,s,this.isStringTemplate,null,e),h&&h.length>0)for(var u=0;u<h.length;u++)if(this.getModuleName()==="listbox"&&l==="noRecordsTemplate")if(h[u].nodeName==="#text"){var p=this.createElement("li");p.textContent=h[u].textContent,p.classList.add("e-list-nrt"),p.setAttribute("role","option"),e.appendChild(p)}else h[u].classList.add("e-list-nr-template"),e.appendChild(h[u]);else(h[u]instanceof HTMLElement||h[u]instanceof Text)&&e.appendChild(h[u]);this.renderReactTemplates()}else{var d={noRecordsTemplate:"No records found",actionFailureTemplate:"Request failed"},f=new yr(this.getLocaleName(),{},this.locale);f.getConstant("actionFailureTemplate")!==""||f.getConstant("noRecordsTemplate")!==""?this.l10n=f:this.l10n=new yr(this.getModuleName()==="listbox"?"listbox":this.getModuleName()==="mention"?"mention":"dropdowns",d,this.locale);var g=i?this.l10n.getConstant("actionFailureTemplate"):this.l10n.getConstant("noRecordsTemplate");if(this.getModuleName()==="listbox"){var p=this.createElement("li");p.textContent=g,e.appendChild(p),p.classList.add("e-list-nrt"),p.setAttribute("role","option")}else c(e)||(e.innerHTML=g)}},t.prototype.getLocaleName=function(){return"drop-down-base"},t.prototype.getTextByValue=function(i){var e=this.checkValueCase(i,!1,!1,!0);return e},t.prototype.getFormattedValue=function(i){if(this.listData&&this.listData.length){var e=void 0;if(this.properties.allowCustomValue&&this.properties.value&&this.properties.value instanceof Array&&this.properties.value.length>0?e=this.typeOfData(this.properties.value):e=this.typeOfData(this.listData),typeof N(this.fields.value?this.fields.value:"value",e.item)=="number"||e.typeof==="number")return parseFloat(i);if(typeof N(this.fields.value?this.fields.value:"value",e.item)=="boolean"||e.typeof==="boolean")return i==="true"||""+i=="true"}return i},t.prototype.setEnableRtl=function(){c(this.enableRtlElements)||(this.list&&this.enableRtlElements.push(this.list),this.enableRtl?T(this.enableRtlElements,ee.rtl):F(this.enableRtlElements,ee.rtl))},t.prototype.initialize=function(i){if(this.bindEvent=!0,this.actionFailureTemplateId=""+this.element.id+Ac,this.element.tagName==="UL"){var e=He.createJsonFromElement(this.element);this.setProperties({fields:{text:"text",value:"text"}},!0),this.resetList(e,this.fields)}else if(this.element.tagName==="SELECT"){var r=this.dataSource instanceof Array?this.dataSource.length>0:!c(this.dataSource);r?this.isDynamicDataChange&&this.setListData(this.dataSource,this.fields,this.query):this.renderItemsBySelect()}else this.setListData(this.dataSource,this.fields,this.query,i)},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.updateDataAttribute=function(i){for(var e=["class","style","id","type","aria-expanded","aria-autocomplete","aria-readonly"],r={},n=0;n<this.element.attributes.length;n++)e.indexOf(this.element.attributes[n].name)===-1&&!(this.getModuleName()==="dropdownlist"&&this.element.attributes[n].name==="readonly")&&(r[this.element.attributes[n].name]=this.element.getAttribute(this.element.attributes[n].name));_(r,i,r),this.setProperties({htmlAttributes:r},!0)},t.prototype.renderItemsBySelect=function(){var i=this.element,e={value:"value",text:"text"},r=[],n=i.querySelectorAll("select>optgroup"),s=i.querySelectorAll("select>option");if(this.getJSONfromOption(r,s,e),n.length){for(var a=0;a<n.length;a++){var l=n[a],h={};h[e.text]=l.label,h.isHeader=!0;var u=l.querySelectorAll("option");r.push(h),this.getJSONfromOption(r,u,e)}i.querySelectorAll("select>option")}this.updateFields(e.text,e.value,this.fields.groupBy,this.fields.htmlAttributes,this.fields.iconCss),this.resetList(r,e)},t.prototype.updateFields=function(i,e,r,n,s){var a={fields:{text:i,value:e,groupBy:c(r)?this.fields&&this.fields.groupBy:r,htmlAttributes:c(n)?this.fields&&this.fields.htmlAttributes:n,iconCss:c(s)?this.fields&&this.fields.iconCss:s}};this.setProperties(a,!0)},t.prototype.getJSONfromOption=function(i,e,r){for(var n=0,s=e;n<s.length;n++){var a=s[n],l={};l[r.text]=a.innerText,l[r.value]=c(a.getAttribute(r.value))?a.innerText:a.getAttribute(r.value),i.push(l)}},t.prototype.preRender=function(){this.scrollTimer=-1,this.enableRtlElements=[],this.isRequested=!1,this.isDataFetched=!1,this.itemTemplateId=""+this.element.id+Cc,this.displayTemplateId=""+this.element.id+Sc,this.spinnerTemplateId=""+this.element.id+bc,this.valueTemplateId=""+this.element.id+xc,this.groupTemplateId=""+this.element.id+wc,this.headerTemplateId=""+this.element.id+Ic,this.footerTemplateId=""+this.element.id+Ec,this.noRecordsTemplateId=""+this.element.id+Rc},t.prototype.setListData=function(i,e,r,n){var s=this;e=e||this.fields;var a;this.isActive=!0;var l={cancel:!1,data:i,query:r};this.isPreventChange=this.isAngular&&this.preventChange?!0:this.isPreventChange,this.isRequesting||this.trigger("actionBegin",l,function(h){if(!h.cancel)if(s.isRequesting=!0,s.showSpinner(),i instanceof V&&!s.virtualGroupDataSource){if(s.isRequested=!0,s.isDataFetched){s.emptyDataRequest(e);return}h.data.executeQuery(s.getQuery(h.query)).then(function(m){s.isPreventChange=s.isAngular&&s.preventChange?!0:s.isPreventChange,s.trigger("actionComplete",m,function(y){if(!s.virtualGroupDataSource&&s.isVirtualizationEnabled){if(s.isRemoteDataUpdated=!0,s.getModuleName()==="combobox"&&!s.initialRemoteRender&&s.isAllowFiltering&&s.isVirtualizationEnabled&&y.result&&(y.result=y.result.result),y.result.length>0){var I=y.result;if(s.isVirtualizationEnabled&&s.fields.groupBy){var S=new V(I).executeLocal(new se().group(s.fields.groupBy));s.virtualGroupDataSource=S.records}else{s.virtualGroupDataSource=I,s.hideSpinner(),s.isRequested=!1,s.isRequesting=!1,s.setListData(I,e,r,n);return}}s.hideSpinner(),s.isRequested=!1,s.isRequesting=!1,s.updatePopupState();return}if(!y.cancel){s.isRequesting=!1;var R=y.result;if(s.isIncrementalRequest){a=s.renderItems(R,e);return}R.length===0&&(s.isDataFetched=!0),s.dataCount=y.count,s.totalItemCount=y.count,a=s.renderItems(R,e),s.onActionComplete(a,R,y),s.groupTemplate&&s.renderGroupTemplate(a),s.isRequested=!1,s.bindChildItems(R,a,e,y)}})}).catch(function(m){s.isRequested=!1,s.isRequesting=!1,s.onActionFailure(m),s.hideSpinner()})}else{s.isRequesting=!1;var u=void 0;if(s.isVirtualizationEnabled&&!s.virtualGroupDataSource&&s.fields.groupBy){var p=new V(s.dataSource).executeLocal(new se().group(s.fields.groupBy));s.virtualGroupDataSource=p.records}var d=s.isVirtualizationEnabled&&s.virtualGroupDataSource?new V(s.virtualGroupDataSource):new V(h.data);if(u=s.getQuery(h.query).executeLocal(d),s.isVirtualizationEnabled&&s.getModuleName()==="autocomplete"&&u.count!=0&&u.count<s.itemCount*2){var f=s.getQuery(h.query);if(f){for(var g=0;g<f.queries.length;g++)if(f.queries[g].fn==="onTake"){f.queries[g].e.nos=u.count,u=f.executeLocal(d);break}}}s.dataCount=u.count,s.totalItemCount=u.count,u=s.isVirtualizationEnabled?u.result:u;var v={cancel:!1,result:u};s.isPreventChange=s.isAngular&&s.preventChange?!0:s.isPreventChange,s.trigger("actionComplete",v,function(m){if(s.isIncrementalRequest){a=s.renderItems(m.result,e);return}m.cancel||(a=s.renderItems(m.result,e),s.onActionComplete(a,m.result,n),s.groupTemplate&&s.renderGroupTemplate(a),s.bindChildItems(m.result,a,e),setTimeout(function(){s.getModuleName()==="multiselect"&&s.itemTemplate!=null&&a.childElementCount>0&&(a.children[0].childElementCount>0||s.fields.groupBy&&a.children[1]&&a.children[1].childElementCount>0)&&s.updateDataList()}))})}})},t.prototype.updatePopupState=function(){},t.prototype.updateRemoteData=function(){this.setListData(this.dataSource,this.fields,this.query)},t.prototype.bindChildItems=function(i,e,r,n){var s=this;i.length>=100&&this.getModuleName()==="autocomplete"?setTimeout(function(){var a=s.remainingItems(s.sortedData,r);Oe(a,e),s.liCollections=s.list.querySelectorAll("."+ee.li),s.updateListValues(),s.raiseDataBound(i,n)},0):this.raiseDataBound(i,n)},t.prototype.updateListValues=function(){},t.prototype.findListElement=function(i,e,r,n){var s=null;if(i){for(var a=[].slice.call(i.querySelectorAll(e)),l=0;l<a.length;l++)if(a[l].getAttribute(r)===n+""){s=a[l];break}}return s},t.prototype.raiseDataBound=function(i,e){this.hideSpinner();var r={items:i,e};this.trigger("dataBound",r)},t.prototype.remainingItems=function(i,e){var r=new V(i).executeLocal(new se().skip(100));if(this.itemTemplate){var n=this.templateListItem(r,e);return[].slice.call(n.childNodes)}var s=this.typeOfData(r).typeof;return s==="string"||s==="number"||s==="boolean"?He.createListItemFromArray(this.createElement,r,!0,this.listOption(r,e),this):He.createListItemFromJson(this.createElement,r,this.listOption(r,e),1,!0,this)},t.prototype.emptyDataRequest=function(i){var e=[];this.onActionComplete(this.renderItems(e,i),e),this.isRequested=!1,this.hideSpinner()},t.prototype.showSpinner=function(){},t.prototype.hideSpinner=function(){},t.prototype.onActionFailure=function(i){this.liCollections=[],this.trigger("actionFailure",i),this.l10nUpdate(!0),c(this.list)||T([this.list],ee.noData)},t.prototype.onActionComplete=function(i,e,r){if(this.listData=e,this.isVirtualizationEnabled&&this.notify("setGeneratedData",{module:"VirtualScroll"}),this.getModuleName()!=="listbox"&&i.setAttribute("tabindex","0"),this.isReact&&this.clearTemplate(["itemTemplate","groupTemplate","actionFailureTemplate","noRecordsTemplate"]),this.isVirtualizationEnabled||(this.fixedHeaderElement=c(this.fixedHeaderElement)?this.fixedHeaderElement:null),this.getModuleName()==="multiselect"&&this.properties.allowCustomValue&&this.fields.groupBy)for(var n=0;n<i.childElementCount;n++)i.children[n].classList.contains("e-list-group-item")&&(c(i.children[n].innerHTML)||i.children[n].innerHTML=="")&&T([i.children[n]],Tc);c(this.list)||this.isVirtualizationEnabled||(this.list.innerHTML="",this.list.appendChild(i),this.liCollections=this.list.querySelectorAll("."+ee.li),this.ulElement=this.list.querySelector("ul"),this.postRender(this.list,e,this.bindEvent))},t.prototype.postRender=function(i,e,r){var n=i.querySelector("."+ee.li),s=i.querySelector("."+ee.selected);n&&!s&&n.classList.add(ee.focus),e.length<=0?(this.l10nUpdate(),T([i],ee.noData)):i.classList.remove(ee.noData)},t.prototype.getQuery=function(i){return i||(this.query?this.query:new se)},t.prototype.updateVirtualizationProperties=function(i,e){this.isVirtualizationEnabled=!0,this.virtualizedItemsCount=i,this.isAllowFiltering=e},t.prototype.renderGroupTemplate=function(i){if(this.fields.groupBy!==null&&this.dataSource||this.element.querySelector("."+ee.group)){var e=this.dataSource,r={groupTemplateID:this.groupTemplateId,isStringTemplate:this.isStringTemplate},n=i.querySelectorAll("."+ee.group),s=this.templateCompiler(this.groupTemplate);if(typeof this.groupTemplate!="function"&&s){var a=q(this.groupTemplate,document).innerHTML.trim(),l=He.renderGroupTemplate(a,e,this.fields.properties,n,r,this);if(this.isGroupChecking)for(var h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}else{var l=He.renderGroupTemplate(this.groupTemplate,e,this.fields.properties,n,r,this);if(this.isGroupChecking)for(var h=0;h<l.length;h++)this.notify("addItem",{module:"CheckBoxSelection",item:l[h]})}this.renderReactTemplates()}},t.prototype.createListItems=function(i,e){if(i){e.groupBy||this.element.querySelector("optgroup")?(e.groupBy&&(this.sortOrder!=="None"&&(i=this.getSortedDataSource(i)),i=He.groupDataSource(i,e.properties,this.sortOrder)),T([this.list],ee.grouping)):i=this.getSortedDataSource(i);var r=this.listOption(i,e),n=i.length>100?new V(i).executeLocal(new se().take(100)):i;return this.sortedData=i,He.createList(this.createElement,this.getModuleName()==="autocomplete"?n:i,r,!0,this)}return null},t.prototype.listOption=function(i,e){var r=!c(e.iconCss),n=c(e.properties)?e:e.properties,s=e.text!==null||e.value!==null?{fields:n,showIcon:r,ariaAttributes:{groupItemRole:"presentation"}}:{fields:{value:"text"}};return _({},s,e,!0)},t.prototype.setFloatingHeader=function(i){!c(this.list)&&!this.list.classList.contains(ee.noData)&&(c(this.fixedHeaderElement)&&(this.fixedHeaderElement=this.createElement("div",{className:ee.fixedHead}),!c(this.list)&&!this.list.querySelector("li").classList.contains(ee.group)&&(this.fixedHeaderElement.style.display="none"),!c(this.fixedHeaderElement)&&!c(this.list)&&zt([this.fixedHeaderElement],this.list),this.setFixedHeader()),!c(this.fixedHeaderElement)&&this.fixedHeaderElement.style.zIndex==="0"&&this.setFixedHeader(),this.scrollStop(i))},t.prototype.scrollStop=function(i,e){for(var r=c(i)?this.list:i.target,n=parseInt(getComputedStyle(this.getValidLi(),null).getPropertyValue("height"),10),s=Math.round(r.scrollTop/n),a=this.list.querySelectorAll("li:not(.e-hide-listitem)"),l=this.list.querySelectorAll(".e-virtual-list").length,h=0,u=!1,p=s;p>-1;p--){var d=this.isVirtualizationEnabled?p+l:p;if(this.isVirtualizationEnabled){var f=this.list.querySelectorAll(".e-list-group-item").length,g=0;if(u&&h++,this.updateGroupHeader(d,a,r)&&(g++,h>=this.getPageCount()||f<=g))break;e&&(!c(a[d])&&a[d].classList.contains(ee.selected)&&this.getModuleName()!=="autocomplete"||!c(a[d])&&a[d].classList.contains(ee.focus)&&this.getModuleName()==="autocomplete")&&(h++,u=!0)}else if(this.updateGroupHeader(d,a,r))break}},t.prototype.getPageCount=function(i){var e=this.list.classList.contains(ee.noData)?null:getComputedStyle(this.getItems()[0],null).getPropertyValue("height"),r=Math.round(this.list.getBoundingClientRect().height/parseInt(e,10));return i?r:Math.round(r)},t.prototype.updateGroupHeader=function(i,e,r){return!c(e[i])&&e[i].classList.contains(ee.group)?(this.updateGroupFixedHeader(e[i],r),!0):(this.fixedHeaderElement.style.display="none",this.fixedHeaderElement.style.top="none",!1)},t.prototype.updateGroupFixedHeader=function(i,e){this.fixedHeaderElement.innerHTML=i.innerHTML,this.fixedHeaderElement.style.position="fixed",this.fixedHeaderElement.style.top=this.list.parentElement.offsetTop+this.list.offsetTop+"px",this.fixedHeaderElement.style.display="block"},t.prototype.getValidLi=function(){return this.liCollections[0]},t.prototype.renderItems=function(i,e){var r;if(this.itemTemplate&&i){var n=i;n&&e.groupBy?(this.sortOrder!=="None"&&(n=this.getSortedDataSource(n)),n=He.groupDataSource(n,e.properties,this.sortOrder)):n=this.getSortedDataSource(n),this.sortedData=n;var s=n.length>100?new V(n).executeLocal(new se().take(100)):n;if(r=this.templateListItem(this.getModuleName()==="autocomplete"?s:n,e),this.isVirtualizationEnabled){var a=this.list.querySelector(".e-list-parent"),l=this.list.querySelector(".e-virtual-ddl-content");i.length>=this.virtualizedItemsCount&&a&&l||a&&l&&this.isAllowFiltering||a&&l&&this.getModuleName()==="autocomplete"?(l.replaceChild(r,a),this.updateListElements(i)):l||(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(r),this.updateListElements(i))}}else{if(r=this.createListItems(i,e),this.isIncrementalRequest)return this.incrementalLiCollections=r.querySelectorAll("."+ee.li),this.incrementalUlElement=r,this.incrementalListData=i,r;if(this.isVirtualizationEnabled){var a=this.list.querySelector(".e-list-parent"),l=this.list.querySelector(".e-virtual-ddl-content");i.length>=this.virtualizedItemsCount&&a&&l||a&&l&&this.isAllowFiltering||a&&l&&this.getModuleName()==="autocomplete"?(l.replaceChild(r,a),this.updateListElements(i)):l||(this.list.innerHTML="",this.createVirtualContent(),this.list.querySelector(".e-virtual-ddl-content").appendChild(r),this.updateListElements(i))}}return r},t.prototype.createVirtualContent=function(){this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content"}))},t.prototype.updateListElements=function(i){this.liCollections=this.list.querySelectorAll("."+ee.li),this.ulElement=this.list.querySelector("ul"),this.listData=i,this.postRender(this.list,i,this.bindEvent)},t.prototype.templateListItem=function(i,e){var r=this.listOption(i,e);r.templateID=this.itemTemplateId,r.isStringTemplate=this.isStringTemplate;var n=this.templateCompiler(this.itemTemplate);if(typeof this.itemTemplate!="function"&&n){var s=q(this.itemTemplate,document).innerHTML.trim();return He.renderContentTemplate(this.createElement,s,i,e.properties,r,this)}else return He.renderContentTemplate(this.createElement,this.itemTemplate,i,e.properties,r,this)},t.prototype.typeOfData=function(i){for(var e={typeof:null,item:null},r=0;!c(i)&&r<i.length;r++)if(!c(i[r])){var n=typeof i[r]=="string"||typeof i[r]=="number"||typeof i[r]=="boolean",s=n?c(i[r]):c(N(this.fields.value?this.fields.value:"value",i[r]));if(!s)return e={typeof:typeof i[r],item:i[r]}}return e},t.prototype.setFixedHeader=function(){c(this.list)||(this.list.parentElement.style.display="block");var i=0;if(this.list&&this.list.parentElement&&(i=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-width"),10),isNaN(i))){var e=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-top-width"),10),r=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-bottom-width"),10),n=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-left-width"),10),s=parseInt(document.defaultView.getComputedStyle(this.list.parentElement,null).getPropertyValue("border-right-width"),10);i=e+r+n+s}if(!c(this.liCollections)){var a=this.getValidLi().offsetWidth-i;this.fixedHeaderElement.style.width=a.toString()+"px"}mt(this.fixedHeaderElement,{zIndex:10});var l=this.ulElement.querySelector("."+ee.group+":not(.e-hide-listitem)");this.fixedHeaderElement.innerHTML=l.innerHTML},t.prototype.getSortedDataSource=function(i){if(i&&this.sortOrder!=="None"){var e=this.fields.text?this.fields.text:"text";(this.typeOfData(i).typeof==="string"||this.typeOfData(i).typeof==="number"||this.typeOfData(i).typeof==="boolean")&&(e=""),i=He.getDataSource(i,He.addSorting(this.sortOrder,e))}return i},t.prototype.getIndexByValue=function(i){for(var e,r=this.getItems(),n=0;n<r.length;n++)if(!c(i)&&r[n].getAttribute("data-value")===i.toString()){e=n;break}return e},t.prototype.getIndexByValueFilter=function(i){var e,r=this.renderItems(this.selectData,this.fields);if(r&&r.children){for(var n=0;n<r.children.length;n++)if(!c(i)&&r.children[n].getAttribute("data-value")===i.toString()){e=n;break}}return e},t.prototype.dispatchEvent=function(i,e){var r=document.createEvent("HTMLEvents");r.initEvent(e,!1,!0),i&&i.dispatchEvent(r)},t.prototype.setFields=function(){this.fields.value&&!this.fields.text?this.updateFields(this.fields.value,this.fields.value):!this.fields.value&&this.fields.text?this.updateFields(this.fields.text,this.fields.text):!this.fields.value&&!this.fields.text&&this.updateFields("text","text")},t.prototype.resetList=function(i,e,r,n){if(this.list){if(this.element.tagName==="SELECT"&&this.element.options.length>0||this.element.tagName==="UL"&&this.element.childNodes.length>0){var s=i instanceof Array?i.length>0:!c(i);!s&&this.selectData&&this.selectData.length>0&&(i=this.selectData)}i=this.getModuleName()==="combobox"&&this.selectData&&i instanceof Array&&i.length<this.selectData.length&&this.addedNewItem?this.selectData:i,this.addedNewItem=!1,this.setListData(i,e,r,n)}},t.prototype.updateSelectElementData=function(i){(i||this.isVirtualizationEnabled)&&c(this.selectData)&&this.listData&&this.listData.length>0&&(this.selectData=this.listData)},t.prototype.updateSelection=function(){},t.prototype.renderList=function(){this.render()},t.prototype.updateDataSource=function(i){this.resetList(this.dataSource),this.totalItemCount=this.dataSource instanceof V?this.dataSource.dataSource.json.length:0},t.prototype.setUpdateInitial=function(i,e){this.isDataFetched=!1;for(var r={},n=0;i.length>n;n++)e[i[n]]&&i[n]==="fields"?(this.setFields(),r[i[n]]=e[i[n]]):e[i[n]]&&(r[i[n]]=e[i[n]]);Object.keys(r).length>0&&(Object.keys(r).indexOf("dataSource")===-1&&(r.dataSource=this.dataSource),this.updateDataSource(r))},t.prototype.onPropertyChanged=function(i,e){this.getModuleName()==="dropdownbase"&&this.setUpdateInitial(["fields","query","dataSource"],i),this.setUpdateInitial(["sortOrder","itemTemplate"],i);for(var r=0,n=Object.keys(i);r<n.length;r++){var s=n[r];switch(s){case"query":case"sortOrder":case"dataSource":case"itemTemplate":break;case"enableRtl":this.setEnableRtl();break;case"groupTemplate":if(this.renderGroupTemplate(this.list),this.ulElement&&this.fixedHeaderElement){var a=this.ulElement.querySelector("."+ee.group);this.fixedHeaderElement.innerHTML=a.innerHTML}break;case"locale":this.list&&!c(this.liCollections)&&this.liCollections.length===0&&this.l10nUpdate();break;case"zIndex":this.setProperties({zIndex:i.zIndex},!0),this.setZIndex();break}}},t.prototype.render=function(i,e){this.getModuleName()==="listbox"?this.list=this.createElement("div",{className:ee.content,attrs:{tabindex:"0"}}):this.list=this.createElement("div",{className:ee.content}),this.list.classList.add(ee.root),this.setFields();var r={duration:300,selector:"."+ee.li};this.rippleFun=mr(this.list,r);var n=this.element.querySelector("select>optgroup");if((this.fields.groupBy||!c(n))&&!this.isGroupChecking&&b.add(this.list,"scroll",this.setFloatingHeader,this),this.getModuleName()==="dropdownbase"){this.element.getAttribute("tabindex")&&this.list.setAttribute("tabindex",this.element.getAttribute("tabindex")),F([this.element],ee.root),this.element.style.display="none";var s=this.createElement("div");this.element.parentElement.insertBefore(s,this.element),s.appendChild(this.element),s.appendChild(this.list)}this.setEnableRtl(),e||this.initialize(i)},t.prototype.removeScrollEvent=function(){this.list&&b.remove(this.list,"scroll",this.setFloatingHeader)},t.prototype.getModuleName=function(){return"dropdownbase"},t.prototype.getItems=function(){return this.ulElement.querySelectorAll("."+ee.li)},t.prototype.addItem=function(i,e){if((!this.list||this.list.textContent===this.noRecordsTemplate&&this.getModuleName()!=="listbox")&&this.renderList(),this.sortOrder!=="None"&&c(e)){var r=[].slice.call(this.listData);r.push(i),r=this.getSortedDataSource(r),this.fields.groupBy&&(r=He.groupDataSource(r,this.fields.properties,this.sortOrder)),e=r.indexOf(i)}var n=this.getItems().length,s=this.list.querySelector("."+ee.selected);i=i instanceof Array?i:[i];var a;a=c(e)||e<0||e>n-1?n:e;var l=this.fields;i&&l.groupBy&&(i=He.groupDataSource(i,l.properties));for(var h=[],u=0;u<i.length;u++){var p=i[u],d=p.isHeader,f=this.createElement("li",{className:d?ee.group:ee.li,id:"option-add-"+u}),g=p instanceof Object?N(l.text,p):p;if(d&&(f.innerText=g),this.itemTemplate&&!d){var v=this.templateCompiler(this.itemTemplate),m=typeof this.itemTemplate!="function"&&v?Ue(q(this.itemTemplate,document).innerHTML.trim()):Ue(this.itemTemplate),y=m(p,this,"itemTemplate",this.itemTemplateId,this.isStringTemplate,null,f);y&&Oe(y,f)}else d||f.appendChild(document.createTextNode(g));f.setAttribute("data-value",p instanceof Object?N(l.value,p):p),f.setAttribute("role","option"),this.notify("addItem",{module:"CheckBoxSelection",item:f}),h.push(f),this.listData.push(p),this.sortOrder==="None"&&c(e)&&a===0&&(a=null),this.updateActionCompleteData(f,p,a),this.trigger("beforeItemRender",{element:f,item:p})}if(n===0&&c(this.list.querySelector("ul")))c(this.list)||(this.list.innerHTML="",this.list.classList.remove(ee.noData),this.isAddNewItemTemplate=!0,c(this.ulElement)||this.list.appendChild(this.ulElement)),this.liCollections=h,!c(h)&&!c(this.ulElement)&&Oe(h,this.ulElement),this.updateAddItemList(this.list,n);else{this.getModuleName()==="listbox"&&n===0&&(this.ulElement.innerHTML="");for(var I=[],u=0;u<i.length;u++){for(var S=this.ulElement.querySelectorAll(".e-list-group-item"),R=0;R<S.length;R++)I[R]=S[R].innerText;if(I.indexOf(h[u].innerText)>-1&&l.groupBy){for(var R=0;R<S.length;R++)if(I[R]===h[u].innerText){this.sortOrder==="None"?this.ulElement.insertBefore(h[u+1],S[R+1]):this.ulElement.insertBefore(h[u+1],this.ulElement.childNodes[e]),u=u+1;break}}else this.liCollections[a]?this.liCollections[a].parentNode.insertBefore(h[u],this.liCollections[a]):this.ulElement.appendChild(h[u]);var L=[].slice.call(this.liCollections);L.splice(a,0,h[u]),this.liCollections=L,a+=1,this.getModuleName()==="multiselect"&&this.updateDataList()}}this.getModuleName()==="listbox"&&this.isReact&&this.renderReactTemplates(),(s||e===0)&&this.updateSelection(),this.addedNewItem=!0},t.prototype.validationAttribute=function(i,e){var r=i.getAttribute("name")?i.getAttribute("name"):i.getAttribute("id");e.setAttribute("name",r),i.removeAttribute("name");for(var n=["required","aria-required","form"],s=0;s<n.length;s++)if(i.getAttribute(n[s])){var a=i.getAttribute(n[s]);e.setAttribute(n[s],a),i.removeAttribute(n[s])}},t.prototype.setZIndex=function(){},t.prototype.updateActionCompleteData=function(i,e,r){},t.prototype.updateAddItemList=function(i,e){},t.prototype.updateDataList=function(){},t.prototype.getDataByValue=function(i){if(!c(this.listData)){var e=this.typeOfData(this.listData).typeof;if(e==="string"||e==="number"||e==="boolean")for(var r=0,n=this.listData;r<n.length;r++){var s=n[r];if(!c(s)&&s===i)return s}else for(var a=0,l=this.listData;a<l.length;a++){var s=l[a];if(!c(s)&&N(this.fields.value?this.fields.value:"value",s)===i)return s}}return null},t.prototype.destroy=function(){document.body.contains(this.list)&&(b.remove(this.list,"scroll",this.setFloatingHeader),c(this.rippleFun)||this.rippleFun(),Ce(this.list)),this.liCollections=null,this.ulElement=null,this.list=null,this.enableRtlElements=null,this.rippleFun=null,o.prototype.destroy.call(this)},Ge([Je({text:null,value:null,iconCss:null,groupBy:null},yc)],t.prototype,"fields",void 0),Ge([C(null)],t.prototype,"itemTemplate",void 0),Ge([C(null)],t.prototype,"groupTemplate",void 0),Ge([C("No records found")],t.prototype,"noRecordsTemplate",void 0),Ge([C("Request failed")],t.prototype,"actionFailureTemplate",void 0),Ge([C("None")],t.prototype,"sortOrder",void 0),Ge([C([])],t.prototype,"dataSource",void 0),Ge([C(null)],t.prototype,"query",void 0),Ge([C("StartsWith")],t.prototype,"filterType",void 0),Ge([C(!0)],t.prototype,"ignoreCase",void 0),Ge([C(1e3)],t.prototype,"zIndex",void 0),Ge([C(!1)],t.prototype,"ignoreAccent",void 0),Ge([C()],t.prototype,"locale",void 0),Ge([k()],t.prototype,"actionBegin",void 0),Ge([k()],t.prototype,"actionComplete",void 0),Ge([k()],t.prototype,"actionFailure",void 0),Ge([k()],t.prototype,"select",void 0),Ge([k()],t.prototype,"dataBound",void 0),Ge([k()],t.prototype,"created",void 0),Ge([k()],t.prototype,"destroyed",void 0),t=Ge([si],t),t}(Kt),Dc=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),bi=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},as={TEXTSHAPE:"e-skeleton-text",CIRCLESHAPE:"e-skeleton-circle",SQUARESHAPE:"e-skeleton-square",RECTANGLESHAPE:"e-skeleton-rectangle",WAVEEFFECT:"e-shimmer-wave",PULSEEFFECT:"e-shimmer-pulse",FADEEFFECT:"e-shimmer-fade",VISIBLENONE:"e-visible-none"},ha;(function(o){o.Text="Text",o.Circle="Circle",o.Square="Square",o.Rectangle="Rectangle"})(ha||(ha={}));var ua;(function(o){o.Wave="Wave",o.Fade="Fade",o.Pulse="Pulse",o.None="None"})(ua||(ua={}));var Lc=function(o){Dc(t,o);function t(i,e){return o.call(this,i,e)||this}return t.prototype.getModuleName=function(){return"skeleton"},t.prototype.getPersistData=function(){return this.addOnPersist([])},t.prototype.preRender=function(){this.element.id||(this.element.id=tr("e-"+this.getModuleName())),this.updateCssClass(),Ie(this.element,{role:"alert","aria-busy":"true","aria-live":"polite","aria-label":this.label})},t.prototype.render=function(){this.initialize()},t.prototype.onPropertyChanged=function(i,e){for(var r=0,n=Object.keys(i);r<n.length;r++){var s=n[r];switch(s){case"width":case"height":this.updateDimension();break;case"shape":this.updateShape();break;case"shimmerEffect":this.updateEffect();break;case"visible":this.updateVisibility();break;case"label":this.element.setAttribute("aria-label",this.label);break;case"cssClass":e.cssClass&&F([this.element],e.cssClass.split(" ")),this.updateCssClass();break}}},t.prototype.destroy=function(){o.prototype.destroy.call(this);var i=["role","aria-live","aria-busy","aria-label"],e=[];this.cssClass&&(e=e.concat(this.cssClass.split(" ")));for(var r=0;r<i.length;r++)this.element.removeAttribute(i[parseInt(r.toString(),10)]);e=e.concat(this.element.classList.value.match(/(e-skeleton-[^\s]+)/g)),e=e.concat(this.element.classList.value.match(/(e-shimmer-[^\s]+)/g)),F([this.element],e)},t.prototype.initialize=function(){this.updateShape(),this.updateEffect(),this.updateVisibility()},t.prototype.updateShape=function(){var i=as[this.shape.toUpperCase()+"SHAPE"],e=this.element.classList.value.match(/(e-skeleton-[^\s]+)/g);this.updateDimension(),e&&F([this.element],e),T([this.element],[i])},t.prototype.updateDimension=function(){var i=!this.width&&["Text","Rectangle"].indexOf(this.shape)>-1?"100%":Pe(this.width),e=["Circle","Square"].indexOf(this.shape)>-1?i:Pe(this.height);this.element.style.width=i,this.element.style.height=e},t.prototype.updateEffect=function(){var i=this.element.classList.value.match(/(e-shimmer-[^\s]+)/g);i&&F([this.element],i),T([this.element],[as[this.shimmerEffect.toUpperCase()+"EFFECT"]])},t.prototype.updateVisibility=function(){this.element.classList[this.visible?"remove":"add"](as.VISIBLENONE)},t.prototype.updateCssClass=function(){this.cssClass&&T([this.element],this.cssClass.split(" "))},bi([C("")],t.prototype,"width",void 0),bi([C("")],t.prototype,"height",void 0),bi([C(!0)],t.prototype,"visible",void 0),bi([C("Text")],t.prototype,"shape",void 0),bi([C("Wave")],t.prototype,"shimmerEffect",void 0),bi([C("Loading...")],t.prototype,"label",void 0),bi([C("")],t.prototype,"cssClass",void 0),t=bi([si],t),t}(Kt),Fc=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),qe=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},ge={root:"e-dropdownlist",hover:ee.hover,selected:ee.selected,rtl:ee.rtl,li:ee.li,disable:ee.disabled,base:ee.root,focus:ee.focus,content:ee.content,input:"e-input-group",inputFocus:"e-input-focus",icon:"e-input-group-icon e-ddl-icon",iconAnimation:"e-icon-anim",value:"e-input-value",device:"e-ddl-device",backIcon:"e-input-group-icon e-back-icon e-icons",filterBarClearIcon:"e-input-group-icon e-clear-icon e-icons",filterInput:"e-input-filter",filterParent:"e-filter-parent",mobileFilter:"e-ddl-device-filter",footer:"e-ddl-footer",header:"e-ddl-header",clearIcon:"e-clear-icon",clearIconHide:"e-clear-icon-hide",popupFullScreen:"e-popup-full-page",disableIcon:"e-ddl-disable-icon",hiddenElement:"e-ddl-hidden",virtualList:"e-list-item e-virtual-list"},Mc={container:null,buttons:[]},Oc=function(o){Fc(t,o);function t(i,e){var r=o.call(this,i,e)||this;return r.skeletonCount=32,r.isListSearched=!1,r.preventChange=!1,r.isAngular=!1,r.virtualListHeight=0,r.isVirtualScrolling=!1,r.isPreventScrollAction=!1,r.scrollPreStartIndex=0,r.isScrollActionTriggered=!1,r.previousStartIndex=0,r.isMouseScrollAction=!1,r.isKeyBoardAction=!1,r.isUpwardScrolling=!1,r.startIndex=0,r.currentPageNumber=0,r.pageCount=0,r.isPreventKeyAction=!1,r.generatedDataObject={},r.incrementalQueryString="",r.incrementalEndIndex=0,r.incrementalStartIndex=0,r.incrementalPreQueryString="",r.isTouched=!1,r.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},r.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},r.selectedValueInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},r.IsScrollerAtEnd=function(){return this.list&&this.list.scrollTop+this.list.clientHeight>=this.list.scrollHeight},r}return t.prototype.preRender=function(){this.valueTempElement=null,this.element.style.opacity="0",this.initializeData(),o.prototype.preRender.call(this),this.activeIndex=this.index,this.queryString=""},t.prototype.initializeData=function(){this.isPopupOpen=!1,this.isDocumentClick=!1,this.isInteracted=!1,this.isFilterFocus=!1,this.beforePopupOpen=!1,this.initial=!0,this.initialRemoteRender=!1,this.isNotSearchList=!1,this.isTyped=!1,this.isSelected=!1,this.preventFocus=!1,this.preventAutoFill=!1,this.isValidKey=!1,this.typedString="",this.isEscapeKey=!1,this.isPreventBlur=!1,this.isTabKey=!1,this.actionCompleteData={isUpdated:!1},this.actionData={isUpdated:!1},this.prevSelectPoints={},this.isSelectCustom=!1,this.isDropDownClick=!1,this.preventAltUp=!1,this.isCustomFilter=!1,this.isSecondClick=!1,this.previousValue=null,this.keyConfigure={tab:"tab",enter:"13",escape:"27",end:"35",home:"36",down:"40",up:"38",pageUp:"33",pageDown:"34",open:"alt+40",close:"shift+tab",hide:"alt+38",space:"32"},this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount}},t.prototype.setZIndex=function(){this.popupObj&&this.popupObj.setProperties({zIndex:this.zIndex})},t.prototype.requiredModules=function(){var i=[];return this.enableVirtualization&&i.push({args:[this],member:"VirtualScroll"}),i},t.prototype.renderList=function(i,e){o.prototype.render.call(this,i,e),this.dataSource instanceof V||(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0),this.unWireListEvents(),this.wireListEvents()},t.prototype.floatLabelChange=function(){if(this.getModuleName()==="dropdownlist"&&this.floatLabelType==="Auto"){var i=this.inputWrapper.container.querySelector(".e-float-text");this.inputElement.value!==""||this.isInteracted?ot(i,["e-label-top"],["e-label-bottom"]):ot(i,["e-label-bottom"],["e-label-top"])}},t.prototype.resetHandler=function(i){i.preventDefault(),this.clearAll(i),this.enableVirtualization&&(this.list.scrollTop=0,this.virtualListInfo=null,this.previousStartIndex=0,this.previousEndIndex=0)},t.prototype.resetFocusElement=function(){if(this.removeHover(),this.removeSelection(),this.removeFocus(),this.list.scrollTop=0,this.getModuleName()!=="autocomplete"&&!c(this.ulElement)){var i=this.ulElement.querySelector("."+ge.li);this.enableVirtualization&&(i=this.liCollections[this.skeletonCount]),i&&i.classList.add(ge.focus)}},t.prototype.clearAll=function(i,e){this.previousItemData=c(this.itemData)?null:this.itemData,(c(e)||!c(e)&&(c(e.dataSource)||!(e.dataSource instanceof V)&&e.dataSource.length===0))&&(this.isActive=!0,this.resetSelection(e));var r=this.getItemData();this.previousValue!==r.value&&(this.onChangeEvent(i),this.checkAndResetCache(),this.enableVirtualization&&this.updateInitialData())},t.prototype.resetSelection=function(i){this.list&&(!c(i)&&(c(i.dataSource)||!(i.dataSource instanceof V)&&i.dataSource.length===0)?(this.selectedLI=null,this.actionCompleteData.isUpdated=!1,this.actionCompleteData.ulElement=null,this.actionCompleteData.list=null,this.resetList(i.dataSource)):(this.allowFiltering&&this.getModuleName()!=="autocomplete"&&!c(this.actionCompleteData.ulElement)&&!c(this.actionCompleteData.list)&&this.actionCompleteData.list.length>0&&this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(!0),this.actionCompleteData.list),this.resetFocusElement())),c(this.hiddenElement)||(this.hiddenElement.innerHTML=""),c(this.inputElement)||(this.inputElement.value=""),this.value=null,this.itemData=null,this.text=null,this.index=null,this.activeIndex=null,this.item=null,this.queryString="",this.valueTempElement&&(Ce(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null),this.setSelection(null,null),this.isSelectCustom=!1,this.updateIconState(),this.cloneElements()},t.prototype.setHTMLAttributes=function(){if(Object.keys(this.htmlAttributes).length)for(var i=0,e=Object.keys(this.htmlAttributes);i<e.length;i++){var r=e[i];if(r==="class"){var n=this.htmlAttributes[""+r].replace(/\s+/g," ").trim();n!==""&&T([this.inputWrapper.container],n.split(" "))}else if(r==="disabled"&&this.htmlAttributes[""+r]==="disabled")this.enabled=!1,this.setEnable();else if(r==="readonly"&&!c(this.htmlAttributes[""+r]))this.readonly=!0,this.dataBind();else if(r==="style")this.inputWrapper.container.setAttribute("style",this.htmlAttributes[""+r]);else if(r==="aria-label")(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&!this.readonly?this.inputElement.setAttribute("aria-label",this.htmlAttributes[""+r]):this.getModuleName()==="dropdownlist"&&this.inputWrapper.container.setAttribute("aria-label",this.htmlAttributes[""+r]);else{var s=["title","id","placeholder","role","autocomplete","autocapitalize","spellcheck","minlength","maxlength"],a=["name","required"];(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&s.push("tabindex"),a.indexOf(r)>-1||r.indexOf("data")===0?this.hiddenElement.setAttribute(r,this.htmlAttributes[""+r]):s.indexOf(r)>-1?r==="placeholder"?ce.setPlaceholder(this.htmlAttributes[""+r],this.inputElement):this.inputElement.setAttribute(r,this.htmlAttributes[""+r]):this.inputWrapper.container.setAttribute(r,this.htmlAttributes[""+r])}}(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&this.inputWrapper.container.removeAttribute("tabindex")},t.prototype.getAriaAttributes=function(){return{"aria-disabled":"false",role:"combobox","aria-expanded":"false","aria-live":"polite","aria-labelledby":this.hiddenElement.id}},t.prototype.setEnableRtl=function(){ce.setEnableRtl(this.enableRtl,[this.inputElement.parentElement]),this.popupObj&&(this.popupObj.enableRtl=this.enableRtl,this.popupObj.dataBind())},t.prototype.setEnable=function(){ce.setEnabled(this.enabled,this.inputElement),this.enabled?(F([this.inputWrapper.container],ge.disable),this.inputElement.setAttribute("aria-disabled","false"),this.targetElement().setAttribute("tabindex",this.tabIndex)):(this.hidePopup(),T([this.inputWrapper.container],ge.disable),this.inputElement.setAttribute("aria-disabled","true"),this.targetElement().tabIndex=-1)},t.prototype.getPersistData=function(){return this.addOnPersist(["value"])},t.prototype.getLocaleName=function(){return"drop-down-list"},t.prototype.preventTabIndex=function(i){this.getModuleName()==="dropdownlist"&&(i.tabIndex=-1)},t.prototype.targetElement=function(){return c(this.inputWrapper)?null:this.inputWrapper.container},t.prototype.getNgDirective=function(){return"EJS-DROPDOWNLIST"},t.prototype.getElementByText=function(i){return this.getElementByValue(this.getValueByText(i))},t.prototype.getElementByValue=function(i){for(var e,r=this.getItems(),n=0,s=r;n<s.length;n++){var a=s[n];if(this.getFormattedValue(a.getAttribute("data-value"))===i){e=a;break}}return e},t.prototype.initValue=function(){this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.itemCount,this.renderList(),this.dataSource instanceof V?this.initialRemoteRender=!0:this.updateValues()},t.prototype.updateValues=function(){if(this.selectedValueInfo=this.viewPortInfo,!c(this.value))this.setSelection(this.getElementByValue(this.value),null);else if(this.text&&c(this.value)){var i=this.getElementByText(this.text);if(c(i)){this.setProperties({text:null});return}else this.setSelection(i,null)}else this.setSelection(this.liCollections[this.activeIndex],null);this.setHiddenValue(),ce.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onBlurHandler=function(i){if(this.enabled){var e=i.relatedTarget,r=i.target,n=this.isPreventBlur;if(this.isPreventBlur=!1,n&&!this.isDocumentClick&&this.isPopupOpen&&(!c(r)||!this.isFilterLayout()&&c(e))){this.getModuleName()==="dropdownlist"&&this.allowFiltering&&this.isPopupOpen?this.filterInput.focus():this.targetElement().focus();return}if(this.isDocumentClick||!c(this.popupObj)&&document.body.contains(this.popupObj.element)&&this.popupObj.element.classList.contains(ge.mobileFilter)){this.beforePopupOpen||(this.isDocumentClick=!1);return}(this.getModuleName()==="dropdownlist"&&!this.isFilterFocus&&e!==this.inputElement&&(document.activeElement!==e||document.activeElement===e&&r.classList.contains(ge.inputFocus))||c(e)&&this.getModuleName()==="dropdownlist"&&this.allowFiltering&&r!==this.inputWrapper.container||this.getModuleName()!=="dropdownlist"&&!this.inputWrapper.container.contains(e)||this.isTabKey)&&(this.isDocumentClick=!!this.isPopupOpen,this.focusOutAction(i),this.isTabKey=!1),this.isRequested&&!this.isPopupOpen&&!this.isPreventBlur&&(this.isActive=!1,this.beforePopupOpen=!1)}},t.prototype.focusOutAction=function(i){this.isInteracted=!1,this.focusOut(i),this.onFocusOut(i)},t.prototype.onFocusOut=function(i){this.enabled&&(this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(i)),this.floatLabelChange(),this.dispatchEvent(this.hiddenElement,"change"),this.getModuleName()==="dropdownlist"&&this.element.tagName!=="INPUT"&&this.dispatchEvent(this.inputElement,"blur"),this.inputWrapper.clearButton&&T([this.inputWrapper.clearButton],ge.clearIconHide),this.trigger("blur"))},t.prototype.onFocus=function(i){if(!this.isInteracted){this.isInteracted=!0;var e={isInteracted:!!i,event:i};this.trigger("focus",e)}this.updateIconState()},t.prototype.resetValueHandler=function(i){var e=D(this.inputElement,"form");if(e&&i.target===e){var r=this.element.tagName===this.getNgDirective()?null:this.inputElement.getAttribute("value");this.text=r}},t.prototype.wireEvent=function(){b.add(this.inputWrapper.container,"mousedown",this.dropDownClick,this),b.add(this.inputWrapper.container,"focus",this.focusIn,this),b.add(this.inputWrapper.container,"keypress",this.onSearch,this),b.add(window,"resize",this.windowResize,this),this.bindCommonEvent()},t.prototype.bindCommonEvent=function(){b.add(this.targetElement(),"blur",this.onBlurHandler,this);var i=D(this.inputElement,"form");i&&b.add(i,"reset",this.resetValueHandler,this),Q.isDevice?this.keyboardModule=new Xi(this.targetElement(),{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.keyboardModule=new Xi(this.targetElement(),{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),this.bindClearEvent()},t.prototype.windowResize=function(){this.isPopupOpen&&this.popupObj.refreshPosition(this.inputWrapper.container)},t.prototype.bindClearEvent=function(){this.showClearButton&&b.add(this.inputWrapper.clearButton,"mousedown",this.resetHandler,this)},t.prototype.unBindCommonEvent=function(){!c(this.inputWrapper)&&this.targetElement()&&b.remove(this.targetElement(),"blur",this.onBlurHandler);var i=this.inputElement&&D(this.inputElement,"form");i&&b.remove(i,"reset",this.resetValueHandler),Q.isDevice||this.keyboardModule.destroy(),this.showClearButton&&b.remove(this.inputWrapper.clearButton,"mousedown",this.resetHandler)},t.prototype.updateIconState=function(){this.showClearButton&&(this.inputElement.value!==""&&!this.readonly?F([this.inputWrapper.clearButton],ge.clearIconHide):T([this.inputWrapper.clearButton],ge.clearIconHide))},t.prototype.wireListEvents=function(){c(this.list)||(b.add(this.list,"click",this.onMouseClick,this),b.add(this.list,"mouseover",this.onMouseOver,this),b.add(this.list,"mouseout",this.onMouseLeave,this))},t.prototype.onSearch=function(i){i.charCode!==32&&i.charCode!==13&&(this.list===void 0&&this.renderList(),this.searchKeyEvent=i,this.onServerIncrementalSearch(i))},t.prototype.onServerIncrementalSearch=function(i){!this.isRequested&&!c(this.list)&&!c(this.list.querySelector("li"))&&this.enabled&&!this.readonly&&this.incrementalSearch(i)},t.prototype.onMouseClick=function(i){var e=i.target;this.keyboardEvent=null;var r=D(e,"."+ee.li);if(this.isValidLI(r))if(this.setSelection(r,i),Q.isDevice&&this.isFilterLayout())history.back();else{var n=100;this.closePopup(n,i)}},t.prototype.onMouseOver=function(i){var e=D(i.target,"."+ee.li);this.setHover(e)},t.prototype.setHover=function(i){this.enabled&&this.isValidLI(i)&&!i.classList.contains(ee.hover)&&(this.removeHover(),T([i],ee.hover))},t.prototype.onMouseLeave=function(){this.removeHover()},t.prototype.removeHover=function(){if(this.list){var i=this.list.querySelectorAll("."+ee.hover);i&&i.length&&F(i,ee.hover)}},t.prototype.isValidLI=function(i){return i&&i.hasAttribute("role")&&i.getAttribute("role")==="option"},t.prototype.updateIncrementalInfo=function(i,e){this.viewPortInfo.startIndex=i,this.viewPortInfo.endIndex=e,this.updateVirtualItemIndex(),this.isIncrementalRequest=!0,this.resetList(this.dataSource,this.fields,this.query),this.isIncrementalRequest=!1},t.prototype.updateIncrementalView=function(i,e){this.viewPortInfo.startIndex=i,this.viewPortInfo.endIndex=e,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+ee.li),this.ulElement=this.list.querySelector("ul")},t.prototype.updateIncrementalItemIndex=function(i,e){this.incrementalStartIndex=i,this.incrementalEndIndex=e},t.prototype.incrementalSearch=function(i){if(this.liCollections.length>0)if(this.enableVirtualization){var e=!1,r=!1,n=this.ulElement.getElementsByClassName("e-active")[0],s=n?n.textContent:null;this.incrementalQueryString==""?(this.incrementalQueryString=String.fromCharCode(i.charCode),this.incrementalPreQueryString=this.incrementalQueryString):String.fromCharCode(i.charCode).toLocaleLowerCase()==this.incrementalPreQueryString.toLocaleLowerCase()?r=!0:this.incrementalQueryString=String.fromCharCode(i.charCode),(this.viewPortInfo.endIndex>=this.incrementalEndIndex&&this.incrementalEndIndex<=this.totalItemCount||this.incrementalEndIndex==0)&&(e=!0,this.incrementalStartIndex=this.incrementalEndIndex,this.incrementalEndIndex==0?this.incrementalEndIndex=100>this.totalItemCount?this.totalItemCount:100:this.incrementalEndIndex=this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100,this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),e=!0),(this.viewPortInfo.startIndex!==0||e)&&this.updateIncrementalView(0,this.itemCount);for(var a=Wr(i.charCode,this.incrementalLiCollections,this.activeIndex,!0,this.element.id,r,s,!0);c(a)&&this.incrementalEndIndex<this.totalItemCount&&(this.updateIncrementalItemIndex(this.incrementalEndIndex,this.incrementalEndIndex+100>this.totalItemCount?this.totalItemCount:this.incrementalEndIndex+100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),e=!0,(this.viewPortInfo.startIndex!==0||e)&&this.updateIncrementalView(0,this.itemCount),a=Wr(i.charCode,this.incrementalLiCollections,0,!0,this.element.id,r,s,!0,!0),!!c(a));)if(c(a)&&this.incrementalEndIndex>=this.totalItemCount){this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100);break}c(a)&&this.incrementalEndIndex>=this.totalItemCount&&(this.updateIncrementalItemIndex(0,100>this.totalItemCount?this.totalItemCount:100),this.updateIncrementalInfo(this.incrementalStartIndex,this.incrementalEndIndex),e=!0,(this.viewPortInfo.startIndex!==0||e)&&this.updateIncrementalView(0,this.itemCount),a=Wr(i.charCode,this.incrementalLiCollections,0,!0,this.element.id,r,s,!0,!0));var l=a&&this.getIndexByValue(a.getAttribute("data-value"));if(l)l=l-this.skeletonCount;else for(var h=0;h<this.incrementalLiCollections.length;h++)if(!c(a)&&!c(a.getAttribute("data-value"))&&this.incrementalLiCollections[h].getAttribute("data-value")===a.getAttribute("data-value").toString()){l=h,l=this.incrementalStartIndex+l;break}if(l&&(!(this.viewPortInfo.startIndex>=l)||!(l>=this.viewPortInfo.endIndex))){var u=l-(this.itemCount/2-2)>0?l-(this.itemCount/2-2):0,p=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(u,p)}if(c(a))this.updateIncrementalView(0,this.itemCount),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.list.scrollTop=0;else{var d=this.getIndexByValue(a.getAttribute("data-value"))-this.skeletonCount;if(d>this.itemCount/2){var u=this.viewPortInfo.startIndex+(this.itemCount/2-2)<this.totalItemCount?this.viewPortInfo.startIndex+(this.itemCount/2-2):this.totalItemCount,p=this.viewPortInfo.startIndex+this.itemCount>this.totalItemCount?this.totalItemCount:this.viewPortInfo.startIndex+this.itemCount;this.updateIncrementalView(u,p)}if(a=this.getElementByValue(a.getAttribute("data-value")),this.setSelection(a,i),this.setScrollPosition(),this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues(),this.enableVirtualization&&!this.fields.groupBy){var f=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.list.scrollTop=f-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}this.incrementalPreQueryString=this.incrementalQueryString}}else{var a=Wr(i.charCode,this.liCollections,this.activeIndex,!0,this.element.id);c(a)||(this.setSelection(a,i),this.setScrollPosition())}},t.prototype.hideSpinner=function(){c(this.spinnerElement)||(Er(this.spinnerElement),F([this.spinnerElement],ge.disableIcon),this.spinnerElement.innerHTML="",this.spinnerElement=null)},t.prototype.showSpinner=function(){c(this.spinnerElement)&&(this.spinnerElement=Q.isDevice&&!c(this.filterInputObj)&&this.filterInputObj.buttons[1]||!c(this.filterInputObj)&&this.filterInputObj.buttons[0]||this.inputWrapper.buttons[0],T([this.spinnerElement],ge.disableIcon),Ir({target:this.spinnerElement,width:Q.isDevice?"16px":"14px"},this.createElement),Wi(this.spinnerElement))},t.prototype.keyActionHandler=function(i){if(this.enabled){this.keyboardEvent=i,this.isPreventKeyAction&&this.enableVirtualization&&i.preventDefault();var e=i.action==="pageUp"||i.action==="pageDown",r=this.getModuleName()!=="dropdownlist"&&(i.action==="home"||i.action==="end");this.isEscapeKey=i.action==="escape",this.isTabKey=!this.isPopupOpen&&i.action==="tab";var n=i.action==="down"||i.action==="up"||i.action==="pageUp"||i.action==="pageDown"||i.action==="home"||i.action==="end";if(!((this.isEditTextBox()||e||r)&&!this.isPopupOpen)&&!this.readonly){var s=i.action==="tab"||i.action==="close";if(c(this.list)&&!this.isRequested&&!s&&i.action!=="escape"&&(this.searchKeyEvent=i,this.renderList(i),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+ee.li),this.ulElement=this.list.querySelector("ul")),c(this.list)||!c(this.liCollections)&&n&&this.liCollections.length===0||this.isRequested)return;switch((s&&this.getModuleName()!=="autocomplete"&&this.isPopupOpen||i.action==="escape")&&i.preventDefault(),this.isSelected=i.action==="escape"?!1:this.isSelected,this.isTyped=n||i.action==="escape"?!1:this.isTyped,i.action){case"down":case"up":this.updateUpDownAction(i);break;case"pageUp":this.pageUpSelection(this.activeIndex-this.getPageCount(),i),i.preventDefault();break;case"pageDown":this.pageDownSelection(this.activeIndex+this.getPageCount(),i),i.preventDefault();break;case"home":this.isMouseScrollAction=!0,this.updateHomeEndAction(i);break;case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(i);break;case"space":this.getModuleName()==="dropdownlist"&&(this.beforePopupOpen||(this.showPopup(),i.preventDefault()));break;case"open":this.showPopup(i);break;case"hide":this.preventAltUp=this.isPopupOpen,this.hidePopup(i),this.focusDropDown(i);break;case"enter":this.selectCurrentItem(i);break;case"tab":this.selectCurrentValueOnTab(i);break;case"escape":case"close":this.isPopupOpen&&(this.hidePopup(i),this.focusDropDown(i));break}}}},t.prototype.updateUpDownAction=function(i,e){if(this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var r=this.getItemData().value;c(r)&&(r="null");var n=this.getIndexByValue(r);c(n)||(this.activeIndex=n)}var s=this.list.querySelector("."+ge.focus);if(this.isSelectFocusItem(s)&&!e){if(this.setSelection(s,i),this.enableVirtualization&&!this.fields.groupBy&&this.getModuleName()!=="combobox"){var a=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop;this.list.scrollTop=a-this.list.querySelectorAll(".e-virtual-list").length*this.selectedLI.offsetHeight}}else if(!c(this.liCollections)){var l=this.activeIndex,h=i.action==="down"?this.activeIndex+1:this.activeIndex-1;h=e?l:h;var u=0;this.getModuleName()==="autocomplete"&&(u=i.action==="down"&&c(this.activeIndex)?0:this.liCollections.length-1,h=h<0?this.liCollections.length-1:h===this.liCollections.length?0:h);var p=void 0;if(this.getModuleName()!=="autocomplete"||this.getModuleName()==="autocomplete"&&this.isPopupOpen)if(!this.enableVirtualization)p=c(this.activeIndex)?this.liCollections[u]:this.liCollections[h];else if(!e)p=c(this.activeIndex)?this.liCollections[this.skeletonCount]:this.liCollections[h],p=!c(p)&&!p.classList.contains("e-virtual-list")?p:null;else if(this.getModuleName()==="autocomplete"){var d=this.getFormattedValue(this.selectedLI.getAttribute("data-value"));p=this.getElementByValue(d)}else p=this.getElementByValue(this.getItemData().value);if(!c(p))this.setSelection(p,i);else if(this.enableVirtualization&&!this.isPopupOpen&&this.getModuleName()!=="autocomplete"&&(this.viewPortInfo.endIndex!==this.totalItemCount&&i.action==="down"||this.viewPortInfo.startIndex!==0&&i.action==="up")){if(i.action==="down"){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex+this.itemCount<this.totalItemCount-this.itemCount?this.viewPortInfo.startIndex+this.itemCount:this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter=this.getModuleName()==="combobox"?!0:this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter=this.getModuleName()==="combobox"?!1:this.isCustomFilter;var f=this.liCollections[0].getAttribute("data-value")!=="null"?this.getFormattedValue(this.liCollections[0].getAttribute("data-value")):null,g=this.getDataByValue(f);g&&(this.itemData=g)}else if(i.action==="up"){this.viewPortInfo.startIndex=this.viewPortInfo.startIndex-this.itemCount>0?this.viewPortInfo.startIndex-this.itemCount:0,this.viewPortInfo.endIndex=this.viewPortInfo.startIndex+this.itemCount,this.updateVirtualItemIndex(),this.isCustomFilter=this.getModuleName()==="combobox"?!0:this.isCustomFilter,this.resetList(this.dataSource,this.fields,this.query),this.isCustomFilter=this.getModuleName()==="combobox"?!1:this.isCustomFilter;var v=this.liCollections[this.liCollections.length-1].getAttribute("data-value")!=="null"?this.getFormattedValue(this.liCollections[this.liCollections.length-1].getAttribute("data-value")):null,g=this.getDataByValue(v);g&&(this.itemData=g)}this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll("."+ee.li),this.ulElement=this.list.querySelector("ul"),this.handleVirtualKeyboardActions(i,this.pageCount)}}if(this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var m=this.getItemData().value,n=this.getIndexByValueFilter(m);c(n)||(this.activeIndex=n)}this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(!c(this.ulElement)&&!c(this.ulElement.getElementsByClassName("e-item-focus")[0])?Ie(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!c(this.ulElement)&&!c(this.ulElement.getElementsByClassName("e-active")[0])&&Ie(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id})),i.preventDefault()},t.prototype.updateVirtualItemIndex=function(){this.virtualItemStartIndex=this.viewPortInfo.startIndex,this.virtualItemEndIndex=this.viewPortInfo.endIndex,this.virtualListInfo=this.viewPortInfo},t.prototype.updateHomeEndAction=function(i,e){if(this.getModuleName()==="dropdownlist"){var r=0;if(i.action==="home"?(r=0,this.enableVirtualization&&this.isPopupOpen?r=this.skeletonCount:this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.startIndex!==0&&(this.viewPortInfo.startIndex=0,this.viewPortInfo.endIndex=this.itemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query))):(this.enableVirtualization&&!this.isPopupOpen&&this.viewPortInfo.endIndex!==this.totalItemCount&&(this.viewPortInfo.startIndex=this.totalItemCount-this.itemCount,this.viewPortInfo.endIndex=this.totalItemCount,this.updateVirtualItemIndex(),this.resetList(this.dataSource,this.fields,this.query)),r=this.getItems().length-1),i.preventDefault(),this.activeIndex===r){e&&this.setSelection(this.liCollections[r],i);return}this.setSelection(this.liCollections[r],i)}},t.prototype.selectCurrentValueOnTab=function(i){this.getModuleName()==="autocomplete"?this.selectCurrentItem(i):this.isPopupOpen&&(this.hidePopup(i),this.focusDropDown(i))},t.prototype.mobileKeyActionHandler=function(i){if(this.enabled&&!(this.isEditTextBox()&&!this.isPopupOpen)&&!this.readonly){if(this.list===void 0&&!this.isRequested&&(this.searchKeyEvent=i,this.renderList()),c(this.list)||!c(this.liCollections)&&this.liCollections.length===0||this.isRequested)return;i.action==="enter"&&this.selectCurrentItem(i)}},t.prototype.handleVirtualKeyboardActions=function(i,e){switch(i.action){case"down":case"up":(this.itemData!=null||this.getModuleName()==="autocomplete")&&this.updateUpDownAction(i,!0);break;case"pageUp":var r=e*2-4;this.activeIndex=Math.round(r),this.pageUpSelection(this.activeIndex-this.getPageCount(),i,!0),i.preventDefault();break;case"pageDown":this.activeIndex=1,this.pageDownSelection(this.activeIndex+this.getPageCount(),i,!0),i.preventDefault();break;case"home":this.isMouseScrollAction=!0,this.updateHomeEndAction(i,!0);break;case"end":this.isMouseScrollAction=!0,this.updateHomeEndAction(i,!0);break}this.keyboardEvent=null},t.prototype.selectCurrentItem=function(i){if(this.isPopupOpen){var e=this.list.querySelector("."+ge.focus);e&&(this.setSelection(e,i),this.isTyped=!1),this.isSelected&&(this.isSelectCustom=!1,this.onChangeEvent(i)),this.hidePopup(i),this.focusDropDown(i)}else this.showPopup()},t.prototype.isSelectFocusItem=function(i){return!c(i)},t.prototype.pageUpSelection=function(i,e,r){var n=i>=0?this.liCollections[i+1]:this.liCollections[0];(this.enableVirtualization&&this.activeIndex==null||r)&&(n=i>=0?this.liCollections[i+this.skeletonCount+1]:this.liCollections[0]),!c(n)&&n.classList.contains("e-virtual-list")&&(n=this.liCollections[this.skeletonCount]),this.PageUpDownSelection(n,e),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(!c(this.ulElement)&&!c(this.ulElement.getElementsByClassName("e-item-focus")[0])?Ie(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!c(this.ulElement)&&!c(this.ulElement.getElementsByClassName("e-active")[0])&&Ie(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},t.prototype.PageUpDownSelection=function(i,e){this.enableVirtualization?!c(i)&&(this.getModuleName()!=="autocomplete"&&!i.classList.contains("e-active")||this.getModuleName()==="autocomplete"&&!i.classList.contains("e-item-focus"))&&this.setSelection(i,e):this.setSelection(i,e)},t.prototype.pageDownSelection=function(i,e,r){var n=this.getItems(),s=i<=n.length?this.liCollections[i-1]:this.liCollections[n.length-1];(this.enableVirtualization&&this.activeIndex==null||r)&&(s=i<=n.length?this.liCollections[i+this.skeletonCount-1]:this.liCollections[n.length-1]),this.PageUpDownSelection(s,e),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&(!c(this.ulElement)&&!c(this.ulElement.getElementsByClassName("e-item-focus")[0])?Ie(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):!c(this.ulElement)&&!c(this.ulElement.getElementsByClassName("e-active")[0])&&Ie(this.filterInput,{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},t.prototype.unWireEvent=function(){c(this.inputWrapper)||(b.remove(this.inputWrapper.container,"mousedown",this.dropDownClick),b.remove(this.inputWrapper.container,"keypress",this.onSearch),b.remove(this.inputWrapper.container,"focus",this.focusIn),b.remove(window,"resize",this.windowResize)),this.unBindCommonEvent()},t.prototype.unWireListEvents=function(){this.list&&(b.remove(this.list,"click",this.onMouseClick),b.remove(this.list,"mouseover",this.onMouseOver),b.remove(this.list,"mouseout",this.onMouseLeave))},t.prototype.checkSelector=function(i){return'[id="'+i.replace(/(:|\.|\[|\]|,|=|@|\\|\/|#)/g,"\\$1")+'"]'},t.prototype.onDocumentClick=function(i){var e=i.target;if(!(!c(this.popupObj)&&D(e,this.checkSelector(this.popupObj.element.id)))&&!c(this.inputWrapper)&&!this.inputWrapper.container.contains(i.target)){if(this.inputWrapper.container.classList.contains(ge.inputFocus)||this.isPopupOpen){this.isDocumentClick=!0;var r=this.isRequested;this.getModuleName()==="combobox"&&this.isTyped&&(this.isInteracted=!1),this.hidePopup(i),this.isInteracted=!1,r||(this.onFocusOut(i),this.inputWrapper.container.classList.remove(ge.inputFocus))}}else e!==this.inputElement&&!(this.allowFiltering&&e===this.filterInput)&&!(this.getModuleName()==="combobox"&&!this.allowFiltering&&Q.isDevice&&e===this.inputWrapper.buttons[0])&&(this.isPreventBlur=(Q.isIE||Q.info.name==="edge")&&(document.activeElement===this.targetElement()||document.activeElement===this.filterInput),i.preventDefault())},t.prototype.activeStateChange=function(){this.isDocumentClick&&(this.hidePopup(),this.onFocusOut(),this.inputWrapper.container.classList.remove(ge.inputFocus))},t.prototype.focusDropDown=function(i){!this.initial&&this.isFilterLayout()&&this.focusIn(i)},t.prototype.dropDownClick=function(i){if(!(i.which===3||i.button===2)&&(this.keyboardEvent=null,!(this.targetElement().classList.contains(ge.disable)||this.inputWrapper.clearButton===i.target))){var e=i.target;if(e!==this.inputElement&&!(this.allowFiltering&&e===this.filterInput)&&this.getModuleName()!=="combobox"&&i.preventDefault(),this.readonly)this.focusIn(i);else{this.isPopupOpen?(this.hidePopup(i),this.isFilterLayout()&&this.focusDropDown(i)):(this.focusIn(i),this.floatLabelChange(),this.queryString=this.inputElement.value.trim()===""?null:this.inputElement.value,this.isDropDownClick=!0,this.showPopup(i));var r=this,n=this.element.tagName===this.getNgDirective()&&this.itemTemplate?500:100;this.isSecondClick||setTimeout(function(){r.cloneElements(),r.isSecondClick=!0},n)}}},t.prototype.cloneElements=function(){if(this.list){var i=this.list.querySelector("ul");i&&(i=i.cloneNode?i.cloneNode(!0):i,this.actionCompleteData.ulElement=i)}},t.prototype.updateSelectedItem=function(i,e,r,n){var s=this;this.removeSelection(),i.classList.add(ee.selected),this.removeHover();var a=i.getAttribute("data-value")!=="null"?this.getFormattedValue(i.getAttribute("data-value")):null,l=this.getDataByValue(a);if(!this.initial&&!r&&!c(e)){var h=this.detachChanges(l);this.isSelected=!0;var u={e,item:i,itemData:h,isInteracted:!!e,cancel:!1};this.trigger("select",u,function(p){p.cancel?i.classList.remove(ee.selected):(s.selectEventCallback(i,e,r,l,a),n&&s.setSelectOptions(i,e))})}else this.selectEventCallback(i,e,r,l,a),n&&this.setSelectOptions(i,e)},t.prototype.selectEventCallback=function(i,e,r,n,s){this.previousItemData=c(this.itemData)?null:this.itemData,this.itemData!=n&&(this.previousValue=c(this.itemData)?null:typeof this.itemData=="object"?this.checkFieldValue(this.itemData,this.fields.value.split(".")):this.itemData),this.item=i,this.itemData=n;var a=this.list.querySelector("."+ee.focus);if(a&&F([a],ee.focus),i.setAttribute("aria-selected","true"),c(s)&&(s="null"),this.allowFiltering&&!this.enableVirtualization&&this.getModuleName()!=="autocomplete"){var l=this.getIndexByValueFilter(s);c(l)?this.activeIndex=this.getIndexByValue(s):this.activeIndex=l}else this.activeIndex=this.getIndexByValue(s)},t.prototype.activeItem=function(i){this.isValidLI(i)&&!i.classList.contains(ee.selected)&&(this.removeSelection(),i.classList.add(ee.selected),this.removeHover(),i.setAttribute("aria-selected","true"))},t.prototype.setValue=function(i){var e=this.getItemData();e.value===null?ce.setValue(null,this.inputElement,this.floatLabelType,this.showClearButton):ce.setValue(e.text,this.inputElement,this.floatLabelType,this.showClearButton),this.valueTemplate&&this.itemData!==null?this.setValueTemplate():!c(this.valueTempElement)&&this.inputElement.previousSibling===this.valueTempElement&&(Ce(this.valueTempElement),this.inputElement.style.display="block"),!c(e.value)&&!this.enableVirtualization&&this.allowFiltering&&(this.activeIndex=this.getIndexByValueFilter(e.value));var r=ge.clearIcon,n=this.isFiltering()&&this.filterInput&&this.getModuleName()==="combobox",s=n&&this.filterInput.parentElement.querySelector("."+r);return this.isFiltering()&&s&&s.style.removeProperty("visibility"),this.previousValue===e.value?(this.isSelected=!1,!0):(this.isSelected=!this.initial,this.isSelectCustom=!1,this.getModuleName()==="dropdownlist"&&this.updateIconState(),!1)},t.prototype.setSelection=function(i,e){if(this.isValidLI(i)&&(!i.classList.contains(ee.selected)||this.isPopupOpen&&this.isSelected&&i.classList.contains(ee.selected)))this.updateSelectedItem(i,e,!1,!0);else if(this.setSelectOptions(i,e),this.enableVirtualization){var r=this.fields.value?this.fields.value:"";if(this.dataSource instanceof V&&this.virtualGroupDataSource){var n=new V(this.virtualGroupDataSource).executeLocal(new se().where(new be(r,"equal",this.value)));if(n&&n.length>0){this.itemData=n[0];var s=this.getItemData();(this.value===s.value&&this.text!==s.text||this.value!==s.value&&this.text===s.text)&&this.setProperties({text:s.text,value:s.value})}}else{var n=new V(this.dataSource).executeLocal(new se().where(new be(r,"equal",this.value)));if(n&&n.length>0){this.itemData=n[0];var s=this.getItemData();(this.value===s.value&&this.text!==s.text||this.value!==s.value&&this.text===s.text)&&this.setProperties({text:s.text,value:s.value})}}}},t.prototype.setSelectOptions=function(i,e){this.list&&this.removeHover(),this.previousSelectedLI=c(this.selectedLI)?null:this.selectedLI,this.selectedLI=i,!this.setValue(e)&&((!this.isPopupOpen&&!c(i)||this.isPopupOpen&&!c(e)&&(e.type!=="keydown"||e.type==="keydown"&&e.action==="enter"))&&(this.isSelectCustom=!1,this.onChangeEvent(e)),this.isPopupOpen&&!c(this.selectedLI)&&this.itemData!==null&&(!e||e.type!=="click")&&this.setScrollPosition(e),Q.info.name!=="mozilla"&&this.targetElement()&&(Ie(this.targetElement(),{"aria-describedby":this.inputElement.id!==""?this.inputElement.id:this.element.id}),this.targetElement().removeAttribute("aria-live")),this.isPopupOpen&&!c(this.ulElement)&&!c(this.ulElement.getElementsByClassName("e-item-focus")[0])?Ie(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}):this.isPopupOpen&&!c(this.ulElement)&&!c(this.ulElement.getElementsByClassName("e-active")[0])&&Ie(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-active")[0].id}))},t.prototype.dropdownCompiler=function(i){var e=!1;if(typeof i!="function"&&i)try{e=!!document.querySelectorAll(i).length}catch{e=!1}return e},t.prototype.setValueTemplate=function(){var i;this.isReact&&(this.clearTemplate(["valueTemplate"]),this.valueTempElement&&(Ce(this.valueTempElement),this.inputElement.style.display="block",this.valueTempElement=null)),this.valueTempElement||(this.valueTempElement=this.createElement("span",{className:ge.value}),this.inputElement.parentElement.insertBefore(this.valueTempElement,this.inputElement),this.inputElement.style.display="none"),this.isReact||(this.valueTempElement.innerHTML="");var e=this.dropdownCompiler(this.valueTemplate);typeof this.valueTemplate!="function"&&e?i=Ue(document.querySelector(this.valueTemplate).innerHTML.trim()):i=Ue(this.valueTemplate);var r=i(this.itemData,this,"valueTemplate",this.valueTemplateId,this.isStringTemplate,null,this.valueTempElement);r&&r.length>0&&Oe(r,this.valueTempElement),this.renderReactTemplates()},t.prototype.removeSelection=function(){if(this.list){var i=this.list.querySelectorAll("."+ee.selected);i.length&&(F(i,ee.selected),i[0].removeAttribute("aria-selected"))}},t.prototype.getItemData=function(){var i=this.fields,e=null;e=this.itemData;var r,n;c(e)||(r=N(i.value,e),n=N(i.text,e));var s=!c(e)&&!yt(r)?r:e,a=!c(e)&&!yt(r)?n:e;return{value:s,text:a}},t.prototype.onChangeEvent=function(i){var e=this.getItemData(),r=this.isSelectCustom?null:this.activeIndex;this.setProperties({index:r,text:e.text,value:e.value},!0),this.detachChangeEvent(i)},t.prototype.detachChanges=function(i){var e;return typeof i=="string"||typeof i=="boolean"||typeof i=="number"?e=Object.defineProperties({},{value:{value:i,enumerable:!0},text:{value:i,enumerable:!0}}):e=i,e},t.prototype.detachChangeEvent=function(i){if(this.isSelected=!1,this.previousValue=this.value,this.activeIndex=this.index,this.typedString=c(this.text)?"":this.text,!this.initial){var e=this.detachChanges(this.itemData),r=void 0;typeof this.previousItemData=="string"||typeof this.previousItemData=="boolean"||typeof this.previousItemData=="number"?r=Object.defineProperties({},{value:{value:this.previousItemData,enumerable:!0},text:{value:this.previousItemData,enumerable:!0}}):r=this.previousItemData,this.setHiddenValue();var n={e:i,item:this.item,itemData:e,previousItem:this.previousSelectedLI,previousItemData:r,isInteracted:!!i,value:this.value,element:this.element,event:i};this.isAngular&&this.preventChange?this.preventChange=!1:this.trigger("change",n)}(c(this.value)||this.value==="")&&this.floatLabelType!=="Always"&&F([this.inputWrapper.container],"e-valid-input")},t.prototype.setHiddenValue=function(){if(c(this.value))this.hiddenElement.innerHTML="";else if(this.hiddenElement.querySelector("option")){var i=this.hiddenElement.querySelector("option");i.textContent=this.text,i.setAttribute("value",this.value.toString())}else if(!c(this.hiddenElement)){this.hiddenElement.innerHTML="<option selected>"+this.text+"</option>";var i=this.hiddenElement.querySelector("option");i.setAttribute("value",this.value.toString())}},t.prototype.onFilterUp=function(i){if(!(i.ctrlKey&&i.keyCode===86)&&(this.isValidKey||i.keyCode===40||i.keyCode===38))switch(this.isValidKey=!1,i.keyCode){case 38:case 40:this.getModuleName()==="autocomplete"&&!this.isPopupOpen&&!this.preventAltUp&&!this.isRequested?(this.preventAutoFill=!0,this.searchLists(i)):this.preventAutoFill=!1,this.preventAltUp=!1,this.getModuleName()==="autocomplete"&&!c(this.ulElement)&&!c(this.ulElement.getElementsByClassName("e-item-focus")[0])&&Ie(this.targetElement(),{"aria-activedescendant":this.ulElement.getElementsByClassName("e-item-focus")[0].id}),i.preventDefault();break;case 46:case 8:this.typedString=this.filterInput.value,!this.isPopupOpen&&this.typedString!==""||this.isPopupOpen&&this.queryString.length>0?(this.preventAutoFill=!0,this.searchLists(i)):this.typedString===""&&this.queryString===""&&this.getModuleName()!=="autocomplete"?(this.preventAutoFill=!0,this.searchLists(i)):this.typedString===""&&(this.list&&this.resetFocusElement(),this.activeIndex=null,this.getModuleName()!=="dropdownlist"&&(this.preventAutoFill=!0,this.searchLists(i),this.getModuleName()==="autocomplete"&&this.hidePopup())),i.preventDefault();break;default:this.typedString=this.filterInput.value,this.preventAutoFill=!1,this.searchLists(i),(this.enableVirtualization&&this.getModuleName()!=="autocomplete"||this.getModuleName()==="autocomplete"&&!(this.dataSource instanceof V)||this.getModuleName()==="autocomplete"&&this.dataSource instanceof V&&this.totalItemCount!=0)&&this.getFilteringSkeletonCount();break}else this.isValidKey=!1},t.prototype.getFilteringSkeletonCount=function(){var i=this.dataCount-this.viewPortInfo.endIndex,e=this.skeletonCount;this.getSkeletonCount(!0),this.skeletonCount=this.dataCount>this.itemCount*2?this.skeletonCount:i>this.skeletonCount?this.skeletonCount:i>0?i:0;var r=!0;this.getModuleName()==="autocomplete"&&this.totalItemCount!=0&&this.totalItemCount<this.itemCount*2&&(this.skeletonCount=0,r=!1),this.list.classList.contains(ee.noData)||(this.skeletonCount,e!==this.skeletonCount&&r?this.UpdateSkeleton(!0,Math.abs(e-this.skeletonCount)):this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl").length>0&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.list.getElementsByClassName("e-virtual-ddl-content").length>0&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()))},t.prototype.getSkeletonCount=function(i){this.virtualListHeight=this.listHeight!=null?parseInt(this.listHeight,10):this.virtualListHeight;var e=this.virtualListHeight>0?Math.floor(this.virtualListHeight/this.listItemHeight):0;this.skeletonCount=e*2<this.itemCount?this.itemCount:e*2,this.itemCount=i?this.itemCount:this.skeletonCount,this.skeletonCount=Math.floor(this.skeletonCount/2)+2},t.prototype.onFilterDown=function(i){switch(i.keyCode){case 13:break;case 40:case 38:this.queryString=this.filterInput.value,i.preventDefault();break;case 9:this.isPopupOpen&&this.getModuleName()!=="autocomplete"&&i.preventDefault();break;default:this.prevSelectPoints=this.getSelectionPoints(),this.queryString=this.filterInput.value;break}},t.prototype.removeFillSelection=function(){if(this.isInteracted){var i=this.getSelectionPoints();this.inputElement.setSelectionRange(i.end,i.end)}},t.prototype.getQuery=function(i){var e;if(!this.isCustomFilter&&this.allowFiltering&&this.filterInput){e=i?i.clone():this.query?this.query.clone():new se;var r=this.typedString===""?"contains":this.filterType,n=this.typeOfData(this.dataSource).typeof;if(!(this.dataSource instanceof V)&&n==="string"||n==="number")e.where("",r,this.typedString,this.ignoreCase,this.ignoreAccent);else{var s=this.fields.text?this.fields.text:"";e.where(s,r,this.typedString,this.ignoreCase,this.ignoreAccent)}}else e=i?i.clone():this.query?this.query.clone():new se;if(this.enableVirtualization&&this.viewPortInfo.endIndex!=0&&(!(this.dataSource instanceof V)||this.dataSource instanceof V&&this.virtualGroupDataSource)){var a=this.getTakeValue(),l=!1;if(e){for(var h=0;h<e.queries.length;h++)if(e.queries[h].fn==="onSkip"){l=!0;break}}(this.allowFiltering||!this.isPopupOpen||!l)&&e.skip(this.virtualItemStartIndex),this.isIncrementalRequest?e.take(this.incrementalEndIndex):e.take(a),e.requiresCount()}return e},t.prototype.getSelectionPoints=function(){var i=this.inputElement;return{start:Math.abs(i.selectionStart),end:Math.abs(i.selectionEnd)}},t.prototype.searchLists=function(i){var e=this;if(this.isTyped=!0,this.activeIndex=null,this.isListSearched=!0,this.filterInput.parentElement.querySelector("."+ge.clearIcon)){var r=this.filterInput.parentElement.querySelector("."+ge.clearIcon);r.style.visibility=this.filterInput.value===""?"hidden":"visible"}if(this.isDataFetched=!1,this.isFiltering()){this.checkAndResetCache();var n={preventDefaultAction:!1,text:this.filterInput.value,updateData:function(s,a,l){n.cancel||(e.isCustomFilter=!0,e.filteringAction(s,a,l))},baseEventArgs:i,cancel:!1};this.trigger("filtering",n,function(s){!s.cancel&&!e.isCustomFilter&&!s.preventDefaultAction&&e.filteringAction(e.dataSource,null,e.fields)})}},t.prototype.filter=function(i,e,r){this.isCustomFilter=!0,this.filteringAction(i,e,r)},t.prototype.filteringAction=function(i,e,r){if(!c(this.filterInput)){this.beforePopupOpen=!(!this.isPopupOpen&&this.getModuleName()==="combobox"&&this.filterInput.value==="");var n=this.list.classList.contains(ee.noData);if(this.filterInput.value.trim()===""&&!this.itemTemplate){if(this.actionCompleteData.isUpdated=!1,this.isTyped=!1,!c(this.actionCompleteData.ulElement)&&!c(this.actionCompleteData.list)){if(this.enableVirtualization&&(this.totalItemCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.resetList(i,r,e),n&&!this.list.classList.contains(ee.noData)&&(this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")),!this.list.querySelector(".e-virtual-ddl")))){var s=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});document.getElementsByClassName("e-popup")[0].querySelector(".e-dropdownbase").appendChild(s)}this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list)}this.isTyped=!0,!c(this.itemData)&&this.getModuleName()==="dropdownlist"&&(this.focusIndexItem(),this.setScrollPosition()),this.isNotSearchList=!0}else if(this.isNotSearchList=!1,e=this.filterInput.value.trim()===""?null:e,this.enableVirtualization&&this.isFiltering()&&this.isTyped&&(this.isPreventScrollAction=!0,this.list.scrollTop=0,this.previousStartIndex=0,this.virtualListInfo=null),this.resetList(i,r,e),this.getModuleName()==="dropdownlist"&&this.list.classList.contains(ee.noData)&&(this.popupContentElement.setAttribute("role","status"),this.popupContentElement.setAttribute("id","no-record"),Ie(this.filterInputObj.container,{"aria-activedescendant":"no-record"})),this.enableVirtualization&&n&&!this.list.classList.contains(ee.noData)&&(this.list.querySelector(".e-virtual-ddl-content")||this.list.appendChild(this.createElement("div",{className:"e-virtual-ddl-content",styles:this.getTransformValues()})).appendChild(this.list.querySelector(".e-list-parent")),!this.list.querySelector(".e-virtual-ddl"))){var s=this.createElement("div",{id:this.element.id+"_popup",className:"e-virtual-ddl",styles:this.GetVirtualTrackHeight()});document.getElementsByClassName("e-popup")[0].querySelector(".e-dropdownbase").appendChild(s)}this.enableVirtualization&&this.getFilteringSkeletonCount(),this.renderReactTemplates()}},t.prototype.setSearchBox=function(i){if(this.isFiltering()){var e=i.querySelector("."+ge.filterParent)?i.querySelector("."+ge.filterParent):this.createElement("span",{className:ge.filterParent});this.filterInput=this.createElement("input",{attrs:{type:"text"},className:ge.filterInput}),this.element.parentNode.insertBefore(this.filterInput,this.element);var r=!1;return Q.isDevice&&(r=!0),this.filterInputObj=ce.createInput({element:this.filterInput,buttons:r?[ge.backIcon,ge.filterBarClearIcon]:[ge.filterBarClearIcon],properties:{placeholder:this.filterBarPlaceholder}},this.createElement),c(this.cssClass)||(this.cssClass.split(" ").indexOf("e-outline")!==-1?T([this.filterInputObj.container],"e-outline"):this.cssClass.split(" ").indexOf("e-filled")!==-1&&T([this.filterInputObj.container],"e-filled")),Oe([this.filterInputObj.container],e),zt([e],i),Ie(this.filterInput,{"aria-disabled":"false",role:"combobox",autocomplete:"off",autocapitalize:"off",spellcheck:"false"}),this.clearIconElement=this.filterInput.parentElement.querySelector("."+ge.clearIcon),!Q.isDevice&&this.clearIconElement&&(b.add(this.clearIconElement,"click",this.clearText,this),this.clearIconElement.style.visibility="hidden"),Q.isDevice?this.searchKeyModule=new Xi(this.filterInput,{keyAction:this.mobileKeyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}):this.searchKeyModule=new Xi(this.filterInput,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigure,eventName:"keydown"}),b.add(this.filterInput,"input",this.onInput,this),b.add(this.filterInput,"keyup",this.onFilterUp,this),b.add(this.filterInput,"keydown",this.onFilterDown,this),b.add(this.filterInput,"blur",this.onBlurHandler,this),b.add(this.filterInput,"paste",this.pasteHandler,this),this.filterInputObj}else return Mc},t.prototype.onInput=function(i){this.isValidKey=!0,this.getModuleName()==="combobox"&&this.updateIconState(),Q.isDevice&&Q.info.name==="mozilla"&&(this.typedString=this.filterInput.value,this.preventAutoFill=!0,this.searchLists(i))},t.prototype.pasteHandler=function(i){var e=this;setTimeout(function(){e.typedString=e.filterInput.value,e.searchLists(i)})},t.prototype.onActionFailure=function(i){o.prototype.onActionFailure.call(this,i),this.beforePopupOpen&&this.renderPopup()},t.prototype.UpdateSkeleton=function(i,e){var r=this.list.querySelector(".e-virtual-ddl-content"),n=this.list.querySelector(".e-virtual-list");if(r&&(!n||i)&&this.enableVirtualization)for(var s=i?e:this.skeletonCount,a=0;a<s;a++){var l=this.createElement("li",{className:ge.virtualList,styles:"overflow: inherit"});this.enableVirtualization&&this.itemTemplate&&(l.style.height=this.listItemHeight+"px");var h=new Lc({shape:"Text",height:"10px",width:"95%",cssClass:"e-skeleton-text"});h.appendTo(this.createElement("div")),l.appendChild(h.element),r.firstChild.insertBefore(l,r.firstChild.children[0])}},t.prototype.getTakeValue=function(){return this.allowFiltering&&this.getModuleName()==="dropdownlist"&&Q.isDevice?Math.round(window.outerHeight/this.listItemHeight):this.itemCount},t.prototype.onActionComplete=function(i,e,r,n){var s=this;if(this.dataSource instanceof V&&!c(r)&&!this.virtualGroupDataSource&&(this.totalItemCount=r.count),this.isNotSearchList&&!this.enableVirtualization){this.isNotSearchList=!1;return}var a=this.itemCount;if(this.isActive||!c(i)){var l=this.selectedLI?this.selectedLI.cloneNode(!0):null;if(o.prototype.onActionComplete.call(this,i,e,r),this.skeletonCount=this.totalItemCount!=0&&this.totalItemCount<this.itemCount*2?0:this.skeletonCount,this.updateSelectElementData(this.allowFiltering),this.isRequested&&!c(this.searchKeyEvent)&&this.searchKeyEvent.type==="keydown"&&(this.isRequested=!1,this.keyActionHandler(this.searchKeyEvent),this.searchKeyEvent=null),this.isRequested&&!c(this.searchKeyEvent)&&(this.incrementalSearch(this.searchKeyEvent),this.searchKeyEvent=null),this.enableVirtualization||(this.list.scrollTop=0),c(i)||Ie(i,{id:this.element.id+"_options",role:"listbox","aria-hidden":"false","aria-label":"listbox"}),this.initialRemoteRender){if(this.initial=!0,this.activeIndex=this.index,this.initialRemoteRender=!1,this.value&&this.dataSource instanceof V){var h=c(this.fields.value)?this.fields.text:this.fields.value,u=this.fields.value.split("."),p=e.some(function(g){return c(g[h])&&u.length>1?s.checkFieldValue(g,u)===s.value:g[h]===s.value});this.enableVirtualization&&this.virtualGroupDataSource&&(p=this.virtualGroupDataSource.some(function(g){return c(g[h])&&u.length>1?s.checkFieldValue(g,u)===s.value:g[h]===s.value})),p?this.updateValues():this.dataSource.executeQuery(this.getQuery(this.query).where(new be(h,"equal",this.value))).then(function(g){g.result.length>0&&s.addItem(g.result,e.length),s.updateValues()})}else this.updateValues();this.initial=!1}else this.getModuleName()==="autocomplete"&&this.value&&this.setInputValue();if(this.getModuleName()!=="autocomplete"&&this.isFiltering()&&!this.isTyped)(!this.actionCompleteData.isUpdated||!this.isCustomFilter&&!this.isFilterFocus||c(this.itemData)&&this.allowFiltering&&(this.dataSource instanceof V||!c(this.dataSource)&&!c(this.dataSource.length)&&this.dataSource.length!==0))&&(this.itemTemplate&&this.element.tagName==="EJS-COMBOBOX"&&this.allowFiltering?setTimeout(function(){s.updateActionCompleteDataValues(i,e)},0):this.updateActionCompleteDataValues(i,e)),(this.allowCustom||this.allowFiltering&&!this.isValueInList(e,this.value)&&this.dataSource instanceof V)&&!this.enableVirtualization?this.addNewItem(e,l):(this.allowCustom||this.allowFiltering&&this.isValueInList(e,this.value))&&!this.enableVirtualization&&this.addNewItem(e,l),(!c(this.itemData)||c(this.itemData)&&this.enableVirtualization)&&this.focusIndexItem(),this.enableVirtualization&&this.updateActionCompleteDataValues(i,e);else if(this.enableVirtualization&&this.getModuleName()!=="autocomplete"&&!this.isFiltering()){var d=this.getItemData().value;this.activeIndex=this.getIndexByValue(d);var f=this.findListElement(this.list,"li","data-value",d);this.selectedLI=f}else this.enableVirtualization&&this.getModuleName()==="autocomplete"&&(this.activeIndex=this.skeletonCount);this.beforePopupOpen&&(this.renderPopup(r),this.enableVirtualization&&(this.list.querySelector(".e-virtual-list")||(this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"))),this.enableVirtualization&&a!=this.itemCount&&this.resetList(this.dataSource,this.fields))}},t.prototype.isValueInList=function(i,e){if(Array.isArray(i)){for(var r=0;r<i.length;r++)if(i[r]===e)return!0}else if(typeof i=="object"&&i!==null){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&i[n]===e)return!0}return!1},t.prototype.checkFieldValue=function(i,e){var r=i;return e.forEach(function(n){r=r[n]}),r},t.prototype.updateActionCompleteDataValues=function(i,e){this.actionCompleteData={ulElement:i.cloneNode(!0),list:e,isUpdated:!0},this.actionData.list!==this.actionCompleteData.list&&this.actionCompleteData.ulElement&&this.actionCompleteData.list&&(this.actionData=this.actionCompleteData)},t.prototype.addNewItem=function(i,e){var r=this;if(!c(this.itemData)&&!c(e)){var n=this.getItemData().value,s=i.some(function(a){return(typeof a=="string"||typeof a=="number")&&a===n||N(r.fields.value,a)===n});s||this.addItem(this.itemData)}},t.prototype.updateActionCompleteData=function(i,e,r){var n=this;this.getModuleName()!=="autocomplete"&&this.actionCompleteData.ulElement&&(this.itemTemplate&&this.element.tagName==="EJS-COMBOBOX"&&this.allowFiltering?setTimeout(function(){n.actionCompleteDataUpdate(i,e,r)},0):this.actionCompleteDataUpdate(i,e,r))},t.prototype.actionCompleteDataUpdate=function(i,e,r){r!==null?this.actionCompleteData.ulElement.insertBefore(i.cloneNode(!0),this.actionCompleteData.ulElement.childNodes[r]):this.actionCompleteData.ulElement.appendChild(i.cloneNode(!0)),this.isFiltering()&&this.actionCompleteData.list.indexOf(e)<0&&this.actionCompleteData.list.push(e)},t.prototype.focusIndexItem=function(){var i=this.getItemData().value;this.activeIndex=this.getIndexByValue(i);var e=this.findListElement(this.list,"li","data-value",i);this.selectedLI=e,this.activeItem(e),this.enableVirtualization&&c(e)||this.removeFocus()},t.prototype.updateSelection=function(){var i=this.list.querySelector("."+ee.selected);i?(this.setProperties({index:this.getIndexByValue(i.getAttribute("data-value"))}),this.activeIndex=this.index):(this.removeFocus(),this.list.querySelector("."+ee.li).classList.add(ge.focus))},t.prototype.updateSelectionList=function(){var i=this.list&&this.list.querySelector(".e-active");if(!i&&!c(this.value)){var e=this.findListElement(this.list,"li","data-value",this.value);e&&e.classList.add("e-active")}},t.prototype.checkAndResetCache=function(){this.enableVirtualization&&(this.generatedDataObject={},this.virtualItemStartIndex=this.virtualItemEndIndex=0,this.viewPortInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:this.itemCount},this.selectedValueInfo=null)},t.prototype.removeFocus=function(){var i=this.list.querySelectorAll("."+ge.focus);i&&i.length&&F(i,ge.focus)},t.prototype.getTransformValues=function(){var i=this.viewPortInfo.startIndex*this.listItemHeight;i=i-this.skeletonCount*this.listItemHeight,i=this.viewPortInfo.startIndex===0&&this.listData&&this.listData.length===0?0:i;var e="transform: translate(0px, "+i+"px);";return e},t.prototype.GetVirtualTrackHeight=function(){var i=this.totalItemCount===this.viewPortInfo.endIndex?this.totalItemCount*this.listItemHeight-this.itemCount*this.listItemHeight:this.totalItemCount*this.listItemHeight,e="height: "+(i-this.itemCount*this.listItemHeight)+"px;";return this.getModuleName()==="autocomplete"&&this.skeletonCount===0?"height: 0px;":e},t.prototype.renderPopup=function(i){var e=this;if(this.popupObj&&document.body.contains(this.popupObj.element)){this.refreshPopup();return}var r={cancel:!1};this.trigger("beforeOpen",r,function(n){if(n.cancel)e.beforePopupOpen=!1;else{var s=e.createElement("div",{id:e.element.id+"_popup",className:"e-ddl e-popup "+(e.cssClass!==null?e.cssClass:"")});s.setAttribute("aria-label",e.element.id),s.setAttribute("role","dialog");var a=e.setSearchBox(s);if(e.listHeight=Pe(e.popupHeight),e.headerTemplate&&e.setHeaderTemplate(s),Oe([e.list],s),e.footerTemplate&&e.setFooterTemplate(s),document.body.appendChild(s),s.style.top="0px",e.enableVirtualization&&e.itemTemplate){var l=s.querySelectorAll("li.e-list-item:not(.e-virtual-list)");e.listItemHeight=l.length>0?Math.ceil(l[0].getBoundingClientRect().height):0}if(e.enableVirtualization&&!e.list.classList.contains(ee.noData))if(e.list.querySelector(".e-virtual-ddl-content")?e.list.getElementsByClassName("e-virtual-ddl-content")[0].style=e.getTransformValues():e.list.appendChild(e.createElement("div",{className:"e-virtual-ddl-content",styles:e.getTransformValues()})).appendChild(e.list.querySelector(".e-list-parent")),e.UpdateSkeleton(),e.liCollections=e.list.querySelectorAll("."+ee.li),e.virtualItemCount=e.itemCount,e.list.querySelector(".e-virtual-ddl"))e.list.getElementsByClassName("e-virtual-ddl")[0].style=e.GetVirtualTrackHeight();else{var h=e.createElement("div",{id:e.element.id+"_popup",className:"e-virtual-ddl",styles:e.GetVirtualTrackHeight()});s.querySelector(".e-dropdownbase").appendChild(h)}if(s.style.visibility="hidden",e.popupHeight!=="auto"){if(e.searchBoxHeight=0,!c(a.container)&&e.getModuleName()!=="combobox"&&e.getModuleName()!=="autocomplete"&&(e.searchBoxHeight=a.container.parentElement.getBoundingClientRect().height,e.listHeight=(parseInt(e.listHeight,10)-e.searchBoxHeight).toString()+"px"),e.headerTemplate){e.header=e.header?e.header:s.querySelector(".e-ddl-header");var u=Math.round(e.header.getBoundingClientRect().height);e.listHeight=(parseInt(e.listHeight,10)-(u+e.searchBoxHeight)).toString()+"px"}if(e.footerTemplate){e.footer=e.footer?e.footer:s.querySelector(".e-ddl-footer");var u=Math.round(e.footer.getBoundingClientRect().height);e.listHeight=(parseInt(e.listHeight,10)-(u+e.searchBoxHeight)).toString()+"px"}e.list.style.maxHeight=(parseInt(e.listHeight,10)-2).toString()+"px",s.style.maxHeight=Pe(e.popupHeight)}else s.style.height="auto";var p=0,d=void 0;if(e.isPreventScrollAction=!0,!c(e.selectedLI)&&!c(e.activeIndex)&&e.activeIndex>=0||e.enableVirtualization?e.setScrollPosition():e.list.scrollTop=0,Q.isDevice&&!e.allowFiltering&&(e.getModuleName()==="dropdownlist"||e.isDropDownClick&&e.getModuleName()==="combobox")){p=e.getOffsetValue(s);var f=e.isEmptyList()?e.list:e.liCollections[0];c(e.inputElement)||(d=-(parseInt(getComputedStyle(f).textIndent,10)-parseInt(getComputedStyle(e.inputElement).paddingLeft,10)+parseInt(getComputedStyle(e.inputElement.parentElement).borderLeftWidth,10)))}e.createPopup(s,p,d),e.popupContentElement=e.popupObj.element.querySelector(".e-content"),e.getFocusElement(),e.checkCollision(s),Q.isDevice&&(parseInt(e.popupWidth.toString(),10)>window.outerWidth&&!(e.getModuleName()==="dropdownlist"&&e.allowFiltering)&&e.popupObj.element.classList.add("e-wide-popup"),e.popupObj.element.classList.add(ge.device),(e.getModuleName()==="dropdownlist"||e.getModuleName()==="combobox"&&!e.allowFiltering&&e.isDropDownClick)&&(e.popupObj.collision={X:"fit",Y:"fit"}),e.isFilterLayout()&&(e.popupObj.element.classList.add(ge.mobileFilter),e.popupObj.position={X:0,Y:0},e.popupObj.dataBind(),Ie(e.popupObj.element,{style:"left:0px;right:0px;top:0px;bottom:0px;"}),T([document.body,e.popupObj.element],ge.popupFullScreen),e.setSearchBoxPosition(),e.backIconElement=a.container.querySelector(".e-back-icon"),e.clearIconElement=a.container.querySelector("."+ge.clearIcon),b.add(e.backIconElement,"click",e.clickOnBackIcon,e),b.add(e.clearIconElement,"click",e.clearText,e))),s.style.visibility="visible",T([s],"e-popup-close");for(var g=e.popupObj.getScrollableParent(e.inputWrapper.container),v=0,m=g;v<m.length;v++){var y=m[v];b.add(y,"scroll",e.scrollHandler,e)}c(e.list)||(e.unWireListEvents(),e.wireListEvents()),e.selectedElementID=e.selectedLI?e.selectedLI.id:null,e.enableVirtualization&&(e.notify("bindScrollEvent",{module:"VirtualScroll",component:e.getModuleName(),enable:e.enableVirtualization}),setTimeout(function(){(e.value||e.list.querySelector(".e-active"))&&(e.updateSelectionList(),e.selectedValueInfo&&e.viewPortInfo&&e.viewPortInfo.offsets.top?e.list.scrollTop=e.viewPortInfo.offsets.top:e.scrollBottom(!0,!0))},5)),Ie(e.targetElement(),{"aria-expanded":"true","aria-owns":e.element.id+"_popup","aria-controls":e.element.id}),e.getModuleName()!=="dropdownlist"&&e.list.classList.contains("e-nodata")&&(Ie(e.targetElement(),{"aria-activedescendant":"no-record"}),e.popupContentElement.setAttribute("role","status"),e.popupContentElement.setAttribute("id","no-record")),e.inputElement.setAttribute("aria-expanded","true"),e.inputElement.setAttribute("aria-controls",e.element.id);var I=e.isFiltering()?e.filterInput.parentElement:e.inputWrapper.container;T([I],[ge.inputFocus]);var S={name:"FadeIn",duration:100};e.beforePopupOpen=!0;var R=e.popupObj,L={popup:R,event:i,cancel:!1,animation:S};e.trigger("open",L,function(P){P.cancel?(e.beforePopupOpen=!1,e.destroyPopup()):(c(e.inputWrapper)||T([e.inputWrapper.container],[ge.iconAnimation]),e.renderReactTemplates(),c(e.popupObj)||e.popupObj.show(new Ti(P.animation),e.zIndex===1e3?e.element:null))})}})},t.prototype.checkCollision=function(i){if(!Q.isDevice||Q.isDevice&&!(this.getModuleName()==="dropdownlist"||this.isDropDownClick)){var e=to(i);e.length>0&&(i.style.marginTop=-parseInt(getComputedStyle(i).marginTop,10)+"px"),this.popupObj.resolveCollision()}},t.prototype.getOffsetValue=function(i){var e=getComputedStyle(i),r=parseInt(e.borderTopWidth,10),n=parseInt(e.borderBottomWidth,10);return this.setPopupPosition(r+n)},t.prototype.createPopup=function(i,e,r){var n=this;this.popupObj=new ao(i,{width:this.setWidth(),targetType:"relative",relateTo:this.inputWrapper.container,collision:this.enableRtl?{X:"fit",Y:"flip"}:{X:"flip",Y:"flip"},offsetY:e,enableRtl:this.enableRtl,offsetX:r,position:this.enableRtl?{X:"right",Y:"bottom"}:{X:"left",Y:"bottom"},zIndex:this.zIndex,close:function(){n.isDocumentClick||n.focusDropDown(),n.isReact&&n.clearTemplate(["headerTemplate","footerTemplate"]),n.isNotSearchList=!1,n.isDocumentClick=!1,n.destroyPopup(),n.isFiltering()&&n.actionCompleteData.list&&n.actionCompleteData.list[0]&&(n.isActive=!0,n.enableVirtualization?n.onActionComplete(n.ulElement,n.listData,null,!0):n.onActionComplete(n.actionCompleteData.ulElement,n.actionCompleteData.list,null,!0))},open:function(){b.add(document,"mousedown",n.onDocumentClick,n),n.isPopupOpen=!0;var s=n.actionCompleteData&&n.actionCompleteData.ulElement&&n.actionCompleteData.ulElement.querySelector("li"),a=n.list.querySelector("ul li");!c(n.ulElement)&&!c(n.ulElement.getElementsByClassName("e-item-focus")[0])?Ie(n.targetElement(),{"aria-activedescendant":n.ulElement.getElementsByClassName("e-item-focus")[0].id}):!c(n.ulElement)&&!c(n.ulElement.getElementsByClassName("e-active")[0])&&Ie(n.targetElement(),{"aria-activedescendant":n.ulElement.getElementsByClassName("e-active")[0].id}),n.isFiltering()&&n.itemTemplate&&n.element.tagName===n.getNgDirective()&&s&&a&&s.textContent!==a.textContent&&n.element.tagName!=="EJS-COMBOBOX"&&n.cloneElements(),n.isFilterLayout()&&(F([n.inputWrapper.container],[ge.inputFocus]),n.isFilterFocus=!0,n.filterInput.focus(),n.inputWrapper.clearButton&&T([n.inputWrapper.clearButton],ge.clearIconHide)),n.activeStateChange()},targetExitViewport:function(){Q.isDevice||n.hidePopup()}})},t.prototype.isEmptyList=function(){return!c(this.liCollections)&&this.liCollections.length===0},t.prototype.getFocusElement=function(){},t.prototype.isFilterLayout=function(){return this.getModuleName()==="dropdownlist"&&this.allowFiltering},t.prototype.scrollHandler=function(){Q.isDevice&&(this.getModuleName()==="dropdownlist"&&!this.isFilterLayout()||this.getModuleName()==="combobox"&&!this.allowFiltering&&this.isDropDownClick)&&this.element&&!this.isElementInViewport(this.element)&&this.hidePopup()},t.prototype.isElementInViewport=function(i){var e=i.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=window.innerHeight&&e.right<=window.innerWidth},t.prototype.setSearchBoxPosition=function(){var i=this.filterInput.parentElement.getBoundingClientRect().height;this.popupObj.element.style.maxHeight="100%",this.popupObj.element.style.width="100%",this.list.style.maxHeight=window.innerHeight-i+"px",this.list.style.height=window.innerHeight-i+"px";var e=this.filterInput.parentElement.querySelector("."+ge.clearIcon);Ce(this.filterInput),e.parentElement.insertBefore(this.filterInput,e)},t.prototype.setPopupPosition=function(i){var e,r=i,n=this.list.querySelector("."+ge.focus)||this.selectedLI,s=this.isEmptyList()?this.list:this.liCollections[0],a=this.isEmptyList()?this.list:this.liCollections[this.getItems().length-1],l=s.getBoundingClientRect().height;this.listItemHeight=l;var h=this.list.offsetHeight/2,u=c(n)?s.offsetTop:n.offsetTop,p=a.offsetTop;if(p-h<u&&!c(this.liCollections)&&this.liCollections.length>0&&!c(n)){var d=this.list.offsetHeight/l,f=parseInt(getComputedStyle(this.list).paddingBottom,10);e=(d-(this.liCollections.length-this.activeIndex))*l-r+f,this.list.scrollTop=n.offsetTop}else u>h&&!this.enableVirtualization?(e=h-l/2,this.list.scrollTop=u-h+l/2):e=u;var g=this.inputWrapper.container.offsetHeight;return e=e+l+r-(l-g)/2,-e},t.prototype.setWidth=function(){var i=Pe(this.popupWidth);if(i.indexOf("%")>-1){var e=this.inputWrapper.container.offsetWidth*parseFloat(i)/100;i=e.toString()+"px"}if(Q.isDevice&&!this.allowFiltering&&(this.getModuleName()==="dropdownlist"||this.isDropDownClick&&this.getModuleName()==="combobox")){var r=this.isEmptyList()?this.list:this.liCollections[0];i=parseInt(i,10)+(parseInt(getComputedStyle(r).textIndent,10)-parseInt(getComputedStyle(this.inputElement).paddingLeft,10)+parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth,10))*2+"px"}return i},t.prototype.scrollBottom=function(i,e,r){var n=this;if(e===void 0&&(e=!1),r===void 0&&(r=null),c(this.selectedLI)&&this.enableVirtualization&&(this.selectedLI=this.list.querySelector("."+ee.li),!c(this.selectedLI)&&this.selectedLI.classList.contains("e-virtual-list")&&(this.selectedLI=this.liCollections[this.skeletonCount])),!c(this.selectedLI)){this.isUpwardScrolling=!1;var s=this.list.querySelectorAll(".e-virtual-list").length,a=this.list.querySelector("li:last-of-type")?this.list.querySelector("li:last-of-type").getAttribute("data-value"):null,l=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop,h=this.list.offsetHeight,u=l-s*this.selectedLI.offsetHeight+this.selectedLI.offsetHeight-this.list.scrollTop,p=this.list.scrollTop+u-h,d=!1;p=i?p+parseInt(getComputedStyle(this.list).paddingTop,10)*2:p+parseInt(getComputedStyle(this.list).paddingTop,10);var f=l-s*this.selectedLI.offsetHeight+this.selectedLI.offsetHeight-this.list.scrollTop;if(f=this.fields.groupBy&&!c(this.fixedHeaderElement)?f-this.fixedHeaderElement.offsetHeight:f,this.activeIndex===0&&!this.enableVirtualization)this.list.scrollTop=0,d=this.isKeyBoardAction;else if(u>h||!(f>0&&this.list.offsetHeight>f)){var g=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,v=r=="pageDown"?this.getPageCount()-2:1;!this.enableVirtualization||this.isKeyBoardAction||e?this.isKeyBoardAction&&this.enableVirtualization&&a&&g===a&&r!="end"&&!this.isVirtualScrolling?(this.isPreventKeyAction=!0,this.enableVirtualization&&this.itemTemplate?this.list.scrollTop+=p:this.list.scrollTop+=this.selectedLI.offsetHeight*v,this.isPreventKeyAction=this.IsScrollerAtEnd()?!1:this.isPreventKeyAction,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&r=="end"?(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,this.list.scrollTop=this.list.scrollHeight):(r=="pageDown"&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,p=p+this.selectedLI.offsetHeight*v),this.list.scrollTop=p):this.list.scrollTop=this.virtualListInfo&&this.virtualListInfo.startIndex?this.virtualListInfo.startIndex*this.listItemHeight:0,d=this.isKeyBoardAction}this.isKeyBoardAction=d,this.enableVirtualization&&this.fields.groupBy&&this.fixedHeaderElement&&r=="down"&&setTimeout(function(){n.scrollStop(null,!0)},100)}},t.prototype.scrollTop=function(i){if(i===void 0&&(i=null),!c(this.selectedLI)){var e=this.list.querySelectorAll(".e-virtual-list").length,r=this.virtualListInfo&&this.virtualListInfo.startIndex?this.selectedLI.offsetTop+this.virtualListInfo.startIndex*this.selectedLI.offsetHeight:this.selectedLI.offsetTop,n=r-e*this.selectedLI.offsetHeight-this.list.scrollTop,s=this.list.querySelector("li.e-list-item:not(.e-virtual-list)")?this.list.querySelector("li.e-list-item:not(.e-virtual-list)").getAttribute("data-value"):null;n=this.fields.groupBy&&!c(this.fixedHeaderElement)?n-this.fixedHeaderElement.offsetHeight:n;var a=r-e*this.selectedLI.offsetHeight+this.selectedLI.offsetHeight-this.list.scrollTop,l=this.enableVirtualization&&this.getModuleName()==="autocomplete"&&n<=0;if(this.activeIndex===0&&!this.enableVirtualization)this.list.scrollTop=0;else if(n<0||l){var h=this.selectedLI?this.selectedLI.getAttribute("data-value"):null,u=i=="pageUp"?this.getPageCount()-2:1;this.enableVirtualization&&this.isKeyBoardAction&&s&&h===s&&i!="home"&&!this.isVirtualScrolling?(this.isUpwardScrolling=!0,this.isPreventKeyAction=!0,this.list.scrollTop-=this.selectedLI.offsetHeight*u,this.isPreventKeyAction=this.list.scrollTop!=0?this.isPreventKeyAction:!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1):this.enableVirtualization&&i=="home"?(this.isPreventScrollAction=!1,this.isPreventKeyAction=!0,this.isKeyBoardAction=!1,this.list.scrollTo(0,0)):(i=="pageUp"&&this.enableVirtualization&&!this.isVirtualScrolling&&(this.isPreventKeyAction=!1,this.isKeyBoardAction=!1,this.isPreventScrollAction=!1,n=n-this.selectedLI.offsetHeight*u),this.list.scrollTop=this.list.scrollTop+n)}else a>0&&this.list.offsetHeight>a||(this.list.scrollTop=this.selectedLI.offsetTop-(this.fields.groupBy&&!c(this.fixedHeaderElement)?this.fixedHeaderElement.offsetHeight:0))}},t.prototype.isEditTextBox=function(){return!1},t.prototype.isFiltering=function(){return this.allowFiltering},t.prototype.isPopupButton=function(){return!0},t.prototype.setScrollPosition=function(i){if(this.isPreventScrollAction=!0,c(i))this.scrollBottom(!0);else switch(i.action){case"pageDown":case"down":case"end":this.isKeyBoardAction=!0,this.scrollBottom(!1,!1,i.action);break;default:this.isKeyBoardAction=i.action=="up"||i.action=="pageUp"||i.action=="open",this.scrollTop(i.action);break}this.isKeyBoardAction=!1},t.prototype.clearText=function(){this.filterInput.value=this.typedString="",this.searchLists(null),this.enableVirtualization&&(this.list.scrollTop=0,this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.getSkeletonCount(),this.UpdateSkeleton(),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues()))},t.prototype.setEleWidth=function(i){c(i)||(typeof i=="number"?this.inputWrapper.container.style.width=Pe(i):typeof i=="string"&&(this.inputWrapper.container.style.width=i.match(/px|%|em/)?i:Pe(i)))},t.prototype.closePopup=function(i,e){var r=this,n=!c(this.filterInput)&&!c(this.filterInput.value)&&this.filterInput.value!=="";if(this.getModuleName()==="combobox"&&this.typedString,this.isTyped=!1,!!(this.popupObj&&document.body.contains(this.popupObj.element)&&this.beforePopupOpen)){this.keyboardEvent=null,b.remove(document,"mousedown",this.onDocumentClick),this.isActive=!1,this.filterInputObj=null,this.isDropDownClick=!1,this.preventAutoFill=!1;for(var s=this.popupObj.getScrollableParent(this.inputWrapper.container),a=0,l=s;a<l.length;a++){var h=l[a];b.remove(h,"scroll",this.scrollHandler)}Q.isDevice&&this.isFilterLayout()&&F([document.body,this.popupObj.element],ge.popupFullScreen),this.isFilterLayout()&&(Q.isDevice||(this.searchKeyModule.destroy(),this.clearIconElement&&b.remove(this.clearIconElement,"click",this.clearText)),this.backIconElement&&(b.remove(this.backIconElement,"click",this.clickOnBackIcon),b.remove(this.clearIconElement,"click",this.clearText)),c(this.filterInput)||(b.remove(this.filterInput,"input",this.onInput),b.remove(this.filterInput,"keyup",this.onFilterUp),b.remove(this.filterInput,"keydown",this.onFilterDown),b.remove(this.filterInput,"blur",this.onBlurHandler),b.remove(this.filterInput,"paste",this.pasteHandler)),this.allowFiltering&&this.getModuleName()==="dropdownlist"&&this.filterInput.removeAttribute("aria-activedescendant"),this.filterInput=null),Ie(this.targetElement(),{"aria-expanded":"false"}),this.inputElement.setAttribute("aria-expanded","false"),this.targetElement().removeAttribute("aria-owns"),this.targetElement().removeAttribute("aria-activedescendant"),this.inputWrapper.container.classList.remove(ge.iconAnimation),this.isFiltering()&&(this.actionCompleteData.isUpdated=!1),this.enableVirtualization&&(this.value==null||this.isTyped?(this.viewPortInfo.endIndex=this.viewPortInfo&&this.viewPortInfo.endIndex>0?this.viewPortInfo.endIndex:this.itemCount,(this.getModuleName()==="autocomplete"||this.getModuleName()==="dropdownlist"&&!c(this.typedString)&&this.typedString!=""||this.getModuleName()==="combobox"&&this.allowFiltering&&!c(this.typedString)&&this.typedString!="")&&this.checkAndResetCache()):this.getModuleName()==="autocomplete"&&this.checkAndResetCache(),(this.getModuleName()==="dropdownlist"||this.getModuleName()==="combobox")&&this.skeletonCount!=0&&this.getSkeletonCount(!0)),this.beforePopupOpen=!1;var u={name:"FadeOut",duration:100,delay:i||0},p=this.popupObj,d={popup:p,cancel:!1,animation:u,event:e||null};this.trigger("close",d,function(g){if(!c(r.popupObj)&&!c(r.popupObj.element.querySelector(".e-fixed-head"))){var v=r.popupObj.element.querySelector(".e-fixed-head");v.parentNode.removeChild(v),r.fixedHeaderElement=null}g.cancel||(r.getModuleName()==="autocomplete"&&r.rippleFun(),r.isPopupOpen?r.popupObj.hide(new Ti(g.animation)):r.destroyPopup())}),Q.isDevice&&!d.cancel&&this.popupObj.element.classList.contains("e-wide-popup")&&this.popupObj.element.classList.remove("e-wide-popup");var f;this.dataSource instanceof V?f=this.virtualGroupDataSource&&this.virtualGroupDataSource.length?this.virtualGroupDataSource.length:0:f=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.enableVirtualization&&this.isFiltering()&&this.value!=null&&n&&this.totalItemCount!==f&&(this.updateInitialData(),this.checkAndResetCache())}},t.prototype.updateInitialData=function(){var i=this.selectData,e=this.renderItems(i,this.fields);this.list.scrollTop=0,this.virtualListInfo={currentPageNumber:null,direction:null,sentinelInfo:{},offsets:{},startIndex:0,endIndex:0},this.getModuleName()==="combobox"&&(this.typedString=""),this.previousStartIndex=0,this.previousEndIndex=0,this.dataSource instanceof V?this.totalItemCount=this.dataCount=this.virtualGroupDataSource&&this.virtualGroupDataSource.length?this.virtualGroupDataSource.length:0:this.totalItemCount=this.dataCount=this.dataSource&&this.dataSource.length?this.dataSource.length:0,this.list.getElementsByClassName("e-virtual-ddl")[0]&&(this.list.getElementsByClassName("e-virtual-ddl")[0].style=this.GetVirtualTrackHeight()),this.getModuleName()!=="autocomplete"&&this.totalItemCount!=0&&this.totalItemCount>this.itemCount*2&&this.getSkeletonCount(),this.UpdateSkeleton(),this.listData=i,this.updateActionCompleteDataValues(e,i),this.liCollections=this.list.querySelectorAll(".e-list-item"),this.list.getElementsByClassName("e-virtual-ddl-content")[0]&&(this.list.getElementsByClassName("e-virtual-ddl-content")[0].style=this.getTransformValues())},t.prototype.destroyPopup=function(){this.isPopupOpen=!1,this.isFilterFocus=!1,this.popupObj&&(this.popupObj.destroy(),Ce(this.popupObj.element))},t.prototype.clickOnBackIcon=function(){this.hidePopup(),this.focusIn()},t.prototype.render=function(){this.preselectedIndex=c(this.index)?null:this.index,this.element.tagName==="INPUT"?(this.inputElement=this.element,c(this.inputElement.getAttribute("role"))&&this.inputElement.setAttribute("role","combobox"),c(this.inputElement.getAttribute("type"))&&this.inputElement.setAttribute("type","text"),this.inputElement.setAttribute("aria-expanded","false")):(this.inputElement=this.createElement("input",{attrs:{role:"combobox",type:"text"}}),this.element.tagName!==this.getNgDirective()&&(this.element.style.display="none"),this.element.parentElement.insertBefore(this.inputElement,this.element),this.preventTabIndex(this.inputElement));var i=this.cssClass;!c(this.cssClass)&&this.cssClass!==""&&(i=this.cssClass.replace(/\s+/g," ").trim()),!c(D(this.element,"fieldset"))&&D(this.element,"fieldset").disabled&&(this.enabled=!1),this.inputWrapper=ce.createInput({element:this.inputElement,buttons:this.isPopupButton()?[ge.icon]:null,floatLabelType:this.floatLabelType,properties:{readonly:this.getModuleName()==="dropdownlist"?!0:this.readonly,placeholder:this.placeholder,cssClass:i,enabled:this.enabled,enableRtl:this.enableRtl,showClearButton:this.showClearButton}},this.createElement),this.element.tagName===this.getNgDirective()?this.element.appendChild(this.inputWrapper.container):this.inputElement.parentElement.insertBefore(this.element,this.inputElement),this.hiddenElement=this.createElement("select",{attrs:{"aria-hidden":"true","aria-label":this.getModuleName(),tabindex:"-1",class:ge.hiddenElement}}),zt([this.hiddenElement],this.inputWrapper.container),this.validationAttribute(this.element,this.hiddenElement),this.setReadOnly(),this.setFields(),this.inputWrapper.container.style.width=Pe(this.width),this.inputWrapper.container.classList.add("e-ddl"),this.floatLabelType==="Auto"&&ce.calculateWidth(this.inputElement,this.inputWrapper.container),!c(this.inputWrapper.buttons[0])&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0]&&this.floatLabelType!=="Never"&&this.inputWrapper.container.getElementsByClassName("e-float-text-content")[0].classList.add("e-icon"),this.wireEvent(),this.tabIndex=this.element.hasAttribute("tabindex")?this.element.getAttribute("tabindex"):"0",this.element.removeAttribute("tabindex");var e=this.element.getAttribute("id")?this.element.getAttribute("id"):tr("ej2_dropdownlist");if(this.element.id=e,this.hiddenElement.id=e+"_hidden",this.targetElement().setAttribute("tabindex",this.tabIndex),(this.getModuleName()==="autocomplete"||this.getModuleName()==="combobox")&&!this.readonly?this.inputElement.setAttribute("aria-label",this.getModuleName()):this.getModuleName()==="dropdownlist"&&(Ie(this.targetElement(),{"aria-label":this.getModuleName()}),this.inputElement.setAttribute("aria-label",this.getModuleName()),this.inputElement.setAttribute("aria-expanded","false"),this.inputElement.setAttribute("aria-controls",this.element.id+"_popups")),Ie(this.targetElement(),this.getAriaAttributes()),this.updateDataAttribute(this.htmlAttributes),this.setHTMLAttributes(),this.targetElement()===this.inputElement&&this.inputElement.removeAttribute("aria-labelledby"),this.value!==null||this.activeIndex!==null||this.text!==null)this.enableVirtualization&&(this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.updateVirtualizationProperties(this.itemCount,this.allowFiltering)),this.initValue(),this.selectedValueInfo=this.viewPortInfo,this.enableVirtualization&&(this.activeIndex=this.activeIndex+this.skeletonCount);else if(this.element.tagName==="SELECT"&&this.element.options[0]){var r=this.element;this.value=r.options[r.selectedIndex].value,this.text=c(this.value)?null:r.options[r.selectedIndex].textContent,this.initValue()}this.setEnabled(),this.preventTabIndex(this.element),this.enabled||(this.targetElement().tabIndex=-1),this.initial=!1,this.element.style.opacity="",this.inputElement.onselect=function(s){s.stopImmediatePropagation()},this.inputElement.onchange=function(s){s.stopImmediatePropagation()},this.element.hasAttribute("autofocus")&&this.focusIn(),c(this.text)||this.inputElement.setAttribute("value",this.text),this.element.hasAttribute("data-val")&&this.element.setAttribute("data-val","false");var n=this.inputWrapper.container.getElementsByClassName("e-float-text")[0];!c(this.element.id)&&this.element.id!==""&&!c(n)&&(n.id="label_"+this.element.id.replace(/ /g,"_"),Ie(this.inputElement,{"aria-labelledby":n.id})),this.renderComplete(),this.listItemHeight=this.getListHeight(),this.getSkeletonCount(),this.enableVirtualization&&this.updateVirtualizationProperties(this.itemCount,this.allowFiltering),this.viewPortInfo.startIndex=this.virtualItemStartIndex=0,this.viewPortInfo.endIndex=this.virtualItemEndIndex=this.viewPortInfo.startIndex>0?this.viewPortInfo.endIndex:this.itemCount},t.prototype.getListHeight=function(){var i=this.createElement("div",{className:"e-dropdownbase"}),e=this.createElement("li",{className:"e-list-item"}),r=Pe(this.popupHeight);i.style.height=parseInt(r,10).toString()+"px",i.appendChild(e),document.body.appendChild(i),this.virtualListHeight=i.getBoundingClientRect().height;var n=Math.ceil(e.getBoundingClientRect().height);return i.remove(),n},t.prototype.setFooterTemplate=function(i){var e;this.footer?this.isReact&&typeof this.footerTemplate=="function"?this.clearTemplate(["footerTemplate"]):this.footer.innerHTML="":(this.footer=this.createElement("div"),T([this.footer],ge.footer));var r=this.dropdownCompiler(this.footerTemplate);typeof this.footerTemplate!="function"&&r?e=Ue(q(this.footerTemplate,document).innerHTML.trim()):e=Ue(this.footerTemplate);var n=e({},this,"footerTemplate",this.footerTemplateId,this.isStringTemplate,null,this.footer);n&&n.length>0&&Oe(n,this.footer),Oe([this.footer],i)},t.prototype.setHeaderTemplate=function(i){var e;this.header?this.header.innerHTML="":(this.header=this.createElement("div"),T([this.header],ge.header));var r=this.dropdownCompiler(this.headerTemplate);typeof this.headerTemplate!="function"&&r?e=Ue(q(this.headerTemplate,document).innerHTML.trim()):e=Ue(this.headerTemplate);var n=e({},this,"headerTemplate",this.headerTemplateId,this.isStringTemplate,null,this.header);n&&n.length&&Oe(n,this.header);var s=i.querySelector("div.e-content");i.insertBefore(this.header,s)},t.prototype.setEnabled=function(){this.element.setAttribute("aria-disabled",this.enabled?"false":"true")},t.prototype.setOldText=function(i){this.text=i},t.prototype.setOldValue=function(i){this.value=i},t.prototype.refreshPopup=function(){!c(this.popupObj)&&document.body.contains(this.popupObj.element)&&(this.allowFiltering&&!(Q.isDevice&&this.isFilterLayout())||this.getModuleName()==="autocomplete")&&(F([this.popupObj.element],"e-popup-close"),this.popupObj.refreshPosition(this.inputWrapper.container),this.popupObj.resolveCollision())},t.prototype.checkData=function(i){i.dataSource&&!c(Object.keys(i.dataSource))&&this.itemTemplate&&this.allowFiltering&&!(this.isListSearched&&i.dataSource instanceof V)&&(this.list=null,this.actionCompleteData={ulElement:null,list:null,isUpdated:!1}),this.isListSearched=!1;var e=Object.keys(i).indexOf("value")!==-1&&c(i.value),r=Object.keys(i).indexOf("text")!==-1&&c(i.text);this.getModuleName()!=="autocomplete"&&this.allowFiltering&&(e||r)&&(this.itemData=null),this.allowFiltering&&i.dataSource&&!c(Object.keys(i.dataSource))?(this.actionCompleteData={ulElement:null,list:null,isUpdated:!1},this.actionData=this.actionCompleteData):this.allowFiltering&&i.query&&!c(Object.keys(i.query))&&(this.actionCompleteData=this.getModuleName()==="combobox"?{ulElement:null,list:null,isUpdated:!1}:this.actionCompleteData,this.actionData=this.actionCompleteData)},t.prototype.updateDataSource=function(i){(this.inputElement.value!==""||!c(i)&&(c(i.dataSource)||!(i.dataSource instanceof V)&&i.dataSource.length===0))&&this.clearAll(null,i),this.fields.groupBy&&i.fields&&!this.isGroupChecking&&this.list&&(b.remove(this.list,"scroll",this.setFloatingHeader),b.add(this.list,"scroll",this.setFloatingHeader,this)),(!(!c(i)&&(c(i.dataSource)||!(i.dataSource instanceof V)&&i.dataSource.length===0))||!(Array.isArray(i.dataSource)&&i.dataSource.length===0))&&(this.typedString="",this.resetList(this.dataSource)),!this.isCustomFilter&&!this.isFilterFocus&&document.activeElement!==this.filterInput&&this.checkCustomValue()},t.prototype.checkCustomValue=function(){this.itemData=this.getDataByValue(this.value);var i=this.getItemData();this.setProperties({text:i.text,value:i.value})},t.prototype.updateInputFields=function(){this.getModuleName()==="dropdownlist"&&ce.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton)},t.prototype.onPropertyChanged=function(i,e){var r=this;!c(i.dataSource)&&!this.isTouched&&c(i.value)&&c(i.index)&&!c(this.preselectedIndex)&&(i.index=this.preselectedIndex),(!c(i.value)||!c(i.index))&&(this.isTouched=!0),this.getModuleName()==="dropdownlist"&&(this.checkData(i),this.setUpdateInitial(["fields","query","dataSource"],i));for(var n=function(u){switch(u){case"query":case"dataSource":s.getSkeletonCount(),s.checkAndResetCache();break;case"htmlAttributes":s.setHTMLAttributes();break;case"width":s.setEleWidth(i.width),ce.calculateWidth(s.inputElement,s.inputWrapper.container);break;case"placeholder":ce.setPlaceholder(i.placeholder,s.inputElement);break;case"filterBarPlaceholder":s.filterInput&&ce.setPlaceholder(i.filterBarPlaceholder,s.filterInput);break;case"readonly":s.getModuleName()!=="dropdownlist"&&ce.setReadonly(i.readonly,s.inputElement),s.setReadOnly();break;case"cssClass":s.setCssClass(i.cssClass,e.cssClass),ce.calculateWidth(s.inputElement,s.inputWrapper.container);break;case"enableRtl":s.setEnableRtl();break;case"enabled":s.setEnable();break;case"text":if(i.text===null){s.clearAll();break}if(s.enableVirtualization){s.updateValues(),s.updateInputFields(),s.notify("setCurrentViewDataAsync",{module:"VirtualScroll"});break}if(s.list||(s.dataSource instanceof V&&(s.initialRemoteRender=!0),s.renderList()),!s.initialRemoteRender){var p=s.getElementByText(i.text);if(!s.checkValidLi(p))if(s.liCollections&&s.liCollections.length===100&&s.getModuleName()==="autocomplete"&&s.listData.length>100)s.setSelectionData(i.text,e.text,"text");else if(i.text&&s.dataSource instanceof V){var d=s.getItems().length,f=c(s.fields.text)?s.fields.value:s.fields.text;s.typedString="",s.dataSource.executeQuery(s.getQuery(s.query).where(new be(f,"equal",i.text))).then(function(I){I.result.length>0?(r.addItem(I.result,d),r.updateValues()):r.setOldText(e.text)})}else s.getModuleName()==="autocomplete"?s.setInputValue(i,e):s.setOldText(e.text);s.updateInputFields()}break;case"value":if(i.value===null){s.clearAll();break}if(s.enableVirtualization){s.updateValues(),s.updateInputFields(),s.notify("setCurrentViewDataAsync",{module:"VirtualScroll"}),s.preventChange=s.isAngular&&s.preventChange?!s.preventChange:s.preventChange;break}if(s.notify("beforeValueChange",{newProp:i}),s.list||(s.dataSource instanceof V&&(s.initialRemoteRender=!0),s.renderList()),!s.initialRemoteRender){var g=s.getElementByValue(i.value);if(!s.checkValidLi(g))if(s.liCollections&&s.liCollections.length===100&&s.getModuleName()==="autocomplete"&&s.listData.length>100)s.setSelectionData(i.value,e.value,"value");else if(i.value&&s.dataSource instanceof V){var v=s.getItems().length,f=c(s.fields.value)?s.fields.text:s.fields.value;s.typedString="",s.dataSource.executeQuery(s.getQuery(s.query).where(new be(f,"equal",i.value))).then(function(S){S.result.length>0?(r.addItem(S.result,v),r.updateValues()):r.setOldValue(e.value)})}else s.getModuleName()==="autocomplete"?s.setInputValue(i,e):s.setOldValue(e.value);s.updateInputFields(),s.preventChange=s.isAngular&&s.preventChange?!s.preventChange:s.preventChange}break;case"index":if(i.index===null){s.clearAll();break}if(s.list||(s.dataSource instanceof V&&(s.initialRemoteRender=!0),s.renderList()),!s.initialRemoteRender&&s.liCollections){var m=s.liCollections[i.index];s.checkValidLi(m)||(s.liCollections&&s.liCollections.length===100&&s.getModuleName()==="autocomplete"&&s.listData.length>100?s.setSelectionData(i.index,e.index,"index"):s.index=e.index),s.updateInputFields()}break;case"footerTemplate":s.popupObj&&s.setFooterTemplate(s.popupObj.element);break;case"headerTemplate":s.popupObj&&s.setHeaderTemplate(s.popupObj.element);break;case"valueTemplate":!c(s.itemData)&&s.valueTemplate!==null&&s.setValueTemplate();break;case"allowFiltering":s.allowFiltering&&(s.actionCompleteData={ulElement:s.ulElement,list:s.listData,isUpdated:!0},s.actionData=s.actionCompleteData,s.updateSelectElementData(s.allowFiltering));break;case"floatLabelType":ce.removeFloating(s.inputWrapper),ce.addFloating(s.inputElement,i.floatLabelType,s.placeholder,s.createElement),!c(s.inputWrapper.buttons[0])&&s.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0]&&s.floatLabelType!=="Never"&&s.inputWrapper.container.getElementsByClassName("e-float-text-overflow")[0].classList.add("e-icon");break;case"showClearButton":s.inputWrapper.clearButton||(ce.setClearButton(i.showClearButton,s.inputElement,s.inputWrapper,null,s.createElement),s.bindClearEvent());break;default:{var y=s.getPropObject(u,i,e);o.prototype.onPropertyChanged.call(s,y.newProperty,y.oldProperty)}break}},s=this,a=0,l=Object.keys(i);a<l.length;a++){var h=l[a];n(h)}},t.prototype.checkValidLi=function(i){return this.isValidLI(i)?(this.setSelection(i,null),!0):!1},t.prototype.setSelectionData=function(i,e,r){var n=this,s;this.updateListValues=function(){r==="text"?(s=n.getElementByText(i),n.checkValidLi(s)||n.setOldText(e)):r==="value"?(s=n.getElementByValue(i),n.checkValidLi(s)||n.setOldValue(e)):r==="index"&&(s=n.liCollections[i],n.checkValidLi(s)||(n.index=e))}},t.prototype.updatePopupState=function(){this.beforePopupOpen&&(this.beforePopupOpen=!1,this.showPopup())},t.prototype.setReadOnly=function(){this.readonly?T([this.inputWrapper.container],["e-readonly"]):F([this.inputWrapper.container],["e-readonly"])},t.prototype.setInputValue=function(i,e){},t.prototype.setCssClass=function(i,e){c(e)||(e=e.replace(/\s+/g," ").trim()),c(i)||(i=i.replace(/\s+/g," ").trim()),ce.setCssClass(i,[this.inputWrapper.container],e),this.popupObj&&ce.setCssClass(i,[this.popupObj.element],e)},t.prototype.getModuleName=function(){return"dropdownlist"},t.prototype.showPopup=function(i){if(this.enabled){if(this.isReact&&this.getModuleName()==="combobox"&&this.itemTemplate&&this.isCustomFilter&&this.isAddNewItemTemplate&&(this.renderList(),this.isAddNewItemTemplate=!1),this.isFiltering()&&this.dataSource instanceof V&&this.actionData.list!==this.actionCompleteData.list&&this.actionData.list&&this.actionData.ulElement&&(this.actionCompleteData=this.actionData,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)),this.beforePopupOpen){this.refreshPopup();return}this.beforePopupOpen=!0,this.isFiltering()&&!this.isActive&&this.actionCompleteData.list&&this.actionCompleteData.list[0]?(this.isActive=!0,this.onActionComplete(this.actionCompleteData.ulElement,this.actionCompleteData.list,null,!0)):(c(this.list)||!yt(this.list)&&(this.list.classList.contains(ee.noData)||this.list.querySelectorAll("."+ee.li).length<=0))&&(this.isReact&&this.isFiltering()&&this.itemTemplate!=null&&(this.isSecondClick=!1),this.renderList(i)),this.enableVirtualization&&this.listData&&this.listData.length&&(!c(this.value)&&(this.getModuleName()==="dropdownlist"||this.getModuleName()==="combobox")&&this.removeHover(),this.beforePopupOpen||this.notify("setCurrentViewDataAsync",{module:"VirtualScroll"})),this.beforePopupOpen&&this.invokeRenderPopup(i),this.enableVirtualization&&!this.allowFiltering&&this.selectedValueInfo!=null&&this.selectedValueInfo.startIndex>0&&this.value!=null&&this.notify("dataProcessAsync",{module:"VirtualScroll",isOpen:!0})}},t.prototype.invokeRenderPopup=function(i){if(Q.isDevice&&this.isFilterLayout()){var e=this;window.onpopstate=function(){e.hidePopup()},history.pushState({},"")}!c(this.list)&&(!c(this.list.children[0])||this.list.classList.contains(ee.noData))&&this.renderPopup(i)},t.prototype.renderHightSearch=function(){},t.prototype.hidePopup=function(i){if(this.isEscapeKey&&this.getModuleName()==="dropdownlist")if(c(this.inputElement)||ce.setValue(this.text,this.inputElement,this.floatLabelType,this.showClearButton),this.isEscapeKey=!1,c(this.index))this.resetSelection();else{var e=this.findListElement(this.ulElement,"li","data-value",this.value);this.selectedLI=this.liCollections[this.index]||e,this.selectedLI&&(this.updateSelectedItem(this.selectedLI,null,!0),this.valueTemplate&&this.itemData!==null&&this.setValueTemplate())}this.closePopup(0,i);var r=this.getItemData(),n=!c(this.selectedLI);n&&this.enableVirtualization&&this.selectedLI.classList&&(n=this.selectedLI.classList.contains("e-active")),this.inputElement&&this.inputElement.value.trim()===""&&!this.isInteracted&&(this.isSelectCustom||n&&this.inputElement.value!==r.text)&&(this.isSelectCustom=!1,this.clearAll(i))},t.prototype.focusIn=function(i){if(this.enabled&&!this.targetElement().classList.contains(ge.disable)){var e=!1;this.preventFocus&&Q.isDevice&&(this.inputWrapper.container.tabIndex=1,this.inputWrapper.container.focus(),this.preventFocus=!1,e=!0),e||this.targetElement().focus(),T([this.inputWrapper.container],[ge.inputFocus]),this.onFocus(i),this.floatLabelType==="Auto"&&ce.calculateWidth(this.inputElement,this.inputWrapper.container)}},t.prototype.focusOut=function(i){this.enabled&&(!this.enableVirtualization&&(this.getModuleName()==="combobox"||this.getModuleName()==="autocomplete")&&(this.isTyped=!0),this.hidePopup(i),this.targetElement()&&this.targetElement().blur(),F([this.inputWrapper.container],[ge.inputFocus]),this.floatLabelType==="Auto"&&this.inputElement.value===""&&ce.calculateWidth(this.inputElement,this.inputWrapper.container))},t.prototype.destroy=function(){if(this.isActive=!1,fc(this.element.id),this.isReact&&this.clearTemplate(),this.hidePopup(),this.popupObj&&this.popupObj.hide(),this.unWireEvent(),this.list&&this.unWireListEvents(),!(this.element&&!this.element.classList.contains("e-"+this.getModuleName()))){if(this.inputElement){for(var i=["readonly","aria-disabled","placeholder","aria-labelledby","aria-expanded","autocomplete","aria-readonly","autocapitalize","spellcheck","aria-autocomplete","aria-live","aria-describedby","aria-label"],e=0;e<i.length;e++)this.inputElement.removeAttribute(i[e]);this.inputElement.setAttribute("tabindex",this.tabIndex),this.inputElement.classList.remove("e-input"),ce.setValue("",this.inputElement,this.floatLabelType,this.showClearButton)}this.element.style.display="block",this.inputWrapper.container.parentElement.tagName===this.getNgDirective()?Ce(this.inputWrapper.container):(this.inputWrapper.container.parentElement.insertBefore(this.element,this.inputWrapper.container),Ce(this.inputWrapper.container)),this.hiddenElement=null,this.inputWrapper=null,this.keyboardModule=null,this.ulElement=null,this.list=null,this.popupObj=null,this.popupContentElement=null,this.rippleFun=null,this.selectedLI=null,this.liCollections=null,this.item=null,this.inputWrapper=null,this.footer=null,this.header=null,this.previousSelectedLI=null,this.valueTempElement=null,this.actionData.ulElement=null,this.inputElement&&!c(this.inputElement.onchange)&&(this.inputElement.onchange=null),this.isAngular&&(this.inputElement=null),o.prototype.destroy.call(this)}},t.prototype.getItems=function(){return this.list||(this.dataSource instanceof V&&(this.initialRemoteRender=!0),this.renderList()),this.ulElement?o.prototype.getItems.call(this):[]},t.prototype.getDataByValue=function(i){return o.prototype.getDataByValue.call(this,i)},t.prototype.clear=function(){this.value=null},qe([C(null)],t.prototype,"cssClass",void 0),qe([C("100%")],t.prototype,"width",void 0),qe([C(!0)],t.prototype,"enabled",void 0),qe([C(!1)],t.prototype,"enablePersistence",void 0),qe([C("300px")],t.prototype,"popupHeight",void 0),qe([C("100%")],t.prototype,"popupWidth",void 0),qe([C(null)],t.prototype,"placeholder",void 0),qe([C(null)],t.prototype,"filterBarPlaceholder",void 0),qe([C({})],t.prototype,"htmlAttributes",void 0),qe([C(null)],t.prototype,"query",void 0),qe([C(null)],t.prototype,"valueTemplate",void 0),qe([C(null)],t.prototype,"headerTemplate",void 0),qe([C(null)],t.prototype,"footerTemplate",void 0),qe([C(!1)],t.prototype,"allowFiltering",void 0),qe([C(!1)],t.prototype,"readonly",void 0),qe([C(!1)],t.prototype,"enableVirtualization",void 0),qe([C(null)],t.prototype,"text",void 0),qe([C(null)],t.prototype,"value",void 0),qe([C(null)],t.prototype,"index",void 0),qe([C("Never")],t.prototype,"floatLabelType",void 0),qe([C(!1)],t.prototype,"showClearButton",void 0),qe([k()],t.prototype,"filtering",void 0),qe([k()],t.prototype,"change",void 0),qe([k()],t.prototype,"beforeOpen",void 0),qe([k()],t.prototype,"open",void 0),qe([k()],t.prototype,"close",void 0),qe([k()],t.prototype,"blur",void 0),qe([k()],t.prototype,"focus",void 0),t=qe([si],t),t}(kc),On=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),ne=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},Ot="e-treeview",ca="e-control",et="e-icon-collapsible",Fe="e-icon-expandable",ue="e-list-item",Oi="e-list-text",Nc="e-text-wrap",Pc="e-ie-wrap",Ae="e-list-parent",Ur="e-hover",Ct="e-active",ls="e-icons-spinner",hi="e-process",je="e-icons",tt="e-text-content",_r="e-input",pa="e-input-group",jr="e-tree-input",hs="e-editing",da="e-rtl",fa="e-interaction",Bc="e-drag-item",ga="e-droppable",us="e-dragging",cr="e-sibling",Kr="e-drop-in",pr="e-drop-next",cs="e-drop-out",ps="e-no-drop",zc="e-fullrow-wrap",ui="e-fullrow",Ki="e-selected",Qr="e-expanded",va="e-node-collapsed",ma="e-disable",Hc="e-drop-count",pt="e-check",Nt="e-stop",Pt="e-checkbox-wrapper",ci="e-frame",qc="e-ripple-container",ya="e-ripple",Vc="e-ripple-element",Ni="e-node-focus",Ca="e-list-img",Wc="e-bigger",Gc="e-small",Uc="e-has-child",Yr="e-animation-active",Sa="e-disabled",Qi="e-prevent",ba={treeRole:"group",itemRole:"treeitem",listRole:"group",itemText:"",wrapperRole:""},_c=function(o){On(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return ne([C("child")],t.prototype,"child",void 0),ne([C([])],t.prototype,"dataSource",void 0),ne([C("expanded")],t.prototype,"expanded",void 0),ne([C("hasChildren")],t.prototype,"hasChildren",void 0),ne([C("htmlAttributes")],t.prototype,"htmlAttributes",void 0),ne([C("iconCss")],t.prototype,"iconCss",void 0),ne([C("id")],t.prototype,"id",void 0),ne([C("imageUrl")],t.prototype,"imageUrl",void 0),ne([C("isChecked")],t.prototype,"isChecked",void 0),ne([C("parentID")],t.prototype,"parentID",void 0),ne([C(null)],t.prototype,"query",void 0),ne([C("selectable")],t.prototype,"selectable",void 0),ne([C("selected")],t.prototype,"selected",void 0),ne([C(null)],t.prototype,"tableName",void 0),ne([C("text")],t.prototype,"text",void 0),ne([C("tooltip")],t.prototype,"tooltip",void 0),ne([C("navigateUrl")],t.prototype,"navigateUrl",void 0),t}(_e),xa=function(o){On(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return ne([C("SlideDown")],t.prototype,"effect",void 0),ne([C(400)],t.prototype,"duration",void 0),ne([C("linear")],t.prototype,"easing",void 0),t}(_e),jc=function(o){On(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return ne([Je({effect:"SlideUp",duration:400,easing:"linear"},xa)],t.prototype,"collapse",void 0),ne([Je({effect:"SlideDown",duration:400,easing:"linear"},xa)],t.prototype,"expand",void 0),t}(_e),Kc=function(o){On(t,o);function t(e,r){var n=o.call(this,e,r)||this;return n.isRefreshed=!1,n.preventExpand=!1,n.checkedElement=[],n.disableNode=[],n.validArr=[],n.validNodes=[],n.expandChildren=[],n.isFieldChange=!1,n.changeDataSource=!1,n.hasTemplate=!1,n.isFirstRender=!1,n.isNodeDropped=!1,n.isInteracted=!1,n.isRightClick=!1,n.mouseDownStatus=!1,n}i=t,t.prototype.getModuleName=function(){return"treeview"},t.prototype.preRender=function(){var e=this;this.checkActionNodes=[],this.parentNodeCheck=[],this.dragStartAction=!1,this.isAnimate=!1,this.keyConfigs={escape:"escape",end:"end",enter:"enter",f2:"f2",home:"home",moveDown:"downarrow",moveLeft:"leftarrow",moveRight:"rightarrow",moveUp:"uparrow",ctrlDown:"ctrl+downarrow",ctrlUp:"ctrl+uparrow",ctrlEnter:"ctrl+enter",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",ctrlA:"ctrl+A",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftEnter:"shift+enter",shiftHome:"shift+home",shiftEnd:"shift+end",csDown:"ctrl+shift+downarrow",csUp:"ctrl+shift+uparrow",csEnter:"ctrl+shift+enter",csHome:"ctrl+shift+home",csEnd:"ctrl+shift+end",space:"space",shiftSpace:"shift+space",ctrlSpace:"ctrl+space"},this.listBaseOption={expandCollapse:!0,showIcon:!0,expandIconClass:Fe,ariaAttributes:ba,expandIconPosition:"Left",itemCreated:function(r){e.beforeNodeCreate(r)},enableHtmlSanitizer:this.enableHtmlSanitizer,itemNavigable:this.fullRowNavigable},this.updateListProp(this.fields),this.aniObj=new Ti({}),this.treeList=[],this.isLoaded=!1,this.isInitalExpand=!1,this.expandChildren=[],this.index=0,this.setTouchClass(),c(this.selectedNodes)&&this.setProperties({selectedNodes:[]},!0),c(this.checkedNodes)&&this.setProperties({checkedNodes:[]},!0),c(this.expandedNodes)?this.setProperties({expandedNodes:[]},!0):this.isInitalExpand=!0},t.prototype.getPersistData=function(){var e=["selectedNodes","checkedNodes","expandedNodes"];return this.addOnPersist(e)},t.prototype.render=function(){this.initialRender=!0,this.initialize(),this.setDataBinding(!1),this.setDisabledMode(),this.setExpandOnType(),this.disabled||this.setRipple(),this.wireEditingEvents(this.allowEditing),this.setDragAndDrop(this.allowDragAndDrop),this.disabled||this.wireEvents(),this.initialRender=!1,this.renderComplete()},t.prototype.initialize=function(){this.element.setAttribute("role","tree"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active"),this.setCssClass(null,this.cssClass),this.setEnableRtl(),this.setFullRow(this.fullRowSelect),this.setTextWrap(),this.nodeTemplateFn=this.templateComplier(this.nodeTemplate)},t.prototype.setDisabledMode=function(){this.disabled?(this.element.classList.add(Sa),this.element.setAttribute("aria-disabled","true")):(this.element.classList.remove(Sa),this.element.setAttribute("aria-disabled","false"))},t.prototype.setEnableRtl=function(){(this.enableRtl?T:F)([this.element],da)},t.prototype.setRipple=function(){var e="."+ui+",."+tt,r={selector:e,ignore:"."+tt+" > ."+je+",."+pa+",."+_r+", ."+Pt};this.rippleFn=mr(this.element,r);var n={selector:"."+tt+" > ."+je,isCenterRipple:!0};this.rippleIconFn=mr(this.element,n)},t.prototype.setFullRow=function(e){(e?T:F)([this.element],zc)},t.prototype.setMultiSelect=function(e){e?this.element.setAttribute("aria-multiselectable","true"):this.element.setAttribute("aria-multiselectable","false")},t.prototype.templateComplier=function(e){if(e){this.hasTemplate=!0,this.element.classList.add(fa);try{return typeof e!="function"&&document.querySelectorAll(e).length?Ue(document.querySelector(e).innerHTML.trim()):Ue(e)}catch{return Ue(e)}}this.element.classList.remove(fa)},t.prototype.setDataBinding=function(e){var r=this;this.treeList.push("false"),this.fields.dataSource instanceof V?(this.isOffline=this.fields.dataSource.dataSource.offline,this.fields.dataSource.ready?this.fields.dataSource.ready.then(function(n){r.isOffline=r.fields.dataSource.dataSource.offline,r.fields.dataSource instanceof V&&r.isOffline&&(r.treeList.pop(),r.treeData=n.result,r.isNumberTypeId=r.getType(),r.setRootData(),r.renderItems(!0),r.treeList.length===0&&!r.isLoaded&&r.finalize())}).catch(function(n){r.trigger("actionFailure",{error:n})}):this.fields.dataSource.executeQuery(this.getQuery(this.fields)).then(function(n){r.treeList.pop(),r.treeData=n.result,r.isNumberTypeId=r.getType(),r.setRootData(),e&&(r.changeDataSource=!0),r.renderItems(!0),r.changeDataSource=!1,r.treeList.length===0&&!r.isLoaded&&r.finalize()}).catch(function(n){r.trigger("actionFailure",{error:n})})):(this.treeList.pop(),c(this.fields.dataSource)?this.rootData=this.treeData=[]:(this.treeData=JSON.parse(JSON.stringify(this.fields.dataSource)),this.setRootData()),this.isNumberTypeId=this.getType(),this.renderItems(!1)),this.treeList.length===0&&!this.isLoaded&&this.finalize()},t.prototype.getQuery=function(e,r){r===void 0&&(r=null);var n=[],s;if(e.query)s=e.query.clone();else{s=new se;for(var a=this.getActualProperties(e),l=0,h=Object.keys(a);l<h.length;l++){var u=h[l];u!=="dataSource"&&u!=="tableName"&&u!=="child"&&e[u]&&u!=="url"&&n.indexOf(e[u])===-1&&n.push(e[u])}s.select(n),a.hasOwnProperty("tableName")&&s.from(e.tableName)}return He.addSorting(this.sortOrder,e.text,s),!c(r)&&!c(e.parentID)&&s.where(e.parentID,"equal",this.isNumberTypeId?parseFloat(r):r),s},t.prototype.getType=function(){return this.treeData[0]?typeof N(this.fields.id,this.treeData[0])=="number":!1},t.prototype.setRootData=function(){if(this.dataType=this.getDataType(this.treeData,this.fields),this.dataType===1){this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID);var e=this.getChildNodes(this.treeData,void 0,!0);c(e)?this.rootData=[]:this.rootData=e}else this.rootData=this.treeData},t.prototype.isChildObject=function(){return typeof this.fields.child=="object"},t.prototype.renderItems=function(e){this.listBaseOption.ariaAttributes.level=1;var r=this.getSortedData(this.rootData);this.ulElement=He.createList(this.createElement,e?this.rootData:r,this.listBaseOption),this.element.appendChild(this.ulElement);var n=this.ulElement.querySelectorAll(".e-list-item");if(this.loadOnDemand===!1)for(var s=0;s<n.length;)this.renderChildNodes(n[s],!0,null,!0),s++;var a=Ee("."+Ae,this.element);(a.length===1&&n&&n.length!==0||this.loadOnDemand)&&this.finalizeNode(this.element),this.parentNodeCheck=[],this.parentCheckData=[],this.updateCheckedStateFromDS(),this.autoCheck&&this.showCheckBox&&!this.isLoaded&&this.updateParentCheckState()},t.prototype.updateCheckedStateFromDS=function(e){if(this.validNodes=[],this.treeData&&this.showCheckBox){if(this.dataType===1){for(var r=this.fields,n=new V(this.treeData).executeLocal(new se().where(r.isChecked,"equal",!0,!1)),s=0;s<n.length;s++){var a=n[s][this.fields.id]?n[s][this.fields.id].toString():null;if(n[s][this.fields.parentID]&&n[s][this.fields.parentID].toString(),this.checkedNodes.indexOf(a)===-1&&!this.isLoaded&&this.checkedNodes.push(a),n[s][this.fields.hasChildren])for(var l=n[s][this.fields.id],h=new V(this.treeData).executeLocal(new se().where(r.parentID,"equal",l,!1)),u=0;u<h.length;u++){var p=h[u][this.fields.id]?h[u][this.fields.id].toString():null;this.checkedNodes.indexOf(p)===-1&&this.autoCheck&&this.checkedNodes.push(p)}}for(var s=0;s<this.checkedNodes.length;s++){var d=this.fields,f=new V(this.treeData).executeLocal(new se().where(d.id,"equal",this.checkedNodes[s],!0));if(f[0]&&this.autoCheck&&(this.getCheckedNodeDetails(d,f),this.checkIndeterminateState(f[0])),f.length>0){var g=f[0][this.fields.id]?f[0][this.fields.id].toString():null;this.checkedNodes.indexOf(g)>-1&&this.validNodes.indexOf(g)===-1&&this.validNodes.push(g)}for(var v=new V(this.treeData).executeLocal(new se().where(d.parentID,"equal",this.checkedNodes[s],!0)),m=0;m<v.length;m++){var g=v[m][this.fields.id]?v[m][this.fields.id].toString():null;this.checkedNodes.indexOf(g)===-1&&this.autoCheck&&this.checkedNodes.push(g),this.checkedNodes.indexOf(g)>-1&&this.validNodes.indexOf(g)===-1&&this.validNodes.push(g)}}}else if(this.dataType===2||this.fields.dataSource instanceof V&&this.isOffline){for(var m=0;m<this.treeData.length;m++){var y=this.treeData[m][this.fields.id]?this.treeData[m][this.fields.id].toString():"";this.treeData[m][this.fields.isChecked]&&!this.isLoaded&&this.checkedNodes.indexOf(y)===-1&&this.checkedNodes.push(y),this.checkedNodes.indexOf(y)>-1&&this.validNodes.indexOf(y)===-1&&this.validNodes.push(y);var I=N(this.fields.child.toString(),this.treeData[m]);I&&this.updateChildCheckState(I,this.treeData[m])}this.validNodes=this.enablePersistence?this.checkedNodes:this.validNodes}this.setProperties({checkedNodes:this.validNodes},!0)}},t.prototype.getCheckedNodeDetails=function(e,r){var n=r[0][this.fields.parentID]?r[0][this.fields.parentID].toString():null,s=0,a=this.element.querySelector('[data-uid="'+r[0][this.fields.id]+'"]'),l=this.element.querySelector('[data-uid="'+r[0][this.fields.parentID]+'"]');if(!a&&!l){this.parentNodeCheck.length,this.parentNodeCheck.indexOf(n)===-1&&this.parentNodeCheck.push(n);for(var h=this.getChildNodes(this.treeData,n),u=0;u<h.length;u++){var p=h[u][this.fields.id]?h[u][this.fields.id].toString():null;this.checkedNodes.indexOf(p)!==-1&&s++,s===h.length&&this.checkedNodes.indexOf(n)===-1&&this.checkedNodes.push(n)}var d=new V(this.treeData).executeLocal(new se().where(e.id,"equal",n,!0));this.getCheckedNodeDetails(e,d)}else if(l){var f=q("."+pt,l);f||this.changeState(l,"indeterminate",null,!0,!0)}},t.prototype.updateParentCheckState=function(){for(var e=Ee("."+Nt,this.element),r,n=0;n<e.length;n++){var s=D(e[n],"."+ue),a=s.getAttribute("data-uid").toString();this.dataType===1?r=new V(this.treeData).executeLocal(new se().where(this.fields.parentID,"equal",a,!0)):r=this.getChildNodes(this.treeData,a);var l=0;if(r){for(var h=0;h<r.length;h++){var u=r[h][this.fields.id].toString();this.checkedNodes.indexOf(u)!==-1&&l++}if(l===r.length){var p=s.getAttribute("data-uid");this.checkedNodes.indexOf(p)===-1&&this.checkedNodes.push(p),this.changeState(s,"check",null,!0,!0)}else l===0&&this.checkedNodes.length===0&&this.changeState(s,"uncheck",null,!0,!0)}}},t.prototype.checkIndeterminateState=function(e){var r;if(this.dataType===1?r=this.element.querySelector('[data-uid="'+e[this.fields.parentID]+'"]'):r=this.element.querySelector('[data-uid="'+e[this.fields.id]+'"]'),r){var n=r.getAttribute("aria-checked");n!=="true"&&this.changeState(r,"indeterminate",null,!0,!0)}else this.dataType===2&&(this.parentNodeCheck.length,this.parentNodeCheck.indexOf(e[this.fields.id].toString())===-1&&this.parentNodeCheck.push(e[this.fields.id].toString()))},t.prototype.updateChildCheckState=function(e,r){for(var n=0,s=r[this.fields.id]?r[this.fields.id].toString():"",a=0;a<e.length;a++){var l=e[a][this.fields.id]?e[a][this.fields.id].toString():"";e[a][this.fields.isChecked]&&!this.isLoaded&&this.checkedNodes.indexOf(l)===-1&&this.checkedNodes.push(l),this.checkedNodes.indexOf(s)!==-1&&this.checkedNodes.indexOf(l)===-1&&this.autoCheck&&this.checkedNodes.push(l),this.checkedNodes.indexOf(l)!==-1&&this.autoCheck&&n++,this.checkedNodes.indexOf(l)>-1&&this.validNodes.indexOf(l)===-1&&this.validNodes.push(l);var h=N(this.fields.child.toString(),e[a]);h&&h.length&&(this.parentCheckData.indexOf(r)===-1&&this.parentCheckData.push(r),this.updateChildCheckState(h,e[a])),n===e.length&&this.autoCheck&&this.checkedNodes.indexOf(s)===-1&&this.checkedNodes.push(s)}if(n!==0&&this.autoCheck){this.checkIndeterminateState(r);for(var u=0;u<this.parentCheckData.length;u++)r!==this.parentCheckData[u]&&this.parentCheckData[u]&&this.checkIndeterminateState(this.parentCheckData[u])}this.parentCheckData=[]},t.prototype.beforeNodeCreate=function(e){if(this.showCheckBox){var r=ir(this.createElement,!0,{cssClass:this.touchClass}),n=q("div."+je,e.item),s=e.item.getAttribute("data-uid");e.item.childNodes[0].insertBefore(r,e.item.childNodes[0].childNodes[c(n)?0:1]);var a=N(e.fields.isChecked,e.curData);this.checkedNodes.indexOf(s)>-1?(q("."+ci,r).classList.add(pt),e.item.setAttribute("aria-checked","true"),this.addCheck(e.item)):!c(a)&&a.toString()==="true"?(q("."+ci,r).classList.add(pt),e.item.setAttribute("aria-checked","true"),this.addCheck(e.item)):e.item.setAttribute("aria-checked","false");var l=q("."+ci,r);b.add(l,"mousedown",this.frameMouseHandler,this),b.add(l,"mouseup",this.frameMouseHandler,this)}this.fullRowSelect&&this.createFullRow(e.item),this.allowMultiSelection&&!e.item.classList.contains(Ki)&&e.item.setAttribute("aria-selected","false");var h=e.fields;if(this.addActionClass(e,h.selected,Ki),this.addActionClass(e,h.expanded,Qr),e.item.setAttribute("tabindex","-1"),b.add(e.item,"focus",this.focusIn,this),!c(this.nodeTemplateFn)){var u=e.item.querySelector("."+Oi),p=e.item.getAttribute("data-uid");u.innerHTML="",this.renderNodeTemplate(e.curData,u,p)}var d={node:e.item,nodeData:e.curData,text:e.text};this.isRefreshed||(this.trigger("drawNode",d),e.curData[this.fields.selectable]===!1&&!this.showCheckBox&&(e.item.classList.add(Qi),e.item.firstElementChild.setAttribute("style","cursor: not-allowed")))},t.prototype.frameMouseHandler=function(e){var r=q("."+qc,e.target.parentElement);Nh(e,r)},t.prototype.addActionClass=function(e,r,n){var s=e.curData,a=N(r,s);!c(a)&&a.toString()!=="false"&&e.item.classList.add(n)},t.prototype.getDataType=function(e,r){if(this.fields.dataSource instanceof V){for(var n=0;n<e.length;n++)if(this.isOffline){if(typeof r.child=="string"&&c(N(r.child,e[n]))&&!c(N(r.parentID,e[n])))return 1}else if(typeof r.child=="string"&&c(N(r.child,e[n])))return 1;return 2}for(var n=0,s=e.length;n<s;n++){if(typeof r.child=="string"&&!c(N(r.child,e[n]))||this.isChildObject())return 2;if(!c(N(r.parentID,e[n]))||!c(N(r.hasChildren,e[n])))return 1}return 1},t.prototype.getGroupedData=function(e,r){for(var n=new se().group(r),s=He.getDataSource(e,n),a=[],l=0;l<s.length;l++){var h=s[l].items;a.push(h)}return a},t.prototype.getSortedData=function(e){return e&&this.sortOrder!=="None"&&(e=He.getDataSource(e,He.addSorting(this.sortOrder,this.fields.text))),e},t.prototype.finalizeNode=function(e){for(var r=this,n=Ee("."+Ca,e),s=0;s<n.length;s++)n[s].setAttribute("alt",Ca);if(this.isLoaded){for(var a=Ee("."+Ki,e),l=0;l<a.length;l++){this.selectNode(a[l],null);break}F(a,Ki)}for(var h=Ee("."+ue+":not(."+Qr+")",e),u=0;u<h.length;u++){var p=q("div."+je,h[u]);p&&p.classList.contains(Fe)&&this.disableExpandAttr(h[u])}var d=Ee("."+Qr,e);if(!this.loadOnDemand&&this.fields.dataSource instanceof V&&(this.isInitalExpand=this.treeData.filter(function(f){return f[r.fields.expanded]==!0}).length>0?!0:this.isInitalExpand),!this.isInitalExpand)for(var l=0;l<d.length;l++)this.renderChildNodes(d[l]);F(d,Qr),this.updateList(),this.isLoaded&&this.updateCheckedProp()},t.prototype.updateCheckedProp=function(){if(this.showCheckBox){var e=[].concat([],this.checkedNodes);this.setProperties({checkedNodes:e},!0)}},t.prototype.ensureIndeterminate=function(){if(this.autoCheck)for(var e=Ee("li",this.element),r=void 0,n=0;n<e.length;n++)e[n].classList.contains(ue)&&(r=q("."+Ae,e[n]),r?this.ensureParentCheckState(e[n]):this.ensureChildCheckState(e[n]));else for(var s=Ee("."+Nt,this.element),n=0;n<s.length;n++)s[n].classList.remove(Nt)},t.prototype.ensureParentCheckState=function(e){if(!c(e)){if(e.classList.contains(Ot))return;var r=e;e.classList.contains(ue)&&(r=q("."+Ae,e));var n=Ee("."+pt,r),s=Ee("."+Nt,r),a=Ee("."+ue,r),l=e.getElementsByClassName(Pt)[0];a.length===n.length?this.changeState(l,"check",null,!0,!0):n.length>0||s.length>0?this.changeState(l,"indeterminate",null,!0,!0):n.length===0&&this.changeState(l,"uncheck",null,!0,!0);var h=D(e,"."+Ae);if(!c(h)){var u=D(h,"."+ue);this.ensureParentCheckState(u)}}},t.prototype.ensureChildCheckState=function(e,r){if(!c(e)){var n=q("."+Ae,e),s=void 0;if(!c(n)){s=Ee("."+Pt,n);var a=e.getElementsByClassName(ci)[0].classList.contains(pt),l=e.getElementsByClassName(ci)[0].classList.contains(Nt),h=n.querySelectorAll("li");n.parentElement.getAttribute("aria-expanded");for(var u=void 0,p=0;p<s.length;p++){var d=h[p].getAttribute("data-uid");if(!c(this.currentLoadData)&&!c(N(this.fields.isChecked,this.currentLoadData[p])))u=N(this.fields.isChecked,this.currentLoadData[p])?"check":"uncheck",this.ele!==-1&&(u=a?"check":"uncheck"),u==="uncheck"&&!yt(this.parentNodeCheck)&&this.autoCheck&&this.parentNodeCheck.indexOf(d)!==-1&&(this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(d),1),u="indeterminate");else{var f=s[p].getElementsByClassName(ci)[0].classList.contains(pt);a||f&&!this.isLoaded||this.checkedNodes.indexOf(d)!==-1&&this.isLoaded&&(l||a)?u="check":h[p].classList.contains(Uc)&&!yt(this.parentNodeCheck)&&this.autoCheck&&(a||l)&&this.parentNodeCheck.indexOf(d)!==-1?(u="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(d),1)):this.dataType===1&&!yt(this.parentNodeCheck)&&this.autoCheck&&(a||l)&&this.parentNodeCheck.indexOf(d)!==-1?(u="indeterminate",this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(d),1)):u="uncheck"}this.changeState(s[p],u,r,!0,!0)}}this.autoCheck&&this.isLoaded&&this.updateParentCheckState()}},t.prototype.doCheckBoxAction=function(e,r){if(Ee("."+ue,this.element),c(e)){var f=Ee("."+Pt,this.element);if(this.loadOnDemand)for(var g=0;g<f.length;g++)this.updateFieldChecked(f[g],r),this.changeState(f[g],r?"check":"uncheck",null,null,null,r);else for(var g=0;g<f.length;g++)this.updateFieldChecked(f[g],r),this.changeState(f[g],r?"check":"uncheck")}else for(var n=e.length-1;n>=0;n--){var s=this.getElement(e[n]);if(c(s)){var a=void 0;if(a=e[n-(e.length-1)]?e[n-(e.length-1)].toString():e[n]?e[n].toString():null,a!==""&&r&&a)this.setValidCheckedNode(a),this.dynamicCheckState(a,r);else if(this.checkedNodes.indexOf(a)!==-1&&a!==""&&!r){this.checkedNodes.splice(this.checkedNodes.indexOf(a),1);var l=this.getChildNodes(this.treeData,a);if(l){for(var h=0;h<l.length;h++){var u=l[h][this.fields.id]?l[h][this.fields.id].toString():null;if(this.checkedNodes.indexOf(u)!==-1){this.checkedNodes.splice(this.checkedNodes.indexOf(u),1);var p=this.element.querySelector('[data-uid="'+u+'"]');p&&this.changeState(p,"uncheck",null)}}this.parentNodeCheck.indexOf(a)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1)}a&&this.dynamicCheckState(a,r),this.updateField(this.treeData,this.fields,a,"isChecked",null)}continue}var d=q("."+Ae+" ."+Pt,s);this.validateCheckNode(d,!r,s,null)}if(e)for(var v=0;v<e.length-1;v++){var a=e[v]?e[v].toString():"";r||this.updateField(this.treeData,this.fields,a,"isChecked",null)}this.autoCheck&&this.updateParentCheckState()},t.prototype.updateFieldChecked=function(e,r){var n=D(e,"."+ue),s=n.getAttribute("data-uid"),a=this.getNodeData(n);a.isChecked==="true"&&!r&&this.updateField(this.treeData,this.fields,s,"isChecked",null)},t.prototype.dynamicCheckState=function(e,r){if(this.dataType===1){var n=0,s=new V(this.treeData).executeLocal(new se().where(this.fields.id,"equal",e,!0));if(s[0]){var a=s[0][this.fields.id]?s[0][this.fields.id].toString():null,l=s[0][this.fields.parentID]?s[0][this.fields.parentID].toString():null,h=this.element.querySelector('[data-uid="'+l+'"]');h&&q("."+Nt,h);var u=h?q("."+pt,h):null,p=this.element.querySelector('[data-uid="'+a+'"]'),d=this.getChildNodes(this.treeData,l);if(d)for(var f=0;f<d.length;f++){var g=d[f][this.fields.id]?d[f][this.fields.id].toString():null;this.checkedNodes.indexOf(g)!==-1&&n++}this.checkedNodes.indexOf(e)!==-1&&h&&a===e&&this.autoCheck?this.changeState(h,"indeterminate",null):this.checkedNodes.indexOf(e)===-1&&p&&a===e&&!r?this.changeState(p,"uncheck",null):this.checkedNodes.indexOf(e)!==-1&&p&&a===e&&r?this.changeState(p,"check",null):this.checkedNodes.indexOf(e)===-1&&!p&&h&&a===e&&this.autoCheck&&n!==0?this.changeState(h,"indeterminate",null):this.checkedNodes.indexOf(e)===-1&&!p&&h&&a===e&&this.autoCheck&&n===0?this.changeState(h,"uncheck",null):!p&&!h&&a===e&&this.autoCheck&&this.updateIndeterminate(e,r)}}else if(this.dataType===2||this.fields.dataSource instanceof V&&this.isOffline)for(var a=void 0,h=void 0,u=void 0,f=0;f<this.treeData.length;f++){a=this.treeData[f][this.fields.id]?this.treeData[f][this.fields.id].toString():"",h=this.element.querySelector('[data-uid="'+a+'"]'),u=h?q("."+pt,h):null,this.checkedNodes.indexOf(a)===-1&&h&&u&&!r&&this.changeState(h,"uncheck",null);var v=N(this.fields.child.toString(),this.treeData[f]);v&&this.updateChildIndeterminate(v,a,e,r,a)}},t.prototype.updateIndeterminate=function(e,r){var n=this.getTreeData(e),s=0,a;this.dataType===1&&(a=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null);var l=this.getChildNodes(this.treeData,a);if(l)for(var h=0;h<l.length;h++){var u=l[h][this.fields.id]?l[h][this.fields.id].toString():null;this.checkedNodes.indexOf(u)!==-1&&s++}var p=this.element.querySelector('[data-uid="'+a+'"]');p&&r?this.changeState(p,"indeterminate",null):!r&&p&&this.parentNodeCheck.indexOf(a)===-1&&s!==0?this.changeState(p,"indeterminate",null):!r&&p&&this.parentNodeCheck.indexOf(a)===-1&&s===0?this.changeState(p,"uncheck",null):p||(!r&&this.checkedNodes.indexOf(a)===-1&&this.parentNodeCheck.indexOf(a)!==-1?this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(a),1):r&&this.checkedNodes.indexOf(a)===-1&&this.parentNodeCheck.indexOf(a)===-1?this.parentNodeCheck.push(a):!r&&this.checkedNodes.indexOf(a)!==-1&&this.parentNodeCheck.indexOf(a)===-1&&s!==0&&this.parentNodeCheck.push(a),this.updateIndeterminate(a,r),this.checkedNodes.indexOf(a)!==-1&&!r&&this.checkedNodes.splice(this.checkedNodes.indexOf(a),1))},t.prototype.updateChildIndeterminate=function(e,r,n,s,a){for(var l=0,h=0;h<e.length;h++){var u=e[h][this.fields.id]?e[h][this.fields.id].toString():"";this.checkedNodes.indexOf(u)!==-1&&l++;var p=this.element.querySelector('[data-uid="'+r+'"]'),d=p?q("."+Nt,p):null,f=p?q("."+pt,p):null,g=this.element.querySelector('[data-uid="'+u+'"]'),v=g?q("."+pt,g):null;if(this.checkedNodes.indexOf(n)!==-1&&p&&u===n&&this.autoCheck)this.changeState(p,"indeterminate",null);else if(this.checkedNodes.indexOf(n)===-1&&p&&!g&&u===n&&!s)this.autoCheck?this.changeState(p,"uncheck",null):l!==0?this.changeState(p,"indeterminate",null):this.changeState(p,"uncheck",null);else if(this.checkedNodes.indexOf(n)===-1&&g&&u===n&&!s)this.changeState(g,"uncheck",null);else if(this.checkedNodes.indexOf(n)===-1&&d&&u===n&&this.autoCheck&&l===0&&!s)d.classList.remove(Nt);else if(this.checkedNodes.indexOf(n)===-1&&!g&&f&&u===n&&l===0)this.changeState(p,"uncheck",null);else if(this.checkedNodes.indexOf(u)===-1&&g&&v&&l===0)this.changeState(g,"uncheck",null);else if(!g&&!p&&u===n||this.parentNodeCheck.indexOf(r)!==-1&&this.autoCheck){var m=this.element.querySelector('[data-uid="'+a+'"]');s&&l!==0?this.changeState(m,"indeterminate",null):s&&l===e.length&&this.checkedNodes.indexOf(r)===-1?this.checkedNodes.push(r):!s&&l===0&&this.parentNodeCheck.indexOf(r)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(r)),this.parentNodeCheck.indexOf(r)===-1&&this.parentNodeCheck.push(r)}var y=N(this.fields.child.toString(),e[h]);y&&this.updateChildIndeterminate(y,u,n,s,a)}},t.prototype.changeState=function(e,r,n,s,a,l){var h=this,u,p=D(e,"."+ue);e===p&&(e=q("."+Pt,p)),s?this.nodeCheckAction(e,r,p,u,n,s,a,l):(this.checkActionNodes=[],u=this.getCheckEvent(p,r,n),this.trigger("nodeChecking",u,function(d){d.cancel||h.nodeCheckAction(e,r,p,d,n,s,a,l)}))},t.prototype.nodeCheckAction=function(e,r,n,s,a,l,h,u){var p,d=e.getElementsByClassName(ci)[0];if(r==="check"&&!d.classList.contains(pt)?(d.classList.remove(Nt),d.classList.add(pt),this.addCheck(n),p="true"):r==="uncheck"&&(d.classList.contains(pt)||d.classList.contains(Nt))?(F([d],[pt,Nt]),this.removeCheck(n),p="false"):r==="indeterminate"&&this.autoCheck&&(d.classList.remove(pt),d.classList.add(Nt),this.removeCheck(n),p="mixed"),p=r==="check"?"true":r==="uncheck"?"false":p,c(p)||n.setAttribute("aria-checked",p),h){var f=[].concat([],this.checkActionNodes);s=this.getCheckEvent(n,r,a),yt(l)&&(s.data=f)}u!==void 0&&this.ensureStateChange(n,u),l||c(p)||(n.setAttribute("aria-checked",p),s.data[0].checked=p,this.trigger("nodeChecked",s),this.checkActionNodes=[])},t.prototype.addCheck=function(e){var r=e.getAttribute("data-uid");!c(r)&&this.checkedNodes.indexOf(r)===-1&&this.checkedNodes.push(r)},t.prototype.removeCheck=function(e){var r=this.checkedNodes.indexOf(e.getAttribute("data-uid"));r>-1&&this.checkedNodes.splice(r,1)},t.prototype.getCheckEvent=function(e,r,n){this.checkActionNodes.push(this.getNodeData(e));var s=this.checkActionNodes;return{action:r,cancel:!1,isInteracted:!c(n),node:e,data:s}},t.prototype.finalize=function(){var e=q("."+Ae,this.element);if(!c(e)){e.setAttribute("role",ba.treeRole),this.setMultiSelect(this.allowMultiSelection);var r=q("."+ue,this.element);r&&(r.setAttribute("tabindex","0"),this.updateIdAttr(null,r)),this.allowTextWrap&&this.updateWrap(),this.renderReactTemplates(),this.hasPid=this.rootData[0]?this.rootData[0].hasOwnProperty(this.fields.parentID):!1,this.doExpandAction()}},t.prototype.setTextWrap=function(){(this.allowTextWrap?T:F)([this.element],Nc),Q.isIE&&(this.allowTextWrap?T:F)([this.element],Pc)},t.prototype.updateWrap=function(e){if(this.fullRowSelect)for(var r=e?Ee("."+ue,e):this.liList,n=r.length,s=0;s<n;s++)this.calculateWrap(r[s])},t.prototype.calculateWrap=function(e){var r=q("."+ui,e);r&&r.nextElementSibling&&(r.style.height=this.allowTextWrap?r.nextElementSibling.offsetHeight+"px":"")},t.prototype.doExpandAction=function(){var e=this,r=this.expandedNodes;if(!this.loadOnDemand&&this.fields.dataSource instanceof V&&(this.isInitalExpand=this.treeData.filter(function(l){return l[e.fields.expanded]==!0}).length>0?!0:this.isInitalExpand),this.isInitalExpand&&r.length>0)if(this.setProperties({expandedNodes:[]},!0),this.fields.dataSource instanceof V)this.expandGivenNodes(r);else{for(var n=0;n<r.length;n++){var s=q('[data-uid="'+r[n]+'"]',this.element);if(c(s)){r[n]&&this.expandChildren.indexOf(r[n])===-1&&this.expandChildren.push(r[n].toString());continue}else{var a=q("."+Fe,q("."+tt,s));c(a)||this.expandAction(s,a,null)}}this.afterFinalized()}else this.afterFinalized()},t.prototype.expandGivenNodes=function(e){var r=this;this.expandCallback(e[this.index],function(){r.index++,r.index<e.length?r.expandGivenNodes(e):r.afterFinalized()})},t.prototype.expandCallback=function(e,r){var n=q('[data-uid="'+e+'"]',this.element);if(c(n))r();else{var s=q("."+Fe,q("."+tt,n));c(s)?r():this.expandAction(n,s,null,!1,r)}},t.prototype.afterFinalized=function(){if(this.doSelectionAction(),this.updateCheckedProp(),this.isAnimate=!0,this.isInitalExpand=!1,(!this.isLoaded||this.isFieldChange)&&!this.isNodeDropped){var e={data:this.treeData};this.trigger("dataBound",e)}this.isLoaded=!0,this.isNodeDropped=!1},t.prototype.doSelectionAction=function(){var e=Ee("."+Ki,this.element),r=this.selectedNodes;if(r.length>0){this.setProperties({selectedNodes:[]},!0);for(var n=0;n<r.length;n++){var s=q('[data-uid="'+r[n]+'"]',this.element);if(s&&!s.classList.contains("e-active")?this.selectNode(s,null,!0):this.selectedNodes.push(r[n]),!this.allowMultiSelection)break}}else this.selectGivenNodes(e);F(e,Ki)},t.prototype.selectGivenNodes=function(e){for(var r=0;r<e.length&&(e[r].classList.contains("e-disable")||this.selectNode(e[r],null,!0),!!this.allowMultiSelection);r++);},t.prototype.clickHandler=function(e){var r=Q.isDevice&&!Q.isIos?document.elementFromPoint(e.originalEvent.changedTouches[0].clientX,e.originalEvent.changedTouches[0].clientY):e.originalEvent.target;if(b.remove(this.element,"contextmenu",this.preventContextMenu),!(!r||this.dragStartAction)){var n=r.classList,s=D(r,"."+ue);if(!s||s.classList.contains(Qi)&&!(n.contains(Fe)||n.contains(et)))return;if(e.originalEvent.which!==3){var a=q("."+Vc,s),l=q("."+je,s);if(this.removeHover(),this.setFocusElement(s),this.showCheckBox&&!s.classList.contains("e-disable")){var h=D(r,"."+Pt);if(!c(h)){var u=q("."+ci,h);this.validateCheckNode(h,u.classList.contains(pt),s,e.originalEvent),this.triggerClickEvent(e.originalEvent,s);return}}n.contains(Fe)?this.expandAction(s,r,e):n.contains(et)?this.collapseNode(s,r,e):a&&l?l.classList.contains(ya)&&l.classList.contains(Fe)?this.expandAction(s,l,e):l.classList.contains(ya)&&l.classList.contains(et)?this.collapseNode(s,l,e):!n.contains(Ae)&&!n.contains(ue)&&this.toggleSelect(s,e.originalEvent,!1):!n.contains(Ae)&&!n.contains(ue)&&this.toggleSelect(s,e.originalEvent,!1)}e.originalEvent.which===3&&(this.isRightClick=!0),this.triggerClickEvent(e.originalEvent,s)}},t.prototype.nodeCheckedEvent=function(e,r,n){D(e,"."+ue);var s=this.getCheckEvent(e,r?"uncheck":"check",n);s.data=s.data.splice(0,s.data.length-1),this.trigger("nodeChecked",s)},t.prototype.triggerClickEvent=function(e,r){var n={event:e,node:r};this.trigger("nodeClicked",n)},t.prototype.expandNode=function(e,r,n){var s=this;if(this.renderReactTemplates(),r.classList.contains(ls)&&this.hideSpinner(r),this.initialRender||r.classList.add("interaction"),n!==!0||n===!0&&e.classList.contains("e-expanded")){if(this.preventExpand!==!0){F([r],Fe),T([r],et);var a=0,l=0,h=this,u=q("."+Ae,e),p=e;this.setHeight(p,u);var d=q("."+ue+"."+Ct,e);this.isAnimate&&!this.isRefreshed?this.aniObj.animate(u,{name:this.animation.expand.effect,duration:this.animation.expand.duration===0&&wi==="Enable"?400:this.animation.expand.duration,timingFunction:this.animation.expand.easing,begin:function(g){p.style.overflow="hidden",!c(d)&&d instanceof HTMLElement&&d.classList.add(Yr),a=p.offsetHeight,l=q("."+tt,e).offsetHeight},progress:function(g){g.element.style.display="block",h.animateHeight(g,a,l)},end:function(g){g.element.style.display="block",!c(d)&&d instanceof HTMLElement&&d.classList.remove(Yr),s.expandedNode(p,u,r)}}):this.expandedNode(p,u,r)}}else{var f=q("."+Ae,e);f.style.display="none",this.fields.dataSource instanceof V&&(this.preventExpand=!1)}this.initialRender&&r.classList.add("interaction")},t.prototype.expandedNode=function(e,r,n){r.style.display="block",e.style.display="block",e.style.overflow="",e.style.height="",F([n],hi),this.addExpand(e),this.allowTextWrap&&this.isLoaded&&this.isFirstRender&&(this.updateWrap(e),this.isFirstRender=!1),this.isLoaded&&this.expandArgs&&!this.isRefreshed&&(this.expandArgs=this.getExpandEvent(e,null),this.expandArgs.isInteracted=this.isInteracted,this.trigger("nodeExpanded",this.expandArgs))},t.prototype.addExpand=function(e){e.setAttribute("aria-expanded","true"),F([e],va);var r=e.getAttribute("data-uid");!c(r)&&this.expandedNodes.indexOf(r)===-1&&this.expandedNodes.push(r)},t.prototype.collapseNode=function(e,r,n){var s=this;if(!r.classList.contains(hi)){T([r],hi);var a;this.isLoaded?(a=this.getExpandEvent(e,n),this.isInteracted=a.isInteracted,this.trigger("nodeCollapsing",a,function(l){l.cancel?F([r],hi):s.nodeCollapseAction(e,r,l)})):this.nodeCollapseAction(e,r,a)}},t.prototype.nodeCollapseAction=function(e,r,n){var s=this;F([r],et),T([r],Fe);var a=0,l=0,h=this,u=q("."+Ae,e),p=e,d=q("."+ue+"."+Ct,e);this.isAnimate?this.aniObj.animate(u,{name:this.animation.collapse.effect,duration:this.animation.collapse.duration===0&&wi==="Enable"?400:this.animation.collapse.duration,timingFunction:this.animation.collapse.easing,begin:function(f){p.style.overflow="hidden",!c(d)&&d instanceof HTMLElement&&d.classList.add(Yr),a=q("."+tt,e).offsetHeight,l=p.offsetHeight},progress:function(f){h.animateHeight(f,a,l)},end:function(f){f.element.style.display="none",!c(d)&&d instanceof HTMLElement&&d.classList.remove(Yr),s.collapsedNode(p,u,r,n)}}):this.collapsedNode(p,u,r,n)},t.prototype.collapsedNode=function(e,r,n,s){r.style.display="none",e.style.overflow="",e.style.height="",F([n],hi),this.removeExpand(e),this.isLoaded&&(s=this.getExpandEvent(e,null),s.isInteracted=this.isInteracted,this.trigger("nodeCollapsed",s))},t.prototype.removeExpand=function(e,r){r?e.removeAttribute("aria-expanded"):this.disableExpandAttr(e);var n=this.expandedNodes.indexOf(e.getAttribute("data-uid"));n>-1&&this.expandedNodes.splice(n,1)},t.prototype.disableExpandAttr=function(e){e.setAttribute("aria-expanded","false"),T([e],va)},t.prototype.setHeight=function(e,r){r.style.display="block",r.style.visibility="hidden",e.style.height=e.offsetHeight+"px",r.style.display="none",r.style.visibility=""},t.prototype.animateHeight=function(e,r,n){var s=(e.duration-e.timeStamp)/e.duration,a=(n-r)*s+r;e.element.parentElement.style.height=a+"px"},t.prototype.renderChildNodes=function(e,r,n,s){var a=this,l=q("div."+je,e);if(!c(l)){this.showSpinner(l);var h;if(this.fields.dataSource instanceof V){var u=this.parents(e,"."+Ae).length,p=this.getChildFields(this.fields,u,1);if(c(p)||c(p.dataSource)){Ce(l),this.removeExpand(e,!0);return}this.treeList.push("false"),this.fields.dataSource instanceof V&&this.isOffline?(this.treeList.pop(),h=this.getChildNodes(this.treeData,e.getAttribute("data-uid")),this.loadChild(h,p,l,e,r,n,s)):p.dataSource.executeQuery(this.getQuery(p,e.getAttribute("data-uid"))).then(function(d){a.treeList.pop(),h=d.result,a.dataType===1&&(a.dataType=2),a.loadChild(h,p,l,e,r,n,s)}).catch(function(d){a.trigger("actionFailure",{error:d})})}else if(h=this.getChildNodes(this.treeData,e.getAttribute("data-uid"),!1,parseFloat(e.getAttribute("aria-level"))+1),this.currentLoadData=this.getSortedData(h),c(h)||h.length===0){Ce(l),this.removeExpand(e,!0);return}else this.listBaseOption.ariaAttributes.level=parseFloat(e.getAttribute("aria-level"))+1,e.appendChild(He.createList(this.createElement,this.currentLoadData,this.listBaseOption)),this.expandNode(e,l,s),this.setSelectionForChildNodes(h),this.ensureCheckNode(e),this.finalizeNode(e),this.disableTreeNodes(h),this.renderSubChild(e,r,s)}},t.prototype.loadChild=function(e,r,n,s,a,l,h){if(this.currentLoadData=e,c(e)||e.length===0)Ce(n),this.removeExpand(s,!0);else{if(this.updateListProp(r),this.fields.dataSource instanceof V&&!this.isOffline){var u=s.getAttribute("data-uid"),p=this.getNodeObject(u);ht("child",e,p)}this.listBaseOption.ariaAttributes.level=parseFloat(s.getAttribute("aria-level"))+1,s.appendChild(He.createList(this.createElement,e,this.listBaseOption)),this.expandNode(s,n,h),this.setSelectionForChildNodes(e),this.ensureCheckNode(s),this.finalizeNode(s),this.disableTreeNodes(e),this.renderSubChild(s,a,h)}l&&l(),a&&this.expandedNodes.push(s.getAttribute("data-uid")),this.treeList.length===0&&!this.isLoaded&&this.finalize()},t.prototype.disableTreeNodes=function(e){for(var r=0;r<e.length;){var n=e[r][this.fields.id]?e[r][this.fields.id].toString():null;this.disableNode!==void 0&&this.disableNode.indexOf(n)!==-1&&this.doDisableAction([n]),r++}},t.prototype.setSelectionForChildNodes=function(e){var r;for(r=0;r<e.length;r++){var n=e[r][this.fields.id]?e[r][this.fields.id].toString():null;this.selectedNodes!==void 0&&this.selectedNodes.indexOf(n)!==-1&&this.doSelectionAction()}},t.prototype.ensureCheckNode=function(e){this.showCheckBox&&(this.ele=this.checkedElement?this.checkedElement.indexOf(e.getAttribute("data-uid")):null,this.autoCheck&&(this.ensureChildCheckState(e),this.ensureParentCheckState(e))),this.currentLoadData=null},t.prototype.getFields=function(e,r,n){return r===n?e:this.getFields(this.getChildMapper(e),r,n+1)},t.prototype.getChildFields=function(e,r,n){return r===n?this.getChildMapper(e):this.getChildFields(this.getChildMapper(e),r,n+1)},t.prototype.getChildMapper=function(e){return typeof e.child=="string"||c(e.child)?e:e.child},t.prototype.getChildNodes=function(e,r,n,s){var a=this;n===void 0&&(n=!1);var l;if(c(e))return l;if(this.dataType===1)return this.getChildGroup(this.groupedData,r,n);if(typeof this.fields.child=="string"){var h=e.findIndex(function(m){return N(a.fields.id,m)&&N(a.fields.id,m).toString()===r});if(h!==-1)return N(this.fields.child,e[h]);if(h===-1)for(var u=0,p=e.length;u<p;u++){var d=N(this.fields.child,e[u]),f=c(d)?-1:d.findIndex(function(m){return N(a.fields.id,m)&&N(a.fields.id,m).toString()===r});if(f!==-1)return N(this.fields.child,d[f]);if(!c(d)&&(l=this.getChildNodes(d,r),l!==void 0))break}}else if(this.isChildObject()){for(var g=c(s)?this.fields.child:this.fields,u=1;u<s&&!c(g.child);){g=g.child;u++}this.updateListProp(g);var h=e.findIndex(function(I){return N(a.fields.id,I)&&N(a.fields.id,I).toString()===r});if(h!==-1)return N("child",e[h]);if(h===-1)for(var v=0,p=e.length;v<p;v++){var d=N("child",e[v]),f=c(d)?-1:d.findIndex(function(L){return N(a.fields.child.id,L)&&N(a.fields.child.id,L).toString()===r});if(f!==-1)return N("child",d[f]);if(!c(d)&&(l=this.getChildNodes(d,r,!1,s),l!==void 0))break}}return l},t.prototype.getChildGroup=function(e,r,n){var s;if(c(e))return s;for(var a=0,l=e.length;a<l;a++)if(!c(e[a][0])&&!c(N(this.fields.parentID,e[a][0]))){if(N(this.fields.parentID,e[a][0]).toString()===r)return e[a]}else return n?e[a]:[];return s},t.prototype.renderSubChild=function(e,r,n){if(r)for(var s=Ee("."+Fe,e),a=0,l=s.length;a<l;a++){var h=s[a];if(e.querySelector(".e-icons")!==s[a]){var u=D(h,"."+ue);this.expandArgs=this.getExpandEvent(u,null),n!==!0&&this.trigger("nodeExpanding",this.expandArgs),this.renderChildNodes(u,r,null,n)}}},t.prototype.toggleSelect=function(e,r,n){e.classList.contains("e-disable")||(this.allowMultiSelection&&(r&&r.ctrlKey||n)&&this.isActive(e)?this.unselectNode(e,r):this.selectNode(e,r,n))},t.prototype.isActive=function(e){return!!e.classList.contains(Ct)},t.prototype.selectNode=function(e,r,n){var s=this;if(c(e)||!this.allowMultiSelection&&this.isActive(e)&&!c(r)){this.setFocusElement(e);return}var a;this.isLoaded?(a=this.getSelectEvent(e,"select",r),this.trigger("nodeSelecting",a,function(l){!l.cancel&&!l.node.classList.contains(Qi)&&s.nodeSelectAction(e,r,l,n)})):this.nodeSelectAction(e,r,a,n)},t.prototype.nodeSelectAction=function(e,r,n,s){if((!this.allowMultiSelection||!s&&(!r||r&&!(r.ctrlKey||r.metaKey)))&&this.removeSelectAll(),this.allowMultiSelection&&r&&r.shiftKey){this.startNode||(this.startNode=e);var a=this.liList.indexOf(this.startNode),l=this.liList.indexOf(e);if(a>l){var h=a;a=l,l=h}for(var u=a;u<=l;u++){var p=this.liList[u];Hi(p)&&!p.classList.contains("e-disable")&&this.addSelect(p)}}else this.startNode=e,this.addSelect(e);this.isLoaded&&(n.nodeData=this.getNodeData(e),this.trigger("nodeSelected",n),this.isRightClick=!1),this.isRightClick=!1},t.prototype.unselectNode=function(e,r){var n=this,s;this.isLoaded?(s=this.getSelectEvent(e,"un-select",r),this.trigger("nodeSelecting",s,function(a){a.cancel||n.nodeUnselectAction(e,a)})):this.nodeUnselectAction(e,s)},t.prototype.nodeUnselectAction=function(e,r){this.removeSelect(e),this.setFocusElement(e),this.isLoaded&&(r.nodeData=this.getNodeData(e),this.trigger("nodeSelected",r))},t.prototype.setFocusElement=function(e){if(!c(e)){var r=this.getFocusedNode();r&&(F([r],Ni),r.setAttribute("tabindex","-1")),T([e],Ni),e.setAttribute("tabindex","0"),b.add(e,"blur",this.focusOut,this),this.updateIdAttr(r,e)}},t.prototype.addSelect=function(e){e.setAttribute("aria-selected","true"),T([e],Ct);var r=e.getAttribute("data-uid");!c(r)&&this.selectedNodes.indexOf(r)===-1&&this.selectedNodes.push(r)},t.prototype.removeSelect=function(e){this.allowMultiSelection?e.setAttribute("aria-selected","false"):e.removeAttribute("aria-selected"),F([e],Ct);var r=this.selectedNodes.indexOf(e.getAttribute("data-uid"));r>-1&&this.selectedNodes.splice(r,1)},t.prototype.removeSelectAll=function(){for(var e=this.element.querySelectorAll("."+Ct),r=0,n=e;r<n.length;r++){var s=n[r];this.allowMultiSelection?s.setAttribute("aria-selected","false"):s.removeAttribute("aria-selected")}F(e,Ct),this.setProperties({selectedNodes:[]},!0)},t.prototype.getSelectEvent=function(e,r,n){var s=this.getNodeData(e);return{action:r,cancel:!1,isInteracted:!c(n),node:e,nodeData:s}},t.prototype.setExpandOnType=function(){this.expandOnType=this.expandOn==="Auto"?Q.isDevice?"Click":"DblClick":this.expandOn},t.prototype.expandHandler=function(e){var r=e.originalEvent.target;!r||r.classList.contains(_r)||r.classList.contains(Ot)||r.classList.contains(Ae)||r.classList.contains(ue)||r.classList.contains(je)||this.showCheckBox&&D(r,"."+Pt)||this.expandCollapseAction(D(r,"."+ue),e)},t.prototype.expandCollapseAction=function(e,r){var n=q("div."+je,e);if(!(!n||n.classList.contains(hi))){var s=n.classList;s.contains(Fe)?this.expandAction(e,n,r):s.contains(et)&&this.collapseNode(e,n,r)}},t.prototype.expandAction=function(e,r,n,s,a){var l=this;r.classList.contains(hi)||(T([r],hi),this.isLoaded&&!this.isRefreshed?(this.expandArgs=this.getExpandEvent(e,n),this.isInteracted=this.expandArgs.isInteracted,this.trigger("nodeExpanding",this.expandArgs,function(h){h.cancel?F([r],hi):l.nodeExpandAction(e,r,s,a)})):this.nodeExpandAction(e,r,s,a))},t.prototype.nodeExpandAction=function(e,r,n,s){var a=q("."+Ae,e);if(a&&a.nodeName==="UL")this.expandNode(e,r);else{this.isFirstRender=!0,this.renderChildNodes(e,n,s);for(var l=Ee("."+ue,e),h=0;h<l.length;h++){var u=this.getId(l[h]);if(this.expandChildren.indexOf(u)!==-1&&this.expandChildren!==void 0){var p=q("."+Fe,q("."+tt,l[h]));c(p)||this.expandAction(l[h],p,null),this.expandChildren.splice(this.expandChildren.indexOf(u),1)}}}},t.prototype.keyActionHandler=function(e){var r=this,n=e.target,s=this.getFocusedNode();if(n&&n.classList.contains(_r)){var a=n;e.action==="enter"?a.blur():e.action==="escape"&&(a.value=this.oldText,a.blur());return}e.preventDefault();var l={cancel:!1,event:e,node:s};this.trigger("keyPress",l,function(h){if(!h.cancel)switch(e.action){case"space":r.showCheckBox?r.checkNode(e):r.toggleSelect(s,e);break;case"moveRight":r.openNode(!r.enableRtl,e);break;case"moveLeft":r.openNode(!!r.enableRtl,e);break;case"shiftDown":r.shiftKeySelect(!0,e);break;case"moveDown":case"ctrlDown":case"csDown":r.navigateNode(!0);break;case"shiftUp":r.shiftKeySelect(!1,e);break;case"moveUp":case"ctrlUp":case"csUp":r.navigateNode(!1);break;case"home":case"shiftHome":case"ctrlHome":case"csHome":r.navigateRootNode(!0);break;case"end":case"shiftEnd":case"ctrlEnd":case"csEnd":r.navigateRootNode(!1);break;case"enter":case"ctrlEnter":case"shiftEnter":case"csEnter":case"shiftSpace":case"ctrlSpace":r.toggleSelect(s,e);break;case"f2":r.allowEditing&&!s.classList.contains("e-disable")&&r.createTextbox(s,e);break;case"ctrlA":if(r.allowMultiSelection){var u=Ee("."+ue+":not(."+Ct+")",r.element);r.selectGivenNodes(u)}break}})},t.prototype.navigateToFocus=function(e){var r=this.getFocusedNode().querySelector("."+tt),n=r.getBoundingClientRect(),s=this.getScrollParent(this.element);if(!c(s)){var a=s.getBoundingClientRect();n.bottom>a.bottom?s.scrollTop+=n.bottom-a.bottom:n.top<a.top&&(s.scrollTop-=a.top-n.top)}var l=this.isVisibleInViewport(r);l||r.scrollIntoView(e)},t.prototype.isVisibleInViewport=function(e){var r=e.getBoundingClientRect();return r.top>=0&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)},t.prototype.getScrollParent=function(e){return c(e)?null:e.scrollHeight>e.clientHeight?e:this.getScrollParent(e.parentElement)},t.prototype.shiftKeySelect=function(e,r){if(this.allowMultiSelection){var n=this.getFocusedNode(),s=e?this.getNextNode(n):this.getPrevNode(n);this.removeHover(),this.setFocusElement(s),this.toggleSelect(s,r,!1),this.navigateToFocus(!e)}else this.navigateNode(e)},t.prototype.checkNode=function(e){var r=this.getFocusedNode(),n=q("."+Pt,r),s=q(" ."+ci,n).classList.contains(pt);r.classList.contains("e-disable")||r.getElementsByClassName("e-checkbox-disabled").length==0&&this.validateCheckNode(n,s,r,e)},t.prototype.validateCheckNode=function(e,r,n,s){var a=this,l=D(e,"."+ue);this.checkActionNodes=[];var h=r?"false":"true";c(h)||l.setAttribute("aria-checked",h);var u=this.getCheckEvent(l,r?"uncheck":"check",s);this.trigger("nodeChecking",u,function(p){p.cancel||a.nodeCheckingAction(e,r,n,p,s)})},t.prototype.nodeCheckingAction=function(e,r,n,s,a){if(this.checkedElement.indexOf(n.getAttribute("data-uid"))===-1&&(this.checkedElement.push(n.getAttribute("data-uid")),this.autoCheck)){var l=this.getChildNodes(this.treeData,n.getAttribute("data-uid"));l!==null?this.allCheckNode(l,this.checkedElement,null,null,!1):l=null}if(this.changeState(e,r?"uncheck":"check",a,!0),this.autoCheck){this.ensureChildCheckState(n),this.ensureParentCheckState(D(D(n,"."+Ae),"."+ue));var h=void 0;s.action==="check"?h=!0:s.action==="uncheck"&&(h=!1),this.ensureStateChange(n,h)}this.nodeCheckedEvent(e,r,a)},t.prototype.ensureStateChange=function(e,r){var n=q("."+Ae,e),s=e.getAttribute("data-uid"),a=this.fields;if(this.dataType===1&&this.autoCheck)for(var l=new V(this.treeData).executeLocal(new se().where(a.parentID,"equal",s,!0)),h=0;h<l.length;h++){var u=l[h][this.fields.id]?l[h][this.fields.id].toString():null,p=l[h][this.fields.isChecked]?l[h][this.fields.isChecked].toString():null;if(this.checkedNodes.indexOf(s)!==-1&&this.checkedNodes.indexOf(u)===-1){this.checkedNodes.push(u);var d=this.getChildNodes(this.treeData,u);this.getChildItems(d,r),this.parentNodeCheck.indexOf(u)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(u),1)}else if(this.checkedNodes.indexOf(s)===-1&&n===null&&this.checkedNodes.indexOf(u)!==-1){if(this.checkedNodes.splice(this.checkedNodes.indexOf(u),1),p==="true"&&this.updateField(this.treeData,this.fields,u,"isChecked",null),this.checkedNodes.indexOf(s)===-1&&n===null||this.parentNodeCheck.indexOf(u)!==-1){var f=this.getChildNodes(this.treeData,u);this.getChildItems(f,r),this.parentNodeCheck.indexOf(u)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(u),1)}}else{var d=this.getChildNodes(this.treeData,u);this.getChildItems(d,r)}}else if(this.dataType===1&&!this.autoCheck)if(r)for(var h=0;h<this.treeData.length;h++){var m=this.treeData[h][this.fields.id]?this.treeData[h][this.fields.id].toString():null;this.checkedNodes.indexOf(m)===-1&&this.checkedNodes.push(m)}else{for(var g=new V(this.treeData).executeLocal(new se().where(a.isChecked,"equal",!0,!1)),h=0;h<g.length;h++){var v=g[h][this.fields.id]?g[h][this.fields.id].toString():null;this.checkedNodes.indexOf(v)!==-1&&this.checkedNodes.splice(this.checkedNodes.indexOf(v),1),this.updateField(this.treeData,this.fields,v,"isChecked",null)}this.checkedNodes=[]}else{var d=this.getChildNodes(this.treeData,s);d&&this.childStateChange(d,s,n,r)}},t.prototype.getChildItems=function(e,r){for(var n=0;n<e.length;n++){var s=e[n][this.fields.id]?e[n][this.fields.id].toString():null,a=e[n][this.fields.isChecked]?e[n][this.fields.isChecked].toString():null;this.checkedNodes.indexOf(s)!==-1&&!r&&this.checkedNodes.splice(this.checkedNodes.indexOf(s),1),this.checkedNodes.indexOf(s)===-1&&r&&this.checkedNodes.push(s),a==="true"&&!r&&this.updateField(this.treeData,this.fields,s,"isChecked",null);var l=this.getChildNodes(this.treeData,s);l.length>0&&this.getChildItems(l,r)}},t.prototype.childStateChange=function(e,r,n,s){for(var a=0;a<e.length;a++){var l=e[a][this.fields.id]?e[a][this.fields.id].toString():"",h=e[a][this.fields.isChecked]?e[a][this.fields.isChecked].toString():null;this.autoCheck?this.checkedNodes.indexOf(r)!==-1&&this.checkedNodes.indexOf(l)===-1?(this.checkedNodes.push(l),this.parentNodeCheck.indexOf(l)!==-1&&this.parentNodeCheck.splice(this.parentNodeCheck.indexOf(l),1)):this.checkedNodes.indexOf(r)===-1&&this.checkedNodes.indexOf(l)!==-1&&!s&&(this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),h==="true"&&this.updateField(this.treeData,this.fields,l,"isChecked",null)):this.autoCheck||(s?this.checkedNodes.indexOf(l)===-1&&this.checkedNodes.push(l):(this.checkedNodes.indexOf(l)!==-1&&this.checkedNodes.splice(this.checkedNodes.indexOf(l),1),this.updateField(this.treeData,this.fields,l,"isChecked",null),this.checkedNodes=[]));var u=this.getChildNodes([e[a]],l);u&&this.childStateChange(u,r,n,s)}},t.prototype.allCheckNode=function(e,r,n,s,a){if(e)for(var l=0;l<e.length;l++){var h=N(this.fields.id,e[l]),u=this.element.querySelector('[data-uid="'+h+'"]');a!==!1&&this.checkedElement.indexOf(h.toString())===-1&&(u===null&&!c(e[l][this.fields.isChecked])&&r.indexOf(h.toString())===-1||s===0||n===2)&&(e[l][this.fields.isChecked]!==!1||n===2?r.push(h.toString()):s=null,s=e[l][this.fields.isChecked]!==!1||n===2?0:null),r.indexOf(h.toString())===-1&&c(n)&&r.push(h.toString());var p=N(this.fields.child.toString(),e[l]);if(N(this.fields.hasChildren,e[l])===!0||p){var d=N(this.fields.id,e[l]),f=void 0;this.dataType===1?f=this.getChildNodes(this.treeData,d.toString()):f=p,f&&(c(a)?this.allCheckNode(f,r,n,s):this.allCheckNode(f,r,n,s,a),s=null)}s=null}},t.prototype.openNode=function(e,r){var n=this.getFocusedNode(),s=q("div."+je,n);if(e)if(s)s.classList.contains(Fe)?this.expandAction(n,s,r):this.focusNextNode(n,!0);else return;else if(s&&s.classList.contains(et))this.collapseNode(n,s,r);else{var a=D(D(n,"."+Ae),"."+ue);if(a)a.classList.contains("e-disable")||(this.setFocus(n,a),this.navigateToFocus(!0));else return}},t.prototype.navigateNode=function(e){var r=this.getFocusedNode();this.focusNextNode(r,e)},t.prototype.navigateRootNode=function(e){var r=this.getFocusedNode(),n=e?this.getRootNode():this.getEndNode();n.classList.contains("e-disable")||(this.setFocus(r,n),this.navigateToFocus(e))},t.prototype.getFocusedNode=function(){var e,r=q("."+ue+'[tabindex="0"]',this.element);return c(r)&&(e=q("."+ue,this.element)),c(r)?c(e)?this.element.firstElementChild:e:r},t.prototype.focusNextNode=function(e,r){var n=r?this.getNextNode(e):this.getPrevNode(e);if(this.setFocus(e,n),this.navigateToFocus(!r),n.classList.contains("e-disable")){var s=n.lastChild;n.previousSibling==null&&n.classList.contains("e-level-1")?this.focusNextNode(n,!0):n.nextSibling==null&&n.classList.contains("e-node-collapsed")?this.focusNextNode(n,!1):n.nextSibling==null&&s.classList.contains(tt)?this.focusNextNode(n,!1):this.focusNextNode(n,r)}},t.prototype.getNextNode=function(e){var r=this.liList.indexOf(e),n;do if(r++,n=this.liList[r],c(n))return e;while(!Hi(n));return n},t.prototype.getPrevNode=function(e){var r=this.liList.indexOf(e),n;do if(r--,n=this.liList[r],c(n))return e;while(!Hi(n));return n},t.prototype.getRootNode=function(){var e=0,r;do r=this.liList[e],e++;while(!Hi(r));return r},t.prototype.getEndNode=function(){var e=this.liList.length-1,r;do r=this.liList[e],e--;while(!Hi(r));return r},t.prototype.setFocus=function(e,r){F([e],Ni),e.setAttribute("tabindex","-1"),!r.classList.contains("e-disable")&&!r.classList.contains(Qi)&&(T([r],Ni),r.setAttribute("tabindex","0"),r.focus(),b.add(r,"blur",this.focusOut,this),this.updateIdAttr(e,r))},t.prototype.updateIdAttr=function(e,r){this.element.removeAttribute("aria-activedescendant"),e&&e.removeAttribute("id"),r.setAttribute("id",this.element.id+"_active"),this.element.setAttribute("aria-activedescendant",this.element.id+"_active")},t.prototype.focusIn=function(){if(!this.mouseDownStatus){var e=this.getFocusedNode();e.setAttribute("tabindex","0"),T([e],Ni),b.add(e,"blur",this.focusOut,this)}this.mouseDownStatus=!1},t.prototype.focusOut=function(e){var r=this.getFocusedNode();e.target==r&&(F([r],Ni),b.remove(r,"blur",this.focusOut))},t.prototype.onMouseOver=function(e){var r=e.target,n=r.classList,s=D(r,"."+ue);if(!s||n.contains(Ae)||n.contains(ue)){this.removeHover();return}else s&&!s.classList.contains("e-disable")&&this.setHover(s)},t.prototype.setHover=function(e){!e.classList.contains(Ur)&&!e.classList.contains(Qi)&&(this.removeHover(),T([e],Ur))},t.prototype.onMouseLeave=function(e){this.removeHover()},t.prototype.removeHover=function(){var e=Ee("."+Ur,this.element);e&&e.length&&F(e,Ur)},t.prototype.getNodeData=function(e,r){if(!c(e)&&e.classList.contains(ue)&&!c(D(e,"."+ca))&&D(e,"."+ca).classList.contains(Ot)){var n=e.getAttribute("data-uid"),s=this.getText(e,r),a=D(e.parentNode,"."+ue),l=a?a.getAttribute("data-uid"):null,h=e.classList.contains(Ct),u=!e.classList.contains(Qi),p=e.getAttribute("aria-expanded")==="true",d=e.getAttribute("aria-expanded")!==null?!0:(q("."+Fe,e)||q("."+et,e))!=null,f=null,g=q("."+Pt,e);return this.showCheckBox&&g&&(f=e.getAttribute("aria-checked")),{id:n,text:s,parentID:l,selected:h,selectable:u,expanded:p,isChecked:f,hasChildren:d}}return{id:"",text:"",parentID:"",selected:!1,expanded:!1,isChecked:"",hasChildren:!1}},t.prototype.getText=function(e,r){if(r){var n=this.getNodeObject(e.getAttribute("data-uid")),s=parseFloat(e.getAttribute("aria-level")),a=this.getFields(this.fields,s,1);return N(a.text,n)}return q("."+Oi,e).textContent},t.prototype.getExpandEvent=function(e,r){var n=this.getNodeData(e);return{cancel:!1,isInteracted:!c(r),node:e,nodeData:n,event:r}},t.prototype.renderNodeTemplate=function(e,r,n){var s=this.nodeTemplateFn(e,this,"nodeTemplate"+n,this.element.id+"nodeTemplate",this.isStringTemplate,void 0,r,this.root);s&&(s=Array.prototype.slice.call(s),Oe(s,r))},t.prototype.destroyTemplate=function(e){this.clearTemplate(["nodeTemplate"+e.getAttribute("data-uid")])},t.prototype.reRenderNodes=function(){this.updateListProp(this.fields),Q.isIE?(this.ulElement=this.element.querySelector(".e-list-parent.e-ul"),this.ulElement.parentElement.removeChild(this.ulElement)):this.element.innerHTML="",c(this.nodeTemplateFn)||this.clearTemplate(),this.setTouchClass(),this.setProperties({selectedNodes:[],checkedNodes:[],expandedNodes:[]},!0),this.checkedElement=[],this.isLoaded=!1,this.setDataBinding(!0)},t.prototype.setCssClass=function(e,r){!c(e)&&e!==""&&F([this.element],e.split(" ")),!c(r)&&r!==""&&T([this.element],r.split(" "))},t.prototype.editingHandler=function(e){var r=e.target;if(!(!r||r.classList.contains(Ot)||r.classList.contains(Ae)||r.classList.contains(ue)||r.classList.contains(je)||r.classList.contains(_r)||r.classList.contains(pa))){var n=D(r,"."+ue);this.createTextbox(n,e)}},t.prototype.createTextbox=function(e,r){var n=this,s=q("."+jr,this.element);s&&s.blur();var a=q("."+Oi,e);this.updateOldText(e);var l=this.createElement("input",{className:jr,attrs:{value:this.oldText}}),h=this.getEditEvent(e,null,l.outerHTML);this.trigger("nodeEditing",h,function(u){if(!u.cancel){var p=a.offsetWidth+5,d="width:"+p+"px";T([e],hs),c(n.nodeTemplateFn)||n.destroyTemplate(e),n.isReact?setTimeout(function(){n.renderTextBox(h,a,d)},5):n.renderTextBox(h,a,d)}})},t.prototype.renderTextBox=function(e,r,n){r.innerHTML=e.innerHtml;var s=q("."+jr,r);this.inputObj=ce.createInput({element:s,properties:{enableRtl:this.enableRtl}},this.createElement),this.inputObj.container.setAttribute("style",n),s.focus();var a=s;a.setSelectionRange(0,a.value.length),this.wireInputEvents(s)},t.prototype.updateOldText=function(e){var r=e.getAttribute("data-uid");this.editData=this.getNodeObject(r);var n=parseFloat(e.getAttribute("aria-level"));this.editFields=this.getFields(this.fields,n,1),this.oldText=N(this.editFields.text,this.editData)},t.prototype.inputFocusOut=function(e){if(q("."+jr,this.element)){var r=e.target,n=r.value,s=D(r,"."+Oi),a=D(r,"."+ue);Ce(this.inputObj.container),this.fields.dataSource instanceof V&&!this.isOffline?this.crudOperation("update",null,a,n,null,null,!0):this.appendNewText(a,s,n,!0)}},t.prototype.appendNewText=function(e,r,n,s){var a=this,l=this.getEditEvent(e,n,null);this.trigger("nodeEdited",l,function(h){n=h.cancel?h.oldText:h.newText,a.updateText(e,r,n,s),h.oldText!==n&&a.triggerEvent("nodeEdited",[a.getNode(e)])})},t.prototype.updateText=function(e,r,n,s){var a=ht(this.editFields.text,n,this.editData);if(c(this.nodeTemplateFn))this.enableHtmlSanitizer?r.innerText=ti.sanitize(n):r.innerHTML=n;else{r.innerText="";var l=e.getAttribute("data-uid");this.renderNodeTemplate(a,r,l),this.renderReactTemplates()}s&&(F([e],hs),e.focus(),b.add(e,"blur",this.focusOut,this),T([e],Ni)),this.allowTextWrap&&this.calculateWrap(e)},t.prototype.getElement=function(e){return c(e)?null:typeof e=="string"?this.element.querySelector('[data-uid="'+e+'"]'):typeof e=="object"?xo(e):null},t.prototype.getId=function(e){return c(e)?null:typeof e=="string"?e:typeof e=="object"?xo(e).getAttribute("data-uid"):null},t.prototype.getEditEvent=function(e,r,n){var s=this.getNodeData(e);return{cancel:!1,newText:r,node:e,nodeData:s,oldText:this.oldText,innerHtml:n}},t.prototype.getNodeObject=function(e){var r;if(c(e))return r;if(this.dataType===1)for(var n=0,s=this.treeData.length;n<s;n++){var a=N(this.fields.id,this.treeData[n]);if(!c(this.treeData[n])&&!c(a)&&a.toString()===e)return this.treeData[n]}else return this.getChildNodeObject(this.treeData,this.fields,e);return r},t.prototype.getChildNodeObject=function(e,r,n){var s;if(c(e))return s;for(var a=0,l=e.length;a<l;a++){var h=N(r.id,e[a]);if(e[a]&&h&&h.toString()===n)return e[a];if(typeof r.child=="string"&&!c(N(r.child,e[a]))){var u=N(r.child,e[a]);if(s=this.getChildNodeObject(u,this.getChildMapper(r),n),s!==void 0)break}else if(this.fields.dataSource instanceof V&&!c(N("child",e[a]))){var p="child";if(s=this.getChildNodeObject(N(p,e[a]),this.getChildMapper(r),n),s!==void 0)break}else if(this.isChildObject()){var d="child",u=N(d,e[a]);if(s=this.getChildNodeObject(u,this.getChildMapper(r),n),s!==void 0)break}}return s},t.prototype.setDragAndDrop=function(e){e&&!this.disabled?this.initializeDrag():this.destroyDrag()},t.prototype.initializeDrag=function(){var e=this,r,n=this;this.dragObj=new $s(this.element,{enableTailMode:!0,enableAutoScroll:!0,dragArea:this.dragArea,dragTarget:"."+tt,enableTapHold:!0,tapHoldThreshold:100,helper:function(s){e.dragTarget=s.sender.target;var a=D(e.dragTarget,"."+Ot),l=D(e.dragTarget,"."+tt);if(e.dragLi=D(e.dragTarget,"."+ue),e.fullRowSelect&&!l&&e.dragTarget.classList.contains(ui)&&(l=e.dragTarget.nextElementSibling),!e.dragTarget||!s.element.isSameNode(a)||!l||e.dragTarget.classList.contains(Ot)||e.dragTarget.classList.contains(Ae)||e.dragTarget.classList.contains(ue)||e.dragLi.classList.contains("e-disable"))return!1;var h=l.cloneNode(!0);if(c(q("div."+je,h))){var u=n.createElement("div",{className:je+" "+Fe});h.insertBefore(u,h.children[0])}var p=Bc+" "+Ot+" "+e.cssClass+" "+(e.enableRtl?da:"");r=n.createElement("div",{className:p}),r.appendChild(h);var d=e.selectedNodes.length;if(d>1&&e.allowMultiSelection&&e.dragLi.classList.contains(Ct)){var f=n.createElement("span",{className:Hc,innerHTML:""+d});r.appendChild(f)}return document.body.appendChild(r),document.body.style.cursor="",e.dragData=e.getNodeData(e.dragLi),r},dragStart:function(s){T([e.element],us);var a=D(s.target,".e-list-item"),l;a&&(l=parseInt(a.getAttribute("aria-level"),10));var h=e.getDragEvent(s.event,e,null,s.target,null,r,l);h.draggedNode.classList.contains(hs)?(e.dragObj.intDestroy(s.event),e.dragCancelAction(r)):e.trigger("nodeDragStart",h,function(u){u.cancel?(e.dragObj.intDestroy(s.event),e.dragCancelAction(r)):e.dragStartAction=!0})},drag:function(s){e.dragObj.setProperties({cursorAt:{top:!c(s.event.targetTouches)||Q.isDevice?60:-20}}),e.dragAction(s,r)},dragStop:function(s){F([e.element],us),e.removeVirtualEle();var a=s.target,l=!1,h=D(a,"."+ga);(!a||!h)&&(Ce(s.helper),document.body.style.cursor="");var u=D(a,".e-list-item"),p;u&&(p=parseInt(u.getAttribute("aria-level"),10));var d=e.getDragEvent(s.event,e,a,a,null,s.helper,p);d.preventTargetExpand=l,e.trigger("nodeDragStop",d,function(f){e.dragParent=f.draggedParentNode,e.preventExpand=f.preventTargetExpand,f.cancel&&(s.helper.parentNode&&Ce(s.helper),document.body.style.cursor=""),e.dragStartAction=!1})}}),this.dropObj=new Zs(this.element,{out:function(s){!c(s)&&!s.target.classList.contains(cr)&&e.dropObj.dragData.default&&e.dropObj.dragData.default.helper.classList.contains(Ot)&&(document.body.style.cursor="not-allowed")},over:function(s){document.body.style.cursor=""},drop:function(s){e.dropAction(s)}})},t.prototype.dragCancelAction=function(e){Ce(e),F([this.element],us),this.dragStartAction=!1},t.prototype.dragAction=function(e,r){var n=D(e.target,"."+ga),s=D(e.target,"."+tt),a=q("div."+je,r);F([a],[Kr,pr,cs,ps]),this.removeVirtualEle(),document.body.style.cursor="";var l=e.target.classList;if(this.fullRowSelect&&!s&&!c(l)&&l.contains(ui)&&(s=e.target.nextElementSibling),n){var h=D(e.target,"."+ue),u=D(e.target,"."+Pt),p=D(e.target,"."+et),d=D(e.target,"."+Fe);if(!n.classList.contains(Ot)||s&&!h.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,h))if(this.hasTemplate&&h){var f=q(this.fullRowSelect?"."+ui:"."+tt,h);if(e&&!d&&!p&&e.event.offsetY<7&&!u||d&&e.event.offsetY<5||p&&e.event.offsetX<3){var g=this.fullRowSelect?1:0;this.appendIndicator(h,a,g)}else if(e&&!d&&!p&&!u&&f&&e.event.offsetY>f.offsetHeight-10||d&&e.event.offsetY>19||p&&e.event.offsetX>19){var g=this.fullRowSelect?2:1;this.appendIndicator(h,a,g)}else T([a],Kr)}else if(h&&e&&!d&&!p&&e.event.offsetY<7&&!u||d&&e.event.offsetY<5||p&&e.event.offsetX<3){var g=this.fullRowSelect?1:0;this.appendIndicator(h,a,g)}else if(h&&e&&!d&&!p&&e.target.offsetHeight>0&&e.event.offsetY>e.target.offsetHeight-10&&!u||d&&e.event.offsetY>19||p&&e.event.offsetX>19){var g=this.fullRowSelect?2:1;this.appendIndicator(h,a,g)}else T([a],Kr);else e.target.nodeName==="LI"&&!h.isSameNode(this.dragLi)&&!this.isDescendant(this.dragLi,h)?(T([a],pr),this.renderVirtualEle(e)):e.target.classList.contains(cr)?T([a],pr):T([a],cs)}else T([a],ps),document.body.style.cursor="not-allowed";var v=D(e.target,".e-list-item"),m;v&&(m=parseInt(v.getAttribute("aria-level"),10));var y=this.getDragEvent(e.event,this,e.target,e.target,null,r,m);y.dropIndicator&&F([a],y.dropIndicator),this.trigger("nodeDragging",y),y.dropIndicator&&T([a],y.dropIndicator)},t.prototype.appendIndicator=function(e,r,n){T([r],pr);var s=this.createElement("div",{className:cr});e.insertBefore(s,e.children[n])},t.prototype.dropAction=function(e){var r=e.event.offsetY,n=e.target,s,a,l=!1,h,u=[],p=[];h=e.dragData.draggable;for(var d=0;d<h.ej2_instances.length;d++)if(h.ej2_instances[d]instanceof i){s=h.ej2_instances[d];break}if(s&&s.dragTarget){var f=s.dragTarget,g=D(f,"."+ue),v=D(n,"."+ue);if(p.push(g),v==null&&n.classList.contains(Ot)&&(v=n.firstElementChild),Ce(e.droppedElement),document.body.style.cursor="",!v||v.isSameNode(g)||this.isDescendant(g,v)){this.fields.dataSource instanceof V||(this.preventExpand=!1);return}if(s.allowMultiSelection&&g.classList.contains(Ct)){var m=Ee("."+Ct,s.element);if(p=m,e.target.offsetHeight<=33&&r>e.target.offsetHeight-10&&r>6)for(var y=m.length-1;y>=0;y--)v.isSameNode(m[y])||this.isDescendant(m[y],v)||this.appendNode(n,m[y],v,e,s,r);else for(var I=0;I<m.length;I++)v.isSameNode(m[I])||this.isDescendant(m[I],v)||this.appendNode(n,m[I],v,e,s,r)}else this.appendNode(n,g,v,e,s,r);a=parseInt(g.getAttribute("aria-level"),10),l=!0}this.fields.dataSource instanceof V||(this.preventExpand=!1);for(var S=0;S<p.length;S++)u.push(this.getNode(p[S]));this.trigger("nodeDropped",this.getDragEvent(e.event,s,n,e.target,e.dragData.draggedElement,null,a,l)),s.element.id!==this.element.id&&(s.triggerEvent("nodeDropped",u),this.isNodeDropped=!0,this.fields.dataSource=this.treeData),this.triggerEvent("nodeDropped",u)},t.prototype.appendNode=function(e,r,n,s,a,l){var h=D(e,"."+Pt),u=D(s.target,"."+et),p=D(s.target,"."+Fe);!r.classList.contains("e-disable")&&!h&&(p&&s.event.offsetY<5||u&&s.event.offsetX<3||p&&s.event.offsetY>19||u&&s.event.offsetX>19||!p&&!u)?e.nodeName==="LI"?this.dropAsSiblingNode(r,n,s,a):e.firstElementChild&&e.classList.contains(Ot)?e.firstElementChild.nodeName==="UL"&&this.dropAsSiblingNode(r,n,s,a):e.classList.contains("e-icon-collapsible")||e.classList.contains("e-icon-expandable")?this.dropAsSiblingNode(r,n,s,a):this.dropAsChildNode(r,n,a,null,s,l):this.dropAsChildNode(r,n,a,null,s,l,!0),this.showCheckBox&&this.ensureIndeterminate()},t.prototype.dropAsSiblingNode=function(e,r,n,s){var a=D(r,"."+Ae),l=D(e,"."+Ae),h=D(l,"."+ue),u;if(n.target.offsetHeight>0&&n.event.offsetY>n.target.offsetHeight-2?u=!1:n.event.offsetY<2?u=!0:(n.target.classList.contains("e-icon-expandable")||n.target.classList.contains("e-icon-collapsible"))&&(n.event.offsetY<5||n.event.offsetX<3?u=!0:(n.event.offsetY>15||n.event.offsetX>17)&&(u=!1)),n.target.classList.contains("e-icon-expandable")||n.target.classList.contains("e-icon-collapsible")){var p=n.target.closest("li");a.insertBefore(e,u?p:p.nextElementSibling)}else a.insertBefore(e,u?n.target:n.target.nextElementSibling);this.moveData(e,r,a,u,s),this.updateElement(l,h),this.updateAriaLevel(e),s.element.id===this.element.id?this.updateList():(s.updateInstance(),this.updateInstance())},t.prototype.dropAsChildNode=function(e,r,n,s,a,l,h){var u=D(e,"."+Ae),p=D(u,"."+ue),d=D(r,"."+Ae),f;if(a&&a.target&&(f=q(this.fullRowSelect?"."+ui:"."+tt,r)),a&&l<7&&!h)d.insertBefore(e,r),this.moveData(e,r,d,!0,n);else if(a&&a.target.offsetHeight>0&&l>a.target.offsetHeight-10&&!h&&!this.hasTemplate)d.insertBefore(e,r.nextElementSibling),this.moveData(e,r,d,!1,n);else if(this.hasTemplate&&f&&l>f.offsetHeight-10&&!h)d.insertBefore(e,r.nextElementSibling),this.moveData(e,r,d,!1,n);else{var g=this.expandParent(r),v=g.childNodes[s];g.insertBefore(e,v),this.moveData(e,v,g,!0,n)}this.updateElement(u,p),this.updateAriaLevel(e),n.element.id===this.element.id?this.updateList():(n.updateInstance(),this.updateInstance())},t.prototype.moveData=function(e,r,n,s,a){var l=D(n,"."+ue),h=this.getId(e),u=a.updateChildField(a.treeData,a.fields,h,null,null,!0),p=this.getId(r),d=this.getDataPos(this.treeData,this.fields,p),f=this.getId(l);if(this.dataType===1){this.updateField(this.treeData,this.fields,f,"hasChildren",!0);var g=c(d)?this.treeData.length:s?d:d+1;if(c(f)&&!this.hasPid)delete u[0][this.fields.parentID];else{var v=this.isNumberTypeId?parseFloat(f):f;ht(this.fields.parentID,v,u[0])}if(this.treeData.splice(g,0,u[0]),a.element.id!==this.element.id){var m=a.removeChildNodes(h);g++;for(var y=0,I=m.length;y<I;y++)this.treeData.splice(g,0,m[y]),g++;a.groupedData=a.getGroupedData(a.treeData,a.fields.parentID)}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.addChildData(this.treeData,this.fields,f,u,s?d:d+1)},t.prototype.expandParent=function(e){var r=q("div."+je,e);r&&r.classList.contains(Fe)&&this.preventExpand!==!0&&this.expandAction(e,r,null);var n=q("."+Ae,e);if(this.preventExpand===!0&&!n&&r&&this.renderChildNodes(e),n=q("."+Ae,e),!c(n)&&this.preventExpand===!0&&(n.style.display="none"),!c(n)&&this.preventExpand===!1&&(n.style.display="block"),c(n)&&this.preventExpand===!0){c(r)&&He.generateIcon(this.createElement,e,Fe,this.listBaseOption);var s=q("div."+je,e);s&&s.classList.add("e-icon-expandable"),n=He.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(n),s?F([s],et):He.generateIcon(this.createElement,e,Fe,this.listBaseOption),e.setAttribute("aria-expanded","false"),n.style.display="none"}if(c(n)){var a=this.expandArgs;(c(a)||a.name!="nodeExpanding")&&this.trigger("nodeExpanding",this.getExpandEvent(e,null)),c(r)&&He.generateIcon(this.createElement,e,et,this.listBaseOption);var s=q("div."+je,e);s?F([s],Fe):(He.generateIcon(this.createElement,e,et,this.listBaseOption),s=q("div."+je,e),F([s],Fe)),n=He.generateUL(this.createElement,[],null,this.listBaseOption),e.appendChild(n),this.addExpand(e),this.trigger("nodeExpanded",this.getExpandEvent(e,null))}return n},t.prototype.updateElement=function(e,r){if(r&&e.childElementCount===0){var n=q("div."+je,r);Ce(e),Ce(n);var s=this.getId(r);this.updateField(this.treeData,this.fields,s,"hasChildren",!1),this.removeExpand(r,!0)}},t.prototype.updateAriaLevel=function(e){var r=this.parents(e,"."+Ae).length;e.setAttribute("aria-level",""+r),this.updateChildAriaLevel(q("."+Ae,e),r+1)},t.prototype.updateChildAriaLevel=function(e,r){if(!c(e))for(var n=e.childNodes,s=0,a=n.length;s<a;s++){var l=n[s];l.setAttribute("aria-level",""+r),this.updateChildAriaLevel(q("."+Ae,l),r+1)}},t.prototype.renderVirtualEle=function(e){var r;e.event.offsetY>e.target.offsetHeight-2?r=!1:e.event.offsetY<2&&(r=!0);var n=this.createElement("div",{className:cr}),s=this.fullRowSelect?r?1:2:r?0:1;e.target.insertBefore(n,e.target.children[s])},t.prototype.removeVirtualEle=function(){var e=q("."+cr);e&&Ce(e)},t.prototype.destroyDrag=function(){this.dragObj&&this.dropObj&&(this.dragObj.destroy(),this.dropObj.destroy())},t.prototype.getDragEvent=function(e,r,n,s,a,l,h,u){var p=n?D(n,"."+ue):null,d=p?this.getNodeData(p):null,f=r?r.dragLi:a,g=r?r.dragData:null,v=n?this.parents(n,"."+ue):null,m=r.dragLi.parentElement,y=r.dragLi?D(m,"."+ue):null,I=null,S=null,R=[pr,Kr,cs,ps],L=null,P=u===!0?f:p,J=P?D(P,".e-list-parent"):null,he=0,pe=null;if(y=r.dragLi&&y===null?D(m,"."+Ot):y,y=u===!0?this.dragParent:y,l)for(;he<4;){if(q("."+je,l).classList.contains(R[he])){L=R[he];break}he++}if(J){var Re=0;for(he=0;he<J.childElementCount;he++)if(Re=u!==!0&&J.children[he]===f&&p!==f?++Re:Re,u!==!0&&J.children[he].classList.contains("e-hover")){S=e.offsetY>=23?he+1:he;break}else if(J.children[he]===P){S=(e.offsetY>=23,he);break}S=Re!==0?--S:S,pe=L=="e-drop-in"?"Inside":e.offsetY<7?"Before":"After"}if(n&&(v.length===0?I=null:n.classList.contains(ue)?I=v[0]:I=v[1]),p===f&&(I=p),n&&s.offsetHeight<=33&&e.offsetY<s.offsetHeight-10&&e.offsetY>6&&(I=p,u!==!0)){h=++h;var B=I?q(".e-list-parent",I):null;if(S=B?B.children.length:0,!(this.fields.dataSource instanceof V)&&B===null&&I){var H=I.hasAttribute("data-uid")?this.getChildNodes(this.fields.dataSource,I.getAttribute("data-uid").toString()):null;S=H?H.length:0}}return{cancel:!1,clonedNode:l,event:e,draggedNode:f,draggedNodeData:g,droppedNode:p,droppedNodeData:d,dropIndex:S,dropLevel:h,draggedParentNode:y,dropTarget:I,dropIndicator:L,target:s,position:pe}},t.prototype.addFullRow=function(e){var r=this.liList.length;if(e)for(var n=0;n<r;n++)this.createFullRow(this.liList[n]);else for(var n=0;n<r;n++){var s=q("."+ui,this.liList[n]);Ce(s)}},t.prototype.createFullRow=function(e){var r=this.createElement("div",{className:ui});e.insertBefore(r,e.childNodes[0])},t.prototype.addMultiSelect=function(e){if(e)for(var r=Ee("."+ue+':not([aria-selected="true"])',this.element),n=0,s=r;n<s.length;n++){var a=s[n];a.setAttribute("aria-selected","false")}else for(var r=Ee("."+ue+'[aria-selected="false"]',this.element),l=0,h=r;l<h.length;l++){var a=h[l];a.removeAttribute("aria-selected")}},t.prototype.collapseByLevel=function(e,r,n){if(r>0&&!c(e))for(var s=this.getVisibleNodes(n,e.childNodes),a=0,l=s.length;a<l;a++){var h=s[a],u=q("."+et,q("."+tt,h));c(u)||this.collapseNode(h,u,null),this.collapseByLevel(q("."+Ae,h),r-1,n)}},t.prototype.collapseAllNodes=function(e){for(var r=this.getVisibleNodes(e,Ee("."+et,this.element)),n=0,s=r.length;n<s;n++){var a=r[n],l=D(a,"."+ue);this.collapseNode(l,a,null)}},t.prototype.expandByLevel=function(e,r,n){if(r>0&&!c(e))for(var s=this.getVisibleNodes(n,e.childNodes),a=0,l=s.length;a<l;a++){var h=s[a],u=q("."+Fe,q("."+tt,h));c(u)||this.expandAction(h,u,null),this.expandByLevel(q("."+Ae,h),r-1,n)}},t.prototype.expandAllNodes=function(e){for(var r=this.getVisibleNodes(e,Ee("."+Fe,this.element)),n=0,s=r.length;n<s;n++){var a=r[n],l=D(a,"."+ue);this.expandAction(l,a,null,!0)}},t.prototype.getVisibleNodes=function(e,r){var n=Array.prototype.slice.call(r);if(e)for(var s=0;s<n.length;s++)Hi(n[s])||(n.splice(s,1),s--);return n},t.prototype.removeNode=function(e){var r=D(e,"."+Ae),n=D(r,"."+ue);c(this.nodeTemplateFn)||this.destroyTemplate(e),Ce(e),this.updateElement(r,n),this.removeData(e)},t.prototype.updateInstance=function(){this.updateList(),this.updateSelectedNodes(),this.updateExpandedNodes()},t.prototype.updateList=function(){this.liList=Array.prototype.slice.call(Ee("."+ue,this.element))},t.prototype.updateSelectedNodes=function(){this.setProperties({selectedNodes:[]},!0);var e=Ee("."+Ct,this.element);this.selectGivenNodes(e)},t.prototype.updateExpandedNodes=function(){this.setProperties({expandedNodes:[]},!0);for(var e=Ee('[aria-expanded="true"]',this.element),r=0,n=e.length;r<n;r++)this.addExpand(e[r])},t.prototype.removeData=function(e){if(this.dataType===1){var r=new V(this.treeData),n=this.getId(e),s={},a=this.isNumberTypeId?parseFloat(n):n;s[this.fields.id]=a,r.remove(this.fields.id,s),this.removeChildNodes(n)}else{var n=this.getId(e);this.updateChildField(this.treeData,this.fields,n,null,null,!0)}},t.prototype.removeChildNodes=function(e){var r=this.getChildGroup(this.groupedData,e,!1),n=[];if(r)for(var s=0,a=r.length;s<a;s++){var l=new V(this.treeData),h=N(this.fields.id,r[s]).toString(),u={},p=this.isNumberTypeId?parseFloat(h):h;u[this.fields.id]=p;var d=l.remove(this.fields.id,u);n.push(d[0]),this.removeChildNodes(h)}return n},t.prototype.doGivenAction=function(e,r,n){for(var s=0,a=e.length;s<a;s++){var l=this.getElement(e[s]);if(!c(l)){var h=q("."+r,q("."+tt,l));c(h)||(n?this.expandAction(l,h,null):this.collapseNode(l,h,null))}}},t.prototype.addGivenNodes=function(e,r,n,s,a){if(e.length!==0){var l=this.getSortedData(e),h=r?parseFloat(r.getAttribute("aria-level"))+1:1;s&&this.updateMapper(h);var u=He.createListItemFromJson(this.createElement,l,this.listBaseOption,h),p=this.getId(r),d,f;c(r)||(f=q("div."+je,r)),this.dataType===1&&f&&f.classList.contains(Fe)&&!c(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")&&(this.preventExpand=!0),this.dataType!==1&&(this.addChildData(this.treeData,this.fields,p,e,n),this.isFirstRender=!1);var g;if(a?g=a:g=r?this.expandParent(r):q("."+Ae,this.element),d=g.childNodes[n],!this.isFirstRender||this.dataType===1){var v=this.expandArgs;if(d||this.sortOrder==="None"){for(var m=0;m<u.length;m++)g.insertBefore(u[m],d);if(this.dataType===1&&!c(r)&&!c(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")){this.preventExpand=!1;var y=q("div."+je,r);y&&y.classList.contains(Fe)&&(c(v)||v.name!="nodeExpanding")&&this.expandAction(r,y,null)}}if(!d&&(this.sortOrder==="Ascending"||this.sortOrder==="Descending"))if(g.childNodes.length===0){for(var m=0;m<u.length;m++)g.insertBefore(u[m],d);if(this.dataType===1&&!c(r)&&!c(this.element.offsetParent)&&!this.element.offsetParent.parentElement.classList.contains("e-filemanager")){this.preventExpand=!1;var y=q("div."+je,r);y&&y.classList.contains(Fe)&&(c(v)||v.name!="nodeExpanding")&&this.expandAction(r,y,null)}}else for(var I=g.childNodes,m=0;m<u.length;m++)for(var S=0;S<I.length;S++){var R=this.sortOrder==="Ascending"?I[S].textContent.toUpperCase()>u[m].innerText.toUpperCase():I[S].textContent.toUpperCase()<u[m].innerText.toUpperCase();if(R){g.insertBefore(u[m],I[S]);break}g.insertBefore(u[m],I[I.length])}}if(this.dataType===1){this.updateField(this.treeData,this.fields,p,"hasChildren",!0);for(var L=this.getId(d),P=c(L)?this.treeData.length:this.getDataPos(this.treeData,this.fields,L),S=0;S<e.length;S++){if(!c(p)){var J=this.isNumberTypeId?parseFloat(p):p;ht(this.fields.parentID,J,e[S])}this.treeData.splice(P,0,e[S]),P++}}this.finalizeNode(g)}},t.prototype.updateMapper=function(e){var r=e===1?this.fields:this.getChildFields(this.fields,e-1,1);this.updateListProp(r)},t.prototype.updateListProp=function(e){var r=this.getActualProperties(e);this.listBaseOption.fields=r,this.listBaseOption.fields.url=r.hasOwnProperty("navigateUrl")?r.navigateUrl:"navigateUrl"},t.prototype.getDataPos=function(e,r,n){for(var s=null,a=0,l=e.length;a<l;a++){var h=N(r.id,e[a]);if(e[a]&&h&&h.toString()===n)return a;if(typeof r.child=="string"&&!c(N(r.child,e[a]))){var u=N(r.child,e[a]);if(s=this.getDataPos(u,this.getChildMapper(r),n),s!==null)break}else if(this.fields.dataSource instanceof V&&!c(N("child",e[a]))){var p=N("child",e[a]);if(s=this.getDataPos(p,this.getChildMapper(r),n),s!==null)break}}return s},t.prototype.addChildData=function(e,r,n,s,a){var l;if(c(n)){a=c(a)?e.length:a;for(var h=0,u=s.length;h<u;h++)e.splice(a,0,s[h]),a++;return l}for(var p=0,d=e.length;p<d;p++){var f=N(r.id,e[p]);if(e[p]&&f&&f.toString()===n){if(typeof r.child=="string"&&e[p].hasOwnProperty(r.child)&&e[p][r.child]!==null||this.fields.dataSource instanceof V&&e[p].hasOwnProperty("child")){var g=typeof r.child=="string"?r.child:"child",v=N(g,e[p]);c(v)&&(v=[]),a=c(a)?v.length:a;for(var h=0,u=s.length;h<u;h++)v.splice(a,0,s[h]),a++}else{var g=typeof r.child=="string"?r.child:"child";e[p][g]=s}return!0}else if(typeof r.child=="string"&&!c(N(r.child,e[p]))){var m=N(r.child,e[p]);if(l=this.addChildData(m,this.getChildMapper(r),n,s,a),l!==void 0)break}else if(this.fields.dataSource instanceof V&&!c(N("child",e[p]))){var v=N("child",e[p]);if(l=this.addChildData(v,this.getChildMapper(r),n,s,a),l!==void 0)break}}return l},t.prototype.doDisableAction=function(e){var r=this.nodeType(e),n=this.checkValidId(r);this.validArr=[];for(var s=0,a=n.length;s<a;s++){var l=n[s][this.fields.id].toString();l&&this.disableNode.indexOf(l)===-1&&this.disableNode.push(l);var h=this.getElement(l);h&&(h.setAttribute("aria-disabled","true"),T([h],ma))}},t.prototype.doEnableAction=function(e){for(var r=this.nodeType(e),n=0,s=r.length;n<s;n++){var a=this.getElement(r[n]),l=r[n];l&&this.disableNode.indexOf(l)!==-1&&this.disableNode.splice(this.disableNode.indexOf(l),1),a&&(a.removeAttribute("aria-disabled"),F([a],ma))}},t.prototype.nodeType=function(e){for(var r=[],n=0,s=e.length;n<s;n++){var a=void 0;typeof e[n]=="string"?a=e[n]?e[n].toString():null:typeof e[n]=="object"&&(a=e[n]?e[n].getAttribute("data-uid").toString():null),r.indexOf(a)==-1&&r.push(a)}return r},t.prototype.checkValidId=function(e){var r=this;if(this.dataType===1)this.validArr=this.treeData.filter(function(l){return e.indexOf(l[r.fields.id]?l[r.fields.id].toString():null)!==-1});else if(this.dataType===2)for(var n=0;n<this.treeData.length;n++){var s=this.treeData[n][this.fields.id]?this.treeData[n][this.fields.id].toString():null;e.indexOf(s)!==-1&&this.validArr.push(this.treeData[n]);var a=N(this.fields.child.toString(),this.treeData[n]);a&&this.filterNestedChild(a,e)}return this.validArr},t.prototype.filterNestedChild=function(e,r){for(var n=0;n<e.length;n++){var s=e[n][this.fields.id]?e[n][this.fields.id].toString():null;r.indexOf(s)!==-1&&this.validArr.push(e[n]);var a=N(this.fields.child.toString(),e[n]);a&&this.filterNestedChild(a,r)}},t.prototype.setTouchClass=function(){var e=D(this.element,"."+Wc);this.touchClass=c(e)?"":Gc},t.prototype.updatePersistProp=function(){this.removeField(this.treeData,this.fields,["selected","expanded"]);for(var e=this.selectedNodes,r=0,n=e.length;r<n;r++)this.updateField(this.treeData,this.fields,e[r],"selected",!0);for(var s=this.expandedNodes,a=0,l=s.length;a<l;a++)this.updateField(this.treeData,this.fields,s[a],"expanded",!0);if(this.showCheckBox){this.removeField(this.treeData,this.fields,["isChecked"]);for(var h=this.checkedNodes,u=0,l=h.length;u<l;u++)this.updateField(this.treeData,this.fields,h[u],"isChecked",!0)}},t.prototype.removeField=function(e,r,n){if(!(c(e)||c(r)))for(var s=0,a=e.length;s<a;s++){for(var l=0;l<n.length;l++){var h=this.getMapperProp(r,n[l]);c(e[s][h])||delete e[s][h]}typeof r.child=="string"&&!c(N(r.child,e[s]))?this.removeField(N(r.child,e[s]),this.getChildMapper(r),n):this.fields.dataSource instanceof V&&!c(N("child",e[s]))&&this.removeField(N("child",e[s]),this.getChildMapper(r),n)}},t.prototype.getMapperProp=function(e,r){switch(r){case"selected":return c(e.selected)?"selected":e.selected;case"expanded":return c(e.expanded)?"expanded":e.expanded;case"isChecked":return c(e.isChecked)?"isChecked":e.isChecked;case"hasChildren":return c(e.hasChildren)?"hasChildren":e.hasChildren;default:return r}},t.prototype.updateField=function(e,r,n,s,a){if(!c(n))if(this.dataType===1){var l=this.isNumberTypeId?parseFloat(n):n,h=new V(this.treeData).executeLocal(new se().where(r.id,"equal",l,!1));ht(this.getMapperProp(r,s),a,h[0])}else this.updateChildField(e,r,n,s,a)},t.prototype.updateChildField=function(e,r,n,s,a,l){var h;if(c(e))return h;for(var u=0,p=e.length;u<p;u++){var d=N(r.id,e[u]);if(e[u]&&d&&d.toString()===n)return l?h=e.splice(u,1):(ht(this.getMapperProp(r,s),a,e[u]),h=[]),h;if(typeof r.child=="string"&&!c(N(r.child,e[u]))){var f=N(r.child,e[u]);if(h=this.updateChildField(f,this.getChildMapper(r),n,s,a,l),h!==void 0)break}else if(this.fields.dataSource instanceof V&&!c(N("child",e[u]))){var g=N("child",e[u]);if(h=this.updateChildField(g,this.getChildMapper(r),n,s,a,l),h!==void 0)break}}return h},t.prototype.triggerEvent=function(e,r){if(this.renderReactTemplates(),e==="addNodes"){for(var n=[],s=0;s<r.length;s++)n.push(this.getNode(this.getElement(c(r[s][this.fields.id])?N(this.fields.id,r[s]).toString():null)));r=n}var a={data:this.treeData,action:e,nodeData:r};this.trigger("dataSourceChanged",a)},t.prototype.wireInputEvents=function(e){b.add(e,"blur",this.inputFocusOut,this)},t.prototype.wireEditingEvents=function(e){var r=this;if(e&&!this.disabled){var n=this;this.touchEditObj=new en(this.element,{tap:function(s){r.isDoubleTapped(s)&&s.tapCount===2&&(s.originalEvent.preventDefault(),n.editingHandler(s.originalEvent))}})}else this.touchEditObj&&this.touchEditObj.destroy()},t.prototype.wireClickEvent=function(e){if(e){var r=this;this.touchClickObj=new en(this.element,{tap:function(n){r.clickHandler(n)}})}else this.touchClickObj&&this.touchClickObj.destroy()},t.prototype.wireExpandOnEvent=function(e){var r=this;if(e){var n=this;this.touchExpandObj=new en(this.element,{tap:function(s){(r.expandOnType==="Click"||r.expandOnType==="DblClick"&&r.isDoubleTapped(s)&&s.tapCount===2)&&s.originalEvent.which!==3&&n.expandHandler(s)}})}else this.touchExpandObj&&this.touchExpandObj.destroy()},t.prototype.mouseDownHandler=function(e){this.mouseDownStatus=!0,(e.shiftKey||e.ctrlKey)&&e.preventDefault(),e.ctrlKey&&this.allowMultiSelection&&b.add(this.element,"contextmenu",this.preventContextMenu,this)},t.prototype.preventContextMenu=function(e){e.preventDefault()},t.prototype.wireEvents=function(){b.add(this.element,"mousedown",this.mouseDownHandler,this),this.wireClickEvent(!0),this.expandOnType!=="None"&&this.wireExpandOnEvent(!0),b.add(this.element,"mouseover",this.onMouseOver,this),b.add(this.element,"mouseout",this.onMouseLeave,this),this.keyboardModule=new Xi(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"})},t.prototype.unWireEvents=function(){b.remove(this.element,"mousedown",this.mouseDownHandler),this.wireClickEvent(!1),this.wireExpandOnEvent(!1),b.remove(this.element,"mouseover",this.onMouseOver),b.remove(this.element,"mouseout",this.onMouseLeave),this.disabled||this.keyboardModule.destroy()},t.prototype.parents=function(e,r){for(var n=[],s=e.parentNode;!c(s);)Eh(s,r)&&n.push(s),s=s.parentNode;return n},t.prototype.isDoubleTapped=function(e){var r=e.originalEvent.target,n;return r&&e.tapCount&&(e.tapCount===1?this.firstTap=D(r,"."+ue):e.tapCount===2&&(n=D(r,"."+ue))),this.firstTap===n},t.prototype.isDescendant=function(e,r){for(var n=r.parentNode;!c(n);){if(n===e)return!0;n=n.parentNode}return!1},t.prototype.showSpinner=function(e){T([e],ls),Ir({target:e,width:Q.isDevice?16:14},this.createElement),Wi(e)},t.prototype.hideSpinner=function(e){Er(e),e.innerHTML="",F([e],ls)},t.prototype.setCheckedNodes=function(e){e=JSON.parse(JSON.stringify(e)),this.uncheckAll(this.checkedNodes),this.setIndeterminate(e),e.length>0&&this.checkAll(e)},t.prototype.setValidCheckedNode=function(e){if(this.dataType===1){var r=this.fields,n=new V(this.treeData).executeLocal(new se().where(r.id,"equal",e,!0));if(n[0]&&(this.setChildCheckState(n,e,n[0]),this.autoCheck)){for(var s=n[0][this.fields.parentID]?n[0][this.fields.parentID].toString():null,a=this.getChildNodes(this.treeData,s),l=0,h=0;h<a.length;h++){var u=a[h][this.fields.id].toString();this.checkedNodes.indexOf(u)!==-1&&l++}l===a.length&&this.checkedNodes.indexOf(s)===-1&&s&&this.checkedNodes.push(s)}}else if(this.dataType===2)for(var p=0;p<this.treeData.length;p++){var d=this.treeData[p][this.fields.id]?this.treeData[p][this.fields.id].toString():"";if(d===e&&this.checkedNodes.indexOf(e)===-1){this.checkedNodes.push(e);break}var f=N(this.fields.child.toString(),this.treeData[p]);f&&this.setChildCheckState(f,e,this.treeData[p])}},t.prototype.setChildCheckState=function(e,r,n){var s,a=0;if(this.dataType===1){n&&(s=n[this.fields.id]?n[this.fields.id].toString():null);for(var l=0;l<e.length;l++){var h=e[l][this.fields.id]?e[l][this.fields.id].toString():null;n&&s&&this.autoCheck&&this.checkedNodes.indexOf(s)!==-1&&this.checkedNodes.indexOf(h)===-1&&this.checkedNodes.push(h),h===r&&this.checkedNodes.indexOf(r)===-1&&this.checkedNodes.push(r);var u=this.getChildNodes(this.treeData,h);u&&this.setChildCheckState(u,r,n)}}else{n&&(s=n[this.fields.id]?n[this.fields.id].toString():"");for(var l=0;l<e.length;l++){var p=e[l][this.fields.id]?e[l][this.fields.id].toString():"";n&&s&&this.autoCheck&&this.checkedNodes.indexOf(s)!==-1&&this.checkedNodes.indexOf(p)===-1&&this.checkedNodes.push(p),p===r&&this.checkedNodes.indexOf(r)===-1&&this.checkedNodes.push(r);var u=N(this.fields.child.toString(),e[l]);u&&this.setChildCheckState(u,r,e[l]),this.checkedNodes.indexOf(p)!==-1&&this.autoCheck&&a++,a===e.length&&this.checkedNodes.indexOf(s)===-1&&this.autoCheck&&this.checkedNodes.push(s)}}},t.prototype.setIndeterminate=function(e){for(var r=0;r<e.length;r++)this.setValidCheckedNode(e[r])},t.prototype.updatePosition=function(e,r,n,s){if(this.dataType===1){var a=this.getDataPos(this.treeData,this.fields,e);if(this.treeData.splice(a,1,r),n){this.removeChildNodes(e);for(var l=0;l<s.length;l++)this.treeData.splice(a,0,s[l]),a++}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}else this.updateChildPosition(this.treeData,this.fields,e,[r],void 0)},t.prototype.updateChildPosition=function(e,r,n,s,a){for(var l,h=0,u=e.length;h<u;h++){var p=N(r.id,e[h]);if(e[h]&&p&&p.toString()===n)return e[h]=s[0],!0;if(typeof r.child=="string"&&!c(N(r.child,e[h]))){var d=N(r.child,e[h]);if(l=this.updateChildPosition(d,this.getChildMapper(r),n,s,a),l!==void 0)break}else if(this.fields.dataSource instanceof V&&!c(N("child",e[h]))){var f=N("child",e[h]);if(l=this.updateChildPosition(f,this.getChildMapper(r),n,s,a),l!==void 0)break}}return l},t.prototype.dynamicState=function(){this.setDragAndDrop(this.allowDragAndDrop),this.wireEditingEvents(this.allowEditing),this.disabled?(this.unWireEvents(),this.rippleFn(),this.rippleIconFn()):(this.wireEvents(),this.setRipple())},t.prototype.crudOperation=function(e,r,n,s,a,l,h){var u=this,p=this.fields.dataSource,d=[],f=this.getQuery(this.fields),g=this.fields.id,v,m={addedRecords:[],deletedRecords:[],changedRecords:[]},y=[];r?y=this.nodeType(r):n&&(typeof n=="string"?y[0]=n.toString():typeof n=="object"&&(y[0]=n.getAttribute("data-uid").toString()));for(var I=0,S=y.length;I<S;I++){var R=this.getElement(y[I]);if(!c(R)){var L=this.getNodeObject(y[I]);d.push(L)}}switch(e){case"delete":r.length==1?v=p.remove(g,d[0],f.fromTable,f):(m.deletedRecords=d,v=p.saveChanges(m,g,f.fromTable,f)),v.then(function(J){return u.deleteSuccess(y)}).catch(function(J){return u.dmFailure(J)});break;case"update":d[0][this.fields.text]=s,v=p.update(g,d[0],f.fromTable,f),v.then(function(J){return u.editSucess(n,s,h)}).catch(function(J){return u.dmFailure(J,n,h)});break;case"insert":if(a.length==1)v=p.insert(a[0],f.fromTable,f);else{for(var P=[],I=0,S=a.length;I<S;I++)P.push(a[I]);m.addedRecords=P,v=p.saveChanges(m,g,f.fromTable,f)}v.then(function(J){var he=u.getElement(n);u.addSuccess(a,he,l),u.preventExpand=!1}).catch(function(J){return u.dmFailure(J)});break}},t.prototype.deleteSuccess=function(e){for(var r=[],n=0,s=e.length;n<s;n++){var a=this.getElement(e[n]);r.push(this.getNode(a)),!c(a)&&this.removeNode(a)}this.updateInstance(),this.dataType===1&&(this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)),this.triggerEvent("removeNode",r)},t.prototype.editSucess=function(e,r,n){var s=this.getElement(e),a=q("."+Oi,s);this.appendNewText(s,a,r,n)},t.prototype.addSuccess=function(e,r,n){var s,a=r?r.querySelector("."+je):null,l=this;r&&a&&a.classList.contains(Fe)&&r.querySelector("."+Ae)===null?l.renderChildNodes(r,null,function(){s=r.querySelector("."+Ae),l.addGivenNodes(e,r,n,!0,s),l.triggerEvent("addNodes",e)}):(this.addGivenNodes(e,r,n,!0),this.triggerEvent("addNodes",e))},t.prototype.dmFailure=function(e,r,n){r&&this.updatePreviousText(r,n),this.trigger("actionFailure",{error:e})},t.prototype.updatePreviousText=function(e,r){var n=this.getElement(e),s=q("."+Oi,n);this.updateText(n,s,this.oldText,r)},t.prototype.getHierarchicalParentId=function(e,r,n){var s=this,a=r.findIndex(function(u){return u[s.fields.id]&&u[s.fields.id].toString()===e});if(a==-1)for(var l=0;l<r.length;l++){var h=N(this.fields.child.toString(),r[l]);if(!c(h))if(a=h.findIndex(function(u){return u[s.fields.id]&&u[s.fields.id].toString()===e}),a==-1)this.getHierarchicalParentId(e,h,n);else{n.push(r[l][this.fields.id].toString()),this.getHierarchicalParentId(r[l][this.fields.id].toString(),this.treeData,n);break}}return n},t.prototype.onPropertyChanged=function(e,r){for(var n=0,s=Object.keys(e);n<s.length;n++){var a=s[n];switch(a){case"allowDragAndDrop":this.setDragAndDrop(this.allowDragAndDrop);break;case"dragArea":this.allowDragAndDrop&&(this.dragObj.dragArea=this.dragArea);break;case"allowEditing":this.wireEditingEvents(this.allowEditing);break;case"allowMultiSelection":if(this.selectedNodes.length>1){var l=this.getElement(this.selectedNodes[0]);this.isLoaded=!1,this.removeSelectAll(),this.selectNode(l,null),this.isLoaded=!0}this.setMultiSelect(this.allowMultiSelection),this.addMultiSelect(this.allowMultiSelection);break;case"allowTextWrap":this.setTextWrap(),this.updateWrap();break;case"checkedNodes":this.showCheckBox&&(this.checkedNodes=r.checkedNodes,this.setCheckedNodes(e.checkedNodes));break;case"autoCheck":this.showCheckBox&&(this.autoCheck=e.autoCheck,this.ensureIndeterminate());break;case"cssClass":this.setCssClass(r.cssClass,e.cssClass);break;case"enableRtl":this.setEnableRtl();break;case"expandedNodes":this.isAnimate=!1,this.setProperties({expandedNodes:[]},!0),this.collapseAll(),this.isInitalExpand=!0,this.setProperties({expandedNodes:c(e.expandedNodes)?[]:e.expandedNodes},!0),this.doExpandAction(),this.isInitalExpand=!1,this.isAnimate=!0;break;case"expandOn":this.wireExpandOnEvent(!1),this.setExpandOnType(),this.expandOnType!=="None"&&!this.disabled&&this.wireExpandOnEvent(!0);break;case"disabled":this.setDisabledMode(),this.dynamicState();break;case"fields":this.isAnimate=!1,this.isFieldChange=!0,this.initialRender=!0,(!this.isReact||this.isReact&&!(this.fields.dataSource instanceof V))&&this.reRenderNodes(),this.initialRender=!1,this.isAnimate=!0,this.isFieldChange=!1;break;case"fullRowSelect":this.setFullRow(this.fullRowSelect),this.addFullRow(this.fullRowSelect),this.allowTextWrap&&(this.setTextWrap(),this.updateWrap());break;case"loadOnDemand":if(this.loadOnDemand===!1&&!this.onLoaded){for(var h=this.element.querySelectorAll("li"),u=0;u<h.length;)h[u].getAttribute("aria-expanded")!=="true"&&this.renderChildNodes(h[u],!0,null,!0),u++;this.onLoaded=!0}break;case"nodeTemplate":this.hasTemplate=!1,this.nodeTemplateFn=this.templateComplier(this.nodeTemplate),this.reRenderNodes();break;case"selectedNodes":this.removeSelectAll(),this.setProperties({selectedNodes:e.selectedNodes},!0),this.doSelectionAction();break;case"showCheckBox":this.reRenderNodes();break;case"sortOrder":this.reRenderNodes();break;case"fullRowNavigable":this.setProperties({fullRowNavigable:e.fullRowNavigable},!0),this.listBaseOption.itemNavigable=e.fullRowNavigable,this.reRenderNodes();break}}},t.prototype.destroy=function(){this.clearTemplate(),this.element.removeAttribute("aria-activedescendant"),this.unWireEvents(),this.wireEditingEvents(!1),this.disabled||(this.rippleFn(),this.rippleIconFn()),this.setCssClass(this.cssClass,null),this.setDragAndDrop(!1),this.setFullRow(!1),this.ulElement&&this.ulElement.parentElement&&this.ulElement.parentElement.removeChild(this.ulElement),this.ulElement=null,this.liList=null,this.startNode=null,this.firstTap=null,this.expandArgs=null,this.dragLi=null,this.dragTarget=null,this.dragParent=null,this.dragObj=null,this.dropObj=null,this.inputObj=null,this.touchEditObj=null,this.touchExpandObj=null,this.touchClickObj=null,o.prototype.destroy.call(this)},t.prototype.addNodes=function(e,r,n,s){if(!c(e)){e=JSON.parse(JSON.stringify(e));var a=this.getElement(r);if(this.preventExpand=s,this.fields.dataSource instanceof V)this.isOffline?this.addSuccess(e,a,n):this.crudOperation("insert",null,r,null,e,n,this.preventExpand);else if(this.dataType===2)this.addGivenNodes(e,a,n);else{if(a)this.addGivenNodes(e,a,n);else{e=this.getSortedData(e);for(var l=0;l<e.length;l++){var h=N(this.fields.parentID,e[l]);a=h&&this.getElement(h.toString()),this.addGivenNodes([e[l]],a,n)}}this.groupedData=this.getGroupedData(this.treeData,this.fields.parentID)}this.updateCheckedStateFromDS(),this.showCheckBox&&a&&this.ensureParentCheckState(a),this.fields.dataSource instanceof V||(this.preventExpand=!1,this.triggerEvent("addNodes",e))}},t.prototype.beginEdit=function(e){var r=this.getElement(e);c(r)||this.disabled||this.createTextbox(r,null)},t.prototype.checkAll=function(e){this.showCheckBox&&this.doCheckBoxAction(e,!0)},t.prototype.collapseAll=function(e,r,n){c(e)?r>0?this.collapseByLevel(q("."+Ae,this.element),r,n):this.collapseAllNodes(n):this.doGivenAction(e,et,!1)},t.prototype.disableNodes=function(e){c(e)||this.doDisableAction(e)},t.prototype.enableNodes=function(e){c(e)||this.doEnableAction(e)},t.prototype.ensureVisible=function(e){var r=[];if(this.dataType==1)for(var n=this.getTreeData(e);n.length!=0&&!c(n[0][this.fields.parentID]);)r.push(n[0][this.fields.parentID].toString()),n=this.getTreeData(n[0][this.fields.parentID].toString());else this.dataType==2&&(r=this.getHierarchicalParentId(e,this.treeData,r));this.expandAll(r.reverse());var s=this.getElement(e);if(!c(s)){if(typeof e=="object"){var a=this.parents(s,"."+ue);this.expandAll(a)}setTimeout(function(){s.scrollIntoView({behavior:"smooth"})},450)}},t.prototype.expandAll=function(e,r,n){c(e)?r>0?this.expandByLevel(q("."+Ae,this.element),r,n):this.expandAllNodes(n):this.doGivenAction(e,Fe,!0)},t.prototype.getAllCheckedNodes=function(){var e=this.checkedNodes;return e},t.prototype.getDisabledNodes=function(){var e=this.disableNode;return e},t.prototype.getNode=function(e){var r=this.getElement(e);return this.getNodeData(r,!0)},t.prototype.getTreeData=function(e){var r=this.getId(e);if(this.updatePersistProp(),c(r))return this.treeData;var n=this.getNodeObject(r);return c(n)?[]:[n]},t.prototype.moveNodes=function(e,r,n,s){var a=this.getElement(r),l=[];if(!c(a)){for(var h=0;h<e.length;h++){var u=this.getElement(e[h]);l.push(this.getNode(u)),!(c(u)||a.isSameNode(u)||this.isDescendant(u,a))&&(this.preventExpand=s,this.dropAsChildNode(u,a,this,n))}this.fields.dataSource instanceof V||(this.preventExpand=!1),this.triggerEvent("moveNodes",l)}},t.prototype.refreshNode=function(e,r){if(!(c(e)||c(r))){var n,s=!1;if(this.dataType==1&&r.length>1)s=!0;else if(this.dataType==2&&r.length===1){var a=N(this.fields.child.toString(),r[0]);c(a)||(s=!0)}var l=this.getElement(e);n=l?l.getAttribute("data-uid"):e?e.toString():null,this.refreshData=this.getNodeObject(n),r=JSON.parse(JSON.stringify(r));var h,u;if(this.dataType==1&&s){for(var p=0;p<r.length;p++)if(c(r[p][this.fields.parentID])){u=r[p],r.splice(p,1);break}h=_({},this.refreshData,u)}else h=_({},this.refreshData,r[0]);if(c(l)){this.updatePosition(n,h,s,r);return}this.isRefreshed=!0;var d=parseFloat(l.getAttribute("aria-level")),f=He.createListItemFromJson(this.createElement,[h],this.listBaseOption,d),g=q("."+Ae,l),v=N(this.fields.child.toString(),h);if(s&&g||s&&!c(v)){var m=l.parentElement,y=Array.prototype.indexOf.call(m.childNodes,l);Se(l),m.insertBefore(f[0],m.childNodes[y]),this.updatePosition(n,h,s,r),s&&g&&this.expandAll([n])}else{var I=q("."+tt,l),S=q("."+tt,f[0]),R=q("div."+je,I),L=q("div."+je,S);R&&L&&(L.classList.contains(Fe)&&R.classList.contains(et)?(F([L],Fe),T([L],et)):L.classList.contains(et)&&R.classList.contains(Fe)?(F([L],et),T([L],Fe)):R.classList.contains("interaction")&&T([L],"interaction")),Se(I);var P=q("."+ui,l);P.parentNode.insertBefore(S,P.nextSibling),this.updatePosition(n,h,s,r)}if(l=this.getElement(e),h[this.fields.tooltip]&&l.setAttribute("title",h[this.fields.tooltip]),h.hasOwnProperty(this.fields.htmlAttributes)&&h[this.fields.htmlAttributes]){var J={};ei(J,h[this.fields.htmlAttributes]),J.class?(T([l],J.class.split(" ")),delete J.class):Ie(l,J)}this.selectedNodes.indexOf(n)!==-1&&(l.setAttribute("aria-selected","true"),T([l],Ct)),this.isRefreshed=!1,this.triggerEvent("refreshNode",[this.getNode(l)])}},t.prototype.removeNodes=function(e){c(e)||(this.fields.dataSource instanceof V&&!this.isOffline?this.crudOperation("delete",e):this.deleteSuccess(e))},t.prototype.updateNode=function(e,r){var n=this;if(!(c(e)||c(r)||!this.allowEditing)){var s=this.getElement(e);if(!c(s)){var a=q("."+Oi,s);this.updateOldText(s);var l=this.getEditEvent(s,null,null);this.trigger("nodeEditing",l,function(h){h.cancel||(n.fields.dataSource instanceof V&&!n.isOffline?n.crudOperation("update",null,e,r,null,null,!1):n.appendNewText(s,a,r,!1))})}}},t.prototype.uncheckAll=function(e){this.showCheckBox&&this.doCheckBoxAction(e,!1)};var i;return ne([C(!1)],t.prototype,"allowDragAndDrop",void 0),ne([C(!1)],t.prototype,"allowEditing",void 0),ne([C(!1)],t.prototype,"allowMultiSelection",void 0),ne([C(!1)],t.prototype,"allowTextWrap",void 0),ne([Je({},jc)],t.prototype,"animation",void 0),ne([C()],t.prototype,"checkedNodes",void 0),ne([C("")],t.prototype,"cssClass",void 0),ne([C(!1)],t.prototype,"disabled",void 0),ne([C(null)],t.prototype,"dragArea",void 0),ne([C(!1)],t.prototype,"enableHtmlSanitizer",void 0),ne([C(!1)],t.prototype,"enablePersistence",void 0),ne([C()],t.prototype,"expandedNodes",void 0),ne([C("Auto")],t.prototype,"expandOn",void 0),ne([Je({},_c)],t.prototype,"fields",void 0),ne([C(!0)],t.prototype,"fullRowSelect",void 0),ne([C(!0)],t.prototype,"loadOnDemand",void 0),ne([C()],t.prototype,"locale",void 0),ne([C()],t.prototype,"nodeTemplate",void 0),ne([C()],t.prototype,"selectedNodes",void 0),ne([C("None")],t.prototype,"sortOrder",void 0),ne([C(!1)],t.prototype,"showCheckBox",void 0),ne([C(!0)],t.prototype,"autoCheck",void 0),ne([C(!1)],t.prototype,"fullRowNavigable",void 0),ne([k()],t.prototype,"actionFailure",void 0),ne([k()],t.prototype,"created",void 0),ne([k()],t.prototype,"dataBound",void 0),ne([k()],t.prototype,"dataSourceChanged",void 0),ne([k()],t.prototype,"drawNode",void 0),ne([k()],t.prototype,"destroyed",void 0),ne([k()],t.prototype,"keyPress",void 0),ne([k()],t.prototype,"nodeChecked",void 0),ne([k()],t.prototype,"nodeChecking",void 0),ne([k()],t.prototype,"nodeClicked",void 0),ne([k()],t.prototype,"nodeCollapsed",void 0),ne([k()],t.prototype,"nodeCollapsing",void 0),ne([k()],t.prototype,"nodeDragging",void 0),ne([k()],t.prototype,"nodeDragStart",void 0),ne([k()],t.prototype,"nodeDragStop",void 0),ne([k()],t.prototype,"nodeDropped",void 0),ne([k()],t.prototype,"nodeEdited",void 0),ne([k()],t.prototype,"nodeEditing",void 0),ne([k()],t.prototype,"nodeExpanded",void 0),ne([k()],t.prototype,"nodeExpanding",void 0),ne([k()],t.prototype,"nodeSelected",void 0),ne([k()],t.prototype,"nodeSelecting",void 0),t=i=ne([si],t),t}(Kt),Qc=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Pl=function(o){Qc(t,o);function t(i){var e=o.call(this,i)||this;return e.initRenderCalled=!1,e.checkInjectedModules=!0,e.statelessTemplateProps=["headerTemplate","valueTemplate","itemTemplate"],e.templateProps=null,e.immediateRender=!1,e.portals=[],e}return t.prototype.render=function(){if((this.element&&!this.initRenderCalled||this.refreshing)&&!this.isReactForeceUpdate)o.prototype.render.call(this),this.initRenderCalled=!0;else return Xe.createElement(Xe.Fragment,null,[].concat(Xe.createElement("input",this.getDefaultAttributes()),this.portals))},t}(Oc);Fr(Pl,[Lr,Xe.Component]);var Yc=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Bl=function(o){Yc(t,o);function t(i){var e=o.call(this,i)||this;return e.initRenderCalled=!1,e.checkInjectedModules=!0,e.statelessTemplateProps=null,e.templateProps=null,e.immediateRender=!1,e.portals=[],e}return t.prototype.render=function(){if((this.element&&!this.initRenderCalled||this.refreshing)&&!this.isReactForeceUpdate)o.prototype.render.call(this),this.initRenderCalled=!0;else return Xe.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals))},t}(Kc);Fr(Bl,[Lr,Xe.Component]);var zl=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),ds=function(o){zl(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.moduleName="column",t.complexTemplate={"filter.itemTemplate":"filter.itemTemplate"},t}(rl),Xc=function(o){zl(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.propertyName="columns",t.moduleName="columns",t}(rl),Or=function(){function o(t){this.intl=new Cr,c(t)||(this.intl.culture=t)}return o.prototype.getFormatFunction=function(t){return t.type?this.intl.getDateFormat(t):this.intl.getNumberFormat(t)},o.prototype.getParserFunction=function(t){return t.type?this.intl.getDateParser(t):this.intl.getNumberParser(t)},o.prototype.fromView=function(t,i,e){return(e==="date"||e==="datetime"||e==="number")&&!c(i)?i(t):t},o.prototype.toView=function(t,i){var e=t;return!c(i)&&!c(t)&&(e=i(t)),e},o.prototype.setCulture=function(t){c(t)||Rh(t)},o}(),Hl=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),on=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},ct=function(){function o(t,i){var e=this;this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return e.editTemplateFn},this.getFilterTemplate=function(){return e.filterTemplateFn},ei(this,t),this.parent=i,this.type==="none"?this.type=null:this.type&&(this.type=typeof this.type=="string"?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),c(this.uid)&&(this.uid=Ai("grid-column"));var r=new Or;if(t.format&&(t.format.skeleton||t.format.format&&typeof t.format.format=="string")&&(this.setFormatter(r.getFormatFunction(_({},t.format))),this.setParser(r.getParserFunction(t.format))),this.toJSON=function(){for(var s={},a=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],l=Object.keys(e),h=0;h<l.length;h++)if(l[parseInt(h.toString(),10)]==="columns"){s[l[parseInt(h.toString(),10)]]=[];for(var u=0;u<e[l[parseInt(h.toString(),10)]].length;u++)s[l[parseInt(h.toString(),10)]].push(e[l[parseInt(h.toString(),10)]][parseInt(u.toString(),10)].toJSON())}else a.indexOf(l[parseInt(h.toString(),10)])<0&&(s[l[parseInt(h.toString(),10)]]=e[l[parseInt(h.toString(),10)]]);return s},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(function(s){return s.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=nt(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=nt(this.headerTemplate)),!c(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=nt(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=nt(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=nt(this.filterTemplate)),this.isForeignColumn()&&(c(this.editType)||this.editType==="dropdownedit"||this.editType==="defaultedit")&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=_({dataSource:this.dataSource,query:new se,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var n=this.sortComparer;this.sortComparer=function(s,a,l,h){if(typeof n=="string"&&(n=mi(n,window)),e.sortDirection==="Descending"){var u=s;s=a,a=u;var p=l;l=h,h=p}return n(s,a,l,h)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(s,a){return s=mi(e.foreignKeyValue,nr(e,{},s)[0]),a=mi(e.foreignKeyValue,nr(e,{},a)[0]),e.sortDirection==="Descending"?A.fnDescending(s,a):A.fnAscending(s,a)})}return o.prototype.getSortDirection=function(){return this.sortDirection},o.prototype.setSortDirection=function(t){this.sortDirection=t},o.prototype.getFreezeTableName=function(){return this.freezeTable},o.prototype.setProperties=function(t){for(var i=Object.keys(t),e=0;e<i.length;e++)this[i[parseInt(e.toString(),10)]]=t[i[parseInt(e.toString(),10)]],this.parent&&this.parent.isReact&&(i[parseInt(e.toString(),10)]==="template"?(this.templateFn=nt(t[i[parseInt(e.toString(),10)]]),this.parent.refreshReactColumnTemplateByUid(this.uid,!0)):i[parseInt(e.toString(),10)]==="headerTemplate"?(this.headerTemplateFn=nt(t[i[parseInt(e.toString(),10)]]),this.parent.refreshReactHeaderTemplateByUid(this.uid)):i[parseInt(e.toString(),10)]==="editTemplate"&&(this.editTemplateFn=nt(t[i[parseInt(e.toString(),10)]])))},o.prototype.isForeignColumn=function(){return!!(this.dataSource&&this.foreignKeyValue)},o.prototype.getFormatter=function(){return this.formatFn},o.prototype.setFormatter=function(t){this.formatFn=t},o.prototype.getParser=function(){return this.parserFn},o.prototype.setParser=function(t){this.parserFn=t},o.prototype.getColumnTemplate=function(){return this.templateFn},o.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},o.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},o.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},o}();(function(){function o(){}return on([C()],o.prototype,"title",void 0),on([C()],o.prototype,"type",void 0),on([C()],o.prototype,"buttonOption",void 0),o})();var Jc=function(o){Hl(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return on([C(null)],t.prototype,"columns",void 0),t}(ct);(function(o){Hl(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t})(Jc);var Ds="load",bn="rowDataBound",Ls="queryCellInfo",Fs="headerCellInfo",ri="actionBegin",wt="actionComplete",$c="actionFailure",Di="dataBound",fs="rowSelecting",gs="rowSelected",wa="rowDeselecting",Ia="rowDeselected",dr="cellSelecting",Xr="cellSelected",Ea="cellDeselecting",Ra="cellDeselected",vs="columnSelecting",ms="columnSelected",Zc="columnDeselecting",ep="columnDeselected",tp="columnDragStart",ip="columnDrag",rp="columnDrop",Aa="beforePrint",Ta="printComplete",np="detailDataBound",sp="batchAdd",ql="batchCancel",op="batchDelete",ap="recordDoubleClick",lp="recordClick",hp="beforeDataBound",ka="beforeOpenAdaptiveDialog",up="resizeStop",cp="checkBoxChange",pp="beforeCopy",dp="beforePaste",fp="beforeAutoFill",Da="filterchoicerequest",gp="filterAfterOpen",vp="filterBeforeOpen",mp="filterSearchBegin",Vl="initial-load",vo="initial-end",Rr="data-ready",st="content-ready",lt="ui-update",ni="on-empty",Bt="inbound-model-changed",xn="model-changed",Wl="colgroup-refresh",gi="header-refreshed",La="searching-complete",yp="grouping-complete",Fa="group-aggregates",Ms="refresh-footer-rendered",Cp="refresh-aggregate-cell",Sp="rowselected",bp="cellselected",Os="beforecellfocused",Ns="cellfocused",Zi="key-pressed",rr="click",yi="destroy",wn="column-visible-changed",Ma="scroll",Gl="column-width-changed",Ul="column-position-changed",Oa="rows-added",Ps="rows-removed",xp="column-drag-stop",wp="header-drop",Bs="datasource-modified",Ip="refresh-complete",Ep="dblclick",Rp="toolbar-refresh",Ap="bulk-save",Ar="auto-col",zs="tooltip-destroy",Hs="update-data",Tp="prevent-batch",kp="crud-Action",Na="add-delete-Action",Dp="double-tap",an="freezerender",Lp="filterDialogCreated",Fp="filter-menu-close",Mp="initForeignKeyColumn",Pa="getForeignKeyData",ln="generateQuery",_l="showEmptyGrid",jl="foreignKeyData",qs="dataStateChange",Ba="dataSourceChanged",Op="rtl-updated",Kl="beforeFragAppend",za="textWrapRefresh",Ha="recordAdded",Vs="cancel-Begin",Np="editNextValCell",qa="hierarchyprint",Pp="expandchildgrid",Bp="printGrid-Init",zp="row-position-changed",Ql="partial-refresh",Hp="select-virtual-Row",Ws="columns-prepared",qp="cbox-filter-begin",Va="cbox-filter-complete",Wa="filter-Prevent",Vp="filter-cbox-value",Wp="restore-Focus",Yl="detail-indentcell-info",Gp="virtaul-cell-focus",Up="virtual-scroll-edit",_p="edit-reset",jp="get-virtual-data",Kp="refresh-infinite-mode-blocks",Qp="reset-infinite-blocks",Yp="infinite-scroll-handler",Xp="infinite-page-query",Jp="infinite-show-hide",$p="append-infinite-content",Zp="remove-infinite-rows",ed="set-infinite-cache",Ga="infinite-edit-handler",td="close-filter-dialog",id="reset-columns",rd="group-cache",nd="lazy-load-scroll-handler",Ua="group-collapse",sd="beforeCheckboxRenderer",ys="refreshResizeHandlers",od="set-freeze-selection",Gs="before-refresh-on-data-change",ad="immutable-batch-cancel",ld="check-scroll-reset",hd="prevent-frozen-scroll-refresh",ud="refresh-infinite-current-view-data",Xl="filter-dialog-close",Us="refresh-cutsom-filter-ok-button",cd="refresh-cutsom-filter-clear-button",pd="render-responsive-cmenu",dd="filter-cmenu-select",fd="custom-filter-close",gd="set-fullscreen-dialog",Jl="refresh-Expand-and-Collapse",vd="row-mode-change",hn="enter-key-handler",md="set-virtual-page-query",yd="close-edit",Cd="reset-virtual-focus",Sd="before-checkbox-renderer-query",bd="destroy-child-grid",xd="sticky-scroll-complete",_a="refresh-infinite-persist-selection",wd="after-filter-column-menu-close",Id="beforeCheckboxfilterRenderer",Ed="commandColumnDestroy",Rd="cancelcnfrmDlg",_s="refresh-Frozen-Position",Ad="refresh-Resize-Position",js="refresh-Split-Frozen-Column",Jr="render-Responsive-Change-Action",Cs="render-Responsive-Column-Chooser-Div",le;(function(o){o[o.Data=0]="Data",o[o.Header=1]="Header",o[o.Summary=2]="Summary",o[o.GroupSummary=3]="GroupSummary",o[o.CaptionSummary=4]="CaptionSummary",o[o.Filter=5]="Filter",o[o.Indent=6]="Indent",o[o.GroupCaption=7]="GroupCaption",o[o.GroupCaptionEmpty=8]="GroupCaptionEmpty",o[o.Expand=9]="Expand",o[o.HeaderIndent=10]="HeaderIndent",o[o.StackedHeader=11]="StackedHeader",o[o.DetailHeader=12]="DetailHeader",o[o.DetailExpand=13]="DetailExpand",o[o.CommandColumn=14]="CommandColumn",o[o.DetailFooterIntent=15]="DetailFooterIntent",o[o.RowDragIcon=16]="RowDragIcon",o[o.RowDragHIcon=17]="RowDragHIcon"})(le||(le={}));var At;(function(o){o[o.Header=0]="Header",o[o.Content=1]="Content",o[o.Summary=2]="Summary"})(At||(At={}));var ja;(function(o){o[o.Add=0]="Add",o[o.Edit=1]="Edit",o[o.Update=2]="Update",o[o.Delete=3]="Delete",o[o.Cancel=4]="Cancel",o[o.Print=5]="Print",o[o.Search=6]="Search",o[o.ColumnChooser=7]="ColumnChooser",o[o.PdfExport=8]="PdfExport",o[o.ExcelExport=9]="ExcelExport",o[o.CsvExport=10]="CsvExport",o[o.WordExport=11]="WordExport"})(ja||(ja={}));var de;(function(o){o[o.isEdit=0]="isEdit",o[o.isAdd=1]="isAdd",o[o.isSort=2]="isSort",o[o.isFilter=3]="isFilter",o[o.isColMenu=4]="isColMenu",o[o.isColumnChooser=5]="isColumnChooser"})(de||(de={}));var Ka;(function(o){o[o.isInitial=0]="isInitial",o[o.isSearch=1]="isSearch"})(Ka||(Ka={}));var Td=function(){function o(t,i){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=t,this.serviceLocator=i,this.initDataManager(),!(this.parent.isDestroyed||this.getModuleName()==="foreignKey")&&(this.parent.on(Oa,this.addRows,this),this.parent.on(zp,this.reorderRows,this),this.parent.on(Ps,this.removeRows,this),this.parent.on(Bs,this.initDataManager,this),this.parent.on(yi,this.destroy,this),this.parent.on(Hs,this.crudActions,this),this.parent.on(Na,this.getData,this),this.parent.on(Ar,this.refreshFilteredCols,this),this.parent.on(Ws,this.refreshFilteredCols,this))}return o.prototype.reorderRows=function(t){this.dataManager.dataSource.json.splice(t.toIndex,0,this.dataManager.dataSource.json.splice(t.fromIndex,1)[0])},o.prototype.getModuleName=function(){return"data"},o.prototype.initDataManager=function(){var t=this.parent;this.dataManager=t.dataSource instanceof V?t.dataSource:c(t.dataSource)?new V:new V(t.dataSource),t.isAngular&&!(t.query instanceof se)?t.setProperties({query:new se},!0):(this.isQueryInvokedFromData=!0,t.isVue?t.setProperties({query:t.query instanceof se?t.query:new se},!0):t.query=t.query instanceof se?t.query:new se)},o.prototype.generateQuery=function(t,i){var e=this.parent,r=e.getQuery().clone();if(this.parent.columnQueryMode==="ExcludeHidden")r.select(this.parent.getColumns().filter(function(l){return!(l.isPrimaryKey!==!0&&l.visible===!1||l.field===void 0)}).map(function(l){return l.field}));else if(this.parent.columnQueryMode==="Schema"){for(var n=[],s=this.parent.columns,a=0;a<s.length;a++)n.push(s[parseInt(a.toString(),10)].field);r.select(n)}return this.filterQuery(r),this.searchQuery(r),this.aggregateQuery(r),this.sortQuery(r),Qt(this.parent)?this.virtualGroupPageQuery(r):this.pageQuery(r,t),(c(i)||!i)&&this.groupQuery(r),r},o.prototype.aggregateQuery=function(t){for(var i=this.parent.aggregates,e=0;e<i.length;e++)for(var r=i[parseInt(e.toString(),10)],n=0;n<r.columns.length;n++)for(var s=r.columns[parseInt(n.toString(),10)],a=s.type instanceof Array?s.type:[s.type],l=0;l<a.length;l++)t.aggregate(a[parseInt(l.toString(),10)].toLowerCase(),s.field);return t},o.prototype.virtualGroupPageQuery=function(t){var i="fn";if(t.queries.length)for(var e=0;e<t.queries.length;e++)t.queries[parseInt(e.toString(),10)][""+i]==="onPage"&&t.queries.splice(e,1);return t},o.prototype.pageQuery=function(t,i){var e=this.parent,r="fn",n={query:t,skipPage:!1};if(e.notify(md,n),n.skipPage)return t;if((e.allowPaging||e.enableVirtualization||e.enableInfiniteScrolling)&&i!==!0){if(e.pageSettings.currentPage=Math.max(1,e.pageSettings.currentPage),e.pageSettings.pageCount<=0&&(e.pageSettings.pageCount=8),e.pageSettings.pageSize<=0&&(e.pageSettings.pageSize=12),t.queries.length)for(var s=0;s<t.queries.length;s++)t.queries[parseInt(s.toString(),10)][""+r]==="onPage"&&t.queries.splice(s,1);!c(e.infiniteScrollModule)&&e.enableInfiniteScrolling?this.parent.notify(Xp,t):t.page(e.pageSettings.currentPage,e.allowPaging&&e.pagerModule&&e.pagerModule.pagerObj.isAllPage&&!e.isManualRefresh&&!this.dataManager.dataSource.offline&&!(this.dataManager.adaptor instanceof Ol)?null:e.pageSettings.pageSize)}return t},o.prototype.groupQuery=function(t){var i=this.parent;if(i.allowGrouping&&i.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&t.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var e=i.groupSettings.columns,r=0,n=e.length;r<n;r++){var s=this.getColumnByField(e[parseInt(r.toString(),10)]);s||this.parent.log("initial_action",{moduleName:"group",columnName:e[parseInt(r.toString(),10)]});var a=s.enableGroupByFormat,l=s.format;a?t.group(e[parseInt(r.toString(),10)],this.formatGroupColumn.bind(this),l):t.group(e[parseInt(r.toString(),10)],null)}}return t},o.prototype.sortQuery=function(t){var i=this.parent;if((i.allowSorting||i.allowGrouping)&&i.sortSettings.columns.length){for(var e=i.sortSettings.columns,r=[],n=e.length-1;n>-1;n--){var s=this.getColumnByField(e[parseInt(n.toString(),10)].field);if(s)s.setSortDirection(e[parseInt(n.toString(),10)].direction);else return this.parent.log("initial_action",{moduleName:"sort",columnName:e[parseInt(n.toString(),10)].field}),t;var a=e[parseInt(n.toString(),10)].direction;s.sortComparer&&(this.parent.log("grid_sort_comparer"),a=this.isRemote()?e[parseInt(n.toString(),10)].direction:s.sortComparer.bind(s)),i.groupSettings.columns.indexOf(e[parseInt(n.toString(),10)].field)===-1?s.isForeignColumn()||s.sortComparer?t.sortByForeignKey(s.field,a,void 0,e[parseInt(n.toString(),10)].direction.toLowerCase()):t.sortBy(s.field,a):r.push({direction:a,field:s.field})}for(var n=0,l=r.length;n<l;n++)if(typeof r[parseInt(n.toString(),10)].direction=="string")t.sortBy(r[parseInt(n.toString(),10)].field,r[parseInt(n.toString(),10)].direction);else{var s=this.getColumnByField(r[parseInt(n.toString(),10)].field);t.sortByForeignKey(r[parseInt(n.toString(),10)].field,r[parseInt(n.toString(),10)].direction,void 0,s.getSortDirection().toLowerCase())}}return t},o.prototype.searchQuery=function(t,i,e){var r=this.parent.searchSettings,n=r.fields.length?r.fields:this.getSearchColumnFieldNames(),s=[],a=!1;if(this.parent.searchSettings.key.length){a=this.parent.getForeignKeyColumns().some(function(d){return n.indexOf(d.field)>-1});var l=e?i.dataSource.adaptor:this.dataManager.adaptor;if(a||l.getModuleName&&l.getModuleName()==="ODataV4Adaptor"){n=e?[i.foreignKeyValue]:n;for(var h=0;h<n.length;h++){var u=e?i:this.getColumnByField(n[parseInt(h.toString(),10)]);u.isForeignColumn()&&!e?s=this.fGeneratePredicate(u,s):s.push(new be(n[parseInt(h.toString(),10)],r.operator,r.key,r.ignoreCase,r.ignoreAccent))}var p=be.or(s);p.key=r.key,t.where(p)}else t.search(r.key,n,r.operator,r.ignoreCase,r.ignoreAccent)}return t},o.prototype.filterQuery=function(t,i,e){var r=this.parent,n=[],s=this.parent.getForeignKeyColumns(),a;if(r.allowFiltering&&r.filterSettings.columns.length){for(var l=i||r.filterSettings.columns,h={},u=0,p=r.getColumns();u<p.length;u++){var d=p[u];h[d.field]=d.filter.type?d.filter.type:r.filterSettings.type}for(var f=[],g=[],v=0,m=l;v<m.length;v++){var d=m[v],y=d.isForeignKey?r.getColumnByUid(d.uid):r.getColumnByField(d.field);c(d.type)&&y&&(y.type==="date"||y.type==="datetime"||y.type==="dateonly")&&(d.type=d.isForeignKey?r.getColumnByUid(d.uid).type:r.getColumnByField(d.field).type),d.isForeignKey?f.push(d):g.push(d)}if(g.length){for(var I=0,S=g.length;I<S;I++)g[parseInt(I.toString(),10)].uid=g[parseInt(I.toString(),10)].uid||this.parent.grabColumnByFieldFromAllCols(g[parseInt(I.toString(),10)].field,g[parseInt(I.toString(),10)].isForeignKey).uid;for(var R=el.getPredicate(g),L=0,P=Object.keys(R);L<P.length;L++){var J=P[L];n.push(R[""+J])}}if(f.length)for(var he=0,pe=f;he<pe.length;he++){var d=pe[he];d.uid=d.uid||this.parent.grabColumnByFieldFromAllCols(d.field,d.isForeignKey).uid;var Re=this.parent.grabColumnByUidFromAllCols(d.uid);if(Re||this.parent.log("initial_action",{moduleName:"filter",columnName:d.field}),Re.isForeignColumn()&&yo(d.field,s)&&!e)Re.columnData.length||(a=!0),n=this.fGeneratePredicate(Re,n);else for(var R=el.getPredicate(l),B=0,H=Object.keys(R);B<H.length;B++){var J=H[B];n.push(R[""+J])}}n.length&&!a?t.where(be.and(n)):this.parent.notify(_l,{})}return t},o.prototype.fGeneratePredicate=function(t,i){var e={};return t&&(this.parent.notify(ln,{predicate:e,column:t}),e.predicate.predicates.length&&i.push(e.predicate)),i},o.prototype.getData=function(t,i){var e=this;t===void 0&&(t={requestType:""});var r=this.getKey(t.foreignKeyData&&Object.keys(t.foreignKeyData).length?t.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource){var n=this.eventPromise(t,i,r);return n.promise}else{var s=void 0;switch(t.requestType){case"delete":i=i||this.generateQuery();var a=Object.keys(t.data).length;if(a===1)s=this.dataManager.remove(r,t.data[0],i.fromTable,i);else{var l={addedRecords:[],deletedRecords:[],changedRecords:[]};l.deletedRecords=t.data,s=this.dataManager.saveChanges(l,r,i.fromTable,i.requiresCount())}break;case"save":i=i||this.generateQuery(),t.index=c(t.index)?0:t.index,s=this.dataManager.insert(t.data,i.fromTable,i,t.index);break}var h="promise";return t[""+h]=s,s&&!Array.isArray(s)&&!s.hasOwnProperty("deletedRecords")?s.then(function(){return e.insert(i,t)}):this.insert(i,t)}},o.prototype.insert=function(t,i){return i.requestType==="save"&&this.parent.notify(Ha,i),this.executeQuery(t)},o.prototype.executeQuery=function(t){var i=this;if(this.dataManager.ready){var e=new xt,r=this.dataManager.ready;return r.then(function(){i.dataManager.executeQuery(t).then(function(n){e.resolve(n)})}).catch(function(n){e.reject(n)}),e.promise}else return this.dataManager.executeQuery(t)},o.prototype.formatGroupColumn=function(t,i){var e=this.serviceLocator,r=this.getColumnByField(i),n=t;r.type||(r.type=n.getDay?n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0||n.getMilliseconds()>0?"datetime":"date":typeof t),c(r.getFormatter())&&Ys(e,r);var s=Or.prototype.toView(t,r.getFormatter());return s},o.prototype.crudActions=function(t){var i=this.generateQuery(),e=null,r="promise",n=this.getKey(t.foreignKeyData&&Object.keys(t.foreignKeyData).length?t.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(t,i,n),t.requestType){case"save":e=this.dataManager.update(n,t.data,i.fromTable,i,t.previousData);break}t[""+r]=e||t[""+r],this.parent.notify(kp,t)},o.prototype.saveChanges=function(t,i,e,r){if(r===void 0&&(r=this.generateQuery()),r.requiresCount(),"result"in this.parent.dataSource){var n=new xt,s={requestType:"batchsave",changes:t,key:i,query:r,endEdit:n.resolve};return this.setState({isPending:!0,resolver:n.resolve}),this.parent.trigger(Ba,s),n.promise}else{var a=this.dataManager.saveChanges(t,i,r.fromTable,r,e);return a}},o.prototype.getKey=function(t){if(t&&t.length)return t[0]},o.prototype.isRemote=function(){return this.dataManager.dataSource.offline!==!0&&this.dataManager.dataSource.url!==void 0&&this.dataManager.dataSource.url!==""},o.prototype.addRows=function(t){for(var i=t.records.length;i>0;i--)this.parent.dataSource instanceof V&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json.splice(t.toIndex,0,t.records[i-1]):!this.parent.getDataModule().isRemote()&&!c(this.parent.dataSource)&&!this.parent.dataSource.result&&this.parent.dataSource.splice(t.toIndex,0,t.records[i-1])},o.prototype.removeRows=function(t){var i=this.dataManager.dataSource.json;this.parent.dataSource instanceof V&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json=i.filter(function(e){return t.records.indexOf(e)===-1}):!this.parent.getDataModule().isRemote()&&!c(this.parent.dataSource)&&!this.parent.dataSource.result&&(this.parent.dataSource=i.filter(function(e){return t.records.indexOf(e)===-1}))},o.prototype.getColumnByField=function(t){var i;return this.parent.columnModel.some(function(e){return i=e,e.field===t})&&i},o.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(Oa,this.addRows),this.parent.off(Ps,this.removeRows),this.parent.off(Bs,this.initDataManager),this.parent.off(yi,this.destroy),this.parent.off(Hs,this.crudActions),this.parent.off(Na,this.getData),this.parent.off(Ar,this.refreshFilteredCols),this.parent.off(Ws,this.refreshFilteredCols))},o.prototype.getState=function(){return this.dataState},o.prototype.setState=function(t){return this.dataState=t},o.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},o.prototype.setForeignKeyDataState=function(t){this.foreignKeyDataState=t},o.prototype.getStateEventArgument=function(t){var i=new Dt,e=new V({url:"",adaptor:new Dt}),r=i.processQuery(e,t),n=JSON.parse(r.data);return _(n,r.pvtData)},o.prototype.eventPromise=function(t,i,e){var r=this,n=t,s=this.getStateEventArgument(i),a=new xt,l=new xt;if((t.requestType!==void 0||this.parent.groupSettings.disablePageWiseAggregates&&i.queries.some(function(p){return p.fn==="onGroup"}))&&this.dataState.isDataChanged!==!1)if(s.action=t,t.requestType==="save"||t.requestType==="delete"){var h=t;h.key=e;var u="promise";h[""+u]=l.promise,h.state=s,this.setState({isPending:!0,resolver:l.resolve}),n.endEdit=l.resolve,n.cancelEdit=l.reject,this.parent.trigger(Ba,h),l.promise.then(function(){r.setState({isPending:!0,resolver:a.resolve,group:s.group,aggregates:s.aggregates}),h.requestType==="save"&&r.parent.notify(Ha,h),r.parent.trigger(qs,s)}).catch(function(){})}else this.setState({isPending:!0,resolver:a.resolve,group:s.group,aggregates:s.aggregates}),this.parent.trigger(qs,s);else this.setState({}),a.resolve(this.parent.dataSource);return a},o.prototype.getSearchColumnFieldNames=function(){for(var t=[],i=this.parent.getColumns(),e=0,r=i;e<r.length;e++){var n=r[e];n.allowSearching&&!c(n.field)&&t.push(n.field)}return t},o.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&Qf(this.parent,this.parent.filterSettings.columns)},o}(),sr=function(){function o(t,i){ei(this,t),this.parent=i}return o.prototype.clone=function(){var t=new o({});return ei(t,this),t.cells=this.cells.map(function(i){return i.clone()}),t},o.prototype.setRowValue=function(t){if(this.parent){var i=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(i,t)}},o.prototype.setCellValue=function(t,i){if(this.parent){var e=this.data[""+t].toString()!==i.toString();if(e){var r=this.parent.getPrimaryKeyFieldNames()[0],n=this.data[""+r];this.parent.setCellValue(n,t,i),this.makechanges(r,this.data)}else return}},o.prototype.makechanges=function(t,i){if(this.parent){var e=this.parent,r=e.getDataModule().dataManager;r.update(t,i)}},o}(),Tr=function(){function o(t){this.isSpanned=!1,this.isRowSpanned=!1,ei(this,t)}return o.prototype.clone=function(){var t=new o({});return ei(t,this),t},o}(),$l=function(){function o(t,i){this.serviceLocator=t,this.parent=i}return o.prototype.render=function(t,i,e,r){var n=this.serviceLocator.getService("cellRendererFactory"),s=n.getCellRenderer(i.cells[parseInt(e.toString(),10)].cellType||le.Data),a=i.cells[parseInt(e.toString(),10)].cellSpan?i.cells[parseInt(e.toString(),10)].cellSpan:t.colSpan+e<=i.cells.length?t.colSpan:i.cells.length-e,l=t.rowSpan,h=0,u;if(i.index>0){var p=this.parent.getRowsObject(),d=this.parent.groupSettings.columns.length>0&&!p[i.index-1].isDataRow?p[i.index].cells:p[i.index-1].cells,f=i.cells[parseInt(e.toString(),10)],g="uid";u=d.filter(function(y){return y.column.uid===f.column[""+g]})[0]}for(var v=u&&u.colSpanRange>1&&u.rowSpanRange>1?u.colSpanRange:a,m=e+1;m<e+v&&m<i.cells.length;m++)i.cells[parseInt(m.toString(),10)].visible===!1?h++:i.cells[parseInt(m.toString(),10)].isSpanned=!0;if(h>0){for(var m=e+a;m<e+a+h&&m<i.cells.length;m++)i.cells[parseInt(m.toString(),10)].isSpanned=!0;e+a+h>=i.cells.length&&(a-=e+a+h-i.cells.length)}return i.cells[parseInt(e.toString(),10)].cellSpan&&(i.data[t.column.field]=i.cells[parseInt(e.toString(),10)].spanText,r=s.render(i.cells[parseInt(e.toString(),10)],i.data,{index:c(i.index)?"":i.index.toString()})),a>1&&Ie(r,{colSpan:a.toString(),"aria-colSpan":a.toString()}),l>1&&(Ie(r,{rowspan:l.toString(),"aria-rowspan":l.toString()}),i.cells[parseInt(e.toString(),10)].isRowSpanned=!0,i.cells[parseInt(e.toString(),10)].rowSpanRange=Number(l),a>1&&(i.cells[parseInt(e.toString(),10)].colSpanRange=Number(a))),i.index>0&&u.rowSpanRange>1&&(i.cells[parseInt(e.toString(),10)].isSpanned=!0,i.cells[parseInt(e.toString(),10)].rowSpanRange=Number(u.rowSpanRange-1),i.cells[parseInt(e.toString(),10)].colSpanRange=u.rowSpanRange>0?u.colSpanRange:1),this.parent.enableColumnVirtualization&&!i.cells[parseInt(e.toString(),10)].cellSpan&&!this.containsKey(t.column.field,t.data[t.column.field])&&this.backupMergeCells(t.column.field,t.data[t.column.field],t.colSpan),r},o.prototype.backupMergeCells=function(t,i,e){this.setMergeCells(this.generteKey(t,i),e)},o.prototype.generteKey=function(t,i){return t+"__"+i.toString()},o.prototype.splitKey=function(t){return t.split("__")},o.prototype.containsKey=function(t,i){return this.getMergeCells().hasOwnProperty(this.generteKey(t,i))},o.prototype.getMergeCells=function(){return this.parent.mergeCells},o.prototype.setMergeCells=function(t,i){this.parent.mergeCells[""+t]=i},o.prototype.updateVirtualCells=function(t){for(var i=this.getMergeCells(),e=0,r=Object.keys(i);e<r.length;e++){var n=r[e],s=i[""+n],a=this.splitKey(n),l=this.getIndexFromAllColumns(a[0]),h=this.parent.getColumnIndexesInView(),u=s-(h[0]-l);if(l<h[0]&&u>1)for(var p=0,d=t;p<d.length;p++){var f=d[p];if(f.data[a[0]].toString()===a[1].toString()){f.cells[0].cellSpan=u,f.cells[0].spanText=a[1];break}}}return t},o.prototype.getIndexFromAllColumns=function(t){var i=Gi(this.parent.getVisibleColumns(),function(e,r){if(e.field===t)return r})[0];return i},o}(),Me="e-rowcell",Tt="e-gridheader",vi="e-gridcontent",un="e-gridfooter",gt="e-headercontent",$r="e-movablecontent",In="e-movableheader",dt="e-content",Zt="e-table",ft="e-row",er="e-gridchkbox",cn="e-editedrow",vr="e-addedrow",kd="changedRecords",En="addedRecords",Zl="deletedRecords",Ut="Left-Right",Dd="frozen-right",rt="data-colindex",Qa="aria-colindex",Ke="data-rowindex",mo="aria-rowindex",Le="tbody",Ht="colgroup",Ya="initialFrozenColumnIndex",kr=function(){function o(t,i,e){this.isSpan=!1,this.cellType=i,this.serviceLocator=t,this.parent=e,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return o.prototype.render=function(t,i,e,r,n){return this.refreshRow(t,i,e,r,n)},o.prototype.refresh=function(t,i,e,r,n){var s=this;e&&(t.data=Co({},t.changes),this.refreshMergeCells(t));var a=this.parent.element.querySelector("[data-uid="+t.uid+"]"),l=this.refreshRow(t,i,r,n,null,e),h=[].slice.call(l.cells),u=[].slice.call(a.querySelectorAll(".e-templatecell"));if(this.parent.isReact&&u.length)for(var p=function(R){if(R.template)return setTimeout(function(){s.parent.refreshReactColumnTemplateByUid(R.uid,!0)},0),"break"},d=0,f=i;d<f.length;d++){var g=f[d],v=p(g);if(v==="break")break}var m=[].slice.call(l.attributes);m.map(function(R){a.setAttribute(R.name,R.value)}),a.innerHTML="";for(var y=0,I=h;y<I.length;y++){var S=I[y];a.appendChild(S)}},o.prototype.refreshRow=function(t,i,e,r,n,s){var a=c(n)?this.element.cloneNode():n,l={data:t.data},h={data:t.data},u=this.parent.getColumns().filter(function(oe){return oe.type==="checkbox"&&oe.field})[0],p=!1;u&&(p=mi(u.field,l.data));var d=this.parent.getSelectedRowIndexes();t.isDataRow&&(t.isSelected=d.indexOf(t.index)>-1||p),t.isDataRow&&this.parent.isCheckBoxSelection&&this.parent.checkAllRows==="Check"&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(t.isSelected=!0,d.indexOf(t.index)===-1&&d.push(t.index)),this.buildAttributeFromRow(a,t),Ie(a,_({},e,{})),$t(a,t.attributes);for(var f=this.serviceLocator.getService("cellRendererFactory"),g=function(oe,ie){var ve=t.cells[parseInt(oe.toString(),10)];ve.isSelected=t.isSelected,ve.isColumnSelected=ve.column.isSelected;var ae=f.getCellRenderer(t.cells[parseInt(oe.toString(),10)].cellType||le.Data),ze={index:c(t.index)?"":t.index.toString()};t.isExpand&&t.cells[parseInt(oe.toString(),10)].cellType===le.DetailExpand&&(ze.class=v.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var We=ae.render(t.cells[parseInt(oe.toString(),10)],t.data,ze,t.isExpand,s);if(t.cells[parseInt(oe.toString(),10)].cellType!==le.Filter){if(t.cells[parseInt(oe.toString(),10)].cellType===le.Data||t.cells[parseInt(oe.toString(),10)].cellType===le.CommandColumn){var fe=v.parent.parentDetails&&v.parent.parentDetails.parentInstObj&&v.parent.parentDetails.parentInstObj.isReact;if((v.parent.isReact&&v.parent.requireTemplateRef||fe&&v.parent.parentDetails.parentInstObj.requireTemplateRef)&&ve.isTemplate){var x=v;x.parent.renderTemplates(function(){if(typeof ve.column.template!="string"){var Qe=We.getAttribute("aria-label");We.setAttribute("aria-label",We.innerText+Qe)}x.parent.trigger(Ls,_(h,{cell:We,column:ve.column,colSpan:1,rowSpan:1,foreignKeyData:t.cells[parseInt(oe.toString(),10)].foreignKeyData,requestType:x.parent.requestTypeAction}))})}else v.parent.trigger(Ls,_(h,{cell:We,column:ve.column,colSpan:1,rowSpan:1,foreignKeyData:t.cells[parseInt(oe.toString(),10)].foreignKeyData,requestType:v.parent.requestTypeAction}));var E=!1;if(t.index>0&&v.isSpan){var z=v.parent.getRowsObject(),K=v.parent.groupSettings.columns.length>0&&!z[t.index-1].isDataRow?z[t.index].cells:z[t.index-1].cells,Y="uid",X=K.filter(function(Qe){return Qe.column.uid===t.cells[parseInt(oe.toString(),10)].column[""+Y]})[0];E=X.isRowSpanned?X.isRowSpanned:X.rowSpanRange>1}if(h.colSpan>1||t.cells[parseInt(oe.toString(),10)].cellSpan>1||h.rowSpan>1||E){v.isSpan=!0;var De=new $l(v.serviceLocator,v.parent);We=De.render(h,t,oe,We)}}t.cells[parseInt(oe.toString(),10)].isSpanned||a.appendChild(We)}},v=this,m=0,y=t.cells.length;m<y;m++)g(m);var I=0;if(this.parent.groupSettings.columns.length&&this.parent.getFrozenLeftColumnsCount()){if(a.classList.contains("e-groupcaptionrow")){var S=[].slice.call(a.querySelectorAll(".e-leftfreeze,.e-unfreeze,.e-rightfreeze,.e-fixedfreeze,.e-freezerightborder,.e-freezeleftborder"));if(S.length&&F(S,["e-leftfreeze","e-unfreeze","e-rightfreeze","e-fixedfreeze","e-freezerightborder","e-freezeleftborder"]),a.querySelector(".e-summarycell"))Yf(a,this.parent);else{for(var R=0;R<a.childNodes.length;R++){var L=a.childNodes[parseInt(R.toString(),10)];if(L.classList.add("e-leftfreeze"),vt(L,R*30,this.parent.enableRtl,"Left"),L.classList.contains("e-groupcaption")){var P=parseInt(L.getAttribute("colspan"),10),J=gh(this.parent,R);L.setAttribute("colspan",J.toString()),I=P-J}}if(I){var L=this.parent.createElement("TD",{className:"e-groupcaption",attrs:{colspan:I.toString(),id:this.parent.element.id+"captioncell",tabindex:"-1"}});a.appendChild(L)}}}if(a.querySelectorAll(".e-leftfreeze").length&&(a.querySelectorAll(".e-indentcell").length||a.querySelectorAll(".e-grouptopleftcell").length))for(var L=a.querySelectorAll(".e-indentcell, .e-grouptopleftcell"),m=0;m<L.length;m++)L[parseInt(m.toString(),10)].classList.add("e-leftfreeze"),vt(L[parseInt(m.toString(),10)],m*30,this.parent.enableRtl,"Left")}var he={row:a,rowHeight:this.parent.rowHeight};if(t.isDataRow){var pe=_(l,he);pe.isSelectable=!0;var Re=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,B=pe.row.querySelectorAll(".e-templatecell");if((this.parent.isReact&&this.parent.requireTemplateRef||Re&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&B.length){var H=this;H.parent.renderTemplates(function(){H.parent.trigger(bn,pe),pe.isSelectable||(t.isSelectable=pe.isSelectable,H.disableRowSelection(H,t,he,pe))})}else this.parent.trigger(bn,pe);t.isSelectable=pe.isSelectable;var O=this.parent.isRowDragable();if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var U=this.parent.getPrimaryKeyFieldNames()[0],re=t.data?t.data[""+U]:null,j=pe.isSelectable?this.parent.partialSelectedRecords:this.parent.disableSelectedRecords;j.some(function(oe){return oe[""+U]===re})||j.push(t.data)}if(pe.isSelectable||this.disableRowSelection(this,t,he,pe),this.parent.childGrid||O||this.parent.detailTemplate){var L=a.querySelectorAll(".e-rowcell:not(.e-hide)")[0];L&&L.classList.add("e-detailrowvisible")}}this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?a.style.height=l.rowHeight+"px":this.parent.rowHeight&&(a.querySelector(".e-headercell")||a.querySelector(".e-groupcaption"))&&(a.style.height=this.parent.rowHeight+"px"),t.cssClass&&a.classList.add(t.cssClass),t.lazyLoadCssClass&&a.classList.add(t.lazyLoadCssClass),this.parent.rowRenderingMode==="Vertical"&&this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Header"||this.parent.textWrapSettings.wrapMode==="Both")&&a.classList.add("e-verticalwrap");var W=this.parent.enableColumnVirtualization;if(!W&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(var m=0;m<this.parent.aggregates.length;m++){var G="properties",te="columns";if(this.parent.aggregates[parseInt(m.toString(),10)][""+G][""+te][0].footerTemplate){var me=[].slice.call(a.getElementsByClassName("e-summarycell"));if(me.length){var xe=me[me.length-1];T([xe],["e-lastsummarycell"]);var ye=me[0];T([ye],["e-firstsummarycell"])}}}return a},o.prototype.disableRowSelection=function(t,i,e,r){var n=this.parent.getSelectedRowIndexes();this.parent.selectionModule.isPartialSelection=!0,i.isSelected=!1;var s=n.indexOf(i.index);s>-1&&n.splice(s,1);for(var a=e.row.querySelectorAll(".e-rowcell.e-gridchkbox"),l=r.row.querySelector(".e-rowdragdrop"),h=t.parent.groupSettings.columns.length+(l||t.parent.isDetail()?1:0),u=0;u<a.length;u++)a[parseInt(u.toString(),10)].firstElementChild.classList.add("e-checkbox-disabled"),a[parseInt(u.toString(),10)].querySelector(".e-frame").classList.remove("e-check");if(i.cells.length)for(var u=h;u<i.cells.length;u++){var p=r.row.querySelector('.e-rowcell[data-colindex="'+i.cells[parseInt(u.toString(),10)].index+'"]');p&&F([p],["e-selectionbackground","e-active"])}l&&F([l],["e-selectionbackground","e-active"])},o.prototype.refreshMergeCells=function(t){for(var i=0,e=t.cells;i<e.length;i++){var r=e[i];r.isSpanned=!1}return t},o.prototype.buildAttributeFromRow=function(t,i){var e={},r={rowindex:Ke,dataUID:"data-uid",ariaSelected:"aria-selected"},n=[];i.isDataRow&&n.push(ft),i.isAltRow&&n.push("e-altrow"),i.isCaptionRow&&n.push("e-groupcaptionrow"),i.isAggregateRow&&i.parentUid&&n.push("e-groupfooterrow"),c(i.index)||(e[mo]=i.index+1,e[r.rowindex]=i.index),i.rowSpan&&(e.rowSpan=i.rowSpan),i.uid&&(e[r.dataUID]=i.uid),i.isSelected&&(e[r.ariaSelected]=!0),i.visible===!1&&n.push("e-hide"),e.class=n,$t(t,e)},o}(),Nn=function(){function o(t){this.parent=t}return o.prototype.generateRows=function(t,i){var e=[],r=this.parent.enableVirtualization&&i?i.startIndex:0;r=this.parent.enableInfiniteScrolling&&i?this.getInfiniteIndex(i):r,this.parent.enableImmutableMode&&i&&i.startIndex&&(r=i.startIndex);for(var n=0,s=Object.keys(t).length;n<s;n++,r++)e[parseInt(n.toString(),10)]=this.generateRow(t[parseInt(n.toString(),10)],r);return e},o.prototype.ensureColumns=function(){var t=[];if(this.parent.detailTemplate||this.parent.childGrid){var i={};this.parent.notify(Yl,i),t.push(this.generateCell(i,null,le.DetailExpand))}return this.parent.isRowDragable()&&t.push(this.generateCell({},null,le.RowDragIcon)),t},o.prototype.generateRow=function(t,i,e,r,n,s,a){var l={};l.foreignKeyData={},l.uid=Ai("grid-row"),l.data=t,l.index=i,l.indent=r,l.tIndex=s,l.isDataRow=!0,l.parentGid=n,l.parentUid=a,this.parent.isPrinting&&(this.parent.hierarchyPrintMode==="All"?l.isExpand=!0:this.parent.hierarchyPrintMode==="Expanded"&&this.parent.expandedRows&&this.parent.expandedRows[parseInt(i.toString(),10)]&&(l.isExpand=this.parent.expandedRows[parseInt(i.toString(),10)].isExpand)),l.cssClass=e,l.isAltRow=this.parent.enableAltRow?i%2!==0:!1,l.isAltRow=this.parent.enableAltRow?i%2!==0:!1,l.isSelected=this.parent.getSelectedRowIndexes().indexOf(i)>-1,this.refreshForeignKeyRow(l);var h=this.ensureColumns(),u=new sr(l,this.parent);return u.cells=this.parent.getFrozenMode()==="Right"?this.generateCells(l).concat(h):h.concat(this.generateCells(l)),u},o.prototype.refreshForeignKeyRow=function(t){for(var i=this.parent.getForeignKeyColumns(),e=0;e<i.length;e++)ht(i[parseInt(e.toString(),10)].field,nr(i[parseInt(e.toString(),10)],t.data),t.foreignKeyData)},o.prototype.generateCells=function(t){for(var i=this.parent.getColumns(),e=[],r=0;r<i.length;r++)e.push(this.generateCell(i[parseInt(r.toString(),10)],t.uid,c(i[parseInt(r.toString(),10)].commands)?void 0:le.CommandColumn,null,r,t.foreignKeyData));return e},o.prototype.generateCell=function(t,i,e,r,n,s){var a={visible:t.visible,isDataCell:!c(t.field||t.template),isTemplate:!c(t.template),rowID:i,column:t,cellType:c(e)?le.Data:e,colSpan:r,commands:t.commands,isForeignKey:t.isForeignColumn&&t.isForeignColumn(),foreignKeyData:t.isForeignColumn&&t.isForeignColumn()&&N(t.field,s)};return(a.isDataCell||a.column.type==="checkbox"||a.commands)&&(a.index=n),new Tr(a)},o.prototype.refreshRows=function(t){for(var i=0;i<t.length;i++)this.refreshForeignKeyRow(t[parseInt(i.toString(),10)]),t[parseInt(i.toString(),10)].cells=this.generateCells(t[parseInt(i.toString(),10)]);return t},o.prototype.getInfiniteIndex=function(t){return t.requestType==="infiniteScroll"||t.requestType==="delete"||t.action==="add"?c(t.startIndex)?t.index:t.startIndex:0},o}(),eh=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),th=function(){function o(t){this.parent=t}return o.prototype.getData=function(){for(var t=this,i=[],e=this.parent.aggregates.slice(),r=0;r<e.length;r++){var n=e[parseInt(r.toString(),10)].columns.filter(function(s){return!(s.footerTemplate||s.groupFooterTemplate||s.groupCaptionTemplate)||t.columnSelector(s)});n.length&&i.push({columns:n})}return i},o.prototype.columnSelector=function(t){return t.footerTemplate!==void 0},o.prototype.getColumns=function(t){var i=[];if((this.parent.detailTemplate||!c(this.parent.childGrid))&&i.push(new ct({})),this.parent.allowGrouping)for(var e=0;e<this.parent.groupSettings.columns.length;e++)i.push(new ct({}));return this.parent.isRowDragable()&&!t&&i.push(new ct({})),i.push.apply(i,this.parent.getColumns()),i},o.prototype.generateRows=function(t,i,e,r,n){if(t.length===0&&(i===void 0||!i.count))return[];for(var s=this.buildSummaryData(t,i),a=[],l=this.getData(),h=0;h<l.length;h++)a.push(this.getGeneratedRow(l[parseInt(h.toString(),10)],s[parseInt(h.toString(),10)],i?i.level:void 0,e,r,i?i.parentUid:void 0,n));return a},o.prototype.getGeneratedRow=function(t,i,e,r,n,s,a){var l=[],h=this.getIndentByLevel(),u=!c(this.parent.childGrid),p=this.parent.getIndentCount();this.parent.groupSettings.columns.length&&this.parent.allowRowDragAndDrop?h.push("e-indentcelltop"):this.parent.isRowDragable()&&!r&&(h=["e-indentcelltop"]);for(var d=a||this.getColumns(r),f=0;f<d.length;f++)l.push(this.getGeneratedCell(d[parseInt(f.toString(),10)],t,f>=p?this.getCellType():f===0&&this.parent.childGrid?le.DetailFooterIntent:le.Indent,h[parseInt(f.toString(),10)],u));var g=new sr({data:i,attributes:{class:"e-summaryrow"}});return g.cells=l,g.uid=Ai("grid-row"),g.parentUid=s,g.isAggregateRow=!0,g.visible=l.some(function(v){return v.isDataCell&&v.visible}),g},o.prototype.getGeneratedCell=function(t,i,e,r,n){var s=i.columns.filter(function(h){return h.columnName===t.field})[0],a={style:{textAlign:t.textAlign},"e-mappinguid":t.uid,index:t.index};r&&(a.class=r),c(r)&&n&&(a.class="e-detailindentcelltop");var l={visible:t.visible,isDataCell:!c(s),isTemplate:s&&!c(s.footerTemplate||s.groupFooterTemplate||s.groupCaptionTemplate),column:s||{},attributes:a,cellType:e};return l.column.headerText=t.headerText,new Tr(l)},o.prototype.buildSummaryData=function(t,i){for(var e=[],r=this.getData(),n={},s=0;s<r.length;s++){n={};for(var a=r[parseInt(s.toString(),10)].columns,l=0;l<a.length;l++)n=this.setTemplate(a[parseInt(l.toString(),10)],i&&i.aggregates?i:t,n);e.push(n)}return e},o.prototype.getIndentByLevel=function(){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},o.prototype.setTemplate=function(t,i,e){var r=t.type,n={},s=t.getFormatter()||function(){return function(d){return d}}(),a=i;r instanceof Array||(r=[t.type]);for(var l=0;l<r.length;l++){var h=t.field+" - "+r[parseInt(l.toString(),10)].toLowerCase(),u=t.columnName,p=r[parseInt(l.toString(),10)]!=="Custom"&&a.aggregates&&h in a.aggregates?a.aggregates[""+h]:qf(r[parseInt(l.toString(),10)],a.aggregates?a:i,t,this.parent);e[""+u]=e[""+u]||{},e[""+u][""+h]=p,e[""+u][r[parseInt(l.toString(),10)]]=c(p)?" ":s(p),a.field&&(e[""+u].field=a.field,e[""+u].key=a.key)}return n.format=t.getFormatter(),t.setTemplate(n),e},o.prototype.getCellType=function(){return le.Summary},o}(),Ld=function(o){eh(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.columnSelector=function(i){return i.groupFooterTemplate!==void 0},t.prototype.getIndentByLevel=function(i){return i===void 0&&(i=this.parent.groupSettings.columns.length),this.parent.allowRowDragAndDrop&&this.parent.groupSettings.columns.length&&(i-=1),this.parent.groupSettings.columns.map(function(e,r){return r<=i-1?"":"e-indentcelltop"})},t.prototype.getCellType=function(){return le.GroupSummary},t}(th),Fd=function(o){eh(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.columnSelector=function(i){return i.groupCaptionTemplate!==void 0},t.prototype.getData=function(){var i={columns:[]};return[o.prototype.getData.call(this).reduce(function(e,r){return e.columns=e.columns.concat(r.columns),e},i)]},t.prototype.isEmpty=function(){return(this.getData()[0].columns||[]).length===0},t.prototype.getCellType=function(){return le.CaptionSummary},t}(th),Md=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Od=function(o){Md(t,o);function t(i){var e=o.call(this,i)||this;return e.rows=[],e.index=0,e.infiniteChildCount=0,e.renderInfiniteAgg=!0,e.parent=i,e.summaryModelGen=new Ld(i),e.captionModelGen=new Fd(i),e}return t.prototype.generateRows=function(i,e){if(this.parent.groupSettings.columns.length===0)return o.prototype.generateRows.call(this,i,e);this.isInfiniteScroll=e.requestType==="infiniteScroll",this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?e.startIndex:0;for(var r=0,n=i.length;r<n;r++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,i[parseInt(r.toString(),10)],i.level,r,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},t.prototype.getGroupedRecords=function(i,e,r,n,s,a,l){var h,u=r;if(c(e.items))if(c(e.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(e,i,n,this.rows.length,l));else for(var p=0,d=e.length;p<d;p++)this.getGroupedRecords(i,e[parseInt(p.toString(),10)],e.level,n,i,this.rows.length,l);else{var f=void 0,g=this.generateCaptionRow(e,i,n,s,a,l);if(this.isInfiniteScroll&&(f=this.getPreCaption(i,g.data.key)),f?g.uid=f.uid:this.rows=this.rows.concat(g),e.items&&e.items.length&&this.getGroupedRecords(i+1,e.items,e.items.level,n,i+1,this.rows.length,g.uid),this.parent.aggregates.length&&this.isRenderAggregate(g)){var v=this.rows.length;(h=this.rows).push.apply(h,this.summaryModelGen.generateRows(e,{level:u,parentUid:g.uid}));for(var m=v-1;m>=0;m--)if(this.rows[parseInt(m.toString(),10)].isCaptionRow)this.rows[parseInt(m.toString(),10)].aggregatesCount=this.rows.length-v;else if(!this.rows[parseInt(m.toString(),10)].isCaptionRow&&!this.rows[parseInt(m.toString(),10)].isDataRow)break}f&&this.setInfiniteRowVisibility(f)}},t.prototype.isRenderAggregate=function(i){return this.parent.enableInfiniteScrolling?this.renderInfiniteAgg?(this.getPreCaption(i.indent,i.data.key),this.renderInfiniteAgg=i.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!1:!this.parent.enableInfiniteScrolling},t.prototype.getPreCaption=function(i,e){var r=this.parent.getRowsObject().concat(this.rows),n;this.infiniteChildCount=0;for(var s=r.length;s--&&(r[parseInt(s.toString(),10)].isCaptionRow&&r[parseInt(s.toString(),10)].indent===i&&r[parseInt(s.toString(),10)].data.key===e&&(n=r[parseInt(s.toString(),10)]),!(r[parseInt(s.toString(),10)].indent===i||r[parseInt(s.toString(),10)].indent<i));)r[parseInt(s.toString(),10)].indent===i+1&&this.infiniteChildCount++;return n},t.prototype.getCaptionRowCells=function(i,e,r){var n=[],s=[],a=this.parent.getColumnByField(i),l=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(a=this.parent.columns.filter(function(S){return S.field===i})[0]);var h=this.parent.groupSettings.columns.length,u=this.parent;if(!this.parent.enableColumnVirtualization||l.indexOf(e)!==-1){for(var p=0;p<e;p++)n.push(this.generateIndentCell());n.push(this.generateCell({},null,le.Expand))}if(e=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+h+(u.detailTemplate||u.childGrid?1:0)-e+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var d=this.captionModelGen.generateRows(r)[0];_(r,d.data);var f=0;d.cells.some(function(S,R){return f=R,S.visible&&S.isDataCell}),s=d.cells.slice(f).filter(function(S){return S.visible}),d.visible&&s[0].column.field===this.parent.getVisibleColumns()[0].field&&(s=s.slice(1)),this.parent.getVisibleColumns().length===1&&(s=[]),e=e-s.length}for(var g=this.parent.enableColumnVirtualization?this.parent.getColumns():[a],v=!0,m=0;m<g.length;m++){var y=v&&l.indexOf(e)!==-1;y&&(v=!1);var I=!this.parent.enableColumnVirtualization||y?le.GroupCaption:le.GroupCaptionEmpty;e=this.parent.enableColumnVirtualization&&I===le.GroupCaption?e+h:e,u.isRowDragable()&&e++,n.push(this.generateCell(a,null,I,e))}return n.push.apply(n,s),n},t.prototype.generateCaptionRow=function(i,e,r,n,s,a){var l={},h="records",u=this.parent.getColumnByField(i.field);l.data=_({},i),u&&(l.data.field=i.field),l.isDataRow=!1,l.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),l.parentGid=r,l.childGid=n,l.tIndex=s,l.isCaptionRow=!0,l.parentUid=a,l.gSummary=c(i.items[""+h])?i.items.length:i.items[""+h].length,l.uid=Ai("grid-row");var p=new sr(l);return p.indent=e,this.getForeignKeyData(p),p.cells=this.getCaptionRowCells(i.field,e,p.data),p},t.prototype.getForeignKeyData=function(i){var e=i.data,r=this.parent.getColumnByField(e.field);if(r&&r.isForeignColumn&&r.isForeignColumn()){var n=c(e.key)?"":r.valueAccessor(r.foreignKeyValue,nr(r,{},e.key)[0],r);ht("foreignKey",n,i.data)}},t.prototype.generateDataRows=function(i,e,r,n,s){for(var a=[],l=this.parent.getColumnIndexesInView(),h=0,u=i.length;h<u;h++,n++){a[parseInt(h.toString(),10)]=this.generateRow(i[parseInt(h.toString(),10)],this.index,h?void 0:"e-firstchildrow",e,r,n,s);for(var p=0;p<e;p++)this.parent.enableColumnVirtualization&&l.indexOf(e)===-1||a[parseInt(h.toString(),10)].cells.unshift(this.generateIndentCell());this.index++}return a},t.prototype.generateIndentCell=function(){return this.generateCell({},null,le.Indent)},t.prototype.refreshRows=function(i){for(var e=this.parent.getColumnIndexesInView(),r=0;r<i.length;r++)if(i[parseInt(r.toString(),10)].isDataRow){i[parseInt(r.toString(),10)].cells=this.generateCells(i[parseInt(r.toString(),10)]);for(var n=0;n<i[parseInt(r.toString(),10)].indent;n++)this.parent.enableColumnVirtualization&&e.indexOf(i[parseInt(r.toString(),10)].indent)===-1||i[parseInt(r.toString(),10)].cells.unshift(this.generateIndentCell())}else{var s=this.generateCaptionRow(i[parseInt(r.toString(),10)].data,i[parseInt(r.toString(),10)].indent);i[parseInt(r.toString(),10)].cells=s.cells}return i},t.prototype.setInfiniteRowVisibility=function(i){if(!i.isExpand||i.visible===!1)for(var e=0,r=this.rows;e<r.length;e++){var n=r[e];n.parentUid===i.uid&&(n.visible=!1,n.isCaptionRow&&this.setInfiniteRowVisibility(n))}},t.prototype.ensureRowVisibility=function(){for(var i=0;i<this.rows.length;i++){var e=this.rows[parseInt(i.toString(),10)];if(e.isCaptionRow)for(var r=i+1;r<this.rows.length;r++){var n=this.rows[parseInt(r.toString(),10)];e.uid===n.parentUid&&(this.rows[parseInt(r.toString(),10)].visible=e.isExpand)}}},t}(Nn),Nd=function(){function o(t,i){var e=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.drop=function(r){e.parent.notify(rp,{target:r.target,droppedElement:r.droppedElement}),Se(r.droppedElement)},this.infiniteCache={},this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.tempFreezeRows=[],this.rafCallback=function(r){var n=r;return function(){if(e.ariaService.setBusy(e.getPanel().querySelector("."+dt),!1),!e.parent.isDestroyed){var s=e.rows.slice(0);if(e.parent.enableInfiniteScrolling){if(e.parent.groupSettings.enableLazyLoading)for(var a=0;a<e.visibleRows.length;a++)e.setRowsInLazyGroup(e.visibleRows[parseInt(a.toString(),10)],a);s=e.parent.getRowsObject();var l=n.prevPage;if(e.parent.infiniteScrollSettings.enableCache&&l){var h=e.parent.infiniteScrollSettings.maxBlocks;s=[];for(var u=parseInt(e.rowElements[0].getAttribute("data-rowindex"),10)+1,p=Math.ceil(u/e.parent.pageSettings.pageSize),a=0,d=p;a<h;a++,d++)e.infiniteCache[parseInt(d.toString(),10)]&&(s=s.concat(e.infiniteCache[parseInt(d.toString(),10)]))}}if(e.parent.notify(st,{rows:s,args:n}),e.parent.autoFit&&e.parent.preventAdjustColumns(),e.parent.isInitialLoad||e.parent.focusModule.setFirstFocusableTabIndex(),e.isLoaded){e.parent.isManualRefresh=!1,e.parent.enableInfiniteScrolling&&e.parent.groupSettings.enableLazyLoading&&r.requestType==="sorting"&&(e.parent.infiniteScrollModule.groupCaptionAction=void 0);var f=e.parent.parentDetails&&e.parent.parentDetails.parentInstObj&&e.parent.parentDetails.parentInstObj.isReact;if((e.parent.isReact||f)&&e.parent.element.querySelectorAll(".e-templatecell").length){var g=e;g.parent.renderTemplates(function(){g.parent.trigger(Di,{},function(){g.parent.allowTextWrap&&g.parent.notify(an,{case:"textwrap"})})})}else e.parent.trigger(Di,{},function(){e.parent.allowTextWrap&&e.parent.notify(an,{case:"textwrap"})});e.parent.allowTextWrap&&e.parent.height==="auto"&&(e.parent.getContentTable().scrollHeight>e.parent.getContent().clientHeight?e.parent.scrollModule.setPadding():e.parent.scrollModule.removePadding())}if(n){var v=(n.requestType||"").toLowerCase()+"-complete";e.parent.notify(v,n),r.requestType==="batchsave"&&(r.cancel=!1,e.parent.trigger(wt,r))}e.isLoaded&&e.parent.hideSpinner()}}},this.parent=t,this.serviceLocator=i,this.widthService=i.getService("widthService"),this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.enableVirtualization&&!this.parent.groupSettings.enableLazyLoading&&this.parent.on(wn,this.setVisible,this),this.parent.on(Wl,this.colGroupRefresh,this),this.parent.on(lt,this.enableAfterRender,this),this.parent.on(Kp,this.refreshContentRows,this),this.parent.on(Os,this.beforeCellFocused,this),this.parent.on(yi,this.droppableDestroy,this))}return o.prototype.beforeCellFocused=function(t){t.byKey&&(t.keyArgs.action==="upArrow"||t.keyArgs.action==="downArrow")?this.pressedKey=t.keyArgs.action:this.pressedKey=void 0},o.prototype.renderPanel=function(){var t=this.parent,i=this.parent.element.querySelector("."+vi);if(i){this.ariaService.setOptions(this.parent.element.querySelector("."+dt),{busy:!1}),this.setPanel(i);return}i=this.parent.createElement("div",{className:vi});var e=this.parent.createElement("div",{className:dt});this.ariaService.setOptions(e,{busy:!1}),this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&(this.renderHorizontalScrollbar(i),e.classList.add("e-virtual-content")),i.appendChild(e),this.setPanel(i),t.element.appendChild(i)},o.prototype.renderHorizontalScrollbar=function(t){var i=this.parent.createElement("div",{className:"e-movablescrollbar"}),e=this.parent.createElement("div",{className:"e-movablechild"}),r=fi().toString();this.setScrollbarHeight(e,r),this.setScrollbarHeight(i,r),i.appendChild(e),t.appendChild(i)},o.prototype.setScrollbarHeight=function(t,i){t.style.minHeight=i+"px",t.style.maxHeight=i+"px"},o.prototype.renderTable=function(){var t=this.getPanel(),i=t.querySelector(".e-virtualtable"),e=t.querySelector(".e-virtualtrack");this.parent.enableVirtualization&&!c(i)&&!c(e)&&(Se(i),Se(e)),t.appendChild(this.createContentTable("_content_table")),this.setTable(t.querySelector("."+Zt)),this.parent.selectionSettings.type==="Multiple"&&this.ariaService.setOptions(this.parent.element,{multiselectable:!0}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdr")},o.prototype.createContentTable=function(t){var i=this.getPanel().firstElementChild;this.getTable()&&Se(this.getTable());var e=i.querySelector("."+Zt)?i.querySelector("."+Zt):this.parent.createElement("table",{className:Zt,attrs:{cellspacing:"0.25px",role:"presentation",id:this.parent.element.id+t}});return this.setColGroup(this.parent.getHeaderTable().querySelector(Ht).cloneNode(!0)),e.appendChild(this.getColGroup()),e.appendChild(this.parent.createElement(Le,{attrs:{role:"rowgroup"}})),i.appendChild(e),i},o.prototype.refreshContentRows=function(t){var i=this;t===void 0&&(t={});var e=this.parent;if(e.currentViewData.length!==0){e.editSettings&&e.editModule&&e.editSettings.mode==="Batch"&&e.editModule.formObj&&e.editSettings.showConfirmDialog===!1&&e.editModule.destroyForm();var r=this.currentMovableRows||e.currentViewData,n=e.isReact&&!c(e.rowTemplate),s=n?e.createElement(Le,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=_([],r));var a=n?e.createElement(Le,{attrs:{role:"rowgroup"}}):document.createDocumentFragment(),l,h;e.isReact&&e.rowTemplate&&(l=s,h=a);var u=e.getColumns(),p,d,f,g=new kr(this.serviceLocator,null,this.parent),v=this.parent.enableInfiniteScrolling&&t.requestType==="infiniteScroll";e.notify(bd,{}),this.rowElements=[],this.rows=[],this.tempFreezeRows=[];var m,y,I=!!(this.parent.frozenRows&&this.parent.groupSettings.columns.length);Qt(e)&&["sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"].some(function(fe){return t.requestType===fe})&&this.emptyVcRows();var S;S=this.checkCache(S,t),!this.isAddRows&&!this.useGroupCache&&(S=this.generator.generateRows(r,t)),this.setGroupCache(S,t),this.parent.notify(ed,{isInfiniteScroll:v,modelData:S,args:t});var R=!1;if(!(t.requestType==="infiniteScroll"&&!this.parent.infiniteScrollSettings.enableCache)&&this.parent.registeredTemplate&&this.parent.registeredTemplate.template&&!t.isFrozen&&!R){for(var L=[],P=0;P<this.parent.registeredTemplate.template.length;P++)for(var J=0;J<this.parent.registeredTemplate.template[P].rootNodes.length;J++)c(this.parent.registeredTemplate.template[P].rootNodes[J].parentNode)&&L.push(this.parent.registeredTemplate.template[P]);this.parent.destroyTemplate(["template"],L)}if((this.parent.isReact||this.parent.isVue)&&!(t.requestType==="infiniteScroll"&&!this.parent.infiniteScrollSettings.enableCache)&&!t.isFrozen){var he=[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"];t.requestType==="infiniteScroll"&&this.parent.infiniteScrollSettings.enableCache&&(he=[this.parent.isVue?"template":"columnTemplate","commandsTemplate"]),bo(this.parent,he)}if(this.parent.enableColumnVirtualization){var pe=new $l(this.serviceLocator,this.parent);pe.updateVirtualCells(S)}this.tbody=this.getTable().querySelector(Le);var Re=0,B=!0;if(Qt(e)&&e.vcRows.length){var H="top",O=c(t.virtualInfo.offsets)?c(t.scrollTop)?0:t.scrollTop[""+H]:t.virtualInfo.offsets.top;if(O!==0){for(var U=e.vGroupOffsets,re=e.pageSettings.pageSize/2,j=Object.keys(U).map(function(fe){return U[""+fe]}),W=0;W<j.length;W++)if(O<j[parseInt(W.toString(),10)])if(!c(t.virtualInfo)&&t.virtualInfo.direction==="up"){Re=W>0?(W-1)*re:W*re;break}else{Re=W*re,(this.parent.contentModule.isEndBlock(W)||this.parent.contentModule.isEndBlock(W+1))&&(t.virtualInfo.blockIndexes=[W,W+1]);break}Math.round(O+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!t.rowObject&&(B=!1)}}var G=e.frozenRows&&this.parent.enableVirtualization&&t.requestType==="reorder";if(e.frozenRows&&t.requestType==="virtualscroll"&&t.virtualInfo.sentinelInfo.axis==="X"||G){var te=t.virtualInfo.blockIndexes,me=t.virtualInfo.page;t.virtualInfo.blockIndexes=[1,2],G&&(t.virtualInfo.page=1);var xe=G?this.initialPageRecords:r,ye=this.vgenerator.generateRows(xe,t);ye.splice(this.parent.frozenRows);for(var P=0;P<this.parent.frozenRows;P++)p=g.render(ye[parseInt(P.toString(),10)],u),Js(p),a.appendChild(p);t.virtualInfo.blockIndexes=te,t.virtualInfo.page=me,G&&t.virtualInfo.page===1&&S.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(a,S,g,t,r,u),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&((this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]=[]),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&t.requestType==="delete"&&(this.visibleRows=[]);for(var oe=function(fe,x){if(ie.rows.push(S[parseInt(fe.toString(),10)]),ie.parent.groupSettings.enableLazyLoading&&!ie.useGroupCache&&ie.parent.groupSettings.columns.length&&((ie.parent.enableVirtualization?ie.parent.lazyLoadRender:ie.parent.contentModule).refRowsObj[ie.parent.pageSettings.currentPage].push(S[parseInt(fe.toString(),10)]),ie.setRowsInLazyGroup(S[parseInt(fe.toString(),10)],fe),c(S[parseInt(fe.toString(),10)].indent)))return"continue";if(ie.setInfiniteVisibleRows(t,S[parseInt(fe.toString(),10)]),Qt(e)&&t.virtualInfo&&t.virtualInfo.blockIndexes&&ie.rowElements.length>=t.virtualInfo.blockIndexes.length*ie.parent.contentModule.getBlockSize()&&B)return ie.parent.currentViewData.records=ie.rows.map(function(or){return or.data}),"break";if(e.rowTemplate){var K=e.element.id+"rowTemplate",Y=void 0;if(e.isReact){var X=e.frozenRows&&fe<e.frozenRows,De=_({index:fe},r[parseInt(fe.toString(),10)]);if(e.getRowTemplate()(De,e,"rowTemplate",K,null,null,X?a:s),e.requireTemplateRef){var Qe=ie;return Qe.parent.renderTemplates(function(){e.frozenRows&&fe<e.frozenRows?p=h.childNodes[parseInt(fe.toString(),10)]:f=l.childNodes[parseInt(fe.toString(),10)];var or={data:S[parseInt(fe.toString(),10)].data,row:f||p};Qe.parent.trigger(bn,or),(S[parseInt(fe.toString(),10)].isDataRow||Qe.parent.enableVirtualization&&Qe.parent.groupSettings.enableLazyLoading)&&Qe.rowElements.push(p),Qe.ariaService.setOptions(Qe.parent.element,{colcount:e.getColumns().length.toString()}),fe===S.length-1&&(l=null,h=null)}),"continue"}}else Y=e.getRowTemplate()(_({index:fe},r[parseInt(fe.toString(),10)]),e,"rowTemplate",K,void 0,void 0,void 0,ie.parent.root);if(!e.isReact&&Y[0].tagName==="TBODY"){for(var Ye=0;Ye<Y.length;Ye++){var Et=Y[parseInt(Ye.toString(),10)].nodeName.toLowerCase()==="tr";(Et||Y[parseInt(Ye.toString(),10)].querySelectorAll&&Y[parseInt(Ye.toString(),10)].querySelectorAll("tr").length)&&(p=Et?Y[parseInt(Ye.toString(),10)]:Y[parseInt(Ye.toString(),10)].querySelector("tr"))}e.frozenRows&&fe<e.frozenRows?a.appendChild(p):s.appendChild(p)}else e.frozenRows&&fe<e.frozenRows?p=e.isReact?a.lastElementChild:qt(a,Y):(e.isReact||(p=qt(s,Y)),f=e.isReact?s.lastElementChild:p.lastElementChild);var Ft={data:S[parseInt(fe.toString(),10)].data,row:f||p};ie.parent.trigger(bn,Ft)}else{p=g.render(S[parseInt(fe.toString(),10)],u),Js(p);var E=ie.ensureFrozenHeaderRender(t);e.frozenRows&&(fe<e.frozenRows||I)&&!v&&t.requestType!=="virtualscroll"&&E&&ie.ensureVirtualFrozenHeaderRender(t)?a.appendChild(p):s.appendChild(p);var z=parseInt(p.getAttribute("data-rowindex"),10);z+1===e.frozenRows&&(I=!1),S[parseInt(fe.toString(),10)].isExpand&&e.notify(Pp,p.cells[e.groupSettings.columns.length])}(S[parseInt(fe.toString(),10)].isDataRow||ie.parent.enableVirtualization&&ie.parent.groupSettings.enableLazyLoading)&&ie.rowElements.push(p),ie.ariaService.setOptions(ie.parent.element,{colcount:e.getColumns().length.toString()})},ie=this,P=Re,ve=S.length;P<ve;P++){var ae=oe(P);if(ae==="break")break}var ze=e.parentDetails&&e.parentDetails.parentInstObj&&e.parentDetails.parentInstObj.isReact;if((e.isReact||ze)&&!e.requireTemplateRef&&e.renderTemplates(),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=this.parent.contentModule.groupCache[this.parent.pageSettings.currentPage]),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.notify(Jl,{rows:(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]}),e.removeMaskRow(),this.parent.notify("removeGanttShimmer",{requestType:"hideShimmer"}),e.frozenRows&&t.requestType!=="virtualscroll"&&!v&&this.ensureVirtualFrozenHeaderRender(t)||t.requestType==="virtualscroll"&&t.virtualInfo.sentinelInfo&&t.virtualInfo.sentinelInfo.axis==="X"){if(d=e.getHeaderTable().querySelector(Le),n){var We=d.parentElement;Se(d),We.appendChild(a)}else d.innerHTML="",d.appendChild(a);e.isInitialLoad||e.scrollModule.setHeight()}t.rows=this.rows.slice(0),ch(function(){i.parent.notify(Kl,t),!i.parent.enableVirtualization&&!i.parent.enableColumnVirtualization&&!v&&(e.isReact||(i.tbody.innerHTML=""),c(i.tbody.parentElement)?Se(e.getContentTable().querySelector(Le)):Se(i.tbody),i.tbody=i.parent.createElement(Le,{attrs:{role:"rowgroup"}})),e.rowTemplate&&Ah(e.element.id+"rowTemplate","RowTemplate",e),!c(i.parent.infiniteScrollModule)&&i.parent.enableInfiniteScrolling?(i.isAddRows=!1,i.parent.notify(Zp,{args:t}),i.parent.notify($p,{tbody:m||i.tbody,frag:s,args:t,rows:i.rows,rowElements:i.rowElements,visibleRows:i.visibleRows,tableName:y})):(i.useGroupCache=!1,i.appendContent(i.tbody,s,t)),i.parent.getVisibleFrozenRightCount()&&i.parent.getContent()&&So(i.parent)>0&&i.parent.element.classList.add("e-right-shadow"),s=null},this.rafCallback(_({},t)))}},o.prototype.emptyVcRows=function(){this.parent.vcRows=[],this.parent.vRows=[]},o.prototype.appendContent=function(t,i,e,r){var n=this.parent.isReact&&!c(this.parent.rowTemplate);if(n?this.getTable().appendChild(i):(t.appendChild(i),this.getTable().appendChild(t)),this.parent.rowRenderingMode==="Vertical"&&this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Header"||this.parent.textWrapSettings.wrapMode==="Both"))for(var s=t.querySelectorAll("td"),a=0;a<s.length;a++){var l=parseFloat(document.defaultView.getComputedStyle(s[parseInt(a.toString(),10)],"::before").getPropertyValue("height")),h=s[parseInt(a.toString(),10)].offsetHeight;l>h&&(s[parseInt(a.toString(),10)].style.height=l+"px",s[parseInt(a.toString(),10)].style.boxSizing="content-box")}this.parent.getVisibleFrozenLeftCount()&&this.parent.enableColumnVirtualization&&this.widthService.refreshFrozenScrollbar()},o.prototype.setRowsInLazyGroup=function(t,i){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).maintainRows(t,i)},o.prototype.setGroupCache=function(t,i){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify(rd,{args:i,data:t})},o.prototype.ensureFrozenHeaderRender=function(t){return!(this.parent.enableVirtualization&&(t.requestType==="reorder"||t.requestType==="refresh")||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&this.parent.infiniteScrollModule.requestType==="delete"&&this.parent.pageSettings.currentPage!==1)},o.prototype.ensureVirtualFrozenHeaderRender=function(t){return!(this.parent.enableVirtualization&&t.requestType==="delete")},o.prototype.checkCache=function(t,i){if(this.parent.infiniteScrollSettings.enableCache&&i.requestType==="infiniteScroll"){if(this.isAddRows=!c(this.infiniteCache[this.parent.pageSettings.currentPage]),this.isAddRows){var e=this.infiniteCache[this.parent.pageSettings.currentPage];t=this.parent.pageSettings.currentPage===1?e.slice(this.parent.frozenRows):e}return t}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&(i.requestType==="paging"||i.requestType==="columnstate"||i.requestType==="reorder"||i.requestType==="virtualscroll")&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).getGroupCache()[this.parent.pageSettings.currentPage]?(this.parent.enableVirtualization||(this.useGroupCache=!0),this.parent.enableVirtualization?this.parent.getRowsObject():this.parent.contentModule.initialGroupRows(i.requestType==="reorder")):null},o.prototype.setInfiniteVisibleRows=function(t,i){this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&(this.parent.infiniteScrollSettings.enableCache||this.visibleRows.push(i))},o.prototype.getCurrentBlockInfiniteRecords=function(){var t=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];var i=this.parent.getRows(),e=parseInt(i[this.parent.frozenRows].getAttribute(Ke),10),r=Math.ceil((e+1)/this.parent.pageSettings.pageSize);e=parseInt(i[i.length-1].getAttribute(Ke),10);for(var n=Math.ceil((e+(i.length?1:0))/this.parent.pageSettings.pageSize),s=r;s<=n;s++)t=t.length?t.concat(this.infiniteCache[parseInt(s.toString(),10)]):this.infiniteCache[parseInt(s.toString(),10)];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(t=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(t))}return t},o.prototype.getReorderedRows=function(t){return this.parent.contentModule.getReorderedFrozenRows(t)},o.prototype.virtualFrozenHdrRefresh=function(t,i,e,r,n,s){if(this.parent.frozenRows&&this.parent.enableVirtualization&&(r.requestType==="reorder"||r.requestType==="refresh")){for(var a=void 0,l=this.getReorderedRows(r),h=0;h<l.length;h++)a=e.render(l[parseInt(h.toString(),10)],s),t.appendChild(a);r.virtualInfo.page===1&&i.splice(0,this.parent.frozenRows)}},o.prototype.getInfiniteRows=function(){var t=[];if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(var i=Object.keys(this.infiniteCache),e=0;e<i.length;e++)t=t.concat(this.infiniteCache[i[parseInt(e.toString(),10)]]);else t=this.visibleRows;return t},o.prototype.getInfiniteMovableRows=function(){var t=this.getCurrentBlockInfiniteRecords(),i=this.parent.enableInfiniteScrolling?t.length?t:this.visibleRows:[];return i},o.prototype.getPanel=function(){return this.contentPanel},o.prototype.setPanel=function(t){this.contentPanel=t},o.prototype.getTable=function(){return this.contentTable},o.prototype.setTable=function(t){this.contentTable=t},o.prototype.getRows=function(){var t=this.getInfiniteRows();return t.length?t:this.rows},o.prototype.getRowElements=function(){return this.rowElements},o.prototype.setRowElements=function(t){this.rowElements=t},o.prototype.getColGroup=function(){return this.colgroup},o.prototype.setColGroup=function(t){return c(t)||(t.id="content-"+t.id),this.colgroup=t},o.prototype.setVisible=function(t){var i=this.parent,e=this.getRows(),r;e.some(function(m){return m.isDataRow&&(r=m),m.isDataRow});var n=!0;!i.groupSettings.columns.length&&r&&(n=!1);for(var s=i.getDataRows(),a={},l=this.infiniteRowVisibility(),h=l||this.rows.filter(function(m){return!m.isDetailRow}),u=0,p=t.length;u<p;u++){var d=t[parseInt(u.toString(),10)],f=this.parent.getNormalizedColumnIndex(d.uid),g=this.parent.getColumnIndexByUid(d.uid),v=d.visible===!0?"":"none";f!==-1&&r&&f<r.cells.length&&mt(this.getColGroup().childNodes[parseInt(f.toString(),10)],{display:v}),n||this.setDisplayNone(s,g,v,h),!this.parent.invokedFromMedia&&d.hideAtMedia&&this.parent.updateMediaColumns(d),this.parent.invokedFromMedia=!1}n?this.refreshContentRows({requestType:"refresh"}):this.parent.notify(Ql,{rows:h,args:a})},o.prototype.setDisplayNone=function(t,i,e,r){sg(t,i,e,r,this.parent,this.parent.isRowDragable()),this.parent.notify(Jp,{visible:e,index:i,isFreeze:this.isInfiniteFreeze})},o.prototype.infiniteRowVisibility=function(t){var i;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=t,this.parent.infiniteScrollSettings.enableCache?i=t?this.getCurrentBlockInfiniteRecords():this.getCurrentBlockInfiniteRecords():i=t?this.visibleFrozenRows:this.visibleRows),i},o.prototype.colGroupRefresh=function(){if(this.getColGroup()){var t=this.getHeaderColGroup();this.getTable().replaceChild(t,this.getColGroup()),this.setColGroup(t)}},o.prototype.getHeaderColGroup=function(){return this.parent.element.querySelector("."+Tt).querySelector(Ht+":not(.e-masked-colgroup)").cloneNode(!0)},o.prototype.initializeContentDrop=function(){var t=this.parent;this.droppable=new Zs(t.element,{accept:".e-dragclone",drop:this.drop})},o.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},o.prototype.canSkip=function(t,i,e){return c(i)||c(t.visible)||i.cells[parseInt(e.toString(),10)].visible===t.visible},o.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new Od(this.parent):new Nn(this.parent)},o.prototype.renderEmpty=function(t){this.getTable().appendChild(t),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(Le).innerHTML="")},o.prototype.setSelection=function(t,i,e){this.parent.notify(od,{uid:t,set:i,clearAll:e});for(var r=this.getRows().filter(function(l){return e||t===l.uid}),n=0;n<r.length;n++){r[parseInt(n.toString(),10)].isSelected=i;for(var s=r[parseInt(n.toString(),10)].cells,a=0;a<s.length;a++)s[parseInt(a.toString(),10)].isSelected=i}},o.prototype.getRowByIndex=function(t){return t=this.getInfiniteRowIndex(t),c(t)?void 0:this.parent.getDataRows()[parseInt(t.toString(),10)]},o.prototype.getInfiniteRowIndex=function(t){if(this.parent.infiniteScrollSettings.enableCache&&!c(t)){var i=this.parent.frozenRows,e=i>t?0:i,r=parseInt(this.parent.getRows()[parseInt(e.toString(),10)].getAttribute(Ke),10);t=i>t?t:t-r+i}return t},o.prototype.getVirtualRowIndex=function(t){return t},o.prototype.enableAfterRender=function(t){t.module==="group"&&t.enable&&(this.generator=this.getModelGenerator())},o.prototype.setRowObjects=function(t){this.rows=t},o.prototype.immutableModeRendering=function(t){var i=this;t===void 0&&(t={});var e=this.parent;e.hideSpinner();var r=e.getPrimaryKeyFieldNames()[0],n={},s={},a=[],l={},h=e.getRowsObject().slice(),u=this.getBatchEditedRecords(r,h),p={},d=Object.keys(u).length!==0;if(e.getContent().querySelector(".e-emptyrow")||t.requestType==="reorder"||this.parent.groupSettings.columns.length)this.refreshContentRows(t);else{if(e.currentViewData.length===0)return;var f={},g=e.createElement(Le,{attrs:{role:"rowgroup"}}),v=e.currentViewData,m=[].slice.call(this.getTable().querySelector(Le).children);if(this.prevCurrentView.length){var y=this.prevCurrentView.length,I=v.length;if(y===I)for(var S=0;S<I;S++){if(this.parent.editSettings.mode==="Batch"&&m[parseInt(S.toString(),10)].classList.contains("e-insertedrow")){m.splice(S,1),--S;continue}s[v[parseInt(S.toString(),10)][""+r]]=n[this.prevCurrentView[parseInt(S.toString(),10)][""+r]]=S,p[parseInt(S.toString(),10)]=v[parseInt(S.toString(),10)][""+r],f[h[parseInt(S.toString(),10)].uid]=m[parseInt(S.toString(),10)],l[parseInt(S.toString(),10)]=this.prevCurrentView[parseInt(S.toString(),10)][""+r]}else{for(var S=0;S<I;S++)s[v[parseInt(S.toString(),10)][""+r]]=S,p[parseInt(S.toString(),10)]=v[parseInt(S.toString(),10)][""+r];for(var S=0;S<y;S++){if(this.parent.editSettings.mode==="Batch"&&m[parseInt(S.toString(),10)].classList.contains("e-insertedrow")){m.splice(S,1),--S;continue}f[h[parseInt(S.toString(),10)].uid]=m[parseInt(S.toString(),10)],n[this.prevCurrentView[parseInt(S.toString(),10)][""+r]]=S,l[parseInt(S.toString(),10)]=this.prevCurrentView[parseInt(S.toString(),10)][""+r]}}}for(var S=0;S<v.length;S++){var R=n[v[parseInt(S.toString(),10)][""+r]];if(c(R)){var J=new kr(this.serviceLocator,null,e),he={startIndex:S},pe=this.generator.generateRows([v[parseInt(S.toString(),10)]],he);a.push(pe[0]);var P=J.render(pe[0],e.getColumns());g.appendChild(P),this.refreshImmutableContent(S,P,a[parseInt(S.toString(),10)])}else{var L=!1;this.parent.enableDeepCompare&&(L=this.objectEqualityChecker(this.prevCurrentView[parseInt(R.toString(),10)],v[parseInt(S.toString(),10)]));var P=f[h[parseInt(R.toString(),10)].uid];if(a.push(h[parseInt(R.toString(),10)]),this.rowElements[parseInt(R.toString(),10)]&&this.rowElements[parseInt(R.toString(),10)].getAttribute("data-uid")===a[parseInt(S.toString(),10)].uid&&(d&&c(u[p[parseInt(S.toString(),10)]])||!d&&(L||this.prevCurrentView[parseInt(R.toString(),10)]===v[parseInt(S.toString(),10)]))){R!==S&&this.refreshImmutableContent(S,P,a[parseInt(S.toString(),10)]),g.appendChild(P);continue}(d&&!c(u[p[parseInt(S.toString(),10)]])||!this.parent.enableDeepCompare&&v[parseInt(S.toString(),10)]!==this.prevCurrentView[parseInt(R.toString(),10)]||this.parent.enableDeepCompare&&!L)&&h[parseInt(R.toString(),10)].setRowValue(v[parseInt(S.toString(),10)]),g.appendChild(P),this.refreshImmutableContent(S,P,a[parseInt(S.toString(),10)])}}if(this.rows=a,this.rowElements=[].slice.call(g.children),Se(this.getTable().querySelector(Le)),this.getTable().appendChild(g),this.parent.trigger(Di,{},function(){i.parent.allowTextWrap&&i.parent.notify(an,{case:"textwrap"})}),t){var Re=(t.requestType||"").toLowerCase()+"-complete";this.parent.notify(Re,t)}}},o.prototype.objectEqualityChecker=function(t,i){for(var e=Object.keys(t),r=!0,n=0;n<e.length;n++)if(t[e[parseInt(n.toString(),10)]]!==i[e[parseInt(n.toString(),10)]]){var s=t[e[parseInt(n.toString(),10)]]instanceof Date&&i[e[parseInt(n.toString(),10)]]instanceof Date;if(!s||t[e[parseInt(n.toString(),10)]].getTime()!==i[e[parseInt(n.toString(),10)]].getTime()){r=!1;break}}return r},o.prototype.getBatchEditedRecords=function(t,i){var e={},r=this.parent.getBatchChanges(),n=[],s=[];Object.keys(r).length&&(n=r.changedRecords,s=r.addedRecords);var a={cancel:!1};this.parent.notify(ad,{rows:i,args:a}),s.length&&(this.parent.editSettings.newRowPosition==="Bottom"?i.splice(i.length-1,s.length):a.cancel||i.splice(0,s.length));for(var l=0;l<n.length;l++)e[n[parseInt(l.toString(),10)][""+t]]=l;return e},o.prototype.refreshImmutableContent=function(t,i,e){e.isAltRow=this.parent.enableAltRow?t%2!==0:!1,e.isAltRow?i.classList.add("e-altrow"):i.classList.remove("e-altrow"),e.index=t,e.edit=void 0,e.isDirty=!1,i.setAttribute(Ke,t.toString()),i.setAttribute(mo,(t+1).toString()),this.updateCellIndex(i,t)},o.prototype.updateCellIndex=function(t,i){for(var e=0;e<t.cells.length;e++)t.cells[parseInt(e.toString(),10)].setAttribute("index",i.toString())},o}(),Pd=function(){function o(t,i){var e=this;this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=function(r){var n=e.parent,s=e.draggable.currentStateTarget,a=M(s,"e-headercell");if(!(n.allowReordering||n.allowGrouping)||!c(a)&&a.getElementsByClassName("e-checkselectall").length>0)return!1;var l=e.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),h=s.classList.contains("e-headercell")?s:a;if(!h||!n.allowReordering&&h.classList.contains("e-stackedheadercell"))return!1;var u=h.offsetHeight,p=h.querySelector(".e-headercelldiv")||h.querySelector(".e-stackedheadercelldiv"),d;if(p){if(h.querySelector(".e-stackedheadercelldiv")?d=n.getStackedHeaderColumnByHeaderText(p.innerText.trim(),n.columns):d=n.getColumnByUid(p.getAttribute("e-mappinguid")),e.column=d,e.column.lockColumn)return!1;l.setAttribute("e-mappinguid",e.column.uid)}if(d&&!c(d.headerTemplate)){if(c(d.headerTemplate))l.innerHTML=d.headerTemplate;else{var f=n.getColumnIndexByField(d.field),g=d.getHeaderTemplate()(_({index:f},d),n,"headerTemplate"),v=n.isReact&&typeof d.headerTemplate!="string",m=n.parentDetails&&n.parentDetails.parentInstObj&&n.parentDetails.parentInstObj.isReact;(v||m)&&n.renderTemplates(),qt(l,g)}!c(l.firstChild)&&l.firstChild.nodeType===1&&(l.firstChild.style.pointerEvents="none")}else l.innerHTML=p?d.headerText:h.firstElementChild.innerHTML;return l.style.width=h.offsetWidth+"px",l.style.height=h.offsetHeight+"px",l.style.lineHeight=(u-6).toString()+"px",n.element.appendChild(l),l},this.dragStart=function(r){var n=e.parent;n.element.querySelector(".e-gridpopup").style.display="none",n.notify(tp,{target:e.draggable.currentStateTarget,column:e.column,event:r.event})},this.drag=function(r){var n=e.parent,s=r.target;if(s){var a=D(s,".e-grid"),l=e.parent.element.querySelector(".e-cloneproperties");if((!a||a.getAttribute("id")!==n.element.getAttribute("id"))&&(ot(l,["e-notallowedcur"],["e-defaultcur"]),n.allowReordering&&(n.element.querySelector(".e-reorderuparrow").style.display="none",n.element.querySelector(".e-reorderdownarrow").style.display="none"),!n.groupSettings.allowReordering))return;n.notify(ip,{target:r.target,column:e.column,event:r.event})}},this.dragStop=function(r){var n=e.parent,s;n.element.querySelector(".e-gridpopup").style.display="none",(!M(r.target,"e-headercell")&&!M(r.target,"e-groupdroparea")||!n.allowReordering&&M(r.target,"e-headercell")||!r.helper.getAttribute("e-mappinguid")&&M(r.target,"e-groupdroparea"))&&(Se(r.helper),s=!0),n.notify(xp,{target:r.target,event:r.event,column:e.column,cancel:s})},this.drop=function(r){var n=e.parent,s=r.droppedElement.getAttribute("e-mappinguid"),a=D(r.target,".e-grid");Se(r.droppedElement),!(a&&a.getAttribute("id")!==n.element.getAttribute("id")||!(n.allowReordering||n.allowGrouping))&&n.notify(wp,{target:r.target,uid:s,droppedElement:r.droppedElement})},this.parent=t,this.serviceLocator=i,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),!this.parent.isDestroyed&&(this.parent.enableColumnVirtualization||this.parent.on(wn,this.setVisible,this),this.parent.on(Ul,this.colPosRefresh,this),this.parent.on(vo,this.renderCustomToolbar,this),this.parent.rowRenderingMode==="Vertical"&&this.parent.on(lt,this.updateCustomResponsiveToolbar,this))}return o.prototype.renderPanel=function(){var t=this.parent.element.querySelector("."+Tt),i=t!=null;t=i?t:this.parent.createElement("div",{className:"e-gridheader"});var e=i?t.querySelector("."+gt):this.parent.createElement("div",{className:gt});this.toggleStackClass(t),t.appendChild(e),this.setPanel(t),i||this.parent.element.appendChild(t)},o.prototype.renderTable=function(){var t=this.getPanel();t.appendChild(this.createHeaderTable()),this.setTable(t.querySelector("."+Zt)),this.initializeHeaderDrag(),this.initializeHeaderDrop(),this.parent.notify(gi,{rows:this.rows})},o.prototype.getPanel=function(){return this.headerPanel},o.prototype.setPanel=function(t){this.headerPanel=t},o.prototype.getTable=function(){return this.headerTable},o.prototype.setTable=function(t){this.headerTable=t},o.prototype.getColGroup=function(){return this.colgroup},o.prototype.setColGroup=function(t){return this.colgroup=t},o.prototype.getRows=function(){var t=this.getTable();return t.tHead.rows},o.prototype.createHeaderTable=function(){var t=this.createTable(),i=this.getPanel().querySelector("."+gt);return i.appendChild(t),i},o.prototype.createHeader=function(t,i){var e=this.parent;this.getTable()&&Se(this.getTable());var r=this.parent.createElement("table",{className:Zt,attrs:{cellspacing:"0.25px",role:"presentation"}}),n=this.createHeaderContent(i),s=n.thead,a=this.parent.createElement(Le,{className:this.parent.frozenRows?"":"e-hide",attrs:{role:"rowgroup"}});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var l=this.parent.createElement(Ht),h=this.parent.createElement("tr",{attrs:{role:"row"}}),u,p=this.rows=n.rows,d=0,f=p.length;d<f;d++)for(var g=0,v=p[parseInt(d.toString(),10)].cells.length;g<v;g++)u=this.parent.createElement("td"),h.appendChild(u);return(e.allowFiltering||e.allowSorting||e.allowGrouping)&&r.classList.add("e-sortfilter"),this.updateColGroup(l),a.appendChild(h),r.appendChild(this.setColGroup(l)),r.appendChild(s),r.appendChild(a),r.appendChild(this.caption),r},o.prototype.createTable=function(t){return t===void 0&&(t=null),this.createHeader(t)},o.prototype.createHeaderContent=function(t){var i=this.parent,e=i.getColumns(),r=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),n=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),s=new kr(this.serviceLocator,le.Header,i);s.element=n;var a=[],l;this.colDepth=Kf(i.columns);for(var h=0,u=this.colDepth;h<u;h++)a[parseInt(h.toString(),10)]=this.generateRow(h),a[parseInt(h.toString(),10)].cells=[];if(a=this.ensureColumns(a),a=this.getHeaderCells(a,t),i.isRowDragable()&&this.parent.getFrozenMode()==="Right")for(var h=0,u=a.length;h<u;h++)a[parseInt(h.toString(),10)].cells.push(this.generateCell({},le.RowDragHIcon));for(var h=0,u=this.colDepth;h<u;h++)l=s.render(a[parseInt(h.toString(),10)],e),this.parent.rowHeight&&l.querySelector(".e-headercell")&&(l.style.height=this.parent.rowHeight+"px"),Js(l),r.appendChild(l);var p={thead:r,rows:a};return p},o.prototype.updateColGroup=function(t){var i=this.parent.getColumns(),e,r=this.parent.getColumnIndexesInView();if(t.id=this.parent.element.id+Ht,this.parent.allowGrouping)for(var n=0,s=this.parent.groupSettings.columns.length;n<s;n++)this.parent.enableColumnVirtualization&&r.indexOf(n)===-1||(e=this.parent.createElement("col",{className:"e-group-intent"}),t.appendChild(e));(this.parent.detailTemplate||this.parent.childGrid)&&(e=this.parent.createElement("col",{className:"e-detail-intent"}),t.appendChild(e)),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&(e=this.parent.createElement("col",{className:"e-drag-intent"}),t.appendChild(e));for(var n=0,s=i.length;n<s;n++)e=this.parent.createElement("col"),i[parseInt(n.toString(),10)].visible===!1&&mt(e,{display:"none"}),t.appendChild(e);return this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&(e=this.parent.createElement("col",{className:"e-drag-intent"}),t.appendChild(e)),t},o.prototype.ensureColumns=function(t){for(var i=this.parent,e=this.parent.getColumnIndexesInView(),r=0,n=t.length;r<n;r++){if(i.allowGrouping)for(var s=0,a=i.groupSettings.columns.length;s<a;s++)this.parent.enableColumnVirtualization&&e.indexOf(s)===-1||t[parseInt(r.toString(),10)].cells.push(this.generateCell({},le.HeaderIndent));if(i.detailTemplate||i.childGrid){var l={};this.parent.notify(Yl,l),t[parseInt(r.toString(),10)].cells.push(this.generateCell(l,le.DetailHeader))}i.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&t[parseInt(r.toString(),10)].cells.push(this.generateCell({},le.RowDragHIcon))}return t},o.prototype.getHeaderCells=function(t,i){var e=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),r=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var n=0;n<r.length;n++)this.lockColsRendered=!1,t=this.appendCells(r[parseInt(n.toString(),10)],t,0,n===0,!1,n===r.length-1,e,i,!1);for(var n=0,s=r.length;n<s;n++)this.notfrzIdx=0,this.lockColsRendered=!0,t=this.appendCells(r[parseInt(n.toString(),10)],t,0,n===0,!1,n===s-1,e,i,!1);return t},o.prototype.appendCells=function(t,i,e,r,n,s,a,l,h){var u=s?h?"e-laststackcell":"e-lastcell":"",p=!this.parent.lockcolPositionCount||t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered;if(!t.columns)p&&i[parseInt(e.toString(),10)].cells.push(this.generateCell(t,le.Header,this.colDepth-e,(r?"":n?"e-firstcell":"")+u,e,this.parent.getColumnIndexByUid(t.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(t.lockColumn&&!this.lockColsRendered||!t.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;else{this.isFirstCol=!1;var d=this.getCellCnt(t,0);if(d){var f=this.getStackedLockColsCount(t,0),g=this.parent.lockcolPositionCount===0||!this.lockColsRendered&&f!==0||this.lockColsRendered&&d-f!==0;g&&i[parseInt(e.toString(),10)].cells.push(new Tr({cellType:le.StackedHeader,column:t,colSpan:this.getColSpan(d,f),className:r?"":n?"e-firstcell":""}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var v=0;v<t.columns.length;v++)i=this.appendCells(t.columns[parseInt(v.toString(),10)],i,e+1,r,v===0,v===t.columns.length-1&&s,a,l,!1);if(this.lockColsRendered)for(var v=0,m=t.columns.length;v<m;v++){r=r&&v===0;var y=this.isFirstCol=t.columns[parseInt(v.toString(),10)].visible&&!r,I=v===m-1&&s;i=this.appendCells(t.columns[parseInt(v.toString(),10)],i,e+1,r,y&&!I,I,a,l,!0)}}return i},o.prototype.getStackedLockColsCount=function(t,i){if(t.columns)for(var e=0;e<t.columns.length;e++)i=this.getStackedLockColsCount(t.columns[parseInt(e.toString(),10)],i);else t.lockColumn&&i++;return i},o.prototype.getColSpan=function(t,i){return t=this.lockColsRendered?t-i:i,t},o.prototype.generateRow=function(t){return new sr({})},o.prototype.generateCell=function(t,i,e,r,n,s){var a={visible:t.visible,isDataCell:!1,isTemplate:!c(t.headerTemplate),rowID:"",column:t,cellType:i,rowSpan:e,className:r,index:n,colIndex:s};return(!a.rowSpan||a.rowSpan<2)&&delete a.rowSpan,new Tr(a)},o.prototype.setVisible=function(t){for(var i=this.parent,e,r,n=0,s=t.length;n<s;n++){var a=t[parseInt(n.toString(),10)];r=i.getNormalizedColumnIndex(a.uid),e=a.visible?"":"none",mt(this.getColGroup().children[parseInt(r.toString(),10)],{display:e})}this.refreshUI()},o.prototype.colPosRefresh=function(){this.refreshUI()},o.prototype.refreshUI=function(){var t=this.getPanel();this.toggleStackClass(t);var i=this.freezeReorder?this.headerPanel.querySelector("."+In).querySelector("."+Zt):this.getTable(),e=void 0;if(i){Se(i),i.removeChild(i.firstChild),i.removeChild(i.childNodes[0]);var r=this.parent.createElement(Ht),n=this.createHeaderContent(e);this.rows=n.rows,i.insertBefore(n.thead,i.firstChild),this.updateColGroup(r),i.insertBefore(this.setColGroup(r),i.firstChild),this.appendContent(i),this.parent.notify(Wl,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),this.initializeHeaderDrag();for(var s=[].slice.call(t.querySelectorAll("tr.e-columnheader")),a=0,l=s;a<l.length;a++){var h=l[a],u=[].slice.call(h.getElementsByClassName("e-grouptopleftcell"));u.length&&u[u.length-1].classList.add("e-lastgrouptopleftcell")}this.parent.notify(gi,{rows:this.rows}),this.parent.enableColumnVirtualization&&M(i,In)&&this.parent.notify(gi,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&this.parent.textWrapSettings.wrapMode==="Header"&&Rt(s,!0)}var p=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");c(p)||(p.tabIndex=0)},o.prototype.toggleStackClass=function(t){var i=this.parent.columns,e=i.some(function(r){return!c(r.columns)});e?t.classList.add("e-stackedheader"):t.classList.remove("e-stackedheader")},o.prototype.appendContent=function(t){this.getPanel().querySelector("."+gt).appendChild(t)},o.prototype.getCellCnt=function(t,i){if(t.columns)for(var e=0,r=t.columns.length;e<r;e++)i=this.getCellCnt(t.columns[parseInt(e.toString(),10)],i);else t.visible&&i++;return i},o.prototype.initializeHeaderDrag=function(){var t=this.parent;(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)&&(this.draggable=new $s(t.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}),this.parent.on(yi,this.droppableDestroy,this))},o.prototype.initializeHeaderDrop=function(){var t=this.parent;this.droppable=new Zs(t.getHeaderContent(),{accept:".e-dragclone",drop:this.drop}),this.parent.on(yi,this.droppableDestroy,this)},o.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy(),this.draggable&&!this.draggable.isDestroyed&&this.draggable.destroy()},o.prototype.renderCustomToolbar=function(){var t=this,i=this.parent;if(i.rowRenderingMode==="Vertical"&&!i.toolbar&&(i.allowSorting||i.allowFiltering&&i.filterSettings.type!=="FilterBar")){for(var e=i.createElement("div",{className:"e-res-toolbar e-toolbar"}),r=i.createElement("div",{className:"e-toolbar-items"}),n=i.createElement("div",{className:"e-toolbar-left"}),s=this.parent.allowFiltering&&this.parent.allowSorting?2:1,a=0;a<s;a++){var l=i.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),h=s===1?this.parent.allowSorting?"sort":"filter":a===1?"sort":"filter",u=i.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),p=i.createElement("span",{className:"e-btn-icon e-res"+h+"-icon e-icons"});u.appendChild(p);var d=new Ei({cssClass:this.parent.cssClass?this.parent.cssClass:""});d.appendTo(u),u.onclick=function(f){f.target.classList.contains("e-ressort-btn")||f.target.classList.contains("e-ressort-icon")?t.parent.showResponsiveCustomSort():t.parent.showResponsiveCustomFilter()},l.appendChild(u),n.appendChild(l)}r.appendChild(n),e.appendChild(r),i.element.insertBefore(e,this.parent.element.querySelector("."+Tt))}else i.enableAdaptiveUI&&!i.toolbar&&i.getContent().classList.add("e-responsive-header")},o.prototype.updateCustomResponsiveToolbar=function(t){var i=this.parent.element.querySelector(".e-responsive-toolbar");t.module==="toolbar"&&(i?Se(i):this.renderCustomToolbar())},o}(),Lt=function(){function o(t,i){this.localizer=i.getService("localization"),this.formatter=i.getService("valueFormatter"),this.parent=t,this.element=this.parent.createElement("TD",{className:Me,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":this.localizer.getConstant("SelectRow")}})}return o.prototype.getGui=function(){return""},o.prototype.format=function(t,i,e){if(!c(t.format)){if(t.type==="number"&&isNaN(parseInt(i,10))&&(i=null),t.type==="dateonly"&&typeof i=="string"&&i){var r=i.split(/[^0-9.]/);i=new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10))}i=this.formatter.toView(i,t.getFormatter())}return c(i)?"":i.toString()},o.prototype.evaluate=function(t,i,e,r,n,s){var a,l;if(i.column.template){var h=this.parent.isReact&&typeof i.column.template!="string"&&i.column.template.prototype&&!i.column.template.prototype.CSPTemplate,u=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,p=["index"],d=Co({},e,(a={},a[jl]=n,a.column=i.column,a)),f=this.parent.element.id+i.column.uid,g="isStringTemplate";if(h||u){var v={index:r[p[0]]};i.column.getColumnTemplate()(_(v,d),this.parent,"columnTemplate",f,this.parent[""+g],null,t)}else l=i.column.getColumnTemplate()(_({index:r[p[0]]},d),this.parent,"template",f,this.parent[""+g],void 0,void 0,this.parent.root);return!h&&!u&&qt(t,l),this.parent.notify("template-result",{template:l}),l=null,t.setAttribute("aria-label",t.innerText+this.localizer.getConstant("TemplateCell")+this.localizer.getConstant("ColumnHeader")+i.column.headerText),!1}return!0},o.prototype.invokeFormatter=function(t,i,e){if(!c(t.formatter))if(Nf(t.formatter,"getValue")){var r=t.formatter;i=new r().getValue(t,e)}else typeof t.formatter=="function"?i=t.formatter(t,e):i=t.formatter.getValue(t,e);return i},o.prototype.render=function(t,i,e,r,n){return this.refreshCell(t,i,e,n)},o.prototype.refreshTD=function(t,i,e,r){var n=this.parent.editSettings.mode==="Batch"&&t.classList.contains("e-editedbatchcell");if(this.parent.isReact){var s=t.cellIndex,a=t.parentElement;Se(t);var l=this.refreshCell(i,e,r,n);this.cloneAttributes(l,t),a.cells.length!==s-1?a.insertBefore(l,a.cells[parseInt(s.toString(),10)]):a.appendChild(l)}else{var h=this.refreshCell(i,e,r,n);t.innerHTML="";var u=h.getAttribute("aria-label");u&&t.setAttribute("aria-label",u);for(var p=[].slice.call(h.childNodes),d=0,f=p;d<f.length;d++){var g=f[d];t.appendChild(g)}}},o.prototype.cloneAttributes=function(t,i){for(var e=i.attributes,r=e.length,n;r--;)n=e[parseInt(r.toString(),10)],t.setAttribute(n.name,n.value)},o.prototype.refreshCell=function(t,i,e,r){var n,s=this.element.cloneNode(),a=t.column,l;t.isForeignKey&&(l=t.foreignKeyData[0]||(n={},n[a.foreignKeyValue]=a.format?null:"",n));var h=this.getGui(),u=t.isForeignKey?this.getValue(a.foreignKeyValue,l,a):this.getValue(a.field,i,a);if((a.type==="date"||a.type==="datetime")&&!c(u)&&(u=new Date(u)),a.type==="dateonly"&&!c(u)&&typeof u=="string"){var p=u.split(/[^0-9.]/);u=new Date(parseInt(p[0],10),parseInt(p[1],10)-1,parseInt(p[2],10))}if(u=this.format(a,u,i),h=u.toString(),a.type==="boolean"&&!a.displayAsCheckBox){var d=u!=="true"&&u!=="false"?null:u==="true"?"True":"False";h=d?this.localizer.getConstant(d):h}var f=this.invokeFormatter(a,u,i);if(h=c(a.formatter)?h:c(f)?"":f.toString(),this.evaluate(s,t,i,e,l,r)&&a.type!=="checkbox")this.appendHtml(s,this.parent.sanitize(h),a.getDomSetter?a.getDomSetter():"innerHTML");else if(a.type==="checkbox"){s.classList.add(er),this.parent.selectionSettings.persistSelection?u=u==="true":u=!1;var g=ir(this.parent.createElement,!1,{checked:u,label:" "});this.parent.cssClass&&T([g],[this.parent.cssClass]),this.rowChkBox.id="checkbox-"+t.rowID,g.insertBefore(this.rowChkBox.cloneNode(),g.firstChild),s.appendChild(g)}if(this.parent.checkAllRows==="Check"&&this.parent.enableVirtualization&&(t.isSelected=!0),this.setAttributes(s,t,e),a.type==="boolean"&&a.displayAsCheckBox){var v=isNaN(parseInt(u.toString(),10))?u==="true":parseInt(u.toString(),10)>0,g=ir(this.parent.createElement,!1,{checked:v,label:" "});s.innerHTML="",s.classList.add("e-gridchkbox-cell"),g.classList.add("e-checkbox-disabled"),this.parent.cssClass&&T([g],[this.parent.cssClass]),s.appendChild(g)}if(s.classList.contains("e-summarycell")&&!i.key){var m=s.getAttribute("e-mappinguid");a=this.parent.getColumnByUid(m),s.setAttribute("aria-label",h+this.localizer.getConstant("ColumnHeader")+t.column.headerText)}return this.parent.isFrozenGrid()&&(!i||i&&!i.key)&&mh(this.parent,a,s),s},o.prototype.appendHtml=function(t,i,e){return e===void 0&&(e="innerHTML"),t[""+e]=i,t},o.prototype.setAttributes=function(t,i,e){var r=i.column;this.buildAttributeFromCell(t,i,r.type==="checkbox"),$t(t,e),$t(t,i.attributes),r.customAttributes&&$t(t,r.customAttributes),this.parent.rowRenderingMode==="Vertical"&&$t(t,{"data-cell":r.headerText}),r.textAlign&&(t.style.textAlign=r.textAlign),r.clipMode==="Clip"||!r.clipMode&&this.parent.clipMode==="Clip"?t.classList.add("e-gridclip"):(r.clipMode==="EllipsisWithTooltip"||!r.clipMode&&this.parent.clipMode==="EllipsisWithTooltip"&&!(this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Content"||this.parent.textWrapSettings.wrapMode==="Both")))&&r.type!=="checkbox"&&t.classList.add("e-ellipsistooltip")},o.prototype.buildAttributeFromCell=function(t,i,e){var r={},n={colindex:rt},s=[];i.colSpan&&(r.colSpan=i.colSpan),i.rowSpan&&(r.rowSpan=i.rowSpan),i.isTemplate&&s.push("e-templatecell"),i.isSelected&&(s.push.apply(s,["e-selectionbackground","e-active"]),e&&t.querySelector(".e-frame").classList.add("e-check")),i.isColumnSelected&&s.push.apply(s,["e-columnselection"]),i.cellType===le.Header?(r[n.colindex]=i.colIndex,r[Qa]=i.colIndex+1):c(i.index)||(r[n.colindex]=i.index,r[Qa]=i.index+1),i.visible||s.push("e-hide"),r.class=s,$t(t,r)},o.prototype.getValue=function(t,i,e){return e.valueAccessor(t,i,e)},o}(),ih=function(){function o(){}return o.prototype.setOptions=function(t,i){for(var e=Object.keys(i),r=0;r<e.length;r++)Pi(t,Bi[e[parseInt(r.toString(),10)]],i[e[parseInt(r.toString(),10)]])},o.prototype.setExpand=function(t,i){Pi(t,Bi.expand,i)},o.prototype.setSort=function(t,i){Pi(t,Bi.sort,i,typeof i=="boolean")},o.prototype.setBusy=function(t,i){Pi(t,Bi.busy,i),Pi(t,Bi.invalid,null,!0)},o.prototype.setGrabbed=function(t,i,e){Pi(t,Bi.grabbed,i,e)},o.prototype.setDropTarget=function(t,i){Pi(t,Bi.dropeffect,"copy",!i)},o}();function Pi(o,t,i,e){if(e&&o){o.removeAttribute(t);return}o&&o.setAttribute(t,i)}var Bi={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"},Bd=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),rh=function(o){Bd(t,o);function t(){var i=o!==null&&o.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-headercell",attrs:{tabindex:"-1",role:"columnheader"}}),i.ariaService=new ih,i.hTxtEle=i.parent.createElement("span",{className:"e-headertext"}),i.sortEle=i.parent.createElement("div",{className:"e-sortfilterdiv e-icons",attrs:{"aria-hidden":"true"}}),i.gui=i.parent.createElement("div"),i.chkAllBox=i.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":i.localizer.getConstant("SelectAllCheckbox")}}),i}return t.prototype.getGui=function(){return this.gui.cloneNode()},t.prototype.render=function(i,e,r){var n=this.element.cloneNode(),s=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(i,n,s)},t.prototype.refresh=function(i,e){this.clean(e);var r=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(i,e,r)},t.prototype.clean=function(i){i.innerHTML=""},t.prototype.prepareHeader=function(i,e,r){var n=i.column,s={},a="",l=this.getGui(),h;if(Ie(l,{"e-mappinguid":n.uid,class:"e-headercelldiv"}),c(n.headerValueAccessor)||(h=this.getValue(n.headerText,n)),n.type!=="checkbox"){var u=n.headerText;c(h)||(u=h);var p=this.hTxtEle.cloneNode();p[n.getDomSetter()]=this.parent.sanitize(u),l.appendChild(p)}else{n.editType="booleanedit";var d=ir(this.parent.createElement,!1,{checked:!1,label:" "});this.chkAllBox.id="checkbox-"+n.uid,d.insertBefore(this.chkAllBox.cloneNode(),d.firstChild),this.parent.cssClass&&T([d],[this.parent.cssClass]),l.appendChild(d),l.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(e,i),this.appendHtml(e,l),e.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&this.parent.filterSettings.type!=="FilterBar"&&n.allowFiltering&&!c(n.field)&&!(this.parent.showColumnMenu&&n.showColumnMenu)){Ie(r,{"e-mappinguid":"e-flmenu-"+n.uid}),a=a.length?a+". "+this.localizer.getConstant("FilterDescription"):this.localizer.getConstant("FilterDescription"),e.classList.add("e-fltr-icon");var f=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==f.length){for(var g=this.parent.getForeignKeyColumns(),v=0;v<this.parent.columns.length;v++)for(var m=0;m<this.parent.filterSettings.columns.length;m++)if(this.parent.filterSettings.columns[parseInt(m.toString(),10)].field===n.field||g.length&&n.foreignKeyValue===this.parent.filterSettings.columns[parseInt(m.toString(),10)].field){r.classList.add("e-filtered"),f.push(n.field);break}}e.appendChild(r.cloneNode())}i.className&&e.classList.add(i.className),n.customAttributes&&$t(e,n.customAttributes),this.parent.allowSorting&&n.allowSorting&&(s.sort="none",a=a.length?a+". "+this.localizer.getConstant("SortDescription"):this.localizer.getConstant("SortDescription")),(this.parent.allowGrouping&&n.allowGrouping||this.parent.allowReordering&&n.allowReordering)&&(s.grabbed=!1,a=a.length?a+". "+this.localizer.getConstant("GroupDescription"):this.localizer.getConstant("GroupDescription")),this.parent.showColumnMenu&&n.type!=="checkbox"&&!n.template&&(a=a.length?a+". "+this.localizer.getConstant("ColumnMenuDescription"):this.localizer.getConstant("ColumnMenuDescription")),e=this.extendPrepareHeader(n,e);var y,I=this.parent,S=I.getColumnIndexByField(n.field);if(!c(n.headerTemplate)){var R=I.element.id+n.uid+"headerTemplate",L="isStringTemplate",P=n,J=this.parent.isReact&&typeof n.headerTemplate!="string",he=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if(J||he){var pe={index:S};e.firstElementChild.innerHTML="",n.getHeaderTemplate()(_(pe,P),I,"headerTemplate",R,this.parent[""+L],null,e.firstElementChild),this.parent.renderTemplates()}else y=n.getHeaderTemplate()(_({index:S},P),I,"headerTemplate",R,this.parent[""+L],void 0,void 0,this.parent.root),e.firstElementChild.innerHTML="",qt(e.firstElementChild,y)}if(this.ariaService.setOptions(e,s),!c(n.headerTextAlign)||!c(n.textAlign)){var Re=n.headerTextAlign||n.textAlign;l.style.textAlign=Re,Re==="Right"||Re==="Left"?e.classList.add(Re==="Right"?"e-rightalign":"e-leftalign"):Re==="Center"&&e.classList.add("e-centeralign")}if(n.clipMode==="Clip"||!n.clipMode&&this.parent.clipMode==="Clip"?e.classList.add("e-gridclip"):(n.clipMode==="EllipsisWithTooltip"||!n.clipMode&&this.parent.clipMode==="EllipsisWithTooltip")&&!(I.allowTextWrap&&(I.textWrapSettings.wrapMode==="Header"||I.textWrapSettings.wrapMode==="Both"))&&n.type!=="checkbox"&&e.classList.add("e-ellipsistooltip"),a){var B=this.parent.createElement("span",{id:"headerTitle-"+n.uid,innerHTML:a,attrs:{style:"display:none"}});e.appendChild(B),e.setAttribute("aria-describedby",B.id)}e.setAttribute("aria-rowspan",(c(i.rowSpan)?1:i.rowSpan).toString()),e.setAttribute("aria-colspan","1");var H=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if((this.parent.isReact&&this.parent.requireTemplateRef||H&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&!c(n.headerTemplate)){var O=this;O.parent.renderTemplates(function(){O.parent.trigger(Fs,{cell:i,node:e})})}else this.parent.trigger(Fs,{cell:i,node:e});return this.parent.isFrozenGrid()&&mh(this.parent,n,e),e},t.prototype.getValue=function(i,e){return e.headerValueAccessor(i,e)},t.prototype.extendPrepareHeader=function(i,e){if(this.parent.showColumnMenu&&i.showColumnMenu&&!c(i.field)){var r=this.parent.createElement("div",{className:"e-icons e-columnmenu",attrs:{"aria-hidden":"true"}}),n=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==n.length){for(var s=0;s<this.parent.columns.length;s++)for(var a=0;a<this.parent.filterSettings.columns.length;a++)if(this.parent.filterSettings.columns[parseInt(a.toString(),10)].field===i.field){r.classList.add("e-filtered"),n.push(i.field);break}}e.classList.add("e-fltr-icon"),e.appendChild(r)}if(this.parent.allowResizing){var l=this.parent.createElement("div");l.className=i.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",e.appendChild(l)}return e},t.prototype.appendHtml=function(i,e){return i.appendChild(e),i},t}(Lt),zd=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Xa=function(o){zd(t,o);function t(){var i=o!==null&&o.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{tabindex:"-1",role:"columnheader"}}),i}return t.prototype.render=function(i,e,r){var n=this.element.cloneNode(),s=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":i.column.uid}}),a=i.column;if(n.appendChild(s),c(a.headerTemplate)?this.appendHtml(s,this.parent.sanitize(a.headerText),a.getDomSetter()):qt(s,a.getHeaderTemplate()(a,this.parent,"headerTemplate")),i.column.toolTip&&n.setAttribute("title",i.column.toolTip),a.clipMode==="Clip"||!a.clipMode&&this.parent.clipMode==="Clip"?n.classList.add("e-gridclip"):(a.clipMode==="EllipsisWithTooltip"||!a.clipMode&&this.parent.clipMode==="EllipsisWithTooltip")&&n.classList.add("e-ellipsistooltip"),c(i.column.textAlign)||(s.style.textAlign=i.column.textAlign),i.column.customAttributes&&$t(n,i.column.customAttributes),n.setAttribute("colspan",i.colSpan.toString()),n.setAttribute("aria-colspan",i.colSpan.toString()),n.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var l=this.parent.createElement("div");l.className=i.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",n.appendChild(l)}if(i.className&&n.classList.add(i.className),this.parent.trigger(Fs,{cell:i,node:n}),fn(a)==="Left")if(n.classList.add("e-leftfreeze"),a.border==="Left"&&n.classList.add("e-freezeleftborder"),a.index===0)vt(n,this.parent.getIndentCount()*30,this.parent.enableRtl,"Left");else{for(var h=this.parent.getColumns(),u=this.parent.getIndentCount()*30,p=0;p<h.length&&!(a.index<h[parseInt(p.toString(),10)].index);p++)h[parseInt(p.toString(),10)].visible&&(u+=parseFloat(h[parseInt(p.toString(),10)].width.toString()));vt(n,u,this.parent.enableRtl,"Left")}else if(fn(a)==="Right"){n.classList.add("e-rightfreeze");for(var h=this.parent.getColumns(),u=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0,p=h.length-1;p>=0&&!(Za(a,h[parseInt(p.toString(),10)].uid)||a.index>h[parseInt(p.toString(),10)].index);p--)h[parseInt(p.toString(),10)].visible&&(u+=parseFloat(h[parseInt(p.toString(),10)].width.toString()));vt(n,u,this.parent.enableRtl,"Right"),a.border==="Right"&&n.classList.add("e-freezerightborder")}else if(fn(a)==="Fixed"){n.classList.add("e-fixedfreeze");var h=this.parent.getColumns(),u=0;this.parent.getVisibleFrozenLeftCount()?u=this.parent.getIndentCount()*30:this.parent.getFrozenMode()==="Right"&&(u=this.parent.groupSettings.columns.length*30);for(var p=0;p<h.length;p++)a.index>h[parseInt(p.toString(),10)].index&&(h[parseInt(p.toString(),10)].freeze==="Left"||h[parseInt(p.toString(),10)].isFrozen||h[parseInt(p.toString(),10)].freeze==="Fixed")&&h[parseInt(p.toString(),10)].visible&&(u+=parseFloat(h[parseInt(p.toString(),10)].width.toString()));vt(n,u-1,this.parent.enableRtl,"Left"),u=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0;for(var p=h.length-1;p>=0;p--)if(a.index<h[parseInt(p.toString(),10)].index){if(Za(a,h[parseInt(p.toString(),10)].uid)||a.index>h[parseInt(p.toString(),10)].index)break;(h[parseInt(p.toString(),10)].freeze==="Right"||h[parseInt(p.toString(),10)].freeze==="Fixed")&&h[parseInt(p.toString(),10)].visible&&(u+=parseFloat(h[parseInt(p.toString(),10)].width.toString()))}vt(n,u-1,this.parent.enableRtl,"Right")}else n.classList.add("e-unfreeze");return n},t}(Lt),Hd=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Ks=function(o){Hd(t,o);function t(){var i=o!==null&&o.apply(this,arguments)||this;return i.element=i.parent.createElement("TD",{className:"e-indentcell"}),i}return t.prototype.render=function(i,e){var r=this.element.cloneNode();return $t(r,i.attributes),r},t}(Lt),nh=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),qd=function(o){nh(t,o);function t(){var i=o!==null&&o.apply(this,arguments)||this;return i.cellUid=0,i.element=i.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:i.parent.element.id+"captioncell",tabindex:"-1"}}),i}return t.prototype.render=function(i,e){this.element.id=this.parent.element.id+"captioncell"+this.cellUid++;var r=this.element.cloneNode(),n=this.parent,s=i.column,a=s.getDomSetter?s.getDomSetter():"innerHTML",l,h,u;e.headerText=i.column.headerText,i.isForeignKey&&(h=this.format(i.column,i.column.valueAccessor("foreignKey",e,i.column)));for(var p=i.isForeignKey?h:i.column.enableGroupByFormat?e.key:this.format(i.column,i.column.valueAccessor("key",e,i.column)),d=0;d<n.aggregates.length;d++)for(var f=function(R){if(n.getVisibleColumns()[0].field===n.aggregates[parseInt(d.toString(),10)].columns[parseInt(R.toString(),10)].field&&n.aggregates[parseInt(d.toString(),10)].columns[parseInt(R.toString(),10)].groupCaptionTemplate){var L=n.aggregates[parseInt(d.toString(),10)].columns[parseInt(R.toString(),10)].groupCaptionTemplate;if(typeof L=="string"&&L.includes("$"))u=n.aggregates[parseInt(d.toString(),10)].columns[parseInt(R.toString(),10)].groupCaptionTemplate.split("$")[0]+e[n.getVisibleColumns()[0].field][n.aggregates[parseInt(d.toString(),10)].columns[parseInt(R.toString(),10)].type]+n.aggregates[parseInt(d.toString(),10)].columns[parseInt(R.toString(),10)].groupCaptionTemplate.split("}")[1];else{var P=n.aggregates[parseInt(d.toString(),10)].columns[parseInt(R.toString(),10)],J=P.getTemplate(le.CaptionSummary),he="";if(!c(J)){var pe=J.fn(e[P.columnName],g.parent,J.property,he);g.parent.isReact&&typeof P.groupCaptionTemplate!="string"?g.parent.renderTemplates(function(){pe&&pe.length&&(c(n.groupSettings.captionTemplate)?r.innerText+=" "+pe[0].textContent:r.appendChild(pe[0]))}):pe&&pe.length&&(c(n.groupSettings.captionTemplate)?u=pe[0].textContent:u=pe)}}return"break"}},g=this,v=0;v<n.aggregates[parseInt(d.toString(),10)].columns.length;v++){var m=f(v);if(m==="break")break}if(c(n.groupSettings.captionTemplate))n.groupSettings.enableLazyLoading?r[""+a]=this.parent.sanitize(i.column.headerText)+": "+this.parent.sanitize(p)+(u?"   "+u:""):r[""+a]=this.parent.sanitize(i.column.headerText)+": "+this.parent.sanitize(p)+" - "+e.count+" "+(e.count<2?this.localizer.getConstant("Item"):this.localizer.getConstant("Items"))+(u?"   "+u:"");else{var y=this.parent.isReact&&typeof n.groupSettings.captionTemplate!="string",I=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if(y||I){var S=n.element.id+"captionTemplate";nt(n.groupSettings.captionTemplate)(e,this.parent,"captionTemplate",S,null,null,r),this.parent.renderTemplates()}else this.parent.isVue?l=nt(n.groupSettings.captionTemplate)(e,this.parent):l=nt(n.groupSettings.captionTemplate)(e);!y&&!I&&(qt(r,l),u&&u.length&&u[0].textContent&&r.appendChild(u[0]))}return r.setAttribute("colspan",i.colSpan.toString()),r.setAttribute("aria-label",r.innerHTML+this.localizer.getConstant("GroupCaption")),r.setAttribute("title",r.textContent),r},t}(Lt),Vd=function(o){nh(t,o);function t(){var i=o!==null&&o.apply(this,arguments)||this;return i.element=i.parent.createElement("TD",{className:"e-groupcaption"}),i}return t.prototype.render=function(i,e){var r=this.element.cloneNode();return r.innerHTML="&nbsp;",r.setAttribute("colspan",i.colSpan.toString()),r},t}(Lt),Wd=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Gd=function(o){Wd(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return t.prototype.render=function(i,e,r,n){var s=this.element.cloneNode();return s.setAttribute("ej-mappingname",e.field),s.setAttribute("ej-mappingvalue",e.key),s.setAttribute("aria-expanded",n?"true":"false"),s.setAttribute("tabindex","-1"),this.parent.infiniteScrollSettings&&this.parent.infiniteScrollSettings.enableCache?(i.cellType=le.Indent,s.className=n?"e-recordplusexpand e-disablepointer":"e-recordpluscollapse e-disablepointer"):(s.className=n?"e-recordplusexpand":"e-recordpluscollapse",s.appendChild(this.parent.createElement("a",{className:n?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow",attrs:{href:"#",title:n?"expanded":"collapsed"}}))),s},t}(Ks),Ud=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),_d=function(o){Ud(t,o);function t(){var i=o!==null&&o.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-grouptopleftcell"}),i}return t.prototype.render=function(i,e){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),r},t}(Lt),jd=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Kd=function(o){jd(t,o);function t(){var i=o!==null&&o.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-detailheadercell"}),i}return t.prototype.render=function(i,e){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),r},t}(Lt),Qd=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Yd=function(o){Qd(t,o);function t(){var i=o!==null&&o.apply(this,arguments)||this;return i.element=i.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",tabindex:"-1"}}),i}return t.prototype.render=function(i,e,r){var n=this.element.cloneNode();return r&&!c(r.class)?(n.className="",n.className=r.class,n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow",attrs:{href:"#",title:this.localizer.getConstant("Expanded")}}))):n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonalright e-icon-grightarrow",attrs:{href:"#",title:this.localizer.getConstant("Collapsed")}})),i.isSelected&&n.classList.add("e-selectionbackground","e-active"),n},t}(Lt),Xd=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Jd=function(o){Xd(t,o);function t(){var i=o!==null&&o.apply(this,arguments)||this;return i.element=i.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{tabindex:"-1",role:"gridcell"}}),i}return t.prototype.render=function(i,e){var r=this.element.cloneNode();if(r.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",attrs:{"aria-hidden":"true"}})),i.isSelected&&(r.classList.add("e-selectionbackground"),r.classList.add("e-active")),this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount()){r.classList.add("e-leftfreeze");var n=this.parent.getFrozenMode()==="Right"?0:this.parent.groupSettings.columns.length*30;vt(r,n,this.parent.enableRtl,this.parent.getFrozenMode()==="Right"?"Right":"Left")}return r},t}(Lt),$d=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Zd=function(o){$d(t,o);function t(){var i=o!==null&&o.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-rowdragheader"}),i}return t.prototype.render=function(i,e){var r=this.element.cloneNode();if(r.appendChild(Ve("div",{className:"e-emptycell"})),this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount()){r.classList.add("e-leftfreeze");var n=this.parent.getFrozenMode()==="Right"?0:this.parent.groupSettings.columns.length*30;vt(r,n,this.parent.enableRtl,this.parent.getFrozenMode()==="Right"?"Right":"Left")}return r},t}(Lt),ef=function(){function o(t,i){this.emptyGrid=!1,this.counter=0,this.parent=t,this.locator=i,this.data=new Td(t,i),this.l10n=i.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return o.prototype.render=function(){var t=this.parent;this.headerRenderer=this.renderer.getRenderer(At.Header),this.contentRenderer=this.renderer.getRenderer(At.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),t.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),this.parent.height!=="auto"&&this.parent.scrollModule.setPadding(),this.refreshDataManager()},o.prototype.refresh=function(t){var i=this;t===void 0&&(t={requestType:"refresh"});var e=this.parent;e.notify(t.requestType+"-begin",t),e.trigger(ri,t,function(r){if(r===void 0&&(r={requestType:"refresh"}),r.cancel){if(e.notify(Vs,r),r.action==="clearFilter"&&i.parent.filterSettings.type==="Menu"){i.parent.filterSettings.columns[i.parent.filterModule.filterObjIndex]=i.parent.filterModule.prevFilterObject;var n=i.parent.showColumnMenu&&i.parent.filterModule.column.showColumnMenu?".e-columnmenu":".e-icon-filter",s=i.parent.element.querySelector('[e-mappinguid="'+i.parent.filterModule.column.uid+'"]').parentElement,a=s.querySelector(n);c(i.parent.filterModule.prevFilterObject)||a.classList.add("e-filtered")}if(r.action==="clear-filter"&&(i.parent.filterSettings.type==="CheckBox"||i.parent.filterSettings.type==="Excel")&&(i.parent.filterSettings.columns=i.parent.filterModule.checkboxPrevFilterObject),r.requestType==="grouping"){var l=e.groupSettings.columns.indexOf(r.columnName);if(l!==-1){e.setProperties({groupSettings:{Columns:e.groupSettings.columns.splice(l,1)}},!0),e.setProperties({sortSettings:{Columns:e.sortSettings.columns.splice(l,1)}},!0);var h=e.getColumnByField(r.columnName),u=e.getColumnHeaderByField(h.field);h.visible=!c(u)&&!u.classList.contains("e-hide")}}return}if(e.allowSelection&&(r.action==="clearFilter"||r.action==="clear-filter"||r.requestType==="searching"&&r.searchString===""||r.action==="add")&&(e.selectionModule.rmtHdrChkbxClicked=!1),e.allowPaging&&e.pageSettings.pageSizes&&e.pagerModule.pagerObj.isAllPage&&r.action==="add"&&r.requestType==="save"&&e.pagerModule.pagerObj.checkAll&&e.setProperties({pageSettings:{pageSize:e.pageSettings.pageSize+1}},!0),r.requestType==="delete"&&e.allowPaging){var p=r.data.length,d=e.pageSettings.totalRecordsCount-p,f=e.getCurrentViewRecords().length;(!(f-p)&&d&&(e.pageSettings.currentPage-1)*e.pageSettings.pageSize===d||d&&d<=p)&&(e.prevPageMoving=!0,e.setProperties({pageSettings:{totalRecordsCount:d,currentPage:Math.ceil(d/e.pageSettings.pageSize)}},!0),e.pagerModule.pagerObj.totalRecordsCount=d)}r.requestType==="reorder"&&i.parent.dataSource&&"result"in i.parent.dataSource||(r.requestType==="paging"||r.requestType==="columnstate"||r.requestType==="reorder")&&i.parent.groupSettings.enableLazyLoading&&i.parent.groupSettings.columns.length&&(i.parent.enableVirtualization?i.parent.lazyLoadRender:i.parent.contentModule).getGroupCache()[i.parent.pageSettings.currentPage]?i.contentRenderer.refreshContentRows(r):i.refreshDataManager(r)})},o.prototype.resetTemplates=function(){var t=this.parent,i=t.getColumns();if(t.detailTemplate){var e=t.element.id+"detailTemplate";wo[""+e]=[],Vt(e)}t.groupSettings.captionTemplate&&Vt(t.element.id+"captionTemplate"),t.rowTemplate&&Vt(t.element.id+"rowTemplate"),t.toolbarTemplate&&Vt(t.element.id+"toolbarTemplate"),t.pageSettings.template&&Vt(t.element.id+"_template");for(var r=0;r<i.length;r++)i[parseInt(r.toString(),10)].template&&(wo[t.element.id+i[parseInt(r.toString(),10)].uid]=[],Vt(t.element.id+i[parseInt(r.toString(),10)].uid)),i[parseInt(r.toString(),10)].headerTemplate&&Vt(t.element.id+i[parseInt(r.toString(),10)].uid+"headerTemplate"),i[parseInt(r.toString(),10)].filterTemplate&&Vt(t.element.id+i[parseInt(r.toString(),10)].uid+"filterTemplate");for(var n="guid",s=0;s<t.aggregates.length;s++)for(var a=0;a<t.aggregates[parseInt(s.toString(),10)].columns.length;a++){if(t.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)].footerTemplate){var l=t.element.id+t.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)][""+n]+"footerTemplate";Vt(l)}if(t.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)].groupFooterTemplate){var l=t.element.id+t.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)][""+n]+"groupFooterTemplate";Vt(l)}if(t.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)].groupCaptionTemplate){var l=t.element.id+t.aggregates[parseInt(s.toString(),10)].columns[parseInt(a.toString(),10)][""+n]+"groupCaptionTemplate";Vt(l)}}},o.prototype.refreshComplete=function(t){this.parent.trigger(wt,t)},o.prototype.refreshDataManager=function(t){var i=this;t===void 0&&(t={});var e=this.parent,r=e.loadingIndicator.indicatorType==="Shimmer"&&t.requestType!=="virtualscroll"&&t.requestType!=="infiniteScroll"||(t.requestType==="virtualscroll"||t.requestType==="infiniteScroll")&&e.enableVirtualMaskRow;t.requestType!=="virtualscroll"&&!t.isCaptionCollapse&&!r&&this.parent.showSpinner(),r&&e.showMaskRow(t.requestType==="virtualscroll"?t.virtualInfo.sentinelInfo.axis:t.requestType==="infiniteScroll"?t.direction:void 0),this.parent.notify(Qp,t),this.emptyGrid=!1;var n,s=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector("."+dt),!0),s){var a=new xt;n=this.getFData(a,t)}if(n?n=n.then(function(h){var u=i.data.generateQuery().requiresCount();if(i.emptyGrid){var p=new xt;return p.resolve({result:[],count:0}),p.promise}return i.data.getData(t,u)}):(e.allowPaging&&!e.getDataModule().dataManager.dataSource.offline&&e.pageSettings&&e.pageSettings.pageSizes&&e.pagerModule&&e.pagerModule.pagerObj&&e.pagerModule.pagerObj.isAllPage&&(e.pagerModule.pagerObj.isAllPage=void 0),n=this.data.getData(t,this.data.generateQuery().requiresCount())),this.parent.getForeignKeyColumns().length&&(!s||this.parent.searchSettings.key.length)){var l=new xt;n=n.then(function(h){return i.parent.notify(Pa,{dataManager:n,result:h,promise:l,action:t}),l.promise})}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(n=n.then(function(h){return i.validateGroupRecords(h)})),n.then(function(h){return i.dataManagerSuccess(h,t)}).catch(function(h){return i.dataManagerFailure(h,t)})},o.prototype.getFData=function(t,i){return this.parent.notify(Pa,{isComplex:!0,promise:t,action:i}),t.promise},o.prototype.isNeedForeignAction=function(){var t=this.parent;return!!(t.allowFiltering&&t.filterSettings.columns.length||t.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},o.prototype.foreignKey=function(t){var i=this;return t.some(function(e){var r=!1;return r=i.parent.filterSettings.columns.some(function(n){return e.uid===n.uid}),!!(r||i.parent.searchSettings.key.length)})},o.prototype.sendBulkRequest=function(t){var i=this;t.requestType="batchsave";var e=this.parent;if(e.allowPaging&&e.pageSettings.pageSizes&&e.pagerModule.pagerObj.isAllPage&&e.pagerModule.pagerObj.checkAll){var r=t.changes.addedRecords.length;r&&e.setProperties({pageSettings:{pageSize:e.pageSettings.pageSize+r}},!0)}e.allowPaging&&(t.changes.addedRecords.length||t.changes.deletedRecords.length||t.changes.changedRecords.length)&&e.pageSettings&&e.pageSettings.pageSizes&&e.pagerModule&&e.pagerModule.pagerObj&&!e.getDataModule().dataManager.dataSource.offline&&e.pagerModule.pagerObj.isAllPage&&(e.pagerModule.pagerObj.isAllPage=void 0);var n=this.data.saveChanges(t.changes,this.parent.getPrimaryKeyFieldNames()[0],t.original),s=this.data.generateQuery().requiresCount();if(this.data.dataManager.dataSource.offline){this.refreshDataManager({requestType:"batchsave"});return}else n.then(function(a){i.data.getData(t,s).then(function(l){return i.dmSuccess(l,t)}).catch(function(l){return i.dmFailure(l,t)})}).catch(function(a){return i.dmFailure(a,t)})},o.prototype.dmSuccess=function(t,i){this.dataManagerSuccess(t,i)},o.prototype.dmFailure=function(t,i){this.dataManagerFailure(t,i)},o.prototype.renderEmptyRow=function(){this.emptyRow(!0)},o.prototype.emptyRow=function(t){var i=this.parent,e=this.contentRenderer.getTable().querySelector(Le);c(e)||Se(e),e=this.parent.createElement(Le,{attrs:{role:"rowgroup"}});var r=i.allowRowDragAndDrop&&c(i.rowDropSettings.targetID)?1:0;(i.detailTemplate||i.childGrid)&&++r;var n=this.parent.createElement("tr",{className:"e-emptyrow",attrs:{role:"row"}}),s;if(i.emptyRecordTemplate){var a=i.element.id+"emptyRecordTemplate";s=this.parent.createElement("td",{attrs:{colspan:(i.getVisibleColumns().length+r+i.groupSettings.columns.length).toString()}}),i.isVue?s.appendChild(i.getEmptyRecordTemplate()(i.dataSource,i,"emptyRecordTemplate",a,void 0,void 0,void 0,this.parent.root)[1]):s.appendChild(i.getEmptyRecordTemplate()(i.dataSource,i,"emptyRecordTemplate",a,void 0,void 0,void 0,this.parent.root)[0]),i.isReact&&this.parent.renderTemplates()}else s=this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(i.getVisibleColumns().length+r+i.groupSettings.columns.length).toString()}});i.isFrozenGrid()&&(s.classList.add("e-leftfreeze"),s.style.left="0px"),i.frozenRows&&i.element.querySelector(".e-frozenrow-border")&&this.parent.element.querySelector(".e-frozenrow-border").classList.add("e-frozenrow-empty"),n.appendChild(s),e.appendChild(n),this.contentRenderer.renderEmpty(e),t&&(this.parent.trigger(Di,{}),this.parent.notify(ni,{rows:[new sr({isDataRow:!0,cells:[new Tr({isDataCell:!0,visible:!0})]})]}))},o.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},o.prototype.updateColumnType=function(t){for(var i=this.parent.getColumns(),e,r="customFormat",n="equalTo",s=t&&t.items?t.items[0]:t,a=this.locator.getService("valueFormatter"),l=0,h=i.length;l<h;l++){e=mi(i[parseInt(l.toString(),10)].field||"",s),c(i[parseInt(l.toString(),10)][""+r])||(i[parseInt(l.toString(),10)].format=i[parseInt(l.toString(),10)][""+r]),!c(i[parseInt(l.toString(),10)].validationRules)&&!c(i[parseInt(l.toString(),10)].validationRules[""+n])&&(i[parseInt(l.toString(),10)].validationRules[""+n][0]=this.parent.element.id+i[parseInt(l.toString(),10)].validationRules[""+n][0]),i[parseInt(l.toString(),10)].isForeignColumn()&&i[parseInt(l.toString(),10)].columnData&&(e=mi(i[parseInt(l.toString(),10)].foreignKeyValue||"",i[parseInt(l.toString(),10)].columnData[0])),c(e)?i[parseInt(l.toString(),10)].type=i[parseInt(l.toString(),10)].type||null:(this.isColTypeDef=!0,i[parseInt(l.toString(),10)].type||(i[parseInt(l.toString(),10)].type=e.getDay?e.getHours()>0||e.getMinutes()>0||e.getSeconds()>0||e.getMilliseconds()>0?"datetime":"date":typeof e));var u=new Or;i[parseInt(l.toString(),10)].format&&(i[parseInt(l.toString(),10)].format.skeleton||i[parseInt(l.toString(),10)].format.format&&typeof i[parseInt(l.toString(),10)].format.format=="string")&&(i[parseInt(l.toString(),10)].setFormatter(u.getFormatFunction(_({},i[parseInt(l.toString(),10)].format))),i[parseInt(l.toString(),10)].setParser(u.getParserFunction(i[parseInt(l.toString(),10)].format))),typeof i[parseInt(l.toString(),10)].format=="string"?Ys(this.locator,i[parseInt(l.toString(),10)]):!i[parseInt(l.toString(),10)].format&&i[parseInt(l.toString(),10)].type==="number"&&i[parseInt(l.toString(),10)].setParser(a.getParserFunction({format:"n2"})),i[parseInt(l.toString(),10)].type==="dateonly"&&!i[parseInt(l.toString(),10)].format&&(i[parseInt(l.toString(),10)].format="yMd",Ys(this.locator,i[parseInt(l.toString(),10)]))}},o.prototype.dataManagerSuccess=function(t,i){var e=this,r=this.parent;this.contentRenderer=this.renderer.getRenderer(At.Content),this.headerRenderer=this.renderer.getRenderer(At.Header),t.actionArgs=i;var n=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!r.groupSettings.enableLazyLoading&&(i.requestType==="delete"||i.requestType==="save"&&this.parent.infiniteScrollModule.requestType==="add"&&!(r.sortSettings.columns.length||r.filterSettings.columns.length||this.parent.groupSettings.columns.length||r.searchSettings.key));r.trigger(hp,t,function(s){if(!s.cancel){s.result=c(s.result)?[]:s.result;var a=Object.keys(s.result).length;if(!e.parent.isDestroyed){if(!r.getColumns().length&&!a&&!(r.columns.length&&r.columns[0]instanceof ct)){r.hideSpinner();return}if(e.isInfiniteEnd(i)&&!a){e.parent.notify(Ga,{e:i,result:t.result,count:t.count,agg:t.aggregates});return}if(e.parent.isEdit=!1,e.parent.notify(_p,{}),e.parent.notify(zs,{}),i&&i.requestType!=="infiniteScroll"&&e.parent.notify(Ed,{type:"refreshCommandColumn"}),e.contentRenderer.prevCurrentView=e.parent.currentViewData.slice(),r.currentViewData=s.result,r.notify(ud,{args:i,data:s.result}),s.count&&!r.allowPaging&&(r.enableVirtualization||r.enableInfiniteScrolling)&&(r.totalDataRecordsCount=s.count),!a&&s.count&&r.allowPaging&&i&&i.requestType!=="delete"){e.parent.groupSettings.enableLazyLoading&&(i.requestType==="grouping"||i.requestType==="ungrouping")&&e.parent.notify(yp,i),r.prevPageMoving=!0,r.pageSettings.totalRecordsCount=s.count,i.requestType!=="paging"&&(r.pageSettings.currentPage=Math.ceil(s.count/r.pageSettings.pageSize)),r.dataBind();return}if((!r.getColumns().length&&a||!e.isLayoutRendered)&&!Qt(r)&&(r.removeMaskRow(),e.updatesOnInitialRender(s)),!e.isColTypeDef&&r.getCurrentViewRecords()&&(e.data.dataManager.dataSource.offline&&r.dataSource&&r.dataSource.length?e.updateColumnType(r.dataSource[0]):e.updateColumnType(r.getCurrentViewRecords()[0])),!e.parent.isInitialLoad&&e.parent.groupSettings.disablePageWiseAggregates&&!e.parent.groupSettings.columns.length&&(s.result=e.parent.dataSource instanceof Array?e.parent.dataSource:e.parent.currentViewData),(e.parent.isReact||e.parent.isVue)&&!c(i)&&i.requestType!=="infiniteScroll"&&!i.isFrozen&&bo(e.parent,["footerTemplate"]),e.parent.isAngular&&e.parent.allowGrouping&&e.parent.groupSettings.captionTemplate&&!(!c(i)&&i.requestType==="infiniteScroll")&&e.parent.destroyTemplate(["groupSettings_captionTemplate"]),e.parent.notify(Rr,_({count:s.count,result:s.result,aggregates:s.aggregates},i)),(r.groupSettings.columns.length||i&&i.requestType==="ungrouping")&&i&&i.requestType!=="filtering"&&e.headerRenderer.refreshUI(),a){if(Qt(r)){var l="content";i.scrollTop={top:e.contentRenderer[""+l].scrollTop}}n?e.parent.notify(Ga,{e:i,result:t.result,count:t.count,agg:t.aggregates}):e.parent.enableImmutableMode?e.contentRenderer.immutableModeRendering(i):e.contentRenderer.refreshContentRows(i)}else{if(i&&i.isCaptionCollapse)return;if(!r.getColumns().length){r.element.innerHTML="",alert(e.l10n.getConstant("EmptyDataSourceError"));return}if(e.contentRenderer.setRowElements([]),e.contentRenderer.setRowObjects([]),e.ariaService.setBusy(e.parent.getContent().querySelector("."+dt),!1),r.removeMaskRow(),e.renderEmptyRow(),r.enableColumnVirtualization&&!a&&e.parent.notify(st,{rows:r.getRowsObject(),args:{}}),i){var h=(i.requestType||"").toLowerCase()+"-complete";e.parent.notify(h,i),i.requestType==="batchsave"&&(i.cancel=!1,i.rows=[],i.isFrozen=!i.isFrozen,e.parent.trigger(wt,i))}e.parent.autoFit&&e.parent.preventAdjustColumns(),e.parent.hideSpinner()}e.parent.notify(Rp,{}),e.setRowCount(e.parent.getCurrentViewRecords().length),"query"in t&&(e.parent.getDataModule().isQueryInvokedFromData=!1)}}})},o.prototype.dataManagerFailure=function(t,i){c(this.parent.contentModule)||(this.ariaService.setOptions(this.parent.getContent().querySelector("."+dt),{busy:!1,invalid:!0}),this.setRowCount(1)),this.parent.trigger($c,{error:t}),this.parent.hideSpinner(),this.parent.removeMaskRow(),!(i.requestType==="save"||i.requestType==="delete"||i.name==="bulk-save")&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.log("actionfailure",{error:t}))},o.prototype.setRowCount=function(t){this.ariaService.setOptions(this.parent.element,{rowcount:t?t.toString():"1"})},o.prototype.isInfiniteEnd=function(t){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&t.requestType==="delete"},o.prototype.updatesOnInitialRender=function(t){this.isLayoutRendered=!0;var i=!1;this.parent.columns.length<1&&(this.buildColumns(t.result[0]),i=!0),Rn(this.parent.columns,null,this.parent),i&&this.parent.notify(js,{}),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(Ar,{})},o.prototype.iterateComplexColumns=function(t,i,e){for(var r=Object.keys(t),n=0;n<r.length;n++){var s=typeof t[r[parseInt(n.toString(),10)]]=="object"&&t[r[parseInt(n.toString(),10)]]&&!(t[r[parseInt(n.toString(),10)]]instanceof Date)?Object.keys(t[r[parseInt(n.toString(),10)]]):[];s.length?this.iterateComplexColumns(t[r[parseInt(n.toString(),10)]],i+(r[parseInt(n.toString(),10)]+"."),e):(e[this.counter]=i+r[parseInt(n.toString(),10)],this.counter++)}},o.prototype.buildColumns=function(t){var i=[],e={};this.iterateComplexColumns(t,"",e);for(var r=Object.keys(e).filter(function(a){return e[""+a]!=="BlazId"}).map(function(a){return e[""+a]}),n=0,s=r.length;n<s;n++)i[parseInt(n.toString(),10)]={field:r[parseInt(n.toString(),10)]},this.parent.enableColumnVirtualization&&(i[parseInt(n.toString(),10)].width=c(i[parseInt(n.toString(),10)].width)?200:i[parseInt(n.toString(),10)].width);this.parent.setProperties({columns:i},!0)},o.prototype.instantiateRenderer=function(){this.renderer.addRenderer(At.Header,new Pd(this.parent,this.locator)),this.renderer.addRenderer(At.Content,new Nd(this.parent,this.locator));var t=this.locator.getService("cellRendererFactory");t.addCellRenderer(le.Header,new rh(this.parent,this.locator)),t.addCellRenderer(le.Data,new Lt(this.parent,this.locator)),t.addCellRenderer(le.StackedHeader,new Xa(this.parent,this.locator)),t.addCellRenderer(le.Indent,new Ks(this.parent,this.locator)),t.addCellRenderer(le.GroupCaption,new qd(this.parent,this.locator)),t.addCellRenderer(le.GroupCaptionEmpty,new Vd(this.parent,this.locator)),t.addCellRenderer(le.Expand,new Gd(this.parent,this.locator)),t.addCellRenderer(le.HeaderIndent,new _d(this.parent,this.locator)),t.addCellRenderer(le.StackedHeader,new Xa(this.parent,this.locator)),t.addCellRenderer(le.DetailHeader,new Kd(this.parent,this.locator)),t.addCellRenderer(le.RowDragHIcon,new Zd(this.parent,this.locator)),t.addCellRenderer(le.DetailExpand,new Yd(this.parent,this.locator)),t.addCellRenderer(le.DetailFooterIntent,new Ks(this.parent,this.locator)),t.addCellRenderer(le.RowDragIcon,new Jd(this.parent,this.locator))},o.prototype.addEventListener=function(){var t=this;this.parent.isDestroyed||(this.parent.on(Vl,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(xn,this.refresh,this),this.parent.on(Ip,this.refreshComplete,this),this.parent.on(Ap,this.sendBulkRequest,this),this.parent.on(_l,function(){t.emptyGrid=!0},this),this.parent.on(Ar,this.dynamicColumnChange,this))},o.prototype.validateGroupRecords=function(t){var i=this,e=t.result.length-1;if(e<0)return Promise.resolve(t);var r=t.result[0],n=t.result[parseInt(e.toString(),10)],s=[],a=function(m){for(var y=[r,n],I=0;I<y.length;I++)s.push(new be("field","==",y[parseInt(I.toString(),10)].field).and(i.getPredicate("key","equal",y[parseInt(I.toString(),10)].key)));m.where(be.or(s))},l=new se;a(l);var h=new V(t.result),u=h.executeLocal(l),p=this.data.generateQuery(!0),d=[];if(this.data.isRemote()){for(var f=[r,n],g=0;g<f.length;g++)d.push(this.getPredicate(f[parseInt(g.toString(),10)].field,"equal",f[parseInt(g.toString(),10)].key));p.where(be.or(d))}else a(p);var v=new xt;return this.data.getData({},p).then(function(m){i.updateGroupInfo(u,m.result),v.resolve(t)}).catch(function(m){return v.reject(m)}),v.promise},o.prototype.getPredicate=function(t,i,e){return e instanceof Date?Vi({field:t,operator:i,value:e}):new be(t,i,e)},o.prototype.updateGroupInfo=function(t,i){for(var e=new V(i),r=t,n=0;n<r.length;n++){var s=e.executeLocal(new se().where(new be("field","==",r[parseInt(n.toString(),10)].field).and(this.getPredicate("key","equal",r[parseInt(n.toString(),10)].key))))[0];r[parseInt(n.toString(),10)].count=s.count;var a=r[parseInt(n.toString(),10)].items,l=s.items;a.GroupGuid&&(r[parseInt(n.toString(),10)].items=this.updateGroupInfo(r[parseInt(n.toString(),10)].items,s.items));for(var h=this.parent.aggregates,u=0;u<h.length;u++)for(var p=h[parseInt(u.toString(),10)],d=0;d<p.columns.length;d++)for(var f=p.columns[parseInt(d.toString(),10)].type instanceof Array?p.columns[parseInt(d.toString(),10)].type:[p.columns[parseInt(d.toString(),10)].type],g=0;g<f.length;g++){var v=p.columns[parseInt(d.toString(),10)].field+" - "+f[parseInt(g.toString(),10)].toLowerCase(),m=a.level?l.records:s.items,y=this.parent;if(f[parseInt(g.toString(),10)]==="Custom"){var I=a.level?l:s,S=p.columns[parseInt(d.toString(),10)].customAggregate;typeof S=="string"&&(S=N(S,window)),r[parseInt(n.toString(),10)].aggregates[""+v]=S?S.call(y,I,p.columns[parseInt(d.toString(),10)]):""}else r[parseInt(n.toString(),10)].aggregates[""+v]=A.aggregates[f[parseInt(g.toString(),10)].toLowerCase()](m,p.columns[parseInt(d.toString(),10)].field)}}return t},o}(),tf=function(){function o(){this.cellRenderMap={}}return o.prototype.addCellRenderer=function(t,i){t=typeof t=="string"?t:Ii(le,t),c(this.cellRenderMap[""+t])&&(this.cellRenderMap[""+t]=i)},o.prototype.getCellRenderer=function(t){if(t=typeof t=="string"?t:Ii(le,t),c(this.cellRenderMap[""+t]))throw"The cellRenderer "+t+" is not found";return this.cellRenderMap[""+t]},o}(),rf=function(){function o(t,i){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=t,this.serviceLocator=i,this.addEventListener()}return o.prototype.addEventListener=function(){this.evtHandlers=[{event:Xl,handler:this.closeCustomDialog},{event:Us,handler:this.refreshCustomFilterOkBtn},{event:pd,handler:this.renderResponsiveContextMenu},{event:dd,handler:this.renderCustomFilterDiv},{event:fd,handler:this.customExFilterClose},{event:cd,handler:this.refreshCustomFilterClearBtn}],Mi(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(wt,this.onActionCompleteFn)},o.prototype.customExFilterClose=function(){this.isCustomDlgRender=!1},o.prototype.renderCustomFilterDiv=function(){var t=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),i=t.querySelector(".e-dlg-custom-header"),e=t.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",e.style.display="",i.innerHTML=this.parent.localeObj.getConstant("CustomFilter");var r=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),r.appendChild(this.customExcelFilterParent)},o.prototype.renderResponsiveContextMenu=function(t){if(this.action===de.isFilter){var i=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),e=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),r=e.querySelector(".e-dlg-closeicon-btn"),n=e.querySelector(".e-dlg-custom-header");if(t.isOpen){i.firstChild.style.display="none",i.appendChild(t.target),r.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",n.innerHTML=t.header;var s=this.parent.createElement("button"),a=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});s.appendChild(a),this.backBtn=new Ei({cssClass:this.parent.cssClass?"e-res-back-btn "+this.parent.cssClass:"e-res-back-btn"}),this.backBtn.appendTo(s),n.parentElement.insertBefore(s,n)}else this.backBtn&&!this.isCustomDlgRender&&(i.firstChild.style.display="",Se(this.backBtn.element),r.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),n.innerHTML=this.getHeaderTitle({action:de.isFilter},t.col))}},o.prototype.refreshCustomFilterClearBtn=function(t){this.filterClearBtn&&(this.isFiltered=t.isFiltered,this.filterClearBtn.element.style.display=t.isFiltered?"":"none")},o.prototype.refreshCustomFilterOkBtn=function(t){this.saveBtn&&(this.saveBtn.disabled=t.disabled),this.parent.columnChooserModule&&this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn&&(this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn.disabled=t.disabled)},o.prototype.columnMenuResponsiveContent=function(t,i,e){var r=this.parent.createElement("div",{className:"e-responsivecoldiv e-responsive"+t.toLowerCase()+"div"+(e?" e-disabled":"")}),n=this.parent.createElement("span",{className:"e-icons e-res"+t.toLowerCase()+"-icon e-btn-icon"}),s=this.parent.createElement("span",{innerHTML:i,className:"e-rescolumn-menu e-res-header-text"});r.appendChild(n),r.appendChild(s),this.customColumnDiv.appendChild(r)},o.prototype.renderResponsiveContent=function(t,i){var e=this,r=this.parent,n=this.action===de.isColumnChooser;if(t||n)return this.filterParent=this.parent.createElement("div",{className:(n?"e-maincolumnchooserdiv ":"")+"e-mainfilterdiv e-default-filter",id:(n?"columchooser":t.uid)+"-main-filter"}),this.filterParent;if(this.customColumnDiv=r.createElement("div",{className:"columndiv columnmenudiv",styles:"width: 100%"}),this.parent.showColumnMenu&&this.parent.rowRenderingMode==="Horizontal"&&this.action===de.isColMenu){if(this.columnMenuResponsiveContent("AutoFitAll",r.localeObj.getConstant("AutoFitAll")),this.columnMenuResponsiveContent("AutoFit",r.localeObj.getConstant("AutoFit")),i.allowGrouping&&r.allowGrouping&&(this.columnMenuResponsiveContent("Group",r.localeObj.getConstant("Group"),r.groupSettings.columns.indexOf(i.field)>=0),this.columnMenuResponsiveContent("UnGroup",r.localeObj.getConstant("Ungroup"),r.groupSettings.columns.indexOf(i.field)<0)),i.allowSorting&&r.allowSorting){for(var s="None",a=this.parent.sortSettings.columns,l=0;l<a.length;l++)if(a[parseInt(l.toString(),10)].field===i.field){s=a[parseInt(l.toString(),10)].direction;break}this.columnMenuResponsiveContent("ascending",r.localeObj.getConstant("SortAscending"),s==="Ascending"),this.columnMenuResponsiveContent("descending",r.localeObj.getConstant("SortDescending"),s==="Descending")}r.showColumnChooser&&this.columnMenuResponsiveContent("Column",r.localeObj.getConstant("Columnchooser")),i.allowFiltering&&r.allowFiltering&&this.columnMenuResponsiveContent("Filter",r.localeObj.getConstant("FilterMenu"))}else{var h=r.getColumns(),u=r.createElement("div",{className:"e-ressortbutton-parent"}),p=[],d=this.action===de.isSort,f=this.action===de.isFilter;if(f)for(var l=0;l<r.filterSettings.columns.length;l++)p.push(r.filterSettings.columns[parseInt(l.toString(),10)].field);for(var l=0;l<h.length;l++)if(!(!h[parseInt(l.toString(),10)].visible||!h[parseInt(l.toString(),10)].allowSorting&&d||!h[parseInt(l.toString(),10)].allowFiltering&&f)){var g=r.createElement("div",{className:"e-responsivecoldiv"});g.setAttribute("data-e-mappingname",h[parseInt(l.toString(),10)].field),g.setAttribute("data-e-mappinguid",h[parseInt(l.toString(),10)].uid);var v=r.createElement("span",{innerHTML:h[parseInt(l.toString(),10)].headerText,className:"e-res-header-text"});if(g.appendChild(v),this.customColumnDiv.appendChild(g),d){var m=this.getSortedFieldsAndDirections("field"),y=m.indexOf(h[parseInt(l.toString(),10)].field),I=r.createElement("button",{id:r.element.id+h[parseInt(l.toString(),10)].field+"sortbutton"}),S=u.cloneNode();S.appendChild(I),g.appendChild(S);var R=new Ei({cssClass:this.parent.cssClass?"e-ressortbutton "+this.parent.cssClass:"e-ressortbutton"});R.appendTo(I);var L=void 0;c(this.parent.sortSettings.columns[parseInt(y.toString(),10)])||(L=this.parent.sortSettings.columns[parseInt(y.toString(),10)].direction==="Ascending"?this.parent.localeObj.getConstant("AscendingText"):this.parent.localeObj.getConstant("DescendingText")),I.innerHTML=y>-1?L:this.parent.localeObj.getConstant("NoneText"),I.onclick=function(pe){e.sortButtonClickHandler(pe.target)}}if(f&&p.indexOf(h[parseInt(l.toString(),10)].field)>-1){var P=r.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),J=r.createElement("span",{className:"e-icons e-res-icon e-filterset"});J.setAttribute("colType",h[parseInt(l.toString(),10)].type),P.appendChild(J),g.appendChild(P)}}}return b.add(this.customColumnDiv,Q.isDevice?"touchend":"click",this.customFilterColumnClickHandler,this),this.customColumnDiv},o.prototype.getSortedFieldsAndDirections=function(t){for(var i=[],e=0;e<this.parent.sortSettings.columns.length;e++)i.push(this.parent.sortSettings.columns[parseInt(e.toString(),10)][""+t]);return i},o.prototype.sortButtonClickHandler=function(t){if(t){var i=M(t,"e-responsivecoldiv"),e=i.getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(t));var r=t.textContent,n=r===this.parent.localeObj.getConstant("NoneText")?this.parent.localeObj.getConstant("AscendingText"):r===this.parent.localeObj.getConstant("AscendingText")?this.parent.localeObj.getConstant("DescendingText"):this.parent.localeObj.getConstant("NoneText"),s=n===this.parent.localeObj.getConstant("AscendingText")?"Ascending":n===this.parent.localeObj.getConstant("DescendingText")?"Descending":"None";t.innerHTML=n,this.setSortedCols(e,s)}},o.prototype.resetSortButtons=function(t){for(var i=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton")),e=0;e<i.length;e++)i[parseInt(e.toString(),10)]!==t&&(i[parseInt(e.toString(),10)].innerHTML="None")},o.prototype.setSortedCols=function(t,i){var e=this.getCurrentSortedFields(),r=e.indexOf(t);this.parent.allowMultiSorting&&r>-1&&(this.sortedCols.splice(r,1),this.sortPredicate.splice(r,1)),this.isSortApplied=!0,i!=="None"&&(this.sortedCols.push(t),this.sortPredicate.push({field:t,direction:i}))},o.prototype.getCurrentSortedFields=function(){for(var t=[],i=0;i<this.sortedCols.length;i++)t.push(this.sortedCols[parseInt(i.toString(),10)]);return t},o.prototype.customFilterColumnClickHandler=function(t){var i=this.parent,e=t.target;if(M(e,"columnmenudiv")&&this.action===de.isColMenu&&!M(e,"e-disabled")){var r=this.menuCol?this.menuCol:this.filteredCol;M(e,"e-responsiveautofitalldiv")?(i.autoFitColumns([]),this.closeCustomFilter()):M(e,"e-responsiveautofitdiv")?(i.autoFitColumns(r.field),this.closeCustomFilter()):M(e,"e-responsivegroupdiv")?(i.groupColumn(r.field),this.closeCustomFilter()):M(e,"e-responsiveungroupdiv")?(i.ungroupColumn(r.field),this.closeCustomFilter()):M(e,"e-responsiveascendingdiv")?(i.sortColumn(r.field,"Ascending"),this.closeCustomFilter()):M(e,"e-responsivedescendingdiv")?(i.sortColumn(r.field,"Descending"),this.closeCustomFilter()):M(e,"e-responsivecolumndiv")?(i.notify(Jr,{action:5}),i.showResponsiveCustomColumnChooser()):M(e,"e-responsivefilterdiv")&&(i.notify(Jr,{action:3}),this.isRowResponsive=!0,this.isCustomDialog=!1,i.filterModule&&i.filterModule.responsiveDialogRenderer.showResponsiveDialog(r)),t.preventDefault()}if(this.action===de.isFilter&&i.filterSettings.type!=="FilterBar"){if(e.classList.contains("e-responsivecoldiv")||e.parentElement.classList.contains("e-responsivecoldiv")){var n=e.getAttribute("data-e-mappingname");if(n||(n=e.parentElement.getAttribute("data-e-mappingname")),n){var s=i.getColumnByField(n);this.isRowResponsive=!0,this.showResponsiveDialog(s)}}else if(e.classList.contains("e-filterset")||e.parentElement.classList.contains("e-filtersetdiv")){var a=M(e,"e-responsivecoldiv");if(a){var n=a.getAttribute("data-e-mappingname"),s=i.getColumnByField(n);(s.filter.type==="Menu"||!s.filter.type&&i.filterSettings.type==="Menu")&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(s),this.removeCustomDlgFilterEle(e)}}}},o.prototype.showResponsiveDialog=function(t,i){if(this.isCustomDialog&&this.action===de.isFilter&&!this.isRowResponsive||i&&this.action===de.isColMenu)this.menuCol=i,this.renderCustomFilterDialog(null,i);else{if(this.filteredCol=t,this.renderResponsiveDialog(t),this.parent.enableAdaptiveUI&&t&&(this.parent.filterModule.setFilterModel(t),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(t,void 0))),this.action===de.isColumnChooser&&this.parent.notify(Cs,{action:"open"}),this.action===de.isSort){var e={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(ka,e),e.cancel)return}this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element)}},o.prototype.setTopToChildDialog=function(t){var i=t.querySelector(".e-dialog");if(i){var e=t.querySelector(".e-dlg-header-content").getBoundingClientRect().height;i.style.top=e+"px"}},o.prototype.renderCustomFilterDialog=function(t,i){var e=this.parent,r=this.action===de.isColMenu;if(!(this.action===de.isFilter&&e.filterSettings.type==="FilterBar")){var n=r?"e-customcolumnmenudiv ":"",s=this.parent.createElement("div",{id:e.element.id+(r?"customcolumnmenu":"customfilter"),className:this.parent.cssClass?n+"e-customfilterdiv e-responsive-dialog "+this.parent.cssClass:n+"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(s),this.customFilterDlg=this.getDialogOptions(t,!0,null,i);var a={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(ka,a),!a.cancel&&(this.customFilterDlg.appendTo(s),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}},o.prototype.getDialogOptions=function(t,i,e,r){var n=new fo({isModal:!0,showCloseIcon:!0,closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(t,r),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""}),s="isStringTemplate";if(n[""+s]=!0,i){n.header=this.renderResponsiveHeader(t,void 0,!0);var a=this.action===de.isColMenu?"e-customcolumnmenu ":"";n.cssClass=a+"e-customfilter"}else n.header=this.renderResponsiveHeader(t),n.cssClass=this.parent.rowRenderingMode==="Vertical"&&this.action===de.isFilter?"e-res"+e+" e-row-responsive-filter":"e-res"+e;return n},o.prototype.renderResponsiveDialog=function(t){var i=this.parent;if(!(this.action===de.isFilter&&i.filterSettings.type==="FilterBar")){var e=this.action===de.isFilter?"filter":"sort";e=this.action===de.isColumnChooser?"columnchooser":e;var r=this.parent.createElement("div",{id:i.element.id+"responsive"+e,className:this.parent.cssClass?"e-res"+e+"div e-responsive-dialog "+this.parent.cssClass:"e-res"+e+"div e-responsive-dialog"});this.parent.element.appendChild(r),this.customResponsiveDlg=this.getDialogOptions(t,!1,e),this.customResponsiveDlg.appendTo(r)}},o.prototype.dialogCreated=function(){rg(this.parent)},o.prototype.dialogOpen=function(){if(this.action===de.isSort&&this.parent.allowMultiSorting)for(var t=0;t<this.parent.sortSettings.columns.length;t++){this.sortedCols.push(this.parent.sortSettings.columns[parseInt(t.toString(),10)].field);var i=this.parent.sortSettings.columns[parseInt(t.toString(),10)].field,e=this.parent.sortSettings.columns[parseInt(t.toString(),10)].direction;this.sortPredicate.push({field:i,direction:e})}},o.prototype.beforeDialogClose=function(t){if(this.isDialogClose=t.element&&!t.element.querySelector(".e-xl-customfilterdiv")&&t.element.classList.contains("e-resfilterdiv"),this.action===de.isFilter){if(t.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):t.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter(),this.parent.rowRenderingMode==="Horizontal"&&this.parent.showColumnMenu){this.parent.notify(Jr,{action:4});var i=document.querySelector(".e-resfilter");i&&Se(i)}}else if(this.action===de.isSort)this.closeCustomDialog();else if(this.action===de.isColMenu){this.closeCustomFilter();var i=document.querySelector(".e-rescolummenu");i&&Se(i)}else if(this.action===de.isColumnChooser){this.parent.notify(Cs,{action:"clear"});var i=document.querySelector(".e-rescolumnchooser");i&&Se(i),this.parent.rowRenderingMode==="Horizontal"&&this.parent.showColumnMenu&&this.parent.notify(Jr,{action:4}),this.isCustomDialog=!1,this.isDialogClose=!1}this.parent.off(hn,this.keyHandler)},o.prototype.sortColumn=function(){if(!this.isSortApplied){this.closeCustomDialog();return}this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(var t=0;t<this.sortPredicate.length;t++)this.parent.sortColumn(this.sortPredicate[parseInt(t.toString(),10)].field,this.sortPredicate[parseInt(t.toString(),10)].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()},o.prototype.getHeaderTitle=function(t,i){var e=this.parent,r;return this.action===de.isEdit?r=e.localeObj.getConstant("EditFormTitle")+t.primaryKeyValue[0]:this.action===de.isAdd?r=e.localeObj.getConstant("AddFormTitle"):this.action===de.isFilter?r=i?i.headerText||i.field:e.localeObj.getConstant("FilterButton"):this.action===de.isSort?r=e.localeObj.getConstant("Sort"):this.action===de.isColMenu?r=e.localeObj.getConstant("ColumnMenu"):this.action===de.isColumnChooser&&(r=e.localeObj.getConstant("ChooseColumns")),r},o.prototype.getDialogName=function(t){var i;return t===de.isAdd||t===de.isEdit?i="dialogEdit_wrapper_title":t===de.isFilter?i="responsive_filter_dialog_wrapper":t===de.isColumnChooser&&(i="responsive_column_chooser_dialog_wrapper"),i},o.prototype.getButtonText=function(t){var i;return t===de.isAdd||t===de.isEdit?i="Save":(t===de.isFilter||this.action===de.isSort||t===de.isColumnChooser||this.action===de.isColumnChooser)&&(i="OKButton"),i},o.prototype.renderResponsiveHeader=function(t,i,e){var r=this,n=this.parent;n.on(hn,this.keyHandler,this);var s=n.element.id+this.getDialogName(this.action),a=n.createElement("div",{className:"e-res-custom-element"}),l=n.createElement("div",{className:"e-dlg-custom-header",id:s});l.innerHTML=this.getHeaderTitle(i,t),a.appendChild(l);var h=n.createElement("button");e||(this.saveBtn=new Ei({cssClass:this.parent.cssClass?"e-primary e-flat e-res-apply-btn "+this.parent.cssClass:"e-primary e-flat e-res-apply-btn"}),h.innerHTML=n.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(h),h.onclick=function(v){r.dialogHdrBtnClickHandler()});var u=this.action===de.isSort,p=this.action===de.isFilter;if(p||u){var d=u?"sort":"filter",f=n.createElement("button");if(this.filterClearBtn=new Ei({cssClass:this.parent.cssClass?"e-primary e-flat e-res-"+d+"-clear-btn "+this.parent.cssClass:"e-primary e-flat e-res-"+d+"-clear-btn"}),p){var g=n.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});f.appendChild(g)}else f.innerHTML=n.localeObj.getConstant("Clear");a.appendChild(f),this.filterClearBtn.appendTo(f),f.onclick=function(v){M(v.target,"e-customfilter")?(r.parent.filterModule.clearFiltering(),r.removeCustomDlgFilterEle()):p?r.filterClear():(r.resetSortButtons(),r.sortedCols=[],r.sortPredicate=[],r.isSortApplied=!0)},a.appendChild(f)}return e||a.appendChild(h),a},o.prototype.filterClear=function(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()},o.prototype.removeCustomFilterElement=function(){var t=document.getElementById(this.parent.element.id+"customcolumnmenu");if(t){Se(t);var i=document.querySelector(".e-customfilter");i&&Se(i)}var e=document.querySelector(".e-rescolumnchooser");e&&Se(e)},o.prototype.dialogHdrBtnClickHandler=function(){this.action===de.isEdit||this.action===de.isAdd?this.parent.endEdit():this.action===de.isFilter?(this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}),this.removeCustomFilterElement()):this.action===de.isSort?(this.sortColumn(),this.removeCustomFilterElement()):this.action===de.isColumnChooser&&(this.parent.notify(Cs,{action:"confirm"}),this.removeCustomFilterElement(),this.isCustomDialog=!1,this.isDialogClose=!1)},o.prototype.closeCustomDialog=function(){if(this.isCustomDlgRender){var t=this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv");Se(t);return}this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog()},o.prototype.destroyCustomFilterDialog=function(){if(this.customResponsiveDlg){var t=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&t&&(this.customResponsiveDlg.destroy(),Se(t)),this.closeCustomFilter(),this.action===de.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}},o.prototype.closeCustomFilter=function(){if(!this.isDialogClose&&this.customFilterDlg){var t=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&t&&(this.customFilterDlg.destroy(),Se(t))}this.isCustomDialog=!1,this.isDialogClose=!1},o.prototype.removeCustomDlgFilterEle=function(t){if(t)t.parentElement.classList.contains("e-filtersetdiv")?Se(t.parentElement):Se(t);else for(var i=this.customColumnDiv.children,e=0;e<i.length;e++)t=i[parseInt(e.toString(),10)].querySelector(".e-filtersetdiv"),t&&(Se(t),e--)},o.prototype.keyHandler=function(t){t.keyCode===13&&(this.action===de.isFilter&&t.target.classList.contains("e-searchinput")||this.action===de.isEdit||this.action===de.isAdd)&&this.dialogHdrBtnClickHandler()},o.prototype.editComplate=function(t){(t.requestType==="save"||t.requestType==="cancel")&&this.parent.off(hn,this.keyHandler)},o.prototype.removeEventListener=function(){this.customColumnDiv&&b.remove(this.customColumnDiv,Q.isDevice?"touchend":"click",this.customFilterColumnClickHandler),Mi(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(wt,this.onActionCompleteFn)},o}(),nf=function(){function o(){this.services={}}return o.prototype.register=function(t,i){c(this.services[""+t])&&(this.services[""+t]=i)},o.prototype.getService=function(t){if(c(this.services[""+t]))throw"The service "+t+" is not registered";return this.services[""+t]},o.prototype.registerAdaptiveService=function(t,i,e){i?(t.responsiveDialogRenderer=new rf(t.parent,t.serviceLocator),t.responsiveDialogRenderer.action=e):t.responsiveDialogRenderer&&(t.responsiveDialogRenderer.removeEventListener(),t.responsiveDialogRenderer=void 0)},o}(),sf=function(){function o(){this.rendererMap={}}return o.prototype.addRenderer=function(t,i){var e=Ii(At,t);c(this.rendererMap[""+e])&&(this.rendererMap[""+e]=i)},o.prototype.getRenderer=function(t){var i=Ii(At,t);if(c(this.rendererMap[""+i]))throw"The renderer "+i+" is not found";return this.rendererMap[""+i]},o}(),sh=function(){function o(t){this.parent=t}return o.prototype.setWidthToColumns=function(){var t=0,i=this.parent.getColumnIndexesInView(),e=!0,r=0;if(this.parent.allowGrouping)for(var n=this.parent.groupSettings.columns.length;t<n;t++){if(this.parent.enableColumnVirtualization&&i.indexOf(t)===-1){e=!1;continue}this.setColumnWidth(new ct({width:"30px"}),t)}(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new ct({width:"30px"}),t),t++),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&(this.setColumnWidth(new ct({width:"30px"}),t),t++);for(var s=this.parent.getColumns(),a=0;a<s.length;a++)this.setColumnWidth(s[parseInt(a.toString(),10)],e&&this.parent.enableColumnVirtualization?void 0:a+t);this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&this.setColumnWidth(new ct({width:"30px"}),this.parent.groupSettings.columns.length+s.length),r=this.getTableWidth(this.parent.getColumns()),this.parent.width!=="auto"&&this.parent.width.toString().indexOf("%")===-1&&this.setMinwidthBycalculation(r)},o.prototype.setMinwidthBycalculation=function(t){var i=0,e=this.parent.getColumns().filter(function(u){return c(u.width)||u.width==="auto"});if(e.length){!c(this.parent.width)&&this.parent.width!=="auto"&&typeof this.parent.width=="string"&&this.parent.width.indexOf("%")===-1?i=(typeof this.parent.width=="string"?parseInt(this.parent.width,10):this.parent.width)-t:i=this.parent.element.getBoundingClientRect().width-t;for(var r=0,n=0,s=e;n<s.length;n++){var a=s[n];r+=c(a.minWidth)?0:typeof a.minWidth=="string"?parseInt(a.minWidth,10):a.minWidth}for(var l=0;l<e.length;l++){t===0&&this.parent.allowResizing&&this.isWidthUndefined()&&l!==e.length-1&&this.setUndefinedColumnWidth(e);var h=this.parent.getColumnIndexByField(e[parseInt(l.toString(),10)].field)+this.parent.getIndentCount();t!==0&&i<r?this.setWidth(e[parseInt(l.toString(),10)].minWidth,h):t!==0&&i>r&&this.setWidth("",h,!0)}}},o.prototype.setUndefinedColumnWidth=function(t){for(var i=0;i<t.length;i++)i!==t.length-1&&(t[parseInt(i.toString(),10)].width=200,this.setWidth(200,this.parent.getColumnIndexByField(t[parseInt(i.toString(),10)].field)))},o.prototype.setColumnWidth=function(t,i,e){if(!(this.parent.getColumns().length<1)){var r=c(i)?this.parent.getNormalizedColumnIndex(t.uid):i,n=this.getWidth(t),s=this.getTableWidth(this.parent.getColumns());n!==null&&(this.setWidth(n,r),this.parent.width!=="auto"&&this.parent.width.toString().indexOf("%")===-1&&this.setMinwidthBycalculation(s),this.parent.allowResizing&&e==="resize"&&this.setWidthToTable(),this.parent.notify(Gl,{index:r,width:n,column:t,module:e}))}},o.prototype.setWidth=function(t,i,e){if(this.parent.groupSettings.columns.length>i&&Xs(this.parent)){var r=this.parent.element.offsetWidth;t=(30/r*100).toFixed(1)+"%"}var n=this.parent.getHeaderTable(),s=this.parent.getContentTable(),a=Pe(t),l=n.querySelector(Ht).children[parseInt(i.toString(),10)];l&&!e?l.style.width=a:l&&e&&(l.style.width="");var h=s.querySelector(Ht).children[parseInt(i.toString(),10)];if(h&&!e?h.style.width=a:h&&e&&(h.style.width=""),!this.parent.enableColumnVirtualization&&this.parent.isEdit){for(var u=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),p=[],d=0;d<u.length;d++)if(M(u[parseInt(d.toString(),10)],"e-grid").id===this.parent.element.id)for(var f=0;f<u[parseInt(d.toString(),10)].querySelector("colgroup").children.length;f++)p.push(u[parseInt(d.toString(),10)].querySelector("colgroup").children[parseInt(f.toString(),10)]);u.length&&p.length&&(p[parseInt(i.toString(),10)].style.width=a)}this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&this.refreshFrozenScrollbar()},o.prototype.refreshFrozenScrollbar=function(){var t={cancel:!1};if(this.parent.notify(hd,t),!t.cancel){var i=fi(),e=this.parent.element.querySelector(".e-movablescrollbar"),r=this.parent.getContent().firstElementChild.getBoundingClientRect().width;if(this.parent.enableColumnVirtualization){var n=this.parent.getContent().querySelector(".e-virtualtrack");n&&(r=n.scrollWidth)}this.parent.height!=="auto"&&(r=r+i),e.firstElementChild.style.width=r+"px"}},o.prototype.getSiblingsHeight=function(t){var i=this.getHeightFromDirection(t,"previous"),e=this.getHeightFromDirection(t,"next");return i+e},o.prototype.getHeightFromDirection=function(t,i){for(var e=t[i+"ElementSibling"],r=0,n=[Tt,un,"e-groupdroparea","e-gridpager","e-toolbar","e-temp-toolbar"];e;)n.some(function(s){return e.classList.contains(s)})&&(r+=e.offsetHeight),e=e[i+"ElementSibling"];return r},o.prototype.isWidthUndefined=function(){var t=this.parent.getColumns().filter(function(i){return c(i.width)&&c(i.minWidth)}).length;return this.parent.getColumns().length===t},o.prototype.getWidth=function(t){if(c(t.width)&&this.parent.allowResizing&&c(t.minWidth)&&!this.isWidthUndefined()&&(t.width=200),!t.width)return null;var i=parseInt(t.width.toString(),10);return t.minWidth&&i<parseInt(t.minWidth.toString(),10)?t.minWidth:t.maxWidth&&i>parseInt(t.maxWidth.toString(),10)?t.maxWidth:t.width},o.prototype.getTableWidth=function(t){for(var i=0,e=0,r=t;e<r.length;e++){var n=r[e],s=this.getWidth(n);n.width==="auto"&&(s=0),n.visible!==!1&&s!==null&&(i+=parseInt(s.toString(),10))}return i},o.prototype.setWidthToTable=function(){var t=Pe(this.getTableWidth(this.parent.getColumns()));(this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new ct({width:"30px"})),t=this.isAutoResize()?"100%":t,this.parent.getHeaderTable().style.width=t,this.parent.getContentTable().style.width=t;var i=this.parent.element.querySelector(".e-table.e-inline-edit");i&&(i.style.width=t)},o.prototype.isAutoResize=function(){return this.parent.allowResizing&&this.parent.resizeSettings.mode==="Auto"},o}(),of=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),af=function(){function o(t){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.firstHeaderCellClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.parent=t,this.rowModelGen=new Nn(this.parent),this.addEventListener()}return o.prototype.focusCheck=function(t){var i=t.target;this.focusByClick=!0,this.firstHeaderCellClick=!0,this.skipFocus=i.classList.contains("e-grid")},o.prototype.onFocus=function(t){if(!(this.parent.isDestroyed||Q.isDevice||this.parent.enableVirtualization||this.parent.element.querySelector(".e-masked-table")||!this.parent.isInitialLoad&&t&&t.target===this.parent.element&&this.parent.element.querySelector(".e-spin-show"))){this.setActive(!this.parent.enableHeaderFocus&&this.parent.frozenRows===0),!this.parent.enableHeaderFocus&&!this.parent.getCurrentViewRecords().length&&(this.parent.editSettings.mode!=="Batch"||this.parent.editSettings.mode==="Batch"&&this.parent.editModule&&!this.parent.editModule.getBatchChanges()[En].length)&&this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new sr({isDataRow:!0})]}),this.getContent().selector,!1);var i=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(i[0],i[1]),this.skipFocus&&!(t&&t.target===this.parent.element)&&(this.focus(t),this.skipFocus=!1)}},o.prototype.passiveFocus=function(t){if(!this.parent.isDestroyed){var i=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");if(t.target===i&&t.relatedTarget&&!M(t.relatedTarget,"e-grid")&&!this.firstHeaderCellClick){var e=[0,0];this.active.matrix.matrix[e[0]][e[1]]===0&&(e=_t(this.active.matrix.matrix,e,!0)),this.active.matrix.current=e,this.currentInfo.element=t.target,this.currentInfo.elementToFocus=t.target,T([this.currentInfo.element],["e-focused","e-focus"])}this.firstHeaderCellClick=!1,t.target&&t.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,T([this.currentInfo.element],["e-focused","e-focus"]))}},o.prototype.onBlur=function(t){var i=!!(M(t.target,"e-gantt")&&t.target.classList.contains("e-rowcell")&&!c(t.target.nextElementSibling)&&t.target.nextElementSibling.classList.contains("e-rowcell"));(this.parent.isEdit||t&&(!t.relatedTarget||D(t.relatedTarget,".e-grid"))&&!(this.parent.element.classList.contains("e-childgrid")&&!this.parent.element.matches(":focus-within")))&&!(!i&&c(t.relatedTarget)&&parseInt(t.target.getAttribute("data-colindex"),10)===0&&parseInt(t.target.getAttribute("index"),10)===0)&&!(!i&&c(t.relatedTarget)&&!D(document.activeElement,".e-grid")&&!c(t.sourceCapabilities))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.setLastContentCellTabIndex(),this.setFirstFocusableTabIndex(),this.firstHeaderCellClick=!1)},o.prototype.setFirstFocusableTabIndex=function(){var t=this.parent;if(t.element.tabIndex=-1,t.allowGrouping&&t.groupSettings.showDropArea){var i=t.groupModule,e=i.getFocusableGroupedItems();e.length>0?(i.element.tabIndex=-1,e[0].tabIndex=0):i.element.tabIndex=0;return}if(t.toolbar||t.toolbarTemplate){var r=t.toolbarModule.element,n=this.parent.toolbarModule.getFocusableToolbarItems();n.length>0&&n[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input")?(r.tabIndex=-1,n[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").tabIndex=0):r.tabIndex=0;return}if(t.getColumns().length){var s=t.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");if(s.tabIndex=0,this.setActive(!1),!c(this.active)&&(c(this.active.target)||!this.active.target.classList.contains("e-columnmenu"))){var a=[0,0];this.active.matrix.matrix[a[0]][a[1]]===0&&(a=_t(this.active.matrix.matrix,a,!0)),this.active.matrix.current=a}return}},o.prototype.setLastContentCellTabIndex=function(){var t=this.parent.getContentTable();if(t.rows[t.rows.length-1]){var i=t.rows[t.rows.length-1].lastElementChild;i.tabIndex=0}},o.prototype.onClick=function(t,i){if(!(M(t.target,"e-filterbarcell")&&(M(t.target,"e-multiselect")||t.target.classList.contains("e-input-group-icon")))){var e=!c(D(t.target,"."+vi)),r=!c(D(t.target,"."+Tt));if(e=e&&r?!e:e,!(!e&&c(D(t.target,"."+Tt))||t.target.classList.contains(dt)||!c(D(t.target,".e-unboundcell")))){if(this.setActive(e),!e&&c(D(t.target,"."+Tt))){this.clearOutline();return}var n={cancel:!1,byKey:!1,byClick:!c(t.target),clickArgs:t};if(this.parent.notify(Os,n),!(n.cancel||D(t.target,".e-inline-edit"))&&(this.setActive(e),this.getContent())){var s=this.getContent().onClick(t,i);if(s===!1)return;this.focus(),this.currentInfo.element.classList.contains("e-rowcell")&&t.type&&t.type==="click"&&T([this.currentInfo.element],["e-focused","e-focus"])}}}},o.prototype.handleFilterNavigation=function(t,i,e){t.target===document.querySelector(i)&&t.key==="Tab"&&t.shiftKey?(t.preventDefault(),document.querySelector(e).focus()):t.target===document.querySelector(e)&&t.key==="Tab"&&!t.shiftKey&&document.activeElement===document.querySelector(e)&&(t.preventDefault(),document.querySelector(i).focus())},o.prototype.onKeyPress=function(t){if(this.parent.allowPaging){var i=this.parent.pagerModule.pagerObj.element,e=this.parent.pagerModule.pagerObj.getFocusablePagerElements(i,[]);if(this.parent.childGrid&&!M(t.target,"e-gridpager")&&this.allowToPaging(t)&&e.length&&(e[0].tabIndex=0),this.parent.pagerModule.pagerObj.checkPagerHasFocus()){if(t.action==="shiftTab"&&e.length&&e[0]===t.target){this.setActive(!0);var r=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[r[0]][r[1]]===0&&(r=_t(this.active.matrix.matrix,r,!1)),this.active.matrix.current=this.parent.editSettings.mode==="Batch"?this.isValidBatchEditCell(r)?r:this.findBatchEditCell(r,!1):r,t.preventDefault(),this.focus(t);return}if(t.action==="tab"&&this.parent.element.classList.contains("e-childgrid")&&(!this.parent.pageSettings.pageSizes&&e.length&&e[e.length-1]===t.target||this.parent.pagerModule.pagerObj.getDropDownPage()===t.target)){var n=M(this.parent.element,"e-detailcell");F([this.parent.element],["e-focus"]),F([n],["e-focused"]),n.tabIndex=-1}else{this.parent.pagerModule.pagerObj.changePagerFocus(t);return}}if(this.parent.pagerModule.pagerObj.element.tabIndex===0&&(t.keyCode===38||t.shiftKey&&t.keyCode===9)){t.preventDefault(),this.focus(t);return}else if(this.parent.pagerModule.pagerObj.element.tabIndex===0&&t.keyCode===9){t.preventDefault(),this.parent.pagerModule.pagerObj.setPagerFocus();return}if(this.parent.pagerModule.pagerObj.checkFirstPagerFocus()){var s=this.getContent().matrix.rows,a=this.getContent().matrix.columns;this.getContent().matrix.current=[s,a]}}if(this.parent.filterSettings.type==="Excel"&&this.handleFilterNavigation(t,".e-excelfilter .e-menu-item:not(.e-disabled)",".e-excelfilter .e-footer-content button:nth-child(2)"),this.parent.filterSettings.type==="CheckBox"&&this.handleFilterNavigation(t,".e-searchinput.e-input",".e-checkboxfilter .e-footer-content button:nth-child(2)"),this.parent.filterSettings.type==="Menu"&&this.handleFilterNavigation(t,".e-flmenu .e-input-group.e-popup-flmenu",".e-flmenu .e-footer-content button:nth-child(2)"),!this.skipOn(t)){if(t.target&&M(t.target,"e-gridcontent")){var l=[].slice.call(this.parent.getContentTable().rows),h=l[l.length-1].lastElementChild;t.target===h&&(this.setActive(!0),this.setLastContentCellActive())}if(t.action==="shiftTab"&&t.target&&(t.target===this.parent.element||M(t.target,"e-toolbar")||M(t.target,"e-groupdroparea"))){if(t.target===this.parent.element){this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(t);return}if(M(t.target,"e-groupdroparea")){this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus());return}if(M(t.target,"e-toolbar")){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var u=this.parent.groupModule,p=u.getFocusableGroupedItems();t.preventDefault(),p.length>0?p[p.length-1].focus():u.element.focus()}else this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus());return}}var d=!1;if(t.action==="tab"&&t.target&&(t.target===this.parent.element||M(t.target,"e-toolbar")||M(t.target,"e-groupdroparea"))){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea&&(t.target===this.parent.element||t.target.classList.contains("e-groupdroparea"))){var u=this.parent.groupModule,p=u.getFocusableGroupedItems();if(p.length>0){t.preventDefault(),p[0].focus();return}if(!t.target.classList.contains("e-groupdroparea")){t.preventDefault(),u.element.focus();return}}if((this.parent.toolbar||this.parent.toolbarTemplate)&&(t.target===this.parent.element||M(t.target,"e-groupdroparea")||t.target.classList.contains("e-toolbar"))){var f=this.parent.toolbarModule.element,g=this.parent.toolbarModule.getFocusableToolbarItems();if(g.length>0){t.preventDefault(),g[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus();return}if(!t.target.classList.contains("e-toolbar")){t.preventDefault(),f.focus();return}}(t.target===this.parent.element||M(t.target,"e-toolbar")||M(t.target,"e-groupdroparea"))&&(d=!0)}d&&(this.parent.allowGrouping&&this.parent.groupSettings.columns.length===this.parent.columns.length?this.setActive(!0):this.setActive(!1),this.active.matrix.current=[0,-1]),this.activeKey=t.action;var v={cancel:!1,byKey:!0,byClick:!1,keyArgs:t};if(this.parent.notify(Os,v),!v.cancel){var m=this.getContent().matrix.current,y=this.active&&this.active.matrix.current?[this.active.matrix.current[0],this.active.matrix.current[1]]:void 0;this.currentInfo.outline=!0;var I=this.getContent().jump(t.action,m);this.swap=I,I.swap&&!(this.parent.editSettings.mode==="Batch"&&(t.action==="tab"||t.action==="shiftTab"))&&(this.setActive(!I.toHeader),this.getContent().matrix.current=this.getContent().getNextCurrent(m,I,this.active,t.action),this.prevIndexes={}),this.setActiveByKey(t.action,this.getContent());var S=this.content.lastIdxCell?!1:this.getContent().onKeyPress(t);if(t.target&&M(t.target,"e-gridheader")){if(t.action==="tab"&&m.toString()===this.active.matrix.current.toString()){var R=_t(this.active.matrix.matrix,this.active.matrix.current,!0),r=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];if(this.active.matrix.matrix[r[0]][r[1]]===0&&(r=_t(this.active.matrix.matrix,r,!1)),this.active.matrix.current.toString()===r.toString()&&this.content.matrix.matrix.length){S=!0,this.setActive(!0);var L=[0,0];this.active.matrix.matrix[L[0]][L[1]]===0&&(L=_t(this.active.matrix.matrix,[0,0],!0)),this.active.matrix.current=this.parent.editSettings.mode==="Batch"?this.isValidBatchEditCell(L)?L:this.findBatchEditCell(L,!0):L}else this.active.matrix.current.toString()!==R.toString()&&(this.active.matrix.current=R)}if(t.action==="shiftTab"&&m.toString()===this.active.matrix.current.toString()){var P=_t(this.active.matrix.matrix,this.active.matrix.current,!1);if(P.toString()===this.active.matrix.current.toString()){this.focusOutFromHeader(t);return}this.active.matrix.current.toString()!==P.toString()&&!S&&(S=!0,this.active.matrix.current=P)}}if(t.target&&M(t.target,"e-gridcontent")&&(this.parent.editSettings.mode==="Batch"&&(t.action==="tab"||t.action==="shiftTab")&&(this.active.matrix.current=this.findBatchEditCell(y,t.action==="tab"),t.action==="tab"&&y.toString()===this.active.matrix.current.toString()&&(this.parent.editModule.editModule.addBatchRow=!0)),t.action==="shiftTab"&&m.toString()===this.active.matrix.current.toString())){if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length===this.parent.columns.length){this.focusOutFromHeader(t);return}var L=[0,0];this.active.matrix.matrix[L[0]][L[1]]===0&&(L=_t(this.active.matrix.matrix,[0,0],!0)),!S&&(L.toString()===this.active.matrix.current.toString()||this.parent.editSettings.mode==="Batch"&&y.toString()===this.active.matrix.current.toString())&&(S=!0,this.setActive(!1),this.setLastContentCellActive())}if(S===!1){if(this.clearIndicator(),t.action==="shiftTab"&&m.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(t)&&m.toString()!==[0,0].toString()){if(t.preventDefault(),t.keyCode===40){this.parent.pagerModule.pagerObj.setPagerContainerFocus();return}else if(t.keyCode===9){this.parent.pagerModule.pagerObj.setPagerFocus();return}}this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(t);return}t.preventDefault(),this.focus(t)}}},o.prototype.isValidBatchEditCell=function(t){var i=this.active.getTable().rows[t[0]].cells[t[1]],e=D(i,"tr"),r=parseInt(i.getAttribute("data-colindex"),10),n=this.parent.getColumns()[parseInt(r.toString(),10)];return!!(this.active.matrix.matrix[t[0]][t[1]]===1&&(!e.classList.contains("e-row")||(e.classList.contains("e-insertedrow")||!n.isPrimaryKey)&&n.allowEditing))},o.prototype.findBatchEditCell=function(t,i,e){for(var r=t,n=t,s=!1;!s;){var a=n;if(n=_t(this.active.matrix.matrix,n,i),a.toString()===n.toString()||e&&a[0]!==n[0]){s=!0;continue}this.isValidBatchEditCell(n)&&(r=n,s=!0)}return r},o.prototype.setLastContentCellActive=function(){var t=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[t[0]][t[1]]===0&&(t=_t(this.active.matrix.matrix,t,!1)),this.active.matrix.current=t},o.prototype.focusOutFromChildGrid=function(t){var i=M(this.parent.element,"e-table"),e=M(i,"e-grid").ej2_instances[0],r=M(this.parent.element,"e-detailcell"),n=M(this.parent.element,"e-detailrow").getAttribute("data-uid"),s=[].slice.call(e.getContentTable().rows),a=s.map(function(d){return d.getAttribute("data-uid")}).indexOf(n);if(!(t.action==="tab"&&a>=s.length-1)){F([this.parent.element],["e-focus"]),F([r],["e-focused"]),r.tabIndex=-1,t.preventDefault();var l;if(e.focusModule.removeFocus(),t.action==="shiftTab"){for(var h=s[a-1],u=h.cells,p=u.length-1;p>=0;p--)if(l=u[parseInt(p.toString(),10)],!l.classList.contains("e-hide")){e.focusModule.active.matrix.current=[a-1,p];break}}else l=s[a+1].cells[0],e.focusModule.active.matrix.current=[a+1,0];e.focusModule.currentInfo.element=l,e.focusModule.currentInfo.elementToFocus=l,T([l],["e-focused","e-focus"]),l.tabIndex=0,l.focus()}},o.prototype.focusOutFromHeader=function(t){if(this.removeFocus(),this.parent.toolbar||this.parent.toolbarTemplate){var i=this.parent.toolbarModule.element,e=this.parent.toolbarModule.getFocusableToolbarItems();t.preventDefault(),e.length>0?e[e.length-1].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus():i.focus();return}if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var r=this.parent.groupModule,n=r.getFocusableGroupedItems();t.preventDefault(),n.length>0?n[n.length-1].focus():r.element.focus();return}this.parent.element.classList.contains("e-childgrid")&&(t.preventDefault(),this.parent.element.focus())},o.prototype.allowToPaging=function(t){return!(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.allowAdding&&t.keyCode!==40)},o.prototype.skipOn=function(t){var i=t.target;if(!i)return!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(t.action)>-1)return this.clearIndicator(),!0;if(this.parent.allowGrouping){var e=this.parent.groupModule.getFocusableGroupedItems();if(M(t.target,"e-groupheadercell")&&!(t.target===e[0]&&t.action==="shiftTab"||t.target===e[e.length-1]&&t.action==="tab"))return!0}if(this.parent.toolbar||this.parent.toolbarTemplate){var r=this.parent.toolbarModule.element,n=r.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(M(t.target,"e-toolbar-item")&&!(n.length>0&&(M(t.target,"e-toolbar-item")===n[0]&&t.action==="shiftTab"||M(t.target,"e-toolbar-item")===n[n.length-1]&&t.action==="tab")))return!0}var s=D(i,"th")&&!D(i,"th").tabIndex;if(t.target.classList.contains("e-filterbaroperator")&&(t.keyCode===13||t.keyCode===27)){var a=D(t.target,".e-filterbarcell");a.querySelector("input").focus()}s&&D(document.activeElement,".e-filterbarcell")!==null&&this.removeFocus();var l=D(document.activeElement,".e-filterbarcell")!==null;if(this.parent.enableHeaderFocus&&l){var h=this.active.matrix,u=h.current;l=h.matrix[u[0]].lastIndexOf(1)!==u[1]}return t.action==="delete"||this.parent.editSettings.mode!=="Batch"&&(this.parent.isEdit||["insert","f2"].indexOf(t.action)>-1)||l&&this.parent.enableHeaderFocus||l&&t.action!=="tab"&&t.action!=="shiftTab"||D(document.activeElement,"#"+this.parent.element.id+"_searchbar")!==null&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(t.action)>-1||D(i,"."+vi)===null&&D(i,"."+Tt)===null&&!(t.target===this.parent.element||M(t.target,"e-toolbar")||M(t.target,"e-groupdroparea"))||t.action==="space"&&!i.classList.contains(er)&&D(i,"."+er)===null&&D(i,".e-headerchkcelldiv")===null||D(i,".e-filter-popup")!==null},o.prototype.focusVirtualElement=function(t){var i=this;if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var e={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(jp,e);var r=this.actions.some(function(s){return s===i.activeKey}),n=this.parent.contentModule?this.parent.contentModule.selectedRowIndex>-1:!1;e.isAdd||Object.keys(e.virtualData).length||r||e.isCancel||n?(this.parent.notify(Cd,{isCancel:!1}),e.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,r&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",t)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1},o.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},o.prototype.getContent=function(){return this.active||this.content},o.prototype.setActive=function(t){this.active=t?this.content:this.header},o.prototype.setFocusedElement=function(t,i){var e=this;this.currentInfo.elementToFocus=t,setTimeout(function(){c(e.currentInfo.elementToFocus)||(e.parent.enableVirtualization||e.parent.enableInfiniteScrolling?e.focusVirtualElement(i):(c(e.parent.element.querySelector(".e-flmenu"))||M(document.activeElement,"e-flmenu-valuediv")!==e.parent.element.querySelector(".e-flmenu-valuediv"))&&e.currentInfo.elementToFocus.focus())},0)},o.prototype.focus=function(t){this.parent.notify(Gp,t),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),t)},o.prototype.removeFocus=function(t){if(this.currentInfo.element){if(this.parent.isReact&&!this.parent.isEdit&&this.currentInfo.element.classList.contains("e-rowcell")&&!this.currentInfo.element.parentElement&&!(this.parent.allowGrouping&&this.parent.groupSettings.columns.length)&&this.parent.getRowByIndex(this.prevIndexes.rowIndex)){var i=this.parent.getCellFromIndex(this.prevIndexes.rowIndex,this.prevIndexes.cellIndex);this.currentInfo.element=i||this.currentInfo.element}F([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1}},o.prototype.addOutline=function(){var t=this.getContent().getFocusInfo();t.element&&(T([t.element],["e-focused"]),T([t.elementToFocus],["e-focus"]))},o.prototype.focusHeader=function(){this.setActive(!1),this.resetFocus()},o.prototype.focusContent=function(){this.setActive(!0),this.resetFocus()},o.prototype.resetFocus=function(){var t=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(t[0],t[1]),this.focus()},o.prototype.addFocus=function(t,i){if(this.currentInfo=t,this.currentInfo.outline=t.outline&&(!c(i)||this.isVirtualScroll),this.isInfiniteScroll&&(this.currentInfo.outline=!0),!!t.element){var e=t.elementToFocus.classList.contains("e-focus");if(!e){this.currentInfo.outline&&T([t.element],["e-focused"]),T([t.elementToFocus],["e-focus"]),t.element.tabIndex=0,e||this.setFocusedElement(t.elementToFocus,i),this.parent.notify(Ns,{element:t.elementToFocus,parent:t.element,indexes:this.getContent().matrix.current,byKey:!c(i),byClick:c(i),keyArgs:i,isJump:this.swap.swap,container:this.getContent().getInfo(i),outline:!c(i),swapInfo:this.swap});var r=this.getContent().matrix.current,n=r[0],s=r[1];this.prevIndexes={rowIndex:n,cellIndex:s},this.focusedColumnUid=this.parent.getColumnByIndex(s).uid,this.focusByClick=!1}}},o.prototype.refreshMatrix=function(t){var i=this;return function(e){t&&!i.content&&(i.content=new oh(i.parent)),!t&&!i.header&&(i.header=new hf(i.parent));var r=t?i.content:i.header,n=i.parent.frozenRows,s=0;if(n&&i.parent.editSettings.mode==="Batch"&&(s=i.parent.getHeaderContent().querySelectorAll(".e-insertedrow").length+i.parent.getHeaderContent().querySelectorAll(".e-hiddenrow").length),i.parent.groupSettings.columns.length&&n&&t){n=0;for(var a=0;a<e.rows.length&&(n++,e.rows[parseInt(a.toString(),10)].index+1!==i.parent.frozenRows);a++);}var l=t?e.rows.slice(n+s):e.rows,h=t?e.rows.slice(0,n+s):e.rows;i.parent.isCollapseStateEnabled()&&t&&(l=l.filter(function(S){return S.visible!==!1}));var u=!c(i.parent.rowTemplate);if(n&&(i.parent.editSettings.mode==="Batch"&&t&&(e.name==="batchDelete"||e.name==="batchAdd"||e.name==="batchCancel"||e.args&&e.args.requestType==="batchsave")||e.args&&(e.args.requestType==="delete"||e.args.requestType==="save"))){var p=i.header.matrix.matrix,d=i.parent.headerModule.rows.length;p.splice(d,p.length-d)}var f=r.matrix.generate(h,r.selector,u);if(r.matrix.generate(l,r.selector,u),(!(i.parent.isFrozenGrid()&&e.args&&(e.args.requestType==="sorting"||e.args.requestType==="batchsave"||e.args.requestType==="paging"))||n&&i.parent.editSettings.mode==="Batch"&&t&&(e.name==="batchDelete"||e.name==="batchAdd"||e.name==="batchCancel"||e.args.requestType==="batchsave"||e.name==="batchAdd"||e.name==="batchCancel"))&&r.generateRows(h,{matrix:f,handlerInstance:i.header}),!Q.isDevice&&e&&e.args&&(!i.focusByClick&&e.args.requestType==="paging"&&!i.parent.pagerModule.pagerObj.checkPagerHasFocus()&&(i.skipFocus=!1,i.parent.element.focus()),e.args.requestType==="grouping"&&(i.skipFocus=!0)),e&&e.args&&e.args.requestType==="virtualscroll"){if(i.currentInfo.uid){var g,v=e.rows.some(function(S,R){return g=R,S.uid===i.currentInfo.uid});if(v){i.content.matrix.current[0]=g,i.content.matrix.current[1]=i.parent.getColumnIndexByUid(i.focusedColumnUid)||0;var m=i.getContent().getFocusInfo().elementToFocus;if(m){var y=m.getBoundingClientRect(),I=i.parent.element.getBoundingClientRect();y.top>=0&&y.left>=0&&y.right<=Math.min(I.right,window.innerWidth||document.documentElement.clientWidth)&&y.bottom<=Math.min(I.bottom,window.innerHeight||document.documentElement.clientHeight)&&(i.isVirtualScroll=!0,i.focus())}}}else if(e.args.focusElement&&e.args.focusElement.classList.contains("e-filtertext")){var m=i.parent.element.querySelector("#"+e.args.focusElement.id);m&&m.focus()}}e&&e.args&&e.args.requestType==="infiniteScroll"&&(i.isInfiniteScroll=!0)}},o.prototype.addEventListener=function(){var t=this;this.parent.isDestroyed||(b.add(this.parent.element,"mousedown",this.focusCheck,this),b.add(this.parent.element,"touchstart",this.focusCheck,this),b.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(i){return t.passiveFocus(i)},!0),b.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:Zi,handler:this.onKeyPress},{event:rr,handler:this.onClick},{event:st,handler:this.refMatrix},{event:Ql,handler:this.refMatrix},{event:Jl,handler:this.refMatrix},{event:gi,handler:this.refreshMatrix()},{event:yd,handler:this.restoreFocus},{event:Wp,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:sp,handler:this.refMatrix},{event:ql,handler:this.refMatrix},{event:op,handler:this.refMatrix},{event:np,handler:this.refMatrix},{event:ni,handler:this.refMatrix},{event:Ns,handler:this.internalCellFocus}],Mi(this.parent,this.evtHandlers,!0,this))},o.prototype.filterfocus=function(){this.parent.filterSettings.type!=="FilterBar"&&this.restoreFocus()},o.prototype.removeEventListener=function(){this.parent.isDestroyed||(b.remove(this.parent.element,"mousedown",this.focusCheck),b.remove(this.parent.element,"touchstart",this.focusCheck),b.remove(this.parent.element,"focus",this.onFocus),b.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),Mi(this.parent,this.evtHandlers,!1))},o.prototype.destroy=function(){this.removeEventListener()},o.prototype.restoreFocus=function(){var t=this.parent.groupModule;if(this.parent.allowGrouping&&t&&(t.groupSortFocus||t.groupTextFocus)){t.groupSortFocus=!1,t.groupTextFocus=!1;return}this.firstHeaderCellClick=!0,this.addFocus(this.getContent().getFocusInfo())},o.prototype.restoreFocusWithAction=function(t){if(!this.parent.enableInfiniteScrolling){var i=this.getContent().matrix,e=i.current;switch(t.requestType){case"grouping":case"ungrouping":e[1]=e.length&&!this.parent.groupSettings.showGroupedColumn&&!c(i.matrix[e[0]])?i.matrix[e[0]].indexOf(1):t.requestType==="grouping"?e[1]+1:e[1]-1;break}this.getContent().matrix.current=e;var r=this.parent.groupModule;if(this.parent.allowGrouping&&r&&r.groupCancelFocus){var n=r.getFocusableGroupedItems();n.length?n[0].parentElement.getAttribute("ej-mappingname")===t.columnName?n[3].focus():n[0].focus():r.element.focus(),r.groupCancelFocus=!1;return}this.addFocus(this.getContent().getFocusInfo())}},o.prototype.clearOutline=function(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()},o.prototype.clearIndicator=function(){!this.currentInfo.element||!this.currentInfo.elementToFocus||F([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},o.prototype.getPrevIndexes=function(){var t=this.forget;return this.forget=!1,t||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},o.prototype.forgetPrevious=function(){this.forget=!0},o.prototype.setActiveByKey=function(t,i){if(this.parent.frozenRows!==0){var e,r={home:function(){return{toHeader:!e.isContent,toFrozen:!0}},end:function(){return{toHeader:!e.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:!1}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(t in r){e=i.getInfo();var n=r[""+t]();this.setActive(!n.toHeader),this.getContent().matrix.current=i.matrix.current}}},o.prototype.internalCellFocus=function(t){if(t.byKey&&t.container.isContent&&t.keyArgs.action==="enter"&&(t.parent.classList.contains("e-detailcell")||t.parent.classList.contains("e-unboundcell"))){this.clearIndicator();var i=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(i),this.currentInfo.skipAction=!0}},o}(),lf=function(){function o(){this.matrix=[],this.current=[]}return o.prototype.set=function(t,i,e){t=Math.max(0,Math.min(t,this.rows)),i=Math.max(0,Math.min(i,this.columns)),this.matrix[parseInt(t.toString(),10)]=this.matrix[parseInt(t.toString(),10)]||[],this.matrix[parseInt(t.toString(),10)][parseInt(i.toString(),10)]=e?1:0},o.prototype.get=function(t,i,e,r,n){var s=i;if(t+e[0]<0)return[t,i];t=Math.max(0,Math.min(t+e[0],this.rows));var a=!0;if(c(this.matrix[parseInt(t.toString(),10)]))return null;if(i=Math.max(0,Math.min(i+e[1],this.matrix[parseInt(t.toString(),10)].length-1)),s+e[1]>this.matrix[parseInt(t.toString(),10)].length-1&&n(t,i,r))return[t,s];var l=this.first(this.matrix[parseInt(t.toString(),10)],i,e,!0,r);i=l===null?s:l;var h=N(t+"."+i,this.matrix);if(t===this.rows&&(r==="downArrow"||r==="enter")&&(e[0]=-1),l===null){for(var u=0;u<this.rows;u++)if(this.matrix[parseInt(u.toString(),10)].some(function(p){return p===1})){a=!1;break}if(a)return t=this.current.length?this.current[0]:0,[t,i]}return this.inValid(h)||!n(t,i,r)?this.get(t,s,e,r,n):[t,i]},o.prototype.first=function(t,i,e,r,n){return(i<0||i===t.length)&&this.inValid(t[parseInt(i.toString(),10)])&&n!=="upArrow"&&n!=="downArrow"||!t.some(function(s){return s===1})?null:this.inValid(t[parseInt(i.toString(),10)])?this.first(t,["upArrow","downArrow","shiftUp","shiftDown"].indexOf(n)!==-1?r?0:++i:i+e[1],e,!1,n):i},o.prototype.select=function(t,i){t=Math.max(0,Math.min(t,this.rows)),i=Math.max(0,Math.min(i,this.matrix[parseInt(t.toString(),10)].length-1)),this.current=[t,i]},o.prototype.generate=function(t,i,e){this.rows=t.length-1,this.matrix=[];for(var r=0;r<t.length;r++){var n=t[parseInt(r.toString(),10)].cells.filter(function(l){return l.isSpanned!==!0});this.columns=Math.max(n.length-1,this.columns|0);for(var s=0,a=0;a<n.length;a++)n[parseInt(a.toString(),10)].column&&n[parseInt(a.toString(),10)].column.columns?s=this.columnsCount(n[parseInt(a.toString(),10)].column.columns,s):s++,this.set(r,a,t[parseInt(r.toString(),10)].visible===!1?!1:i(t[parseInt(r.toString(),10)],n[parseInt(a.toString(),10)],e));this.columns=Math.max(s-1,this.columns|0)}return this.matrix},o.prototype.columnsCount=function(t,i){for(var e=t,r=i,n=0;n<e.length;n++)e[parseInt(n.toString(),10)].columns?r=this.columnsCount(e[parseInt(n.toString(),10)].columns,r):r++;return r},o.prototype.inValid=function(t){return t===0||t===void 0},o}(),oh=function(){function o(t){var i=this;this.matrix=new lf,this.lastIdxCell=!1,this.parent=t,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(e){var r={home:[i.matrix.current[0],-1,0,1],end:[i.matrix.current[0],i.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[i.matrix.rows,i.matrix.columns+1,0,-1]};return r[""+e]||null}}return o.prototype.getTable=function(){return this.parent.getContentTable()},o.prototype.onKeyPress=function(t){var i=/(Mac)/i.test(navigator.platform);if(i&&t.metaKey){if(t.action==="home")t.action="ctrlHome";else if(t.action==="end")t.action="ctrlEnd";else if(["downArrow","upArrow","leftArrow","rightArrow"].indexOf(t.action)!==-1)return}var e=this.keyActions[t.action],r=this.getCurrentFromAction(t.action,e,t.action in this.keyActions,t);if(r){if((["tab","shiftTab"].indexOf(t.action)>-1&&this.matrix.current||[]).toString()===r.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.allowAdding&&t.keyCode===40||t.keyCode===40)){if(r.toString()===[this.matrix.rows,this.matrix.columns].toString()||r.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===r.toString()||this.parent.allowGrouping&&this.parent.infiniteScrollSettings.enableCache&&r.toString()===[0,1].toString())return!1;r=this.editNextRow(r[0],r[1],t.action)}this.matrix.select(r[0],r[1])}},o.prototype.editNextRow=function(t,i,e){var r=this.parent,n=r.editSettings.allowNextRowEdit&&(r.isEdit||r.isLastCellPrimaryKey),s=r.getColumnIndexByField(r.getVisibleColumns()[0].field),a=this.getTable().rows[parseInt(t.toString(),10)].cells[parseInt(i.toString(),10)];if(e==="tab"&&n){t++;var l=this.getTable().rows[parseInt(t.toString(),10)].getElementsByClassName("e-indentcell").length+this.getTable().rows[parseInt(t.toString(),10)].getElementsByClassName("e-detailrowcollapse").length;i=s+l}return e==="shiftTab"&&n&&(t--,i=r.getColumnIndexByField(r.getVisibleColumns()[r.getVisibleColumns().length-1].field)),!a.classList.contains(Me)&&!a.classList.contains("e-headercell")&&!a.classList.contains("e-groupcaption")&&!a.classList.contains("e-filterbarcell")?this.editNextRow(t,i,e):[t,i]},o.prototype.getCurrentFromAction=function(t,i,e,r){if(i===void 0&&(i=[0,0]),!e&&!this.indexesByKey(t)||this.matrix.current.length===0)return null;if(!this.shouldFocusChange(r))return this.matrix.current;var n=this.indexesByKey(t)||this.matrix.current.concat(i),s=n[0],a=n[1],l=n[2],h=n[3];if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&t==="enter")for(var u=s;u<this.matrix.matrix.length;u++){var p=this.getTable().rows[u+1];if(p&&p.cells[parseInt(a.toString(),10)]&&p.cells[parseInt(a.toString(),10)].classList.contains("e-rowcell"))return[u+1,a];if(u===this.matrix.matrix.length-1)return[s,a]}if(t==="ctrlEnd"||t==="end"){var d=[this.matrix.matrix.length-1,this.matrix.matrix[this.matrix.matrix.length-1].length-1];t==="end"&&(d=[s,this.matrix.matrix[parseInt(s.toString(),10)].length-1]),this.matrix.matrix[d[0]][d[1]]===0&&(d=_t(this.matrix.matrix,d,!1)),s=d[0],a=d[1]+1}var f=this.matrix.get(s,a,[l,h],t,this.validator());return f},o.prototype.onClick=function(t,i){var e=t.target;if(this.target=e,e=e.classList.contains(Me)?e:D(e,"td"),e=e||D(t.target,"td.e-detailrowcollapse")||D(t.target,"td.e-detailrowexpand"),e=D(t.target,"td.e-detailcell")&&c(D(D(t.target,".e-grid"),"td.e-detailcell"))?null:e,e=e&&D(e,"table").classList.contains(Zt)?e:null,!e)return!1;var r=[e.parentElement.rowIndex,e.cellIndex],n=r[0],s=r[1],a=this.matrix.current,l=a[0],h=a[1],u=N(n+"."+s,this.matrix.matrix);if(this.matrix.inValid(u)||!i&&l===n&&h===s||!M(t.target,Me)&&!M(t.target,"e-groupcaption")&&!M(t.target,"e-recordpluscollapse")&&!M(t.target,"e-recordplusexpand")&&!M(t.target,"e-detailrowcollapse")&&!M(t.target,"e-detailrowexpand")&&!M(t.target,"e-templatecell"))return!1;this.matrix.select(n,s)},o.prototype.getFocusInfo=function(){var t={},i=this.matrix.current,e=i[0],r=e===void 0?0:e,n=i[1],s=n===void 0?0:n;return this.matrix.current=[r,s],t.element=c(this.getTable().rows[parseInt(r.toString(),10)])?null:this.getTable().rows[parseInt(r.toString(),10)].cells[parseInt(s.toString(),10)],t.element&&(t.elementToFocus=!t.element.classList.contains("e-unboundcell")&&!t.element.classList.contains("e-detailcell")?this.getFocusable(t.element):t.element,t.elementToFocus=t.element.classList.contains("e-detailcell")&&t.element.querySelector(".e-childgrid")?t.element.querySelector(".e-childgrid"):t.elementToFocus,t.outline=!0,t.uid=t.element.parentElement.getAttribute("data-uid")),t},o.prototype.getFocusable=function(t){var i='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',e=!c(D(t,".e-templatecell"));this.parent.isEdit&&(i='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea');var r=[].slice.call(t.querySelectorAll(i));return r.length?e&&r.length>1?this.target?this.target:t:r[0]:t},o.prototype.selector=function(t,i,e){var r=[le.Expand,le.GroupCaption,le.CaptionSummary,le.GroupSummary];return(t.isDataRow&&i.visible&&(i.isDataCell||i.isTemplate)||t.isDataRow&&i.cellType===le.DetailExpand&&c(i.visible)||!t.isDataRow&&r.indexOf(i.cellType)>-1&&!((i.cellType===le.GroupSummary||i.cellType===le.CaptionSummary)&&!(i.isDataCell&&i.visible))||i.column&&i.visible&&i.column.type==="checkbox"||i.cellType===le.CommandColumn||t.isDataRow&&e)&&!(t.edit==="delete"&&t.isDirty)},o.prototype.nextRowFocusValidate=function(t){for(var i=t,e=t,r=this.matrix.rows;e<=r;e++)if(this.matrix.matrix[parseInt(t.toString(),10)].indexOf(1)===-1)t=t+1;else return t;return this.lastIdxCell=!0,i},o.prototype.previousRowFocusValidate=function(t){for(var i=t,e=t,r=0;e>=r;e--)if(this.matrix.matrix[parseInt(t.toString(),10)].indexOf(1)===-1){if(t=t-1,t<0)return this.lastIdxCell=!0,i}else return t;return i},o.prototype.jump=function(t,i){this.lastIdxCell=!1;var e=this.parent.frozenRows!==0&&t==="shiftEnter",r=(t==="upArrow"||e)&&i[0]===0;t==="tab"&&this.matrix.matrix.length&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==i[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1),t==="shiftTab"&&i[0]!==0&&this.matrix.matrix[i[0]].indexOf(1)===i[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[i[0]].length);var n=!1,s=M(document.activeElement,"e-row");if((this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&!c(s)&&s.classList.contains(ft)){var a=parseInt(s.getAttribute(Ke),10);n=a>0}var l={swap:n?!1:(t==="upArrow"||e)&&i[0]===0,toHeader:r};return l},o.prototype.getNextCurrent=function(t,i,e,r){t===void 0&&(t=[]);var n=[];return(r==="rightArrow"||r==="tab")&&(n[0]=t[0],n[1]=-1),(r==="downArrow"||r==="enter")&&(n[0]=-1,n[1]=t[1]),n},o.prototype.generateRows=function(t,i){var e,r=i.matrix,n=i.handlerInstance,s=n.matrix.matrix.length,a=this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"?s+1:s;n.matrix.matrix=n.matrix.matrix.slice(0,a),n.matrix.rows=a,(e=n.matrix.matrix).push.apply(e,r),n.matrix.rows+=r.length},o.prototype.getInfo=function(t){var i=this.getFocusInfo(),e=this.matrix.current,r=e[0],n=e[1],s=i.element.classList.contains(Me),a=s||t&&t.action!=="enter"&&(i.element.classList.contains("e-detailrowcollapse")||i.element.classList.contains("e-detailrowexpand")),l=[Math.min(parseInt(i.element.parentElement.getAttribute(Ke),10),r),Math.min(parseInt(i.element.getAttribute(rt),10),n)],h=l[0],u=l[1];return this.parent.allowGrouping&&this.parent.groupSettings.enableLazyLoading&&s&&(h=this.parent.getDataRows().indexOf(i.element.parentElement)),{isContent:!0,isDataCell:s,indexes:[h,u],isSelectable:a}},o.prototype.validator=function(){var t=this.getTable();return function(i,e,r){if(!c(t.rows[parseInt(i.toString(),10)])){var n=void 0;e=t.querySelector(".e-emptyrow")?0:e,t.rows[parseInt(i.toString(),10)].cells[0].classList.contains("e-editcell")?n=t.rows[parseInt(i.toString(),10)].cells[0].querySelectorAll("td")[parseInt(e.toString(),10)]:n=t.rows[parseInt(i.toString(),10)].cells[parseInt(e.toString(),10)];var s=n.getBoundingClientRect().width!==0;if(r==="enter"||r==="shiftEnter")return s&&n.classList.contains(Me);if((r==="shiftUp"||r==="shiftDown")&&n.classList.contains(Me))return s;if(r!=="shiftUp"&&r!=="shiftDown")return s}return!1}},o.prototype.shouldFocusChange=function(t){var i=this.matrix.current,e=i[0],r=e===void 0?-1:e,n=i[1],s=n===void 0?-1:n;if(r<0||s<0)return!0;var a=N(r+".cells."+s,this.getTable().rows);return a&&(t.action==="enter"||t.action==="shiftEnter")?a.classList.contains(Me)&&!a.classList.contains("e-unboundcell")||a.classList.contains("e-editedbatchcell")&&!a.classList.contains("e-detailcell"):!0},o.prototype.getGridSeletion=function(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection},o}(),hf=function(o){of(t,o);function t(i){return o.call(this,i)||this}return t.prototype.getTable=function(){return this.parent.getHeaderTable()},t.prototype.onClick=function(i){var e=i.target;if(this.target=e,e=e.classList.contains("e-headercell")?e:D(e,"th"),!e&&this.parent.frozenRows!==0&&(e=i.target.classList.contains(Me)?i.target:D(i.target,"td")),i.target.classList.contains("e-columnheader")||i.target.querySelector(".e-stackedheadercell"))return!1;if(e){var r=[e.parentElement.rowIndex,e.cellIndex],n=r[0],s=r[1],a=N(n+"."+s,this.matrix.matrix);if(this.matrix.inValid(a))return!1;this.matrix.select(e.parentElement.rowIndex,e.cellIndex)}},t.prototype.getFocusInfo=function(){var i={},e=this.matrix.current,r=e[0],n=r===void 0?0:r,s=e[1],a=s===void 0?0:s;return i.element=this.getTable().rows[parseInt(n.toString(),10)].cells[parseInt(a.toString(),10)],c(i.element)||(i.elementToFocus=this.getFocusable(i.element),i.outline=!i.element.classList.contains("e-filterbarcell")),i},t.prototype.selector=function(i,e){return e.visible&&(e.column.field!==void 0||e.isTemplate||!c(e.column.template)||!c(e.column.commands))||e.column.type==="checkbox"||e.cellType===le.StackedHeader},t.prototype.jump=function(i,e){var r=this.parent.frozenRows!==0&&i==="enter",n,s;return this.parent.enableHeaderFocus&&i==="tab"&&(s=this.matrix.matrix.length-1===e[0],n=e[1]===this.matrix.matrix[e[0]].lastIndexOf(1),n&&(s?this.matrix.current[0]=0:this.matrix.current[0]=this.matrix.current[0]+1,this.matrix.current[1]=-1)),{swap:(i==="downArrow"||r)&&e[0]===this.matrix.matrix.length-1||i==="tab"&&s&&n}},t.prototype.getNextCurrent=function(i,e,r,n){i===void 0&&(i=[]);var s=[];return(n==="rightArrow"||n==="shiftRight"&&this.getGridSeletion()||n==="tab")&&(s[0]=i[0],s[1]=-1),(n==="upArrow"||n==="shiftEnter")&&(s[0]=this.matrix.matrix.length,s[1]=i[1]),s},t.prototype.generateRows=function(i){var e=this.matrix.matrix.length;if(this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"){this.matrix.rows=++this.matrix.rows;for(var r=i[0].cells,n=0,s=0;s<r.length;s++)r[parseInt(s.toString(),10)].column&&r[parseInt(s.toString(),10)].column.columns?n=this.checkFilterColumn(r[parseInt(s.toString(),10)].column.columns,e,n):(this.matrix.set(e,n,r[parseInt(s.toString(),10)].visible&&r[parseInt(s.toString(),10)].column.allowFiltering!==!1),n++)}},t.prototype.checkFilterColumn=function(i,e,r){for(var n=i,s=r,a=0;a<n.length;a++)n[parseInt(a.toString(),10)].columns?s=this.checkFilterColumn(n[parseInt(a.toString(),10)].columns,e,s):(this.matrix.set(e,s,n[parseInt(a.toString(),10)].visible&&n[parseInt(a.toString(),10)].allowFiltering!==!1),s++);return s},t.prototype.getInfo=function(i){return _(o.prototype.getInfo.call(this,i),{isContent:!1,isHeader:!0})},t.prototype.validator=function(){return function(){return!0}},t.prototype.shouldFocusChange=function(i){var e=this.matrix.current,r=e[0],n=e[1];if(r<0||n<0)return!0;var s=N(r+".cells."+n,this.getTable().rows);return s&&(i.action==="enter"||i.action==="altDownArrow")?!s.classList.contains("e-headercell"):!0},t.prototype.getHeaderType=function(){return"HeaderFocus"},t}(oh),uf=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),zi=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},cf=function(o){uf(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return zi([C(12)],t.prototype,"pageSize",void 0),zi([C(8)],t.prototype,"pageCount",void 0),zi([C(1)],t.prototype,"currentPage",void 0),zi([C()],t.prototype,"totalRecordsCount",void 0),zi([C(!1)],t.prototype,"enableQueryString",void 0),zi([C(!1)],t.prototype,"pageSizes",void 0),zi([C(null)],t.prototype,"template",void 0),t}(_e),pf=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Ja=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},df=function(o){pf(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return Ja([C("startsWith")],t.prototype,"operator",void 0),Ja([C(!1)],t.prototype,"ignoreAccent",void 0),t}(_e),ff=function(){function o(t,i,e){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.unSelectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.isHdrSelectAllClicked=!1,this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.isPartialSelection=!1,this.rmtHdrChkbxClicked=!1,this.isCheckboxReset=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=t,this.selectionSettings=i,this.factory=e.getService("rendererFactory"),this.focus=e.getService("focus"),this.addEventListener(),this.wireEvents()}return o.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},o.prototype.onActionBegin=function(t,i){this.parent.trigger(i,this.fDataUpdate(t))},o.prototype.fDataUpdate=function(t){if(!this.isMultiSelection&&(!c(t.cellIndex)||!c(t.rowIndex))){var i=this.getRowObj(c(t.rowIndex)?c(t.cellIndex)?this.currentIndex:t.cellIndex.rowIndex:t.rowIndex);t.foreignKeyData=i.foreignKeyData}return t},o.prototype.onActionComplete=function(t,i){this.parent.trigger(i,this.fDataUpdate(t)),this.isMultiSelection=!1},o.prototype.getModuleName=function(){return"selection"},o.prototype.destroy=function(){var t=this.parent.element;!t||!t.querySelector("."+Tt)&&!t.querySelector("."+vi)||(this.hidePopUp(),this.clearSelection(),this.removeEventListener(),this.unWireEvents(),b.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),b.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},o.prototype.isEditing=function(){return(this.parent.editSettings.mode==="Normal"||this.parent.editSettings.mode==="Batch"&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.isPersistSelection},o.prototype.getCurrentBatchRecordChanges=function(){var t=this.parent;if(t.editSettings.mode==="Batch"&&t.editModule){var i=Ss(this.parent.getCurrentViewRecords());i=t.editSettings.newRowPosition==="Bottom"?i.concat(this.parent.editModule.getBatchChanges()[En]):this.parent.editModule.getBatchChanges()[En].concat(i);for(var e=this.parent.editModule.getBatchChanges()[Zl],r=this.parent.getPrimaryKeyFieldNames()[0],n=0;n<e.length;n++)for(var s=0;s<i.length;s++)if(e[parseInt(n.toString(),10)][""+r]===i[parseInt(s.toString(),10)][""+r]){i.splice(s,1);break}return i}else if(this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&!this.parent.isPersistSelection){var a=t.getCurrentViewRecords().filter(function(l){return l.key===void 0});return a}else return t.getCurrentViewRecords()},o.prototype.selectRow=function(t,i){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection){this.addRowsToSelection([t]);return}var e=this.parent,r=e.getRowByIndex(t),n=r&&e.getRowObjectFromUID(r.getAttribute("data-uid"));if(!(this.isPartialSelection&&n&&n.isDataRow&&!n.isSelectable)){var s,a=!1;if(e.enableVirtualization&&t>-1){var l={selectedIndex:t,isAvailable:!0};if(this.parent.notify(Hp,l),r&&e.getRowObjectFromUID(r.getAttribute("data-uid")))s=e.getRowObjectFromUID(r.getAttribute("data-uid")).data;else{if(l.isAvailable&&!e.selectionSettings.persistSelection){var h=this.parent.getSelectedRecords();h.length>0&&this.clearRowSelection()}return}}else s=this.getRowObj(t).data;if(!(!this.isRowType()||!r||this.isEditing())){var u=r.hasAttribute("aria-selected");this.activeTarget(),i=i&&(this.selectedRowIndexes.length&&this.selectedRowIndexes.length===1?this.isKeyAction&&this.parent.isCheckBoxSelection?!1:t===this.selectedRowIndexes[0]:!1),this.isKeyAction=!1;var p,d="cancel";i?this.rowSelectingCallBack(p,i,t,s,a,u,d)(p):(p={data:s,rowIndex:t,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:r,previousRow:e.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},this.parent.trigger(fs,this.fDataUpdate(p),this.rowSelectingCallBack(p,i,t,s,a,u,d)))}}},o.prototype.rowSelectingCallBack=function(t,i,e,r,n,s,a){var l=this;return function(h){if(!c(h)&&h[""+a]===!0){l.disableInteracted();return}l.index=e,l.toggle=i,l.data=r,l.removed=n,s&&l.selectionSettings.persistSelection&&l.selectionSettings.checkboxMode!=="ResetOnRowClick"?(l.clearSelectedRow(e),l.selectRowCallBack()):!s&&l.selectionSettings.persistSelection&&l.selectionSettings.checkboxMode!=="ResetOnRowClick"&&l.selectRowCallBack(),l.selectionSettings.checkboxMode==="ResetOnRowClick"&&(l.isCheckboxReset=!0,l.clearSelection()),(!l.selectionSettings.persistSelection||l.selectionSettings.checkboxMode==="ResetOnRowClick"||!l.parent.isCheckBoxSelection&&l.selectionSettings.persistSelection)&&(l.selectRowCheck=!0,l.clearRow())}},o.prototype.selectRowCallBack=function(){var t=this.parent,i,e=this.index,r=this.toggle,n=this.data,s=this.removed,a=t.getRowByIndex(e);!r&&!s&&(this.selectedRowIndexes.indexOf(e)<=-1&&this.updateRowSelection(a,e),this.selectRowIndex(e)),r||(i={data:n,rowIndex:e,row:a,previousRow:t.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:e},this.onActionComplete(i,gs)),this.isInteracted=!1,this.updateRowProps(e)},o.prototype.selectRowsByRange=function(t,i){this.selectRows(this.getCollectionFromIndexes(t,i)),this.selectRowIndex(i)},o.prototype.selectedDataUpdate=function(t,i,e,r,n){for(var s=0,a=r.length;s<a;s++){var l=this.parent.getDataRows()[r[parseInt(s.toString(),10)]];this.parent.enableVirtualization&&(l=this.parent.getRowByIndex(r[parseInt(s.toString(),10)]));var h=this.getRowObj(l);h&&h.isDataRow&&h.isSelectable?(t.push(h.data),e.push(l),i.push(h.foreignKeyData)):this.isPartialSelection&&n&&n.splice(n.indexOf(r[parseInt(s.toString(),10)]),1)}},o.prototype.selectRows=function(t){var i=this,e=this.parent,r=t.slice(),n=this.isSingleSel()?t[t.length-1]:t[0];this.isMultiSelection=!0;var s=[],a=[],l="cancel",h=[];if(!(!this.isRowType()||this.isEditing())){this.selectedDataUpdate(h,a,s,t,r),this.activeTarget();var u={cancel:!1,rowIndexes:r,row:s,rowIndex:n,target:this.actualTarget,prevRow:e.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:h,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:a};this.parent.trigger(fs,this.fDataUpdate(u),function(p){if(!c(p)&&p[""+l]===!0){i.disableInteracted();return}e.allowRowDragAndDrop&&i.isDragged&&i.selectionSettings.persistSelection||i.clearRow(),i.selectRowIndex(r.slice(-1)[0]);var d=function(m,y){i.updateRowSelection(e.getRowByIndex(m),m,y),i.updateRowProps(n)};if(i.isSingleSel())d(n);else for(var f=0,g=r;f<g.length;f++){var v=g[f];d(v,!!e.enableVirtualization)}p={rowIndexes:r,row:s,rowIndex:n,target:i.actualTarget,prevRow:e.getRows()[i.prevRowIndex],previousRowIndex:i.prevRowIndex,data:i.getSelectedRecords(),isInteracted:i.isInteracted,isHeaderCheckboxClicked:i.isHeaderCheckboxClicked,foreignKeyData:a},i.isRowSelected&&i.onActionComplete(p,gs),i.isInteracted=!1})}},o.prototype.addRowsToSelection=function(t){var i=this.parent,e="cancel",r=this.target;this.isMultiSelection=!0;var n=[],s=[],a=[],l=i.getSelectedRowIndexes().concat(t),h=this.isSingleSel()?i.getRowByIndex(t[t.length-1]):i.getRowByIndex(t[0]);if(!((!this.isRowType()||this.isEditing())&&!this.selectionSettings.checkboxOnly)){var u,p=this.parent.getColumns().filter(function(y){return y.type==="checkbox"});this.isMultiCtrlRequest&&!p.length&&this.selectedDataUpdate(a,s,n,l);for(var d=0,f=t;d<f.length;d++){var g=f[d],v=this.getRowObj(g),m=this.selectedRowIndexes.indexOf(g)>-1;if(!(this.isPartialSelection&&v&&v.isDataRow&&!v.isSelectable)){if(this.selectRowIndex(g),m&&(p.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(wa,[g],[v.data],[h],[v.foreignKeyData],r),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(g),1),this.selectedRecords.splice(this.selectedRecords.indexOf(h),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),h.removeAttribute("aria-selected"),this.addRemoveClassesForRow(h,!1,null,"e-selectionbackground","e-active"),this.rowDeselect(Ia,[g],[v.data],[h],[v.foreignKeyData],r,void 0,void 0,void 0),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),u={cancel:!1,data:a.length?a:v.data,rowIndex:g,row:n.length?n:h,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:s.length?s:v.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.parent.trigger(fs,this.fDataUpdate(u)),!c(u)&&u[""+e]===!0){this.disableInteracted();return}this.isSingleSel()&&this.clearRow(),this.updateRowSelection(h,g)}if(m||(u={data:a.length?a:v.data,rowIndex:g,row:n.length?n:h,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:s.length?s:v.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.onActionComplete(u,gs)),this.isInteracted=!1,this.updateRowProps(g),this.isSingleSel())break}}}},o.prototype.getCollectionFromIndexes=function(t,i){for(var e=[],r=t<=i?{i:t,max:i}:{i,max:t},n=r.i,s=r.max;n<=s;n++)e.push(n);return t>i&&e.reverse(),e},o.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},o.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&this.parent.checkAllRows!=="Check"||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},o.prototype.clearSelectedRow=function(t){if(this.toggle){var i=this.parent.getRowByIndex(t);this.disableUI||(i.removeAttribute("aria-selected"),this.addRemoveClassesForRow(i,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(i,!1),this.updateCheckBoxes(i),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(t),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(t)),1)}},o.prototype.updateRowProps=function(t){this.prevRowIndex=t,this.isRowSelected=this.selectedRowIndexes.length&&!0},o.prototype.getPkValue=function(t,i){return t&&Wf(t)?mi(t,i):i[""+t]},o.prototype.updatePersistCollection=function(t,i){var e=this;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!c(t)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();var r=this.getRowObj(t),n=r.data?this.getPkValue(this.primaryKey,r.data):null;if(n===null)return;r.isSelected=i,i&&!this.isPartialSelection||this.isPartialSelection&&r.isSelectable&&r.isSelected?(this.selectedRowState[""+n]=i,delete this.unSelectedRowState[""+n],this.persistSelectedData.some(function(s){return e.getPkValue(e.primaryKey,s)===n})||this.persistSelectedData.push(r.data)):this.updatePersistDelete(n)}},o.prototype.updatePersistDelete=function(t,i){var e=this;delete this.selectedRowState[""+t],this.rmtHdrChkbxClicked&&(this.unSelectedRowState[""+t]=!0);var r,n=this.persistSelectedData.some(function(s,a){return r=a,e.getPkValue(e.primaryKey,s)===t});n&&(this.persistSelectedData.splice(r,1),i&&this.parent.partialSelectedRecords.splice(r,1))},o.prototype.updateCheckBoxes=function(t,i,e){if(!c(t)){var r=t.querySelector(".e-checkselect");c(r)||(dn(r.nextElementSibling,i),Ui(r,i),(c(this.checkedTarget)||!c(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(e))}},o.prototype.updateRowSelection=function(t,i,e){if(t&&(this.selectedRowIndexes.indexOf(i)===-1&&(this.selectedRowIndexes.push(i),this.selectedRecords.push(t)),t.setAttribute("aria-selected","true"),this.updatePersistCollection(t,!0),this.updateCheckBoxes(t,!0),this.addRemoveClassesForRow(t,!0,null,"e-selectionbackground","e-active"),!this.preventFocus)){var r=this.focus.getPrevIndexes().cellIndex?t.cells[this.focus.getPrevIndexes().cellIndex]:t.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&this.mouseButton===2&&(r=this.parent.contextMenuModule.cell),!r||e)return;this.focus.onClick({target:r},!0)}},o.prototype.clearSelection=function(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=Ss(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!c(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var t=this.parent.element.querySelector(".e-gridpopup").querySelector("span");t.classList.contains("e-rowselect")&&t.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1,this.isHdrSelectAllClicked=!1}},o.prototype.clearRowSelection=function(){var t=this;if(this.isRowSelected){for(var i=this.parent.getDataRows(),e=[],r=[],n=[],s=[],a=this.target,l=0,h=this.selectedRowIndexes.length;l<h;l++){var u=this.parent.editSettings.mode==="Batch"?this.parent.getRows()[this.selectedRowIndexes[parseInt(l.toString(),10)]]:this.parent.getDataRows()[this.selectedRowIndexes[parseInt(l.toString(),10)]],p=this.getRowObj(u);p&&(e.push(p.data),r.push(u),n.push(this.selectedRowIndexes[parseInt(l.toString(),10)]),s.push(p.foreignKeyData))}this.selectionSettings.persistSelection&&this.selectionSettings.checkboxMode!=="ResetOnRowClick"&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(wa,n,e,r,s,a,null,function(){if(t.isCancelDeSelect&&(t.isRowClicked||t.checkSelectAllClicked||t.isInteracted&&!t.parent.isPersistSelection)){if(t.parent.isPersistSelection)if(t.getCheckAllStatus(t.parent.element.querySelector(".e-checkselectall"))==="Intermediate")for(var d=0;d<t.selectedRecords.length;d++)t.updatePersistCollection(t.selectedRecords[parseInt(d.toString(),10)],!0);else t.parent.checkAllRows="Check",t.updatePersistSelectedData(!0);t.clearRowCheck&&(t.clearRowCallBack(),t.clearRowCheck=!1,t.selectRowCheck&&(t.selectRowCallBack(),t.selectRowCheck=!1));return}for(var f=[].slice.call(i.filter(function(v){return v.hasAttribute("aria-selected")})),g=0;g<f.length;g++)t.disableUI||(f[parseInt(g.toString(),10)].removeAttribute("aria-selected"),t.addRemoveClassesForRow(f[parseInt(g.toString(),10)],!1,!0,"e-selectionbackground","e-active")),t.isPrevRowSelection||t.updatePersistCollection(f[parseInt(g.toString(),10)],!1),t.updateCheckBoxes(f[parseInt(g.toString(),10)]);t.selectedRowIndexes=[],t.selectedRecords=[],t.isRowSelected=!1,t.selectRowIndex(-1),t.isPrevRowSelection=!1,t.rowDeselect(Ia,n,e,r,s,a,null,void 0,null),t.clearRowCheck&&(t.clearRowCallBack(),t.clearRowCheck=!1,t.selectRowCheck&&(t.selectRowCallBack(),t.selectRowCheck=!1))},null)}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},o.prototype.rowDeselect=function(t,i,e,r,n,s,a,l,h){var u=this;if(this.selectionSettings.persistSelection&&(this.isRowClicked||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&this.focus.activeKey==="space")||!this.selectionSettings.persistSelection){var p="cancel",d=i.length===1&&this.deSelectedData.length===1,f={rowIndex:i[0],data:this.selectionSettings.persistSelection&&this.parent.checkAllRows==="Uncheck"&&!d&&this.selectionSettings.checkboxMode!=="ResetOnRowClick"?this.deSelectedData:e,foreignKeyData:n,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};t==="rowDeselected"&&delete f.cancel;var g="row",v="target",m="rowIndex",y="rowIndexes",I="data",S="foreignKeyData";f[""+g]=r,f[""+v]=this.actualTarget;var R=this.actualTarget&&!c(D(this.actualTarget,"thead"));R||i.length>1?(f[""+m]=i[0],f[""+y]=i):i.length===1&&(f[""+I]=f[""+I][0],f[""+g]=f[""+g][0],f[""+S]=f[""+S][0],this.isAddRowsToSelection&&(f[""+y]=i)),this.parent.trigger(t,f,function(L){u.isCancelDeSelect=L[""+p],(!u.isCancelDeSelect||!u.isRowClicked&&!u.isInteracted&&!u.checkSelectAllClicked)&&(u.updatePersistCollection(r[0],!1),u.updateCheckBoxes(r[0],void 0,i[0])),l!==void 0&&l()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&l!==void 0&&l()},o.prototype.getRowObj=function(t){return t===void 0&&(t=this.currentIndex),c(t)?{}:(typeof t=="number"&&(t=this.parent.getRowByIndex(t)),t?this.parent.getRowObjectFromUID(t.getAttribute("data-uid"))||{}:{})},o.prototype.selectCell=function(t,i){if(this.isCellType()){var e=this.parent,r,n=e.getCellFromIndex(t.rowIndex,this.getColIndex(t.rowIndex,t.cellIndex));this.currentIndex=t.rowIndex;var s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(!this.isCellType()||!n||this.isEditing())){var a=n.classList.contains("e-cellselectionbackground");if(i=i&&!yt(this.prevCIdxs)&&t.rowIndex===this.prevCIdxs.rowIndex&&t.cellIndex===this.prevCIdxs.cellIndex&&a,i)this.successCallBack(r,i,t,n,s)(r);else{r={data:s,cellIndex:t,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1};var l="currentCell";r[""+l]=n;var h="previousRowCellIndex";r[""+h]=this.prevECIdxs,this.parent.trigger(dr,this.fDataUpdate(r),this.successCallBack(r,i,t,n,s)),this.cellselected=!0}}}},o.prototype.successCallBack=function(t,i,e,r,n){var s=this;return function(a){var l="cancel",h="currentCell";if(!(!c(a)&&a[""+l]===!0)&&(i||(a[""+h]=a[""+h]?a[""+h]:r),s.clearCell(),i||s.updateCellSelection(r,e.rowIndex,e.cellIndex),!i)){var u={data:n,cellIndex:e,currentCell:r,selectedRowCellIndex:s.selectedRowCellIndexes,previousRowCell:s.prevECIdxs?s.getCellIndex(s.prevECIdxs.rowIndex,s.prevECIdxs.cellIndex):void 0},p="previousRowCellIndex";u[""+p]=s.prevECIdxs,s.updateCellProps(e,e),s.onActionComplete(u,Xr)}}},o.prototype.getCellIndex=function(t,i){return this.parent.getCellFromIndex(t,i)},o.prototype.selectCellsByRange=function(t,i){var e=this;if(this.isCellType()){var r=this.parent,n=r.getCellFromIndex(t.rowIndex,t.cellIndex),s,a,l=t,h=i=i||t,u;this.currentIndex=t.rowIndex;var p="cancel",d=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var f={data:d,cellIndex:t,currentCell:n,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},g="previousRowCellIndex";f[""+g]=this.prevECIdxs,this.parent.trigger(dr,this.fDataUpdate(f),function(v){if(!(!c(v)&&v[""+p]===!0)){if(e.clearCell(),t.rowIndex>i.rowIndex){var m=t;t=i,i=m}for(var y=t.rowIndex;y<=i.rowIndex;y++){e.selectionSettings.cellSelectionMode.indexOf("Box")<0?(s=y===t.rowIndex?t.cellIndex:0,a=y===i.rowIndex?i.cellIndex:e.getLastColIndex(y)):(s=t.cellIndex,a=i.cellIndex),u=[];for(var I=s<a?s:a,S=s>a?s:a;I<=S;I++)n=r.getCellFromIndex(y,I),n&&(u.push(I),e.updateCellSelection(n),e.addAttribute(n));e.selectedRowCellIndexes.push({rowIndex:y,cellIndexes:u})}var R={data:d,cellIndex:h,currentCell:r.getCellFromIndex(h.rowIndex,h.cellIndex),selectedRowCellIndex:e.selectedRowCellIndexes,previousRowCell:e.prevECIdxs?e.getCellIndex(e.prevECIdxs.rowIndex,e.prevECIdxs.cellIndex):void 0},L="previousRowCellIndex";R[""+L]=e.prevECIdxs,e.isDragged||(e.onActionComplete(R,Xr),e.cellselected=!0),e.updateCellProps(l,h)}})}}},o.prototype.selectCells=function(t){if(this.isCellType()){var i=this.parent,e=i.getCellFromIndex(t[0].rowIndex,t[0].cellIndexes[0]);this.currentIndex=t[0].rowIndex;var r=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var n={data:r,cellIndex:t[0].cellIndexes[0],currentCell:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},s="previousRowCellIndex";n[""+s]=this.prevECIdxs,this.onActionBegin(n,dr);for(var a=0,l=t.length;a<l;a++)for(var h=0,u=t[parseInt(a.toString(),10)].cellIndexes.length;h<u;h++)e=i.getCellFromIndex(t[parseInt(a.toString(),10)].rowIndex,t[parseInt(a.toString(),10)].cellIndexes[parseInt(h.toString(),10)]),e&&(this.updateCellSelection(e),this.addAttribute(e),this.addRowCellIndex({rowIndex:t[parseInt(a.toString(),10)].rowIndex,cellIndex:t[parseInt(a.toString(),10)].cellIndexes[parseInt(h.toString(),10)]}));this.updateCellProps({rowIndex:t[0].rowIndex,cellIndex:t[0].cellIndexes[0]},{rowIndex:t[0].rowIndex,cellIndex:t[0].cellIndexes[0]});var p={data:r,cellIndex:t[0].cellIndexes[0],currentCell:e,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},d="previousRowCellIndex";p[""+d]=this.prevECIdxs,this.onActionComplete(p,Xr)}}},o.prototype.addCellsToSelection=function(t){if(this.isCellType()){var i=this.parent,e,r;this.currentIndex=t[0].rowIndex;var n="cancel",s=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){this.hideAutoFill();var a;a=i.getRowsObject()[t[0].rowIndex],i.groupSettings.columns.length>0&&(a=i.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var l=[],h=0,u=t;h<u.length;h++){for(var p=u[h],d=0,f=this.selectedRowCellIndexes.length;d<f;d++)if(this.selectedRowCellIndexes[parseInt(d.toString(),10)].rowIndex===p.rowIndex){r=d;break}e=i.getCellFromIndex(p.rowIndex,this.getColIndex(p.rowIndex,p.cellIndex));var g=p.cellIndex;i.groupSettings.columns.length>0?l.push(a.cells[g+i.groupSettings.columns.length].foreignKeyData):l.push(a.cells[parseInt(g.toString(),10)].foreignKeyData);var v={cancel:!1,data:s,cellIndex:t[0],isShiftPressed:this.isMultiShiftRequest,currentCell:e,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?i.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},m="previousRowCellIndex";v[""+m]=this.prevECIdxs;var y=r>-1;if(y){var I=this.selectedRowCellIndexes[parseInt(r.toString(),10)].cellIndexes;I.indexOf(p.cellIndex)>-1||this.selectionSettings.mode==="Both"&&e.classList.contains("e-gridchkbox")&&!e.getAttribute("aria-selected")?(this.cellDeselect(Ea,[{rowIndex:p.rowIndex,cellIndexes:[p.cellIndex]}],s,[e],l),I.splice(I.indexOf(p.cellIndex),1),I.length===0&&this.selectedRowCellIndexes.splice(r,1),e.classList.remove("e-cellselectionbackground"),e.removeAttribute("aria-selected"),this.cellDeselect(Ra,[{rowIndex:p.rowIndex,cellIndexes:[p.cellIndex]}],s,[e],l)):(y=!1,this.onActionBegin(v,dr),this.addRowCellIndex({rowIndex:p.rowIndex,cellIndex:p.cellIndex}),this.updateCellSelection(e),this.addAttribute(e))}else{if(this.onActionBegin(v,dr),!c(v)&&v[""+n]===!0)return;this.updateCellSelection(e,p.rowIndex,p.cellIndex)}if(!y){var S={data:s,cellIndex:t[0],currentCell:e,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};S[""+m]=this.prevECIdxs,this.onActionComplete(S,Xr),this.cellselected=!0}this.updateCellProps(p,p)}}}},o.prototype.getColIndex=function(t,i){var e=this.parent.getColumnByIndex(i),r=yh(this.parent,e,t);if(r)for(var n=0;n<r.length;n++){var s=parseInt(r[parseInt(n.toString(),10)].getAttribute(rt),10);if(s===i)return n}return-1},o.prototype.getLastColIndex=function(t){var i=this.parent.getDataRows()[parseInt(t.toString(),10)].querySelectorAll("td.e-rowcell");return parseInt(i[i.length-1].getAttribute(rt),10)},o.prototype.clearCell=function(){this.clearCellSelection()},o.prototype.cellDeselect=function(t,i,e,r,n){var s="cancel";if(r&&r.length>0)for(var a=0,l=r;a<l.length;a++){var h=l[a];h&&h.classList.contains(er)&&this.updateCheckBoxes(D(h,"tr"))}var u={cells:r,data:e,cellIndexes:i,foreignKeyData:n,cancel:!1};this.parent.trigger(t,u),this.isPreventCellSelect=u[""+s]},o.prototype.updateCellSelection=function(t,i,e){c(i)||this.addRowCellIndex({rowIndex:i,cellIndex:e}),t.classList.add("e-cellselectionbackground"),t.classList.contains(er)&&this.updateCheckBoxes(D(t,"tr"),!0),this.addAttribute(t)},o.prototype.addAttribute=function(t){this.target=t,c(t)||(t.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:t},!0))},o.prototype.updateCellProps=function(t,i){this.prevCIdxs=t,this.prevECIdxs=i,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},o.prototype.addRowCellIndex=function(t){for(var i,e,r=0,n=this.selectedRowCellIndexes.length;r<n;r++)if(this.selectedRowCellIndexes[parseInt(r.toString(),10)].rowIndex===t.rowIndex){i=!0,e=r;break}i?this.selectedRowCellIndexes[parseInt(e.toString(),10)].cellIndexes.indexOf(t.cellIndex)<0&&this.selectedRowCellIndexes[parseInt(e.toString(),10)].cellIndexes.push(t.cellIndex):this.selectedRowCellIndexes.push({rowIndex:t.rowIndex,cellIndexes:[t.cellIndex]})},o.prototype.clearCellSelection=function(){if(this.isCellSelected){var t=this.parent,i=this.getSelectedCellsElement(),e=this.selectedRowCellIndexes,r=[],n=[],s=[],a=this.getCurrentBatchRecordChanges();this.hideAutoFill();for(var l=0,h=e.length;l<h;l++){r.push(a[e[parseInt(l.toString(),10)].rowIndex]);for(var u=this.getRowObj(e[parseInt(l.toString(),10)].rowIndex),p=0,d=e[parseInt(l.toString(),10)].cellIndexes.length;p<d;p++)u.cells&&s.push(u.cells[e[parseInt(l.toString(),10)].cellIndexes[parseInt(p.toString(),10)]].foreignKeyData),n.push(t.getCellFromIndex(e[parseInt(l.toString(),10)].rowIndex,e[parseInt(l.toString(),10)].cellIndexes[parseInt(p.toString(),10)]))}if(this.cellDeselect(Ea,e,r,n,s),this.isPreventCellSelect===!0)return;for(var l=0,h=i.length;l<h;l++)i[parseInt(l.toString(),10)].classList.remove("e-cellselectionbackground"),i[parseInt(l.toString(),10)].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(Ra,e,r,n,s)}},o.prototype.getSelectedCellsElement=function(){for(var t=this.parent,i=t.getDataRows(),e=[],r=0,n=i.length;r<n;r++)e=e.concat([].slice.call(i[parseInt(r.toString(),10)].getElementsByClassName("e-cellselectionbackground")));return e},o.prototype.mouseMoveHandler=function(t){t.preventDefault(),this.stopTimer();var i=this.parent.element.getBoundingClientRect(),e=this.x,r=this.y,n=Qs(t),s=n.x-i.left,a=n.y-i.top,l,h=D(t.target,"tr");if(this.isDragged=!0,this.isCellDrag||(h||(h=D(document.elementFromPoint(this.parent.element.offsetLeft+2,t.clientY),"tr")),e>s&&(l=s,s=e,e=l),r>a&&(l=a,a=r,r=l),this.element.style.left=e+"px",this.element.style.top=r+"px",this.element.style.width=s-e+"px",this.element.style.height=a-r+"px"),h&&!t.ctrlKey&&!t.shiftKey){var u=parseInt(h.getAttribute(Ke),10);if(!this.isCellDrag)this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,u),this.isRowDragSelected=!0;else{var p=M(t.target,Me);p&&(this.startAFCell=this.startCell,this.endAFCell=M(t.target,Me),u>-1&&this.selectLikeExcel(t,u,parseInt(p.getAttribute(rt),10)))}}!t.ctrlKey&&!t.shiftKey&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&!this.parent.enableColumnVirtualization&&!this.parent.groupSettings.columns.length&&this.isCellDrag&&this.updateScrollPosition(t,n,this.parent.getContent())},o.prototype.updateScrollPosition=function(t,i,e){var r=this,n=e.getBoundingClientRect();n.left>=i.x-20?this.timer1=window.setInterval(function(){r.setScrollPosition(e.firstElementChild,"left",t)},200):n.left+e.clientWidth-20-(this.parent.height!=="auto"?fi():0)<i.x&&(this.timer1=window.setInterval(function(){r.setScrollPosition(e.firstElementChild,"right",t)},200)),n.top>=i.y-this.parent.getRowHeight()*.5?this.timer2=window.setInterval(function(){r.setScrollPosition(e.firstElementChild,"up",t)},200):n.top+e.clientHeight-this.parent.getRowHeight()*.5-(e.firstElementChild.scrollWidth>e.firstElementChild.offsetWidth?fi():0)<=i.y&&(this.timer2=window.setInterval(function(){r.setScrollPosition(e.firstElementChild,"down",t)},200))},o.prototype.stopTimer=function(){this.timer1&&(window.clearInterval(this.timer1),this.timer1=null),this.timer2&&(window.clearInterval(this.timer2),this.timer2=null),this.preventFocus=!1},o.prototype.setScrollPosition=function(t,i,e){var r=-1,n=-1;switch((this.endAFCell||this.prevECIdxs)&&(r=this.endAFCell?parseInt(this.endAFCell.getAttribute("index")):this.prevECIdxs.rowIndex,n=this.endAFCell?parseInt(this.endAFCell.getAttribute("data-colindex")):this.prevECIdxs.cellIndex),i){case"up":if(e&&D(e.target,".e-headercontent"))return;this.isAutoFillSel&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes.length===1&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes.length>1&&this.startAFCell.getBoundingClientRect().top>0)&&(r=parseInt(this.startAFCell.getAttribute("index"))),r-=1,this.parent.frozenRows&&(r+=this.parent.frozenRows+1),r<1?t.scrollTop=0:t.scrollTop-=this.parent.getRowByIndex(r).offsetHeight;break;case"down":r<this.parent.getRows().length-1?(r+=1,t.scrollTop+=this.parent.getRowByIndex(r).offsetHeight):t.scrollTop=t.scrollHeight;break;case"left":if(n>0&&r>-1){this.isAutoFillSel&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[0].cellIndexes.length>0&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes[0].cellIndexes.length>1&&this.startAFCell.getBoundingClientRect().left>0)&&(n=parseInt(this.startAFCell.getAttribute("data-colindex")));var s=this.findNextCell(t,i,n,r);n=s?parseInt(s.getAttribute("data-colindex")):-1,n<1?t.scrollLeft=0:t.scrollLeft-=s.offsetWidth}break;case"right":if(n<this.parent.columns.length-1){var s=this.findNextCell(t,i,n,r);n=s?parseInt(s.getAttribute("data-colindex")):-1,n<this.parent.columns.length-1?t.scrollLeft+=s.offsetWidth:t.scrollLeft=t.scrollWidth}break}if(r>-1&&n>-1){var a={target:this.parent.getCellFromIndex(r,n)};this.endAFCell=a.target,this.preventFocus=!0,this.selectLikeExcel(a,r,n)}},o.prototype.findNextCell=function(t,i,e,r){var n=this.parent.getCellFromIndex(r,i==="left"?e-1:e+1);if(n&&n.classList.contains("e-hide")){var s=n.closest("tr").querySelectorAll(".e-rowcell:not(.e-hide)"),a=Array.from(s).indexOf(n.nextElementSibling);return a>0&&a<s.length-1?(n=s[a+(i==="left"?-1:1)],n):(t.scrollLeft=0,null)}return n},o.prototype.selectLikeExcel=function(t,i,e){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(t)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:i,cellIndex:e}),this.drawBorders())},o.prototype.setFrozenBorders=function(t,i,e){var r=i.style.borderWidth.toString().split(" "),n=["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"],s=[].slice.call(t.querySelectorAll(".e-cellselectionbackground."+n[""+e])).filter(function(I){return I.style.display===""}),a=[].slice.call(t.querySelectorAll(".e-cellselectionbackground.e-fixedfreeze")).filter(function(I){return I.style.display===""}),l=this.parent.enableRtl;if(s.length)for(var h=s[0].getAttribute("index"),u=s[0].getAttribute("data-colindex"),p=s[s.length-1].getAttribute("index"),d=s[s.length-1].getAttribute("data-colindex"),f=0;f<s.length;f++)s[parseInt(f.toString(),10)].getAttribute("index")===h&&(r.length===1||r.length===3&&parseInt(r[0],10)===2||r.length===4&&parseInt(r[0],10)===2)&&s[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),s[parseInt(f.toString(),10)].getAttribute("data-colindex")===u&&(r.length===1||r.length===3&&parseInt(r[1],10)===2||r.length===4&&(!l&&parseInt(r[3],10)===2||l&&parseInt(r[1],10)===2))&&s[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-right-border":"e-xlsel-left-border"),s[parseInt(f.toString(),10)].getAttribute("index")===p&&(r.length===1||r.length===3&&parseInt(r[2],10)===2||r.length===4&&parseInt(r[2],10)===2)&&s[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border"),s[parseInt(f.toString(),10)].getAttribute("data-colindex")===d&&(r.length===1||r.length===3&&parseInt(r[1],10)===2||r.length===4&&!l&&parseInt(r[1],10)===2||l&&parseInt(r[3],10)===2)&&s[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-left-border":"e-xlsel-right-border");if(a.length)for(var h=a[0].getAttribute("index"),u=a[0].getAttribute("data-colindex"),p=a[a.length-1].getAttribute("index"),d=a[a.length-1].getAttribute("data-colindex"),f=0;f<a.length;f++){var g=a[parseInt(f.toString(),10)].getAttribute("index"),v=a[parseInt(f.toString(),10)].getAttribute("data-colindex");g===h&&(!this.parent.getHeaderContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")&&M(t,"e-content")||!M(t,"e-content"))&&a[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),g===p&&(!this.parent.getContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")&&M(t,"e-headercontent")||!M(t,"e-headercontent"))&&a[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border");var m=a[parseInt(f.toString(),10)].parentElement.children[parseInt(v,10)-1];v===u&&(!m||m&&!m.classList.contains("e-cellselectionbackground"))&&a[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-right-border":"e-xlsel-left-border");var y=a[parseInt(f.toString(),10)].parentElement.children[parseInt(v,10)+1];v===d&&(!y||y&&!y.classList.contains("e-cellselectionbackground"))&&a[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-left-border":"e-xlsel-right-border")}},o.prototype.refreshFrozenBorders=function(){this.bdrElement&&(this.setFrozenBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===Ut&&this.setFrozenBorders(this.parent.getContentTable(),this.frcBdrElement,"5"),this.parent.frozenRows&&(this.setFrozenBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===Ut&&this.setFrozenBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6")))},o.prototype.drawBorders=function(){this.selectionSettings.cellSelectionMode==="BoxWithBorder"&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders())):this.showHideBorders("none")},o.prototype.isLastCell=function(t){var i=[].slice.call(t.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return i[i.length-1]===t},o.prototype.isLastRow=function(t){var i=[].slice.call(D(t,Le).querySelectorAll(".e-row:not(.e-hiddenrow)"));return t.parentElement===i[i.length-1]},o.prototype.isFirstRow=function(t){var i=[].slice.call(D(t,Le).querySelectorAll(".e-row:not(.e-hiddenrow)"));return t.parentElement===i[0]},o.prototype.isFirstCell=function(t){var i=[].slice.call(t.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return i[0]===t},o.prototype.setBorders=function(t,i,e){var r=[].slice.call(t.getElementsByClassName("e-cellselectionbackground")).filter(function(m){return m.style.display===""});if(r.length&&this.parent.isFrozenGrid()){var n=["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"];r=[].slice.call(t.querySelectorAll(".e-cellselectionbackground."+n[""+e]+":not(.e-hide)")).filter(function(m){return m.style.display===""})}if(r.length){var s=this.parent.isFrozenGrid(),a=r[0],l=r[r.length-1],h=a.getBoundingClientRect(),u=l.getBoundingClientRect(),p=a.offsetParent.getBoundingClientRect();(a.offsetParent.classList.contains("e-content")||a.offsetParent.classList.contains("e-headercontent"))&&(p=a.offsetParent.querySelector("table").getBoundingClientRect());var d=!s&&this.isLastRow(l)&&(e==="1"||e==="2"||e==="5")?2:0,f=0,g=s&&(e==="2"||e==="4")&&this.isFirstCell(a)?1:0,v=(this.parent.getFrozenMode()==="Right"&&(e==="1"||e==="3")||this.parent.getFrozenMode()===Ut&&(e==="5"||e==="6"))&&this.isFirstCell(a)?1:0;this.parent.enableRtl?(i.style.right=p.right-h.right-g+"px",i.style.width=h.right-u.left+g+1+"px"):(i.style.left=h.left-p.left-g-v+"px",i.style.width=u.right-h.left+g-v+1+"px"),i.style.top=h.top-p.top-f+"px",i.style.height=u.top-h.top>0?u.top-p.top+u.height+(s?0:1)-(h.top-p.top)-d+f+"px":u.height+f-d+(s?0:1)+"px",this.selectDirection+=e}else i.style.display="none"},o.prototype.positionBorders=function(){this.updateStartEndCells(),!(!this.startCell||!this.bdrElement||!this.selectedRowCellIndexes.length)&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getContentTable(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===Ut&&this.setBorders(this.parent.getContentTable(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getHeaderTable(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===Ut&&this.setBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},o.prototype.applyBothFrozenBorders=function(t){var i=this.parent.enableRtl;switch(t.length){case 6:this.bdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=i?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=i?this.top_left:this.top_right;break;case 4:t.includes("1")&&t.includes("2")&&t.includes("3")&&t.includes("4")&&(this.fhBdrElement.style.borderWidth=i?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=i?this.top_left:this.top_right,this.bdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom),t.includes("2")&&t.includes("4")&&t.includes("5")&&t.includes("6")&&(this.mcBdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=i?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=i?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom);break;case 2:t.includes("1")&&(this.mcBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),t.includes("2")&&(this.bdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),t.includes("3")&&(this.mhBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),t.includes("4")&&(this.fhBdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),t.includes("5")&&(this.mcBdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),t.includes("6")&&(this.mhBdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border);break}},o.prototype.applyBorders=function(t){var i=this.parent.enableRtl;if(this.parent.getFrozenMode()===Ut)this.applyBothFrozenBorders(t);else switch(t.length){case 4:this.parent.getFrozenMode()==="Right"?(this.bdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=i?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=i?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=i?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=i?this.top_left:this.top_right);break;case 2:this.parent.getFrozenMode()==="Right"?(this.bdrElement.style.borderWidth=t.includes("2")?i?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=t.includes("1")?i?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t.includes("1")?this.top_right_left:i?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=t.includes("2")?this.top_right_left:i?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=t.includes("2")?i?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=t.includes("1")?i?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=t.includes("1")?this.top_right_left:i?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=t.includes("2")?this.top_right_left:i?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border));break}},o.prototype.createBorders=function(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild(Ve("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.getContentTable().parentElement.appendChild(Ve("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===Ut&&(this.frcBdrElement=this.parent.getContentTable().parentElement.appendChild(Ve("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(Ve("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(Ve("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===Ut&&(this.frhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(Ve("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))},o.prototype.showHideBorders=function(t,i){if(this.bdrElement){if(this.bdrElement.style.display=t,this.parent.isFrozenGrid()){var e=this.parent.getContentTable();F(e.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),F(e.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),F(e.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),F(e.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),i||(this.mcBdrElement.style.display=t),this.parent.getFrozenMode()===Ut&&(this.frcBdrElement.style.display=t)}if(this.parent.frozenRows){var e=this.parent.getHeaderTable();F(e.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),F(e.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),F(e.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),F(e.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),this.fhBdrElement.style.display=t}this.parent.frozenRows&&this.parent.isFrozenGrid()&&(i||(this.mhBdrElement.style.display=t),this.parent.getFrozenMode()===Ut&&(this.frhBdrElement.style.display=t))}},o.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},o.prototype.positionAFBorders=function(){if(!(!this.startCell||!this.bdrAFLeft)){var t=this.startAFCell.getBoundingClientRect(),i=this.endAFCell.getBoundingClientRect(),e=i.top-t.top>0?1:0,r=i.top-t.top>=0&&(M(this.startAFCell,$r)||M(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,n=(M(this.startAFCell,$r)||M(this.startAFCell,In))&&this.isFirstCell(this.startAFCell)?1:0,s=this.isLastRow(this.endAFCell)&&(M(this.endAFCell,$r)||M(this.endAFCell,"e-frozencontent"))?2:0,a=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect(),h=this.startAFCell.offsetParent.parentElement.scrollTop,u=this.startAFCell.offsetParent.parentElement.scrollLeft,p=h-this.startAFCell.offsetTop,d=u-this.startAFCell.offsetLeft,f=this.parent.element.clientHeight-fi();this.parent.allowPaging&&(f-=this.parent.element.querySelector(".e-pager").offsetHeight),this.parent.aggregates.length&&(f-=this.parent.getFooterContent().offsetHeight);var g=this.parent.element.clientWidth-(this.parent.height!=="auto"?fi():0);p=p>0?Math.floor(p)-1:0,d=d>0?d:0;var v=t.left-l.left;if(this.parent.enableRtl){var y=M(this.startAFCell,$r)||M(this.startAFCell,In)?t.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;this.bdrAFLeft.style.right=l.right-i.right-2+i.width+"px",this.bdrAFLeft.style.width=g<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px",this.bdrAFRight.style.right=l.right-t.right-n+y-1+"px",this.bdrAFTop.style.left=i.left-l.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-n+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=v-n+d-1+"px",this.bdrAFRight.style.left=i.left-l.left-2+i.width+"px",this.bdrAFRight.style.width=g<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=v+d-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-n+1+"px",g<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){var m=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-g;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-m+"px"}if(this.bdrAFLeft.style.top=t.top-l.top-r+p+"px",this.bdrAFLeft.style.height=i.top-t.top>0?i.top-a.top+i.height+1-(t.top-a.top)+r-s-p+"px":i.height+r-s-p+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-e-1+"px",this.bdrAFBottom.style.width=f<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,f<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){var I=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-f;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-I+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}},o.prototype.createAFBorders=function(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild(Ve("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild(Ve("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild(Ve("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild(Ve("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))},o.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},o.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},o.prototype.updateValue=function(t,i,e){var r=this.createBeforeAutoFill(t,i,e);if(!r.cancel){var n=this.parent.getColumnByIndex(i);this.parent.editModule&&e&&(n.type==="number"?this.parent.editModule.updateCell(t,n.field,parseFloat(r.value)):this.parent.editModule.updateCell(t,n.field,r.value))}},o.prototype.createBeforeAutoFill=function(t,i,e){var r=this.parent.getColumnByIndex(i),n={column:r,value:e.innerText};return this.parent.trigger(fp,n),n},o.prototype.getAutoFillCells=function(t,i){var e=".e-cellselectionbackground",r=[].slice.call(this.parent.getDataRows()[parseInt(t.toString(),10)].querySelectorAll(e));return r},o.prototype.selectLikeAutoFill=function(t,i){var e=parseInt(M(this.startAFCell,ft).getAttribute(Ke),10),r=parseInt(this.startAFCell.getAttribute(rt),10),n=parseInt(M(this.endAFCell,ft).getAttribute(Ke),10),s=parseInt(this.endAFCell.getAttribute(rt),10),a=this.selectedRowCellIndexes.length-1,l=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case(!i&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!M(t.target,Me)):this.startAFCell=this.parent.getCellFromIndex(e,r),this.endAFCell=this.parent.getCellFromIndex(e+a,r+l),this.drawAFBorders();break;case(this.autoFillRLselection&&r+l<s&&s-r-l+1>n-e-a&&s-r-l+1>e-n):if(this.endAFCell=this.parent.getCellFromIndex(e+a,s),n=parseInt(M(this.endAFCell,ft).getAttribute(Ke),10),s=parseInt(this.endAFCell.getAttribute(rt),10),!i)this.drawAFBorders();else{for(var h=parseInt(this.endCell.getAttribute(rt),10),u=e;u<=n;u++)for(var p=this.getAutoFillCells(u,r),d=0,f=h+1;f<=s;f++)d>l&&(d=0),this.updateValue(u,f,p[parseInt(d.toString(),10)]),d++;this.selectCellsByRange({rowIndex:e,cellIndex:this.startCellIndex},{rowIndex:n,cellIndex:s})}break;case(this.autoFillRLselection&&r>s&&r-s+1>n-e-a&&r-s+1>e-n):if(this.startAFCell=this.parent.getCellFromIndex(e,s),this.endAFCell=this.endCell,!i)this.drawAFBorders();else{for(var u=e;u<=e+a;u++){var p=this.getAutoFillCells(u,r);p.reverse();for(var d=0,f=this.startCellIndex-1;f>=s;f--)d>l&&(d=0),this.updateValue(u,f,p[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:e,cellIndex:s},{rowIndex:e+a,cellIndex:this.startCellIndex+l})}break;case e>n:if(this.startAFCell=this.parent.getCellFromIndex(n,r),this.endAFCell=this.endCell,!i)this.drawAFBorders();else{for(var g=parseInt(this.endCell.parentElement.getAttribute(Ke),10),v=g,u=e-1;u>=n;u--){v===this.startIndex-1&&(v=g);var p=this.getAutoFillCells(v,r),d=0;v--;for(var f=this.startCellIndex;f<=this.startCellIndex+l;f++)this.updateValue(u,f,p[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:n,cellIndex:r+l},{rowIndex:e+a,cellIndex:r})}break;default:if(this.endAFCell=this.parent.getCellFromIndex(n,r+l),!i)this.drawAFBorders();else{for(var g=parseInt(this.endCell.parentElement.getAttribute(Ke),10),v=this.startIndex,u=g+1;u<=n;u++){v===g+1&&(v=this.startIndex);var p=this.getAutoFillCells(v,r);v++;for(var d=0,m=this.startCellIndex;m<=this.startCellIndex+l;m++)this.updateValue(u,m,p[parseInt(d.toString(),10)]),d++}this.selectCellsByRange({rowIndex:g-a,cellIndex:r},{rowIndex:n,cellIndex:r+l})}break}},o.prototype.mouseUpHandler=function(t){this.stopTimer(),document.body.classList.remove("e-disableuserselect"),this.element&&!c(this.element.parentElement)&&Se(this.element),this.isDragged&&this.selectedRowCellIndexes.length===1&&this.selectedRowCellIndexes[0].cellIndexes.length===1?this.mUPTarget=M(t.target,Me):this.mUPTarget=null;var i=D(t.target,".e-rowcell");if(this.isDragged&&!this.isAutoFillSel&&this.selectionSettings.mode==="Cell"&&i&&i.classList.contains(Me)){var e=parseInt(i.parentElement.getAttribute(Ke),10),r=parseInt(i.getAttribute(rt),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:e,cellIndex:r})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){this.preventFocus=!0;var n=M(t.target,Me);this.endAFCell=n||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,this.updateStartCellsIndex(),this.selectLikeAutoFill(t,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.isAutoFillSel=!1,this.parent.aggregates.length>0&&this.parent.notify(Ms,{}),this.preventFocus=!1}b.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&b.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),b.remove(document,"mouseup",this.mouseUpHandler)},o.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},o.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var t=parseInt(this.target.getAttribute(rt),10),i=parseInt(this.target.getAttribute("index"),10),e=this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,r=this.getAutoFillCells(e,t).filter(function(g){return g.style.display===""}),n=this.parent.getColumnByIndex(t),s=n.getFreezeTableName()==="movable",a=i<this.parent.frozenRows,l=this.parent.getFrozenMode()===Ut&&n.getFreezeTableName()===Dd;q("#"+this.parent.element.id+"_autofill",M(this.target,Zt))||(q("#"+this.parent.element.id+"_autofill",this.parent.element)&&q("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=Ve("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",(this.target.classList.contains("e-leftfreeze")||this.target.classList.contains("e-rightfreeze")||this.target.classList.contains("e-fixedfreeze"))&&this.autofill.classList.add("e-freeze-autofill"),a?s?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):s?this.parent.getContentTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),l&&(a?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill)));var h=r[r.length-1];if(h&&h.offsetParent){var u=h.getBoundingClientRect(),p=h.offsetParent.getBoundingClientRect();(h.offsetParent.classList.contains("e-content")||h.offsetParent.classList.contains("e-headercontent"))&&(p=h.offsetParent.querySelector("table").getBoundingClientRect());var d=this.isLastCell(h)?4:0,f=this.isLastRow(h)?3:0;this.parent.enableRtl?this.autofill.style.right=p.right-u.right+u.width-4-d+"px":this.autofill.style.left=u.left-p.left+u.width-4-d+"px",this.autofill.style.top=u.top-p.top+u.height-5-f+"px"}this.autofill.style.display=""}else this.hideAutoFill()},o.prototype.mouseDownHandler=function(t){this.mouseButton=t.button;var i=t.target,e=this.parent,r,n=M(i,"e-grid");if(!(n&&n.id!==e.element.id||M(i,gt)&&!this.parent.frozenRows||M(i,"e-editedbatchcell")||M(i,cn))){if((t.shiftKey||t.ctrlKey)&&t.preventDefault(),M(i,Me)&&!t.shiftKey&&!t.ctrlKey){if(e.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,r=!0;else if(e.allowRowDragAndDrop&&!e.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||D(i,"td").classList.contains("e-selectionbackground")){this.isDragged=!1;return}r=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),e.getContent().appendChild(this.element)}r&&this.enableDrag(t,!0)}this.updateStartEndCells(),(i.classList.contains("e-autofill")||i.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(t))}},o.prototype.updateStartEndCells=function(){var t=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=t[0],this.endCell=t[t.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(Ke),10),this.startCellIndex=parseInt(M(this.startCell,Me).getAttribute(rt),10))},o.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(Ke),10),this.startCellIndex=parseInt(M(this.startCell,Me).getAttribute(rt),10))},o.prototype.enableDrag=function(t,i){var e=this.parent;if(i){var r=D(t.target,"tr");this.startDIndex=parseInt(r.getAttribute(Ke),10),this.startDCellIndex=parseInt(M(t.target,Me).getAttribute(rt),10)}document.body.classList.add("e-disableuserselect");var n=e.element.getBoundingClientRect(),s=Qs(t);this.x=s.x-n.left,this.y=s.y-n.top,b.add(e.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&b.add(e.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),b.add(document,"mouseup",this.mouseUpHandler,this)},o.prototype.clearSelAfterRefresh=function(t){var i=this.parent.enableInfiniteScrolling&&t.requestType==="infiniteScroll";if(t.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&!i&&this.clearSelection(),(t.requestType==="virtualscroll"||i)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var e=this.parent.getRowsObject().filter(function(a){return a.isSelectable}),r=[];this.selectedRowState={},this.persistSelectedData=[];for(var n=0;n<e.length;n++){r.push(e[parseInt(n.toString(),10)].index);var s=this.getPkValue(this.primaryKey,e[parseInt(n.toString(),10)].data);this.selectedRowState[""+s]=!0,this.persistSelectedData.push(e[parseInt(n.toString(),10)].data)}this.selectedRowIndexes=r}},o.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:lt,handler:this.enableAfterRender},{event:vo,handler:this.initializeSelection},{event:Sp,handler:this.onActionComplete},{event:bp,handler:this.onActionComplete},{event:Bt,handler:this.onPropertyChanged},{event:Ns,handler:this.onCellFocused},{event:Kl,handler:this.clearSelAfterRefresh},{event:Ul,handler:this.columnPositionChanged},{event:st,handler:this.initialEnd},{event:Ps,handler:this.rowsRemoved},{event:gi,handler:this.refreshHeader},{event:yi,handler:this.destroy}],Mi(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(ri,this.actionBeginFunction),this.parent.addEventListener(wt,this.actionCompleteFunction),this.addEventListener_checkbox())},o.prototype.removeEventListener=function(){this.parent.isDestroyed||(b.remove(document,"mouseup",this.mouseUpHandler),b.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),b.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler),Mi(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(ri,this.actionBeginFunction),this.parent.removeEventListener(wt,this.actionCompleteFunction),this.removeEventListener_checkbox())},o.prototype.wireEvents=function(){this.isMacOS=navigator.userAgent.indexOf("Mac OS")!==-1,this.isMacOS?(b.add(this.parent.element,"keydown",this.keyDownHandler,this),b.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||b.add(this.parent.element,"keydown",this.keyDownHandler,this)},o.prototype.unWireEvents=function(){this.isMacOS?(b.remove(this.parent.element,"keydown",this.keyDownHandler),b.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||b.remove(this.parent.element,"keydown",this.keyDownHandler)},o.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},o.prototype.refreshHeader=function(){this.setCheckAllState()},o.prototype.rowsRemoved=function(t){for(var i=0;i<t.records.length;i++){var e=this.getPkValue(this.primaryKey,t.records[parseInt(i.toString(),10)]);delete this.selectedRowState[""+e],--this.totalRecordsCount}this.setCheckAllState()},o.prototype.beforeFragAppend=function(t){t.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&this.clearSelection()},o.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},o.prototype.enableAfterRender=function(t){t.module===this.getModuleName()&&t.enable&&(this.render(),this.initPerisistSelection())},o.prototype.render=function(t){b.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),b.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},o.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName()){var i=this.parent;c(t.properties.type)||(this.selectionSettings.type==="Single"?(i.element.removeAttribute("aria-multiselectable"),this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()):this.selectionSettings.type==="Multiple"&&i.element.setAttribute("aria-multiselectable","true")),(!c(t.properties.mode)||!c(t.properties.cellSelectionMode))&&(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection();var e=this.parent.getColumns().filter(function(r){return r.type==="checkbox"});e.length&&(i.isCheckBoxSelection=this.selectionSettings.checkboxMode!=="ResetOnRowClick"),this.drawBorders()}},o.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},o.prototype.initialEnd=function(){this.selectedRowIndexes.length||(this.parent.off(st,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},o.prototype.checkBoxSelectionChanged=function(){var t=this.parent;t.off(st,this.checkBoxSelectionChanged);var i=t.getColumns().filter(function(e){return e.type==="checkbox"});i.length>0&&(t.isCheckBoxSelection=!0,this.chkField=i[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,c(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(t.selectionSettings.type="Multiple",t.dataBind()):this.initPerisistSelection()),!t.isCheckBoxSelection&&!this.isPersisted&&(this.chkField=null,this.initPerisistSelection())},o.prototype.initPerisistSelection=function(){var t=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(t.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(t.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(t.isPersistSelection=!1,this.selectedRowState={})},o.prototype.ensureCheckboxFieldSelection=function(){var t=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!t.enableVirtualization&&this.chkField&&(t.isPersistSelection&&Object.keys(this.selectedRowState).length===0||!t.isPersistSelection)){var i=this.parent.getDataModule(),e=new se().where(this.chkField,"equal",!0);e.params||(e.params=this.parent.query.params);var r=i.getData({},e),n=this;this.parent.showSpinner(),r.then(function(s){n.dataSuccess(s.result),n.refreshPersistSelection(),n.parent.hideSpinner()})}},o.prototype.dataSuccess=function(t){for(var i=this.parent.getDataModule().isRemote()&&!c(t.result)?t.result:t,e=0;e<i.length;e++){var r=this.getPkValue(this.primaryKey,i[parseInt(e.toString(),10)]);c(this.selectedRowState[""+r])&&i[parseInt(e.toString(),10)][this.chkField]&&(this.selectedRowState[""+r]=i[parseInt(e.toString(),10)][this.chkField])}this.persistSelectedData=i},o.prototype.setRowSelection=function(t){if(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)if(t){var d=Object.keys(this.selectedRowState),f=Object.keys(this.unSelectedRowState);if(!this.isCheckboxReset)for(var g=this.parent.groupSettings.columns.length&&this.parent.isPersistSelection?this.parent.currentViewData.records:this.parent.currentViewData,v=0,m=g;v<m.length;v++){var h=m[v];if(!c(h[this.primaryKey])){var y=h[this.primaryKey].toString();d.indexOf(y)===-1&&f.indexOf(y)===-1&&(this.selectedRowState[h[this.primaryKey]]=!0)}}}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1;else if(t)if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(var i=this.parent.getRowsObject().filter(function(I){return I.isSelectable}),e=0,r=i;e<r.length;e++){var n=r[e];this.selectedRowState[this.getPkValue(this.primaryKey,n.data)]=!0}else{var s=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData();if(this.parent.groupSettings.columns.length)for(var a=0,l=this.isPartialSelection?s:s.records;a<l.length;a++){var h=l[a];this.selectedRowState[this.getPkValue(this.primaryKey,h)]=!0}else for(var u=0,p=s;u<p.length;u++){var h=p[u];this.selectedRowState[this.getPkValue(this.primaryKey,h)]=!0}}else this.selectedRowState={}},o.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},o.prototype.getAvailableSelectedData=function(){var t=new V(this.persistSelectedData).executeLocal(this.parent.getDataModule().generateQuery(!0));return this.parent.groupSettings.columns.length&&t&&t.records&&(t=t.records.slice()),t},o.prototype.refreshPersistSelection=function(){var t=this.parent.getRows();if(this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),!c(t)&&t.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var i=[],e=0;e<t.length;e++){var r=this.getRowObj(t[parseInt(e.toString(),10)]),n=r&&r.data?this.getPkValue(this.primaryKey,r.data):null;if(n===null)return;if(!(this.isPartialSelection&&!r.isSelectable)){var s=void 0,a=t[parseInt(e.toString(),10)].querySelector(".e-checkselect");this.selectedRowState[""+n]||this.parent.checkAllRows==="Check"&&this.selectedRowState[""+n]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(n)<0||this.parent.checkAllRows==="Uncheck"&&this.chkAllCollec.indexOf(n)>0&&!this.parent.selectedRowIndex||this.parent.checkAllRows==="Intermediate"&&!c(this.chkField)&&r.data[this.chkField]?(i.push(parseInt(t[parseInt(e.toString(),10)].getAttribute(Ke),10)),s=!0):(s=!1,this.checkedTarget!==a&&this.parent.isCheckBoxSelection&&a&&dn(a.nextElementSibling,s)),this.updatePersistCollection(t[parseInt(e.toString(),10)],s)}}this.isSingleSel()&&i.length>0?this.selectRow(i[0],!0):this.selectRows(i)}(this.parent.isCheckBoxSelection||this.parent.selectionSettings.checkboxMode==="ResetOnRowClick")&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},o.prototype.actionBegin=function(t){if(t.requestType==="save"&&this.parent.isPersistSelection){var i=this.parent.element.querySelector(".e-edit-checkselect");if(!c(i)){var e=D(i,"."+cn);if(e){this.parent.editSettings.mode==="Dialog"&&(e=this.parent.element.querySelector(".e-dlgeditrow"));var r=this.getRowObj(e);if(!r)return;this.selectedRowState[this.getPkValue(this.primaryKey,r.data)]=r.isSelected=i.checked}else this.isCheckedOnAdd=i.checked}}this.parent.isPersistSelection&&this.isPartialSelection&&(t.requestType==="paging"&&(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.selectedRowIndexes=[]),(t.requestType==="filtering"||t.requestType==="searching")&&(this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[]))},o.prototype.actionComplete=function(t){if(t.requestType==="save"&&this.parent.isPersistSelection){if(t.action==="add"){if(this.isCheckedOnAdd){var i=this.parent.getRowObjectFromUID(this.parent.getRows()[t.selectedRow].getAttribute("data-uid"));this.selectedRowState[this.getPkValue(this.primaryKey,i.data)]=i.isSelected=this.isCheckedOnAdd}this.isHdrSelectAllClicked=!1,this.setCheckAllState()}this.refreshPersistSelection()}if(t.requestType==="delete"&&this.parent.isPersistSelection){for(var e=t.data,r=e.slice(),n=0;n<r.length;n++){var s=this.getPkValue(this.primaryKey,r[parseInt(n.toString(),10)]);c(s)||this.updatePersistDelete(s,this.isPartialSelection)}this.isHdrSelectAllClicked=!1,this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if(t.requestType==="paging"){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){for(var a=this.parent.getRowsObject(),l=[],n=0;n<a.length;n++)a[parseInt(n.toString(),10)].isSelectable&&l.push(a[parseInt(n.toString(),10)].index);l.length&&this.selectRows(l)}this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0}},o.prototype.onDataBound=function(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.rmtHdrChkbxClicked&&(this.parent.checkAllRows==="Intermediate"?this.setRowSelection(!0):this.parent.checkAllRows==="Uncheck"&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var t=this.parent.getRowsObject(),i=[],e=0;e<t.length;e++)t[parseInt(e.toString(),10)].isSelected&&i.push(e);i.length&&this.selectRows(i),this.initialRowSelection=!0}},o.prototype.updatePersistSelectedData=function(t){if(this.parent.isPersistSelection){for(var i=this.parent.getRows(),e=0;e<i.length;e++)this.updatePersistCollection(i[parseInt(e.toString(),10)],t);this.parent.checkAllRows==="Uncheck"?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result?this.persistSelectedData:[]):this.parent.checkAllRows==="Check"&&(this.setRowSelection(!0),this.persistSelectedData=!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection?this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice():this.persistSelectedData)}},o.prototype.checkSelectAllAction=function(t){var i=this.getRenderer(),e=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),t&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(t),this.selectRowsByRange(i.getVirtualRowIndex(0),i.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(t),this.clearSelection()),this.chkAllCollec=[],!c(e)){var r=e.querySelector(".e-edit-checkselect");c(r)||dn(r.nextElementSibling,t)}},o.prototype.checkSelectAll=function(t){var i=this,e=this.getCheckAllStatus(t),r=e==="Check";if(this.isHeaderCheckboxClicked=!0,(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&(e==="Uncheck"||this.isCheckboxReset||e==="Intermediate"&&this.parent.isPersistSelection)?this.rmtHdrChkbxClicked=!0:this.rmtHdrChkbxClicked=!1,this.rmtHdrChkbxClicked&&this.isCheckboxReset&&(this.unSelectedRowState={}),this.isCheckboxReset=!1,e==="Intermediate"&&(!this.chkField&&!this.parent.isPersistSelection&&(r=this.getCurrentBatchRecordChanges().some(function(s){return i.getPkValue(i.primaryKey,s)in i.selectedRowState})),(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.isPersistSelection)){for(var n=0;n<this.getCurrentBatchRecordChanges().length;n++)if(!c(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+n])))if(Object.keys(this.selectedRowState).includes(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+n]).toString()))r=!0;else{r=!1;break}}this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!r),this.target=null,this.getCurrentBatchRecordChanges().length>0&&(this.setCheckAllState(),this.updateSelectedRowIndexes()),this.triggerChkChangeEvent(t,!r)},o.prototype.getCheckAllStatus=function(t){var i=t?t.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList,e;return i.contains("e-check")?e="Check":i.contains("e-uncheck")?e="Uncheck":i.contains("e-stop")?e="Intermediate":e="None",e},o.prototype.checkSelect=function(t){var i=D(this.checkedTarget,"."+Me),e=this.parent;this.isMultiCtrlRequest=!0;var r=0;if(this.isHeaderCheckboxClicked=!1,Qt(e)){var n=i.parentElement.getAttribute("data-uid");this.parent.enableVirtualization&&this.parent.groupSettings.columns.length?r=parseInt(i.parentElement.getAttribute(Ke),10):r=e.getRows().map(function(s){return s.getAttribute("data-uid")}).indexOf(n)}else r=parseInt(i.parentElement.getAttribute(Ke),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(vr).length>0&&this.parent.editSettings.newRowPosition==="Top"&&++r,this.rowCellSelectionHandler(r,parseInt(i.getAttribute(rt),10)),this.moveIntoUncheckCollection(D(i,"."+ft)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(t,t.nextElementSibling.classList.contains("e-check"))},o.prototype.moveIntoUncheckCollection=function(t){if(this.parent.checkAllRows==="Check"||this.parent.checkAllRows==="Uncheck"){var i=this.getRowObj(t),e=i&&i.data?this.getPkValue(this.primaryKey,i.data):null;if(!e)return;this.chkAllCollec.indexOf(e)<0?this.chkAllCollec.push(e):this.chkAllCollec.splice(this.chkAllCollec.indexOf(e),1)}},o.prototype.triggerChkChangeEvent=function(t,i){this.parent.trigger(cp,{checked:i,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:t}),this.parent.isEdit||(this.checkedTarget=null)},o.prototype.updateSelectedRowIndexes=function(){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.selectionSettings.persistSelection&&this.parent.checkAllRows!=="Uncheck")for(var t=this.parent.getRowsObject().filter(function(a){return a.isSelectable}),i=0,e=t;i<e.length;i++){var r=e[i];this.selectedRowIndexes.push(r.index)}if(this.parent.isCheckBoxSelection&&this.parent.enableVirtualization&&!this.isPartialSelection&&(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.parent.isPersistSelection&&this.parent.checkAllRows==="Check"){var t=this.parent.getRowsObject().filter(function(l){return l.isSelectable});if(t.length!==this.selectedRowIndexes.length)for(var n=0,s=t;n<s.length;n++){var r=s[n];this.selectedRowIndexes.indexOf(r.index)<=-1&&this.selectedRowIndexes.push(r.index)}}},o.prototype.updateSelectedRowIndex=function(t){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection)if(this.parent.checkAllRows==="Check"){this.selectedRowIndexes=[];for(var i=this.parent.groupSettings.columns.length?this.getData().records.length:this.getData().length,e=0;e<i;e++)this.selectedRowIndexes.push(e)}else if(this.parent.checkAllRows==="Uncheck")this.selectedRowIndexes=[];else{var r=this.parent.getRowByIndex(t);if(t&&r&&r.getAttribute("aria-selected")==="false"){var n=this.selectedRowIndexes.indexOf(t);this.selectedRowIndexes.splice(n,1)}}},o.prototype.isAllSelected=function(t){if(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)return this.getAvailableSelectedData().length===(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling?this.parent.totalDataRecordsCount:this.totalRecordsCount);if(this.isPartialSelection)if(this.parent.allowPaging&&this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount){for(var i=this.parent.partialSelectedRecords,e=0;e<i.length;e++){var r=this.getPkValue(this.primaryKey,i[parseInt(e.toString(),10)]);if(!this.selectedRowState[""+r])return!1}return!0}else return this.isSelectAllRowCount(t);else{for(var i=this.parent.groupSettings.columns.length?this.getData().records:this.getData(),e=0;e<i.length;e++){var r=this.getPkValue(this.primaryKey,i[parseInt(e.toString(),10)]);if(!this.selectedRowState[""+r])return!1}return!0}},o.prototype.someDataSelected=function(){if((this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length))for(var t=this.getAvailableSelectedData(),i=0;i<t.length;i++){var e=this.getPkValue(this.primaryKey,t[parseInt(i.toString(),10)]);if(this.selectedRowState[""+e])return!1}for(var r=this.isPartialSelection?this.parent.partialSelectedRecords:this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result?[]:this.getData(),i=0;i<r.length;i++){var e=this.getPkValue(this.primaryKey,r[parseInt(i.toString(),10)]);if(this.selectedRowState[""+e])return!1}return!0},o.prototype.setCheckAllState=function(t,i){if(this.parent.isCheckBoxSelection||this.parent.selectionSettings.checkboxMode==="ResetOnRowClick"){var e=!1,r=!1,n=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||(n=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!((this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.isPartialSelection)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(r=!0,e=this.isAllSelected(n));var s=this.getCheckAllBox();if(s){var a=s.nextElementSibling;F([a],["e-check","e-stop","e-uncheck"]),Ui(s,!1),s.indeterminate=!1;var l=this.parent.getDataModule().isRemote()?[]:this.parent.groupSettings.columns.length?this.getData().records:this.getData();if(e&&r&&(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result||l.length)||!r&&(n===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&(!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)||this.parent.allowPaging)||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(n)||this.isHdrSelectAllClicked)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&l.length&&n===l.length||(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection&&(n===this.parent.totalDataRecordsCount||(this.isSelectAllRowCount(n)||n===this.totalRecordsCount)&&!this.parent.isPersistSelection)||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(n)))||n===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&!this.parent.allowPaging&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling)?(T([a],["e-check"]),Ui(s,!0),i&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&(!this.parent.enableVirtualization||!this.persistSelectedData.length&&!r||r&&this.someDataSelected())||n===0&&this.getCurrentBatchRecordChanges().length===0)&&!this.parent.allowPaging||this.parent.allowPaging&&(n===0||n&&r&&this.someDataSelected())?(T([a],["e-uncheck"]),i&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck"):(T([a],["e-stop"]),this.parent.checkAllRows="Intermediate",s.indeterminate=!0),n===0&&this.getCurrentBatchRecordChanges().length===0?T([a.parentElement],["e-checkbox-disabled"]):F([a.parentElement],["e-checkbox-disabled"]),this.isPartialSelection){var h=this.parent.getRowsObject().filter(function(u){return u.isSelectable}).length;h===0&&a.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?T([a.parentElement],["e-checkbox-disabled"]):F([a.parentElement],["e-checkbox-disabled"])}(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.updateSelectedRowIndex(t)}}},o.prototype.isSelectAllRowCount=function(t){var i=0,e=this.parent.getRowsObject();if(this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)){var r=this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length;return r===e.length?(i=e.filter(function(n){return n.isSelectable}).length,i&&t===i):!1}else return this.parent.allowPaging&&this.parent.selectionSettings.persistSelection?(i=this.parent.partialSelectedRecords.length+this.parent.disableSelectedRecords.length,i===this.totalRecordsCount?this.parent.partialSelectedRecords.length&&t===this.parent.partialSelectedRecords.length:!1):(i=e.filter(function(n){return n.isSelectable}).length,i&&t===i)},o.prototype.keyDownHandler=function(t){((Q.info.name==="chrome"||Q.info.name==="safari")&&(t.keyCode===91||t.keyCode===93)||Q.info.name==="opera"&&t.keyCode===17||Q.info.name==="mozilla"&&t.keyCode===224)&&(this.cmdKeyPressed=!0);var i=M(t.target,"e-headercell"),e=M(t.target,Me),r=i?i.children[0].classList.contains("e-headerchkcelldiv"):e?e.classList.contains("e-gridchkbox"):!1;r&&!this.parent.allowKeyboard&&t.keyCode===32&&t.preventDefault()},o.prototype.keyUpHandler=function(t){((Q.info.name==="chrome"||Q.info.name==="safari")&&(t.keyCode===91||t.keyCode===93)||Q.info.name==="opera"&&t.keyCode===17||Q.info.name==="mozilla"&&t.keyCode===224)&&(this.cmdKeyPressed=!1)},o.prototype.clickHandler=function(t){var i=t.target;this.actualTarget=i,this.selectionSettings.persistSelection&&(this.deSelectedData=Ss(this.persistSelectedData)),(M(i,ft)||M(i,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&i.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.cmdKeyPressed=t.metaKey,this.isMultiCtrlRequest=t.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=t.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.popUpClickHandler(t);var e=!1;this.preventFocus=!0;var r,n=M(i,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(n&&n.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&M(i,ft)),this.selectionSettings.persistSelection&&this.isPartialSelection&&M(i,"e-headerchkcelldiv")&&!i.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),n&&n.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(r=n.querySelector('input[type="checkbox"]'),e=!0),this.drawBorders(),this.updateAutoFillPosition(),i=M(i,Me),this.parent.isReact&&i&&!i.parentElement&&i.classList.contains("e-rowcell")&&(i=this.parent.getCellFromIndex(parseInt(i.getAttribute("index"),10),parseInt(i.getAttribute("data-colindex"),10))),this.isRowDragSelected&&c(i)&&this.parent.allowRowDragAndDrop&&this.selectionSettings.persistSelection&&this.checkSelectAllClicked&&(this.isRowDragSelected=!1),(i&&i.parentElement.classList.contains(ft)&&!this.parent.selectionSettings.checkboxOnly||e)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=i,!c(r))this.checkedTarget=r,r.classList.contains("e-checkselectall")?this.checkSelectAll(r):this.checkSelect(r);else{var s=this.parent,a=0;if(Qt(s)){var l=i.parentElement.getAttribute("data-uid");a=s.getRows().map(function(h){return h.getAttribute("data-uid")}).indexOf(l)}else a=parseInt(i.parentElement.getAttribute(Ke),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(vr).length>0&&++a,(!this.mUPTarget||!this.mUPTarget.isEqualNode(i))&&this.rowCellSelectionHandler(a,parseInt(i.getAttribute(rt),10)),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(D(i,"."+ft)),this.setCheckAllState())}!this.parent.isCheckBoxSelection&&Q.isDevice&&!this.isSingleSel()&&this.showPopup(t)}else if(t.target.classList.contains("e-headercell")&&!t.target.classList.contains("e-stackedheadercell")){var l=t.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");this.headerSelectionHandler(this.parent.getColumnIndexByUid(l))}this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.isMultiShiftRequest=!1,c(D(t.target,".e-unboundcell"))&&(this.preventFocus=!1)},o.prototype.popUpClickHandler=function(t){var i=t.target;D(i,".e-headercell")||t.target.classList.contains(Me)||D(i,".e-gridpopup")?i.classList.contains("e-rowselect")&&(i.classList.contains("e-spanclicked")?(i.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(i.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},o.prototype.showPopup=function(t){this.selectionSettings.enableSimpleMultiRowSelection||Pf(this.parent.element.querySelector(".e-gridpopup"),t,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>1||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},o.prototype.rowCellSelectionHandler=function(t,i){if(!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel())this.isDragged||this.selectRow(t,this.selectionSettings.enableToggle),this.selectCell({rowIndex:t,cellIndex:i},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders();else if(this.isMultiShiftRequest)this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!D(this.target,"."+Me).classList.contains(er)?this.selectRowsByRange(yt(this.prevRowIndex)?t:this.prevRowIndex,t):this.addRowsToSelection([t]),this.selectCellsByRange(yt(this.prevCIdxs)?{rowIndex:t,cellIndex:i}:this.prevCIdxs,{rowIndex:t,cellIndex:i}),this.updateAutoFillPosition(),this.drawBorders();else{if(this.addRowsToSelection([t]),this.selectionSettings.mode==="Both"){var e=this.parent.getColumns().find(function(n){return n.type==="checkbox"}),r=e&&e.index!==i;r&&!this.isMultiCtrlRequestCell?this.selectCell({rowIndex:t,cellIndex:i},this.selectionSettings.enableToggle):(!e||r)&&this.addCellsToSelection([{rowIndex:t,cellIndex:i}])}else this.addCellsToSelection([{rowIndex:t,cellIndex:i}]);this.showHideBorders("none")}this.isDragged=!1},o.prototype.onCellFocused=function(t){if(this.parent.frozenRows&&t.container.isHeader&&t.byKey)if(t.keyArgs.action==="upArrow")this.parent.allowFiltering?t.isJump=t.element.tagName==="INPUT":t.isJump=t.element.tagName==="TH";else if(t.keyArgs.action==="downArrow"){var i=Number(t.element.parentElement.getAttribute(Ke));t.isJump=i===0}else t.keyArgs.action==="ctrlHome"&&(t.isJump=!0);var e=(t.container.isHeader&&t.isJump||t.container.isContent&&!t.container.isSelectable)&&!(t.byKey&&t.keyArgs.action==="space")&&!(t.element.classList.contains("e-detailrowexpand")||t.element.classList.contains("e-detailrowcollapse")),r=t.container.isHeader&&t.element.tagName!=="TD"&&!D(t.element,"."+Me)&&!(t.byKey&&t.keyArgs.action==="space");if(!t.byKey||e){e&&!this.parent.isCheckBoxSelection&&this.clearSelection();return}var n=t.container.isContent?t.container.indexes:t.indexes,s=n[0],a=n[1],l=this.focus.getPrevIndexes();if((t.element.parentElement.querySelector(".e-rowcelldrag")||t.element.parentElement.querySelector(".e-dtdiagonalright")||t.element.parentElement.querySelector(".e-dtdiagonaldown"))&&(l.cellIndex=l.cellIndex-1),this.parent.frozenRows)if(t.container.isHeader&&(t.element.tagName==="TD"||D(t.element,"."+Me))){var h=this.parent.getHeaderTable().querySelector("thead").childElementCount;s-=h,l.rowIndex=c(l.rowIndex)?null:l.rowIndex-h}else s+=this.parent.frozenRows,l.rowIndex=l.rowIndex===0||!c(l.rowIndex)?l.rowIndex+this.parent.frozenRows:null;if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(s=parseInt(t.element.parentElement.getAttribute("data-rowindex"),10)),!((r||["ctrlPlusA","escape"].indexOf(t.keyArgs.action)===-1&&t.keyArgs.action!=="space"&&s===l.rowIndex&&a===l.cellIndex)&&!this.selectionSettings.allowColumnSelection)){this.preventFocus=!0;var u=this.getKeyColIndex(t);if(this.needColumnSelection&&(a=u),this.parent.element.classList.contains("e-gridcell-read")&&(t.keyArgs.action==="tab"||t.keyArgs.action==="shiftTab"||t.keyArgs.action==="rightArrow"||t.keyArgs.action==="leftArrow")){var p=this.target.getAttribute("aria-label");p=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(a).field,this.target.setAttribute("aria-label",p)}switch(t.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=t.element,this.isKeyAction=!0,this.applyDownUpKey(s,a);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(s,a);break;case"shiftDown":case"shiftUp":this.shiftDownKey(s,a);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(s,a);break;case"home":case"end":a=t.keyArgs.action==="end"?this.getLastColIndex(s):0,this.applyHomeEndKey(s,a);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(s,a);break;case"escape":this.clearSelection(),this.parent.clipboardModule&&window.navigator.clipboard.writeText("");break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(t.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(s);break}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.updateAutoFillPosition()}},o.prototype.getKeyColIndex=function(t){var i,e=null,r=t.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&M(t.element,"e-columnheader"))if(this.needColumnSelection=!!t.container.isHeader,r){if(t.keyArgs.action==="rightArrow"||t.keyArgs.action==="leftArrow")return e;i=r.getAttribute("e-mappinguid");var n=this.getstackedColumns(this.parent.getColumnByUid(i).columns),s=this.parent.getColumnIndexByUid(n[n.length-1].uid),a=this.parent.getColumnIndexByUid(n[0].uid);e=this.prevColIndex>=s?a:s}else e=this.parent.getColumnIndexByUid(t.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return e},o.prototype.ctrlPlusA=function(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},o.prototype.applySpaceSelection=function(t){t.classList.contains("e-checkselectall")?(this.checkedTarget=t,this.checkSelectAll(this.checkedTarget)):t.classList.contains("e-checkselect")&&(this.checkedTarget=t,this.checkSelect(this.checkedTarget))},o.prototype.applyDownUpKey=function(t,i){var e=this.parent;this.parent.isCheckBoxSelection&&this.parent.checkAllRows==="Check"&&!this.selectionSettings.persistSelection&&!this.selectionSettings.checkboxOnly&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.parent.frozenRows?(this.selectRow(t,!0),this.applyUpDown(e.selectedRowIndex)):(this.selectRow(t,!0),this.applyUpDown(e.selectedRowIndex))),this.isCellType()&&this.selectCell({rowIndex:t,cellIndex:i},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(i)},o.prototype.applyUpDown=function(t){if(!(t<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var i=parseInt(this.target.getAttribute(rt),10),e=this.contentRenderer.getRowByIndex(t);if(e&&(this.target=e.getElementsByClassName(Me)[parseInt(i.toString(),10)]),this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read")){var r=this.target.getAttribute("aria-label");r=this.target.innerHTML,this.target.setAttribute("aria-label",r)}}},o.prototype.applyRightLeftKey=function(t,i){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(i):this.isCellType()&&(this.selectCell({rowIndex:t,cellIndex:i},!0),this.addAttribute(this.target))},o.prototype.applyHomeEndKey=function(t,i){this.isCellType()?this.selectCell({rowIndex:t,cellIndex:i},!0):this.addAttribute(this.parent.getCellFromIndex(t,i))},o.prototype.shiftDownKey=function(t,i){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(yt(this.prevRowIndex)?this.isPartialSelection?this.selectRow(t,!0):this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,t),this.applyUpDown(t))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:t,cellIndex:i}),this.isMultiShiftRequest=!1},o.prototype.applyShiftLeftRightKey=function(t,i){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,i):this.selectCellsByRange(this.prevCIdxs,{rowIndex:t,cellIndex:i}),this.isMultiShiftRequest=!1},o.prototype.getstackedColumns=function(t){for(var i=[],e=0,r=t.length;e<r;e++)t[parseInt(e.toString(),10)].columns?this.getstackedColumns(t[parseInt(e.toString(),10)].columns):i.push(t[parseInt(e.toString(),10)]);return i},o.prototype.applyCtrlHomeEndKey=function(t,i){this.isRowType()&&(this.selectRow(t,!0),this.addAttribute(this.parent.getCellFromIndex(t,i))),this.isCellType()&&this.selectCell({rowIndex:t,cellIndex:i},!0)},o.prototype.addRemoveClassesForRow=function(t,i,e){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];if(t){var s=[].slice.call(t.getElementsByClassName(Me)),a=t.querySelector(".e-detailrowcollapse")||t.querySelector(".e-detailrowexpand"),l=t.querySelector(".e-rowdragdrop");a&&s.push(a),l&&s.push(l),Yi.apply(void 0,[s,i].concat(r))}this.getRenderer().setSelection(t?t.getAttribute("data-uid"):null,i,e)},o.prototype.isRowType=function(){return this.selectionSettings.mode==="Row"||this.selectionSettings.mode==="Both"},o.prototype.isCellType=function(){return this.selectionSettings.mode==="Cell"||this.selectionSettings.mode==="Both"},o.prototype.isSingleSel=function(){return this.selectionSettings.type==="Single"},o.prototype.getRenderer=function(){return c(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(At.Content)),this.contentRenderer},o.prototype.getSelectedRecords=function(){var t=[];return!this.selectionSettings.persistSelection&&this.selectedRecords.length?t=this.parent.getRowsObject().filter(function(i){return i.isSelected}).map(function(i){return i.data}):t=this.persistSelectedData,t},o.prototype.selectColumn=function(t){var i=this.parent;if(!c(i.getColumns()[parseInt(t.toString(),10)])){var e=i.getColumnByIndex(t),r=i.getColumnHeaderByUid(e.uid),n=r.classList.contains("e-columnselection");if(i.selectionSettings.allowColumnSelection){var s=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(t)>-1;if(this.clearColDependency(),!n||!this.selectionSettings.enableToggle||s){var a={columnIndex:t,headerCell:r,column:e,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(a,vs),a.cancel){this.disableInteracted();return}(!(i.selectionSettings.enableToggle&&t===this.prevColIndex&&n)||s)&&this.updateColSelection(r,t);var l={columnIndex:t,headerCell:r,column:e,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(l,ms)}this.updateColProps(t)}}},o.prototype.selectColumnsByRange=function(t,i){var e=this.parent;if(!c(e.getColumns()[parseInt(t.toString(),10)])){var r=[];if(e.selectionSettings.type==="Single"||c(i))r[0]=t;else for(var n=t<i,s=t;n?s<=i:s>=i;n?s++:s--)r.push(s);this.selectColumns(r)}},o.prototype.selectColumns=function(t){var i=this.parent,e=this.getselectedCols();if(i.selectionSettings.type==="Single"&&(t=[t[0]]),!!i.selectionSettings.allowColumnSelection){this.clearColDependency();var r={columnIndex:t[0],headerCell:e,columnIndexes:t,column:i.getColumnByIndex(t[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(r,vs),r.cancel){this.disableInteracted();return}for(var n=0,s=t.length;n<s;n++)this.updateColSelection(i.getColumnHeaderByUid(i.getColumnByIndex(t[parseInt(n.toString(),10)]).uid),t[parseInt(n.toString(),10)]);e=this.getselectedCols();var a={columnIndex:t[0],headerCell:e,columnIndexes:t,column:i.getColumnByIndex(t[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(a,ms),this.updateColProps(t[0])}},o.prototype.selectColumnWithExisting=function(t){var i=this.parent;if(!c(i.getColumns()[parseInt(t.toString(),10)])){var e=i.getColumnHeaderByUid(i.getColumnByIndex(t).uid),r=this.getselectedCols();if(i.selectionSettings.type==="Single"&&this.clearColDependency(),!!i.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(t)>-1)this.clearColumnSelection(t);else{var n={columnIndex:t,headerCell:r,columnIndexes:this.selectedColumnsIndexes,column:i.getColumnByIndex(t),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,vs),n.cancel){this.disableInteracted();return}this.updateColSelection(e,t),r=this.getselectedCols();var s={columnIndex:t,headerCell:r,column:i.getColumnByIndex(t),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(s,ms)}this.updateColProps(t)}}},o.prototype.clearColumnSelection=function(t){if(this.isColumnSelected){var i=this.parent;if(!c(t)&&this.selectedColumnsIndexes.indexOf(t)===-1)return;var e=c(t)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:t,r=i.getColumnByIndex(e),n=i.getColumnHeaderByUid(r.uid),s={columnIndex:e,headerCell:n,columnIndexes:this.selectedColumnsIndexes,column:r,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted},a=this.columnDeselect(s,Zc);if(a){this.disableInteracted();return}for(var l=c(t)?[].slice.call(i.getHeaderContent().getElementsByClassName("e-columnselection")):[n],h=this.getSelectedColumnCells(t),u=0,p=l.length;u<p;u++)Yi([l[parseInt(u.toString(),10)]],!1,"e-columnselection");for(var u=0,p=h.length;u<p;u++)Yi([h[parseInt(u.toString(),10)]],!1,"e-columnselection");c(t)?(this.columnDeselect(s,ep),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(d){return d.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(t),1),this.parent.getColumns()[parseInt(t.toString(),10)].isSelected=!1)}},o.prototype.getselectedCols=function(){var t=this.parent,i;if(this.selectedColumnsIndexes.length>1){i=[];for(var e=0;e<this.selectedColumnsIndexes.length;e++)i.push(t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[parseInt(e.toString(),10)]).uid))}else i=t.getColumnHeaderByUid(t.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return i},o.prototype.getSelectedColumnCells=function(t){for(var i=this.parent,e=!c(this.parent.rowTemplate),r=e?i.getRows():i.getDataRows(),n=[],s=c(t)?".e-columnselection":'[data-colindex="'+t+'"]',a=0,l=r.length;a<l;a++)n=n.concat([].slice.call(r[parseInt(a.toString(),10)].querySelectorAll(s)));return n},o.prototype.columnDeselect=function(t,i){return i==="columnDeselected"&&delete t.cancel,this.onActionComplete(t,i),t.cancel},o.prototype.updateColProps=function(t){this.prevColIndex=t,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},o.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},o.prototype.updateColSelection=function(t,i){if(!c(this.parent.getColumns()[parseInt(i.toString(),10)])){var e=!c(this.parent.rowTemplate),r=e?this.parent.getRows():this.parent.getDataRows();this.selectedColumnsIndexes.push(i),this.parent.getColumns()[parseInt(i.toString(),10)].isSelected=!0,i=i+this.parent.getIndentCount(),Yi([t],!0,"e-columnselection");for(var n=0,s=r.length;n<s;n++)r[parseInt(n.toString(),10)].classList.contains(ft)&&((r[parseInt(n.toString(),10)].classList.contains(cn)||r[parseInt(n.toString(),10)].classList.contains(vr))&&this.parent.editSettings.mode==="Normal"&&!c(r[parseInt(n.toString(),10)].querySelector("tr").childNodes[parseInt(i.toString(),10)])?Yi([r[parseInt(n.toString(),10)].querySelector("tr").childNodes[parseInt(i.toString(),10)]],!0,"e-columnselection"):c(r[parseInt(n.toString(),10)].childNodes[parseInt(i.toString(),10)])||Yi([r[parseInt(n.toString(),10)].childNodes[parseInt(i.toString(),10)]],!0,"e-columnselection"))}},o.prototype.headerSelectionHandler=function(t){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(t):this.isMultiShiftRequest?this.selectColumnsByRange(yt(this.prevColIndex)?t:this.prevColIndex,t):this.selectColumnWithExisting(t)},o.prototype.addEventListener_checkbox=function(){var t=this;this.parent.on(Rr,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(Di,this.onDataBoundFunction),this.parent.on(_a,this.onDataBoundFunction),this.parent.on(st,this.checkBoxSelectionChanged,this),this.parent.on(Gs,this.initPerisistSelection,this),this.parent.on(ni,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(wt,this.actionCompleteFunc),this.parent.on(rr,this.clickHandler,this),this.resizeEndFn=function(){t.updateAutoFillPosition(),t.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener(up,this.resizeEndFn)},o.prototype.removeEventListener_checkbox=function(){this.parent.off(Rr,this.dataReady),this.parent.removeEventListener(Di,this.onDataBoundFunction),this.parent.removeEventListener(wt,this.actionCompleteFunc),this.parent.off(_a,this.onDataBoundFunction),this.parent.off(ni,this.setCheckAllForEmptyGrid),this.parent.off(rr,this.clickHandler),this.parent.off(Gs,this.initPerisistSelection)},o.prototype.setCheckAllForEmptyGrid=function(){var t=this.getCheckAllBox();if(t){this.parent.isCheckBoxSelection=!0;var i=t.nextElementSibling;F([i],["e-check","e-stop","e-uncheck"]),T([i.parentElement],["e-checkbox-disabled"])}},o.prototype.dataReady=function(t){this.isHeaderCheckboxClicked=!1;var i=this.parent.enableInfiniteScrolling&&t.requestType==="infiniteScroll";t.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&!i&&(this.disableUI=!this.parent.enableImmutableMode&&!(t.requestType==="save"&&t.action==="add"),this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},o.prototype.actionCompleteHandler=function(t){t.requestType==="save"&&this.parent.isPersistSelection&&this.refreshPersistSelection()},o.prototype.selectRowIndex=function(t){this.parent.isSelectedRowIndexUpdating=!0,c(this.parent.selectedRowIndex)||this.parent.selectedRowIndex===-1||!this.parent.enablePersistence?this.parent.selectedRowIndex=t:this.parent.selectedRowIndex=-1},o.prototype.disableInteracted=function(){this.isInteracted=!1},o.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},o}(),gf=function(){function o(t){this.parent=t,this.addEventListener()}return o.prototype.search=function(t){var i=this.parent;if(t=c(t)?"":t,ph(i)){i.notify(Tp,{instance:this,handler:this.search,arg1:t});return}t!==i.searchSettings.key?(i.searchSettings.key=/^\d+(\.\d+)?$/.test(t)?parseFloat(t).toString():t.toString(),i.dataBind()):this.refreshSearch&&i.refresh()},o.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Bt,this.onPropertyChanged,this),this.parent.on(La,this.onSearchComplete,this),this.parent.on(yi,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(wt,this.actionCompleteFunc),this.parent.on(Vs,this.cancelBeginEvent,this))},o.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Bt,this.onPropertyChanged),this.parent.off(La,this.onSearchComplete),this.parent.off(yi,this.destroy),this.parent.removeEventListener(wt,this.actionCompleteFunc),this.parent.off(Vs,this.cancelBeginEvent))},o.prototype.destroy=function(){this.removeEventListener()},o.prototype.onPropertyChanged=function(t){t.module===this.getModuleName()&&(c(t.properties.key)?this.parent.notify(xn,{requestType:"searching",type:ri}):this.parent.notify(xn,{requestType:"searching",type:ri,searchString:this.parent.searchSettings.key}))},o.prototype.onSearchComplete=function(t){this.parent.trigger(wt,_(t,{searchString:this.parent.searchSettings.key,requestType:"searching",type:wt}))},o.prototype.onActionComplete=function(t){this.refreshSearch=t.requestType!=="searching"},o.prototype.cancelBeginEvent=function(t){t.requestType==="searching"&&this.parent.setProperties({searchSettings:{key:""}},!0)},o.prototype.getModuleName=function(){return"search"},o}(),vf=function(){function o(t){this.colName=[],this.isShowHide=!1,this.parent=t,this.addEventListener()}return o.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:ql,handler:this.batchChanges},{event:Rd,handler:this.resetColumnState}],Mi(this.parent,this.evtHandlers,!0,this))},o.prototype.removeEventListener=function(){this.parent.isDestroyed||Mi(this.parent,this.evtHandlers,!1)},o.prototype.batchChanges=function(){this.isShowHide&&(this.isShowHide=!1,this.setVisible(this.colName,this.changedCol),this.changedCol=this.colName=[])},o.prototype.show=function(t,i){var e=this.getToggleFields(t),r=this.getColumns(e,i);this.parent.notify(zs,{module:"edit"});for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible=!0;this.setVisible(r)},o.prototype.hide=function(t,i){var e=this.getToggleFields(t),r=this.getColumns(e,i);this.parent.notify(zs,{module:"edit"});for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible=!1;this.setVisible(r)},o.prototype.getToggleFields=function(t){var i=[];return typeof t=="string"?i=[t]:i=t,i},o.prototype.getColumns=function(t,i){var e=this,r=Gi(t,function(n){return Gi(e.parent.columnModel,function(s){if(s[""+i]===n)return s})[0]});return r},o.prototype.batchActionPrevent=function(t,i){return i===void 0&&(i=[]),ph(this.parent)?(this.colName=t,this.changedCol=i,this.parent.closeEdit(),!1):!0},o.prototype.resetColumnState=function(){if(this.isShowHide)for(var t=0;t<this.colName.length;t++)this.colName[parseInt(t.toString(),10)].visible=!this.colName[parseInt(t.toString(),10)].visible},o.prototype.setVisible=function(t,i){var e=this;if(i===void 0&&(i=[]),this.isShowHide=!0,!!this.batchActionPrevent(t,i)){i=i.length>0?i:t;var r={requestType:"columnstate",cancel:!1,columns:i},n="cancel";this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&this.parent.groupModule.groupSettings.columns.length>0&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(ri,r,function(s){var a=e.parent.getColumns();if(t=c(t)?a:t,s[""+n]){e.parent.notify(id,{showHideArgs:s}),t.length>0&&(t[0].visible=!0);return}if(Qt(e.parent)&&e.parent.contentModule.emptyVcRows(),e.parent.allowSelection&&e.parent.getSelectedRecords().length&&!e.parent.selectionSettings.persistSelection&&e.parent.clearSelection(),e.parent.enableColumnVirtualization){var l=t.filter(function(u){return a.some(function(p){return u.field===p.field})});l.length&&e.parent.notify(wn,t)}else e.parent.isFrozenGrid()&&t.length&&e.parent.notify(_s,{isModeChg:!0}),e.parent.notify(wn,t);var h={requestType:"columnstate",columns:i};e.parent.trigger(wt,h),e.parent.columnQueryMode!=="All"&&e.parent.refresh()}),this.parent.autoFit&&!this.parent.groupSettings.columns.length&&this.parent.preventAdjustColumns()}},o}(),mf=function(){function o(t){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=t,this.widthService=new sh(t),this.addEventListener()}return o.prototype.getModuleName=function(){return"scroll"},o.prototype.setWidth=function(t){if(this.parent.element.style.width=Pe(this.parent.width),t&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element){var i=this.parent.toolbarModule.toolbar.element,e=i.querySelector(".e-toolbar-left"),r=i.querySelector(".e-toolbar-center"),n=i.querySelector(".e-toolbar-right"),s=i.querySelector(".e-toolbar-items"),a=e?e.clientWidth:0,l=r?r.clientWidth:0,h=n?n.clientWidth:0,u=s?s.clientWidth:0,p=i?i.clientWidth:0;(!this.parent.enableAdaptiveUI||a>p||l>p||h>p||u>p)&&this.parent.toolbarModule.toolbar.refreshOverflow()}},o.prototype.setHeight=function(){var t=0,i=this.parent.getContent().querySelector("."+dt),e=this.parent.height;if(this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&this.parent.height!=="auto"&&this.parent.height.toString().indexOf("%")<0&&(e=parseInt(e,10)-o.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&this.parent.height!=="auto"){var r=this.parent.getHeaderContent().querySelector(Le+":not(.e-masked-tbody)");if(t=r?r.offsetHeight:0,r&&t){var n=r.getElementsByClassName(vr).length,s=n*this.parent.getRowHeight();t-=s}else!this.parent.isInitialLoad&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&this.parent.getHeaderContent().querySelector(".e-masked-table")&&(e=parseInt(e,10)-this.parent.frozenRows*this.parent.getRowHeight());i.style.height=Pe(e-t)}else i.style.height=Pe(e);this.ensureOverflow(i),this.parent.isFrozenGrid()&&this.refresh()},o.prototype.setPadding=function(){var t=this.parent.getHeaderContent(),i=o.getScrollBarWidth()-this.getThreshold(),e=this.getCssProperties();t.querySelector("."+gt).style[e.border]=i>0?"1px":"0px",t.style[e.padding]=i>0?i+"px":"0px"},o.prototype.removePadding=function(t){var i=this.getCssProperties(t),e=this.parent.getHeaderContent().querySelector("."+gt);e.style[i.border]="",e.parentElement.style[i.padding]="";var r=this.parent.getFooterContent();r&&r.classList.contains("e-footerpadding")&&r.classList.remove("e-footerpadding")},o.prototype.refresh=function(){if(this.parent.height==="100%"){var t=this.parent.getContent();this.parent.element.style.height="100%";var i=this.widthService.getSiblingsHeight(t);t.style.height="calc(100% - "+i+"px)"}},o.prototype.getThreshold=function(){var t=Q.info.name;return t==="mozilla"?.5:1},o.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ni,this.wireEvents,this),this.parent.on(st,this.wireEvents,this),this.parent.on(lt,this.onPropertyChanged,this),this.parent.on(za,this.wireEvents,this),this.parent.on(gi,this.setScrollLeft,this))},o.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(ni,this.wireEvents),this.parent.off(st,this.wireEvents),this.parent.off(lt,this.onPropertyChanged),this.parent.off(za,this.wireEvents),this.parent.off(gi,this.setScrollLeft),this.unwireEvents())},o.prototype.unwireEvents=function(){this.parent.frozenRows&&this.header&&(b.remove(this.header,"touchstart pointerdown",this.setPageXY),b.remove(this.header,"touchmove pointermove",this.onTouchScroll));var t=this.parent.getContent()?this.parent.getContent().querySelector(".e-movablescrollbar"):null;this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&(t&&b.remove(t,"scroll",this.onCustomScrollbarScroll),this.content&&(b.remove(this.content,"scroll",this.onCustomScrollbarScroll),b.remove(this.content,"touchstart pointerdown",this.setPageXY),/macintosh|ipad/.test(Q.userAgent.toLowerCase())&&Q.isDevice||b.remove(this.content,"touchmove pointermove",this.onTouchScroll)),this.header&&(b.remove(this.header,"scroll",this.onCustomScrollbarScroll),b.remove(this.header,"touchstart pointerdown",this.setPageXY),b.remove(this.header,"touchmove pointermove",this.onTouchScroll))),this.content&&b.remove(this.content,"scroll",this.contentScrollHandler),this.header&&b.remove(this.header,"scroll",this.headerScrollHandler),this.contentScrollHandler=null,this.headerScrollHandler=null,this.parent.aggregates.length&&this.parent.getFooterContent()&&b.remove(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll)},o.prototype.setScrollLeft=function(){this.parent.getHeaderContent().querySelector("."+gt).scrollLeft=this.previousValues.left},o.prototype.onContentScroll=function(t){var i=this,e=t,r=e.classList.contains(gt);return function(n){if(!(i.content.querySelector(Le)===null||i.parent.isPreventScrollEvent)){var s=n.target;if(i.parent.frozenRows&&(i.content.scrollTop>0&&i.parent.frozenRows?T([i.parent.element],"e-top-shadow"):F([i.parent.element],"e-top-shadow")),i.parent.element.querySelectorAll(".e-leftfreeze,.e-fixedfreeze,.e-rightfreeze").length){var a=i.parent.getContent().querySelectorAll('.e-freezeerror:not([style*="display: none"])'),l=i.parent.getContent().querySelectorAll('.e-fixederror:not([style*="display: none"])');s.scrollLeft!==0&&i.parent.getVisibleFrozenLeftCount()?T([i.parent.element],"e-left-shadow"):F([i.parent.element],"e-left-shadow");var h=Math.round((i.parent.enableRtl?s.scrollWidth+s.scrollLeft:s.scrollWidth-s.scrollLeft)+(i.parent.height==="auto"?0:1));h===s.offsetWidth&&i.parent.getVisibleFrozenRightCount()?F([i.parent.element],"e-right-shadow"):T([i.parent.element],"e-right-shadow");var u=[].slice.call(i.parent.getContent().querySelectorAll(".e-row:not(.e-hiddenrow)"));if((u.length===1&&a.length||i.parent.element.querySelector('.e-freeze-autofill:not([style*="display: none"])')||l.length)&&s.scrollLeft!==i.previousValues.left){s.scrollLeft=i.previousValues.left;return}if(u.length!==1&&(a.length||l.length)&&s.scrollTop!==i.previousValues.top){s.scrollTop=i.previousValues.top;return}}var p=s.scrollLeft;if(!c(i.parent.infiniteScrollModule)&&i.parent.enableInfiniteScrolling&&!i.parent.isEdit&&i.parent.notify(Yp,{target:n.target,isLeft:i.previousValues.left!==p}),i.parent.groupSettings.columns.length&&i.parent.groupSettings.enableLazyLoading){var d=i.previousValues.top<i.parent.getContent().firstElementChild.scrollTop;i.parent.notify(nd,{scrollDown:d})}i.parent.notify(Up,{});var f=s.classList.contains("e-summarycontent");if(i.previousValues.left===p){i.previousValues.top=r?s.scrollTop:i.previousValues.top;return}i.parent.notify(td,n),e.scrollLeft=p,f&&(i.header.scrollLeft=p),i.previousValues.left=p,i.parent.notify(Ma,{left:p})}}},o.prototype.onCustomScrollbarScroll=function(t,i){var e=this,r=t,n=i;return function(s){if(e.content.querySelector(Le)!==null){var a=s.target,l=a.scrollLeft;e.previousValues.left!==l&&(r.scrollLeft=l,n.scrollLeft=l,e.previousValues.left=l,e.parent.notify(Ma,{left:l}),e.parent.isDestroyed)}}},o.prototype.onTouchScroll=function(t){var i=this,e=t;return function(r){if(r.pointerType!=="mouse"){var n=i.parent.isFrozenGrid(),s=i.getPointXY(r),a=e.scrollLeft+(i.pageXY.x-s.x),l=i.parent.getHeaderContent().querySelector("."+gt),h=i.parent.getContent().querySelector("."+dt);if(!(i.previousValues.left===a||a<0||l.scrollWidth-l.clientWidth<a)){if(r.preventDefault(),l.scrollLeft=a,h.scrollLeft=a,n&&i.parent.enableColumnVirtualization){var u=i.parent.getContent().querySelector(".e-movablescrollbar");u.scrollLeft=a}i.pageXY.x=s.x,i.previousValues.left=a}}}},o.prototype.setPageXY=function(){var t=this;return function(i){i.pointerType!=="mouse"&&(t.pageXY=t.getPointXY(i))}},o.prototype.getPointXY=function(t){var i={x:0,y:0};return t.touches&&t.touches.length?(i.x=t.touches[0].pageX,i.y=t.touches[0].pageY):(i.x=t.pageX,i.y=t.pageY),i},o.prototype.getScrollbleParent=function(t){if(t===null)return null;var i=c(t.tagName)?t.scrollingElement:t,e=document.defaultView.getComputedStyle(i,null).overflowY;return i.scrollHeight>i.clientHeight&&e!=="hidden"&&e!=="visible"||t.tagName==="HTML"||t.tagName==="BODY"?t:this.getScrollbleParent(t.parentNode)},o.prototype.addStickyListener=function(t){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),t&&this.parentElement?(this.eventElement=this.parentElement.tagName==="HTML"||this.parentElement.tagName==="BODY"?document:this.parentElement,b.add(this.eventElement,"scroll",this.makeStickyHeader,this)):this.eventElement&&(b.remove(this.eventElement,"scroll",this.makeStickyHeader),this.eventElement=null)},o.prototype.resizeFrozenRowBorder=function(){var t;this.parent.element.querySelector(".e-frozenrow-border")?t=this.parent.element.querySelector(".e-frozenrow-border"):(t=this.parent.createElement("div",{className:"e-frozenrow-border"}),this.parent.element.insertBefore(t,this.parent.element.querySelector(".e-gridcontent")));var i=this.parent.height!=="auto"?o.getScrollBarWidth():0;t.style.width=this.parent.element.offsetWidth-i-.5+"px"},o.prototype.wireEvents=function(){var t=this;if(this.oneTimeReady){var i=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector("."+dt),this.header=this.parent.getHeaderContent().querySelector("."+gt);var e=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&this.header&&this.content&&(b.add(this.header,"touchstart pointerdown",this.setPageXY(),this),b.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this)),i&&e&&this.parent.enableColumnVirtualization&&(b.add(e,"scroll",this.onCustomScrollbarScroll(this.content,this.header),this),b.add(this.content,"scroll",this.onCustomScrollbarScroll(e,this.header),this),b.add(this.header,"scroll",this.onCustomScrollbarScroll(e,this.content),this),b.add(this.header,"touchstart pointerdown",this.setPageXY(),this),b.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this),b.add(this.content,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(Q.userAgent.toLowerCase())&&Q.isDevice||b.add(this.content,"touchmove pointermove",this.onTouchScroll(this.header),this)),this.contentScrollHandler=this.onContentScroll(this.header),this.headerScrollHandler=this.onContentScroll(this.content),b.add(this.content,"scroll",this.contentScrollHandler,this),b.add(this.header,"scroll",this.headerScrollHandler,this),this.parent.aggregates.length&&b.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var r=this.parent.getContentTable(),n,s,a;ch(function(){n=t.header.scrollLeft,s=r.scrollHeight,a=t.parent.getContent().clientHeight},function(){var l={cancel:!1};t.parent.notify(ld,l),s<a&&t.parent.height!=="auto"&&t.setLastRowCell(),t.parent.frozenRows&&t.resizeFrozenRowBorder(),!t.parent.enableVirtualization&&!t.parent.enableInfiniteScrolling&&(l.cancel||(t.header.scrollLeft=t.previousValues.left,t.content.scrollLeft=t.previousValues.left,t.content.scrollTop=t.previousValues.top)),t.parent.enableColumnVirtualization||(t.content.scrollLeft=n,t.parent.isFrozenGrid()&&(t.previousValues.left=n))}),this.parent.isPreventScrollEvent=!1},o.prototype.setLastRowCell=function(){var t=this.parent.getContentTable();t.querySelector("tr:nth-last-child(2)")&&F(t.querySelector("tr:nth-last-child(2)").querySelectorAll("td"),"e-lastrowcell"),T(t.querySelectorAll("tr:last-child td"),"e-lastrowcell")},o.prototype.getCssProperties=function(t){var i={},e=c(t)?this.parent.enableRtl:t;return i.border=e?"borderLeftWidth":"borderRightWidth",i.padding=e?"paddingLeft":"paddingRight",i},o.prototype.ensureOverflow=function(t){t.style.overflowY=this.parent.height==="auto"?"auto":"scroll"},o.prototype.onPropertyChanged=function(t){if(t.module===this.getModuleName()){this.setPadding(),this.oneTimeReady=!0,this.parent.height==="auto"&&this.removePadding(),this.wireEvents(),this.setHeight();var i="width";this.setWidth(!c(t.properties[""+i]))}},o.prototype.makeStickyHeader=function(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){var t=this.parent.getContent().getClientRects()[0];if(t){var i=this.parent.getHeaderContent(),e=this.parent.element.querySelector(".e-toolbar"),r=this.parent.element.querySelector(".e-groupdroparea"),n=i.offsetHeight+(e?e.offsetHeight:0)+(r?r.offsetHeight:0),s=this.parentElement.getClientRects()[0].top,a=t.top-(s<0?0:s),l=t.left,h=document.body.querySelector("#"+this.parent.element.id+"_columnmenu");if(a<n&&t.bottom>0){i.classList.add("e-sticky");var u=0;r&&this.parent.groupSettings.showDropArea&&(this.setSticky(r,u,t.width,l,!0),u+=r.getClientRects()[0].height),e&&(this.setSticky(e,u,t.width,l,!0),u+=e.getClientRects()[0].height),this.setSticky(i,u,t.width,l,!0),c(h)||(h.style.position="fixed",h.style.top=n+"px")}else if(i.classList.contains("e-sticky")){this.setSticky(i,null,null,null,!1),e&&this.setSticky(e,null,null,null,!1),r&&this.setSticky(r,null,null,null,!1);var p=this.parent.element.querySelector(".e-ccdlg");if(p&&p.classList.remove("e-sticky"),!c(h)){h.style.position="absolute";var d=t.top-s;h.style.top=d+"px"}}this.parent.notify(xd,{})}}},o.prototype.setSticky=function(t,i,e,r,n){n?(t.style.width=e+"px",t.classList.add("e-sticky")):t.classList.remove("e-sticky"),t.style.top=i!=null?i+"px":"",t.style.left=r!==null?parseInt(t.style.left,10)!==r?r+"px":t.style.left:""},o.prototype.destroy=function(){var t=this.parent.element;if(!(!t||!t.querySelector("."+Tt)&&!t.querySelector("."+vi))){this.removeEventListener();var i=this.parent.getContent().querySelector("."+dt);b.remove(i,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),F([this.parent.getHeaderContent().querySelector("."+gt)],gt),F([i],dt),i.style.height="",this.parent.element.style.width=""}},o.getScrollBarWidth=function(){return fi()},o}(),ah=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),pi=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},yf=function(o){ah(t,o);function t(){var i=o!==null&&o.apply(this,arguments)||this;return i.templateFn={},i}return t.prototype.setFormatter=function(i){this.formatFn=i},t.prototype.getFormatter=function(){return this.formatFn},t.prototype.setTemplate=function(i){i===void 0&&(i={}),this.footerTemplate!==void 0&&(this.templateFn[Ii(le,le.Summary)]={fn:Ue(this.footerTemplate,i),property:"footerTemplate"}),this.groupFooterTemplate!==void 0&&(this.templateFn[Ii(le,le.GroupSummary)]={fn:Ue(this.groupFooterTemplate,i),property:"groupFooterTemplate"}),this.groupCaptionTemplate!==void 0&&(this.templateFn[Ii(le,le.CaptionSummary)]={fn:Ue(this.groupCaptionTemplate,i),property:"groupCaptionTemplate"})},t.prototype.getTemplate=function(i){return this.templateFn[Ii(le,i)]},t.prototype.setPropertiesSilent=function(i){this.setProperties(i,!0)},pi([C()],t.prototype,"type",void 0),pi([C()],t.prototype,"field",void 0),pi([C()],t.prototype,"columnName",void 0),pi([C()],t.prototype,"format",void 0),pi([C()],t.prototype,"footerTemplate",void 0),pi([C()],t.prototype,"groupFooterTemplate",void 0),pi([C()],t.prototype,"groupCaptionTemplate",void 0),pi([C()],t.prototype,"customAggregate",void 0),t}(_e),Cf=function(o){ah(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return pi([Dr([],yf)],t.prototype,"columns",void 0),t}(_e),Sf=function(){function o(t,i){this.copyContent="",this.isSelect=!1,this.parent=t,this.serviceLocator=i,this.addEventListener()}return o.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(st,this.initialEnd,this),this.parent.on(Zi,this.keyDownHandler,this),this.parent.on(rr,this.clickHandler,this),this.parent.on(ni,this.initialEnd,this),b.add(this.parent.element,"keydown",this.pasteHandler,this))},o.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Zi,this.keyDownHandler),this.parent.off(st,this.initialEnd),this.parent.off(rr,this.clickHandler),this.parent.off(ni,this.initialEnd),b.remove(this.parent.element,"keydown",this.pasteHandler))},o.prototype.clickHandler=function(t){var i=t.target;i=M(i,"e-rowcell")},o.prototype.pasteHandler=function(t){var i=this,e=this.parent,r=/(Mac)/i.test(navigator.platform),n=this.parent.getSelectedRowCellIndexes();if(t.keyCode===67&&r&&t.metaKey&&!e.isEdit&&this.copy(),n.length&&t.keyCode===86&&(!r&&t.ctrlKey||r&&t.metaKey)&&!e.isEdit){var s=D(document.activeElement,"."+Me);if(!this.clipBoardTextArea||!s||!e.editSettings.allowEditing||e.editSettings.mode!=="Batch"||e.selectionSettings.mode!=="Cell"||e.selectionSettings.cellSelectionMode==="Flow")return;this.activeElement=document.activeElement;var a=window.scrollX,l=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(function(){i.activeElement.focus(),window.scrollTo(a,l),i.paste(i.clipBoardTextArea.value,n[0].rowIndex,n[0].cellIndexes[0])},r?100:10)}},o.prototype.paste=function(t,i,e){for(var r=this.parent,n=e,s=i,a,l,h,u=t.split(`
`),p,d=0;d<u.length;d++){if(p=u[parseInt(d.toString(),10)].split("	"),n=e,d===u.length-1&&u[parseInt(d.toString(),10)]===""||yt(r.getRowByIndex(s))){n++;break}for(var f=0;f<p.length;f++){if(h=r.getCellFromIndex(s,n),!h){n++;break}if(a=r.getColumnByIndex(n),l=a.getParser()?a.getParser()(p[parseInt(f.toString(),10)]):p[parseInt(f.toString(),10)],a.allowEditing&&!a.isPrimaryKey&&!a.template){var g={column:a,data:l,rowIndex:s};this.parent.trigger(dp,g),s=g.rowIndex,g.cancel||r.editModule&&(a.type==="number"?this.parent.editModule.updateCell(s,a.field,parseFloat(g.data)):r.editModule.updateCell(s,a.field,g.data))}n++}s++}r.selectionModule.selectCellsByRange({rowIndex:i,cellIndex:e},{rowIndex:s-1,cellIndex:n-1});var v=this.parent.getCellFromIndex(s-1,n-1);v&&ot(v,["e-focus","e-focused"],[]),this.clipBoardTextArea.value=""},o.prototype.initialEnd=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.off(st,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("ClipBoard")}}),this.parent.element.appendChild(this.clipBoardTextArea)},o.prototype.keyDownHandler=function(t){t.action==="ctrlPlusC"?this.copy():t.action==="ctrlShiftPlusH"&&this.copy(!0)},o.prototype.setCopyData=function(t){if(window.getSelection().toString()===""){this.clipBoardTextArea.value=this.copyContent="";var i=this.parent.getDataRows();if(this.parent.selectionSettings.mode!=="Cell"){var e=this.parent.getSelectedRowIndexes().sort(function(f,g){return f-g});if(t){for(var r=[],n=0;n<this.parent.getVisibleColumns().length;n++)r[parseInt(n.toString(),10)]=this.parent.getVisibleColumns()[parseInt(n.toString(),10)].headerText;this.getCopyData(r,!1,"	",t),this.copyContent+=`
`}for(var n=0;n<e.length;n++){n>0&&(this.copyContent+=`
`);var s=[],a=e[parseInt(n.toString(),10)];!Qt(this.parent)&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache||this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading)&&(a=i.map(function(g){return g.getAttribute("data-rowindex")}).indexOf(e[parseInt(n.toString(),10)].toString())),s.push.apply(s,[].slice.call(i[parseInt(a.toString(),10)].querySelectorAll(".e-rowcell:not(.e-hide)"))),this.getCopyData(s,!1,"	",t)}}else{var l=this.checkBoxSelection();if(l.status){if(t){for(var h=[],n=0;n<l.colIndexes.length;n++){var u=this.parent.getColumnHeaderByIndex(l.colIndexes[parseInt(n.toString(),10)]);u.classList.contains("e-hide")||h.push(u)}this.getCopyData(h,!1,"	",t),this.copyContent+=`
`}for(var n=0;n<l.rowIndexes.length;n++){n>0&&(this.copyContent+=`
`);var p=[].slice.call(i[l.rowIndexes[parseInt(n.toString(),10)]].querySelectorAll(".e-cellselectionbackground:not(.e-hide)"));this.getCopyData(p,!1,"	",t)}}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,`
`,t)}var d={data:this.copyContent,cancel:!1};if(this.parent.trigger(pp,d),d.cancel)return;this.clipBoardTextArea.value=this.copyContent=d.data,Q.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},o.prototype.getCopyData=function(t,i,e,r){for(var n=typeof t[0]!="string",s=0;s<t.length;s++){if(r&&i){var a=parseInt(t[parseInt(s.toString(),10)].getAttribute(rt),10);this.copyContent+=this.parent.getColumns()[parseInt(a.toString(),10)].headerText+`
`}n?t[parseInt(s.toString(),10)].classList.contains("e-hide")||(this.copyContent+=t[parseInt(s.toString(),10)].innerText):this.copyContent+=t[parseInt(s.toString(),10)],s<t.length-1&&(this.copyContent+=e)}},o.prototype.copy=function(t){document.queryCommandSupported("copy")&&this.clipBoardTextArea&&(this.setCopyData(t),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},o.prototype.getModuleName=function(){return"clipboard"},o.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&Se(this.clipBoardTextArea)},o.prototype.checkBoxSelection=function(){var t=this.parent,i={status:!1};if(t.selectionSettings.mode==="Cell"){var e=t.getSelectedRowCellIndexes(),r=void 0,n=[],s=void 0;for(s=0;s<e.length&&(e[parseInt(s.toString(),10)].cellIndexes.length&&n.push(e[parseInt(s.toString(),10)].rowIndex),!(e[parseInt(s.toString(),10)].cellIndexes.length&&(r||(r=JSON.stringify(e[parseInt(s.toString(),10)].cellIndexes.sort())),r!==JSON.stringify(e[parseInt(s.toString(),10)].cellIndexes.sort()))));s++);n.sort(function(a,l){return a-l}),s===e.length&&(i={status:!0,rowIndexes:n,colIndexes:e[0].cellIndexes})}return i},o}(),It=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),w=function(o,t,i,e){var r=arguments.length,n=r<3?t:e===null?e=Object.getOwnPropertyDescriptor(t,i):e,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(o,t,i,e);else for(var a=o.length-1;a>=0;a--)(s=o[a])&&(n=(r<3?s(n):r>3?s(t,i,n):s(t,i))||n);return r>3&&n&&Object.defineProperty(t,i,n),n},bf=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([C()],t.prototype,"field",void 0),w([C()],t.prototype,"direction",void 0),w([C(!1)],t.prototype,"isFromGroup",void 0),t}(_e),xf=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([Dr([],bf)],t.prototype,"columns",void 0),w([C(!0)],t.prototype,"allowUnsort",void 0),t}(_e),wf=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([C()],t.prototype,"field",void 0),w([C()],t.prototype,"operator",void 0),w([C()],t.prototype,"value",void 0),w([C()],t.prototype,"matchCase",void 0),w([C(!1)],t.prototype,"ignoreAccent",void 0),w([C()],t.prototype,"predicate",void 0),w([C({})],t.prototype,"actualFilterValue",void 0),w([C({})],t.prototype,"actualOperator",void 0),w([C()],t.prototype,"type",void 0),w([C()],t.prototype,"ejpredicate",void 0),w([C()],t.prototype,"uid",void 0),w([C()],t.prototype,"isForeignKey",void 0),w([C()],t.prototype,"condition",void 0),t}(_e),If=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([C(!1)],t.prototype,"enableCache",void 0),w([C(3)],t.prototype,"maxBlocks",void 0),w([C(3)],t.prototype,"initialBlocks",void 0),t}(_e),Ef=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([Dr([],wf)],t.prototype,"columns",void 0),w([C("FilterBar")],t.prototype,"type",void 0),w([C("OnEnter")],t.prototype,"mode",void 0),w([C(!0)],t.prototype,"showFilterBarStatus",void 0),w([C(1500)],t.prototype,"immediateModeDelay",void 0),w([C()],t.prototype,"operators",void 0),w([C(!1)],t.prototype,"ignoreAccent",void 0),w([C(!1)],t.prototype,"enableInfiniteScrolling",void 0),w([C(50)],t.prototype,"itemsCount",void 0),w([C("Shimmer")],t.prototype,"loadingIndicator",void 0),w([C(!1)],t.prototype,"enableCaseSensitivity",void 0),w([C(!1)],t.prototype,"showFilterBarOperator",void 0),t}(_e),Rf=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([C("Row")],t.prototype,"mode",void 0),w([C("Flow")],t.prototype,"cellSelectionMode",void 0),w([C("Single")],t.prototype,"type",void 0),w([C(!1)],t.prototype,"checkboxOnly",void 0),w([C(!1)],t.prototype,"persistSelection",void 0),w([C("Default")],t.prototype,"checkboxMode",void 0),w([C(!1)],t.prototype,"enableSimpleMultiRowSelection",void 0),w([C(!0)],t.prototype,"enableToggle",void 0),w([C(!1)],t.prototype,"allowColumnSelection",void 0),t}(_e),Af=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([C([])],t.prototype,"fields",void 0),w([C("")],t.prototype,"key",void 0),w([C("contains")],t.prototype,"operator",void 0),w([C(!0)],t.prototype,"ignoreCase",void 0),w([C(!1)],t.prototype,"ignoreAccent",void 0),t}(_e),Tf=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([C()],t.prototype,"targetID",void 0),t}(_e),kf=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([C("Both")],t.prototype,"wrapMode",void 0),t}(_e),Df=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([C("Normal")],t.prototype,"mode",void 0),t}(_e),Lf=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([C(!0)],t.prototype,"showDropArea",void 0),w([C(!1)],t.prototype,"allowReordering",void 0),w([C(!1)],t.prototype,"showToggleButton",void 0),w([C(!1)],t.prototype,"showGroupedColumn",void 0),w([C(!0)],t.prototype,"showUngroupButton",void 0),w([C(!1)],t.prototype,"disablePageWiseAggregates",void 0),w([C([])],t.prototype,"columns",void 0),w([C()],t.prototype,"captionTemplate",void 0),w([C(!1)],t.prototype,"enableLazyLoading",void 0),t}(_e),Ff=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([C(!1)],t.prototype,"allowAdding",void 0),w([C(!1)],t.prototype,"allowEditing",void 0),w([C(!1)],t.prototype,"allowDeleting",void 0),w([C("Normal")],t.prototype,"mode",void 0),w([C(!0)],t.prototype,"allowEditOnDblClick",void 0),w([C(!0)],t.prototype,"showConfirmDialog",void 0),w([C(!1)],t.prototype,"showDeleteConfirmDialog",void 0),w([C()],t.prototype,"template",void 0),w([C()],t.prototype,"headerTemplate",void 0),w([C()],t.prototype,"footerTemplate",void 0),w([C("Top")],t.prototype,"newRowPosition",void 0),w([C({})],t.prototype,"dialog",void 0),w([C(!1)],t.prototype,"allowNextRowEdit",void 0),t}(_e),Mf=function(o){It(t,o);function t(){return o!==null&&o.apply(this,arguments)||this}return w([C("Spinner")],t.prototype,"indicatorType",void 0),t}(_e),lh=function(o){It(t,o);function t(e,r){var n=o.call(this,e,r)||this;return n.isPreventScrollEvent=!1,n.inViewIndexes=[],n.keyA=!1,n.frozenRightCount=0,n.freezeColumnRefresh=!0,n.rightcount=0,n.frozenLeftCount=0,n.leftcount=0,n.tablesCount=1,n.movableCount=0,n.movablecount=0,n.fixedcount=0,n.fixedCount=0,n.visibleFrozenLeft=0,n.visibleFrozenFixed=0,n.isPreparedFrozenColumns=!1,n.visibleFrozenRight=0,n.visibleMovable=0,n.frozenLeftColumns=[],n.frozenRightColumns=[],n.movableColumns=[],n.fixedColumns=[],n.stackedLeft=[],n.stackedRight=[],n.stackedFixed=[],n.stackedMovable=[],n.stackedarrayLeft=[],n.stackedarrayRight=[],n.stackedarrayFixed=[],n.stackedarrayMovable=[],n.media={},n.tableIndex=0,n.componentRefresh=Kt.prototype.refresh,n.isChangeDataSourceCall=!1,n.mergedColumns=!1,n.isVirtualAdaptive=!1,n.requireTemplateRef=!0,n.vRows=[],n.vcRows=[],n.vGroupOffsets={},n.rowUid=0,n.translateX=0,n.isManualRefresh=!1,n.isAutoFitColumns=!1,n.enableDeepCompare=!1,n.totalDataRecordsCount=0,n.disableSelectedRecords=[],n.partialSelectedRecords=[],n.islazyloadRequest=!1,n.lockcolPositionCount=0,n.prevPageMoving=!1,n.pageTemplateChange=!1,n.isAutoGen=!1,n.isAutoGenerateColumns=!1,n.mediaBindInstance={},n.commandDelIndex=void 0,n.asyncTimeOut=50,n.isExportGrid=!1,n.enableLogger=!0,n.needsID=!0,i.Inject(ff),ht("mergePersistData",n.mergePersistGridData,n),n}i=t,t.prototype.getPersistData=function(){for(var e=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],r={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},n=0;n<e.length;n++)for(var s=this[e[parseInt(n.toString(),10)]],a=0,l=r[e[parseInt(n.toString(),10)]];a<l.length;a++){var h=l[a];delete s[""+h]}var u=this.pageSettings.template,p=Object.assign({template:void 0},this.pageSettings);this.setProperties({pageSettings:p},!0),this.isAngular&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!c(this.pagerTemplate);var d=this.addOnPersist(e);return p.template=u,this.setProperties({pageSettings:p},!0),d},t.prototype.requiredModules=function(){this.setFrozenCount(),this.enableInfiniteAggrgate();var e=[];return this.isDestroyed||(this.allowFiltering&&e.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator]}),this.allowExcelExport&&e.push({member:"ExcelExport",args:[this,this.serviceLocator]}),this.allowPdfExport&&e.push({member:"PdfExport",args:[this]}),this.allowSorting&&e.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator]}),this.allowPaging&&e.push({member:"pager",args:[this,this.pageSettings]}),this.allowSelection&&e.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator]}),e.push({member:"resize",args:[this]}),this.allowReordering&&e.push({member:"reorder",args:[this]}),this.allowRowDragAndDrop&&e.push({member:"rowDragAndDrop",args:[this]}),this.allowGrouping&&e.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator]}),this.aggregates.length&&e.push({member:"aggregate",args:[this,this.serviceLocator]}),this.isDetail()&&e.push({member:"detailRow",args:[this,this.serviceLocator]}),(this.toolbar||this.toolbarTemplate)&&e.push({member:"toolbar",args:[this,this.serviceLocator]}),(this.enableVirtualization||this.enableColumnVirtualization)&&e.push({member:"virtualscroll",args:[this,this.serviceLocator]}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&e.push({member:"freeze",args:[this,this.serviceLocator]}),this.isCommandColumn(this.columns)&&e.push({member:"commandColumn",args:[this,this.serviceLocator]}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&e.push({member:"edit",args:[this,this.serviceLocator]}),this.extendRequiredModules(e)),e},t.prototype.extendRequiredModules=function(e){this.enableInfiniteScrolling&&e.push({member:"infiniteScroll",args:[this,this.serviceLocator]}),this.groupSettings.enableLazyLoading&&e.push({member:"lazyLoadGroup",args:[this,this.serviceLocator]}),this.contextMenuItems&&e.push({member:"contextMenu",args:[this,this.serviceLocator]}),this.showColumnMenu&&e.push({member:"columnMenu",args:[this,this.serviceLocator]}),this.showColumnChooser&&e.push({member:"columnChooser",args:[this,this.serviceLocator]}),this.isForeignKeyEnabled(this.columns)&&e.push({member:"foreignKey",args:[this,this.serviceLocator]}),this.enableLogger&&e.push({member:"logger",args:[this]})},t.prototype.preRender=function(){this.serviceLocator=new nf,this.initProperties(),this.initializeServices()},t.prototype.initProperties=function(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=Kt.prototype.refresh,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith",wildCard:"wildcard",isNull:"isnull",notNull:"notnull",like:"like"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",ColumnMenu:"Column Menu",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",NotStartsWith:"Does Not Start With",Like:"Like",EndsWith:"Ends With",NotEndsWith:"Does Not End With",Contains:"Contains",NotContains:"Does Not Contain",IsNull:"Null",NotNull:"Not Null",IsEmpty:"Empty",IsNotEmpty:"Not Empty",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",GroupButton:"Group button",UnGroupAria:"ungroup button",GroupSeperator:"Separator for the grouped columns",UnGroupIcon:"ungroup the grouped column ",GroupedSortIcon:"sort the grouped column ",GroupedDrag:"Drag the grouped column",GroupCaption:" is groupcaption cell",CheckBoxLabel:"checkbox",SelectAllCheckbox:"Select all checkbox",SelectRow:"Select row",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",AddCurrentSelection:"Add current selection to filter",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",ToolbarMenuDialogARIA:"Toolbar menu dialog",FilterMenuDialogARIA:"Filter menu",ExcelFilterDialogARIA:"Excel filter",CheckBoxFilterDialogARIA:"Checkbox filter",DialogEditARIA:"Edit dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort",FilterDescription:"Press Alt Down to open filter Menu",SortDescription:"Press Enter to sort",ColumnMenuDescription:"Press Alt Down to open Column Menu",GroupDescription:"Press Ctrl space to group",ColumnHeader:" column header ",TemplateCell:" is template cell",CommandColumnAria:"is Command column column header ",DialogEdit:"Dialog edit",ClipBoard:"clipboard",AscendingText:"Ascending",DescendingText:"Descending",NoneText:"None",Expanded:"Expanded",Collapsed:"Collapsed"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},t.prototype.render=function(){if(this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),Ir({target:this.element,cssClass:this.cssClass?this.cssClass:null},this.createElement),this.renderModule=new ef(this,this.serviceLocator),this.searchModule=new gf(this),this.scrollModule=new mf(this),this.notify(Vl,{}),(this.getDataModule().dataManager.dataSource.offline===!0||this.getDataModule().dataManager.dataSource.url===void 0)&&!(!c(this.dataSource)&&this.dataSource.result)&&(this.isVirtualAdaptive=!0),this.isReact){var e={requireTemplateRef:this.requireTemplateRef};this.trigger(Ds,e),e.requireTemplateRef||(this.requireTemplateRef=e.requireTemplateRef)}else this.trigger(Ds);Rn(this.columns,this.enableColumnVirtualization,this),this.enableColumnVirtualization&&this.isChangeDataSourceCall&&this.columnModel&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.isPreparedFrozenColumns=!0,this.enablePersistence&&this.notify(Ws,{}),this.getMediaColumns(),pn(this.columns),this.isFrozenGrid()&&!this.mergedColumns&&this.setInitialFrozenColumnIndex(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.loadingIndicator.indicatorType==="Spinner"&&this.showSpinner(),this.notify(vo,{}),this.loadingIndicator.indicatorType==="Shimmer"&&this.refreshMaskRow(),this.refreshing&&this.trigger("created")},t.prototype.setInitialFrozenColumnIndex=function(e){for(var r=0;r<e.length;r++){var n=e[parseInt(r.toString(),10)];n[""+Ya]=n.index,n.columns&&this.setInitialFrozenColumnIndex(n.columns)}},t.prototype.showSpinner=function(){this.isExportGrid||Wi(this.element)},t.prototype.hideSpinner=function(){this.isExportGrid||Er(this.element)},t.prototype.showMaskRow=function(e,r){if(!(c(this.headerModule)||c(this.contentModule))){var n=this.getHeaderContent().firstChild,s=this.getContent().firstChild,a=this.getFooterContent();if(r){var l=r.querySelector(".e-checkboxlist"),h=Math.floor(l.getBoundingClientRect().height/this.getRowHeight()),u='<div class="e-ftrchk e-mask-ftrchk" style="width: 100%;"><div class="e-checkbox-wrapper" style="width: 100%;"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";l.innerHTML="";for(var p=0;p<h;p++){l.innerHTML+=u;var d=[].slice.call(l.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));d[0].classList.add("e-mask-checkbox-filter-intent"),d[1].classList.add("e-mask-checkbox-filter-span-intent")}return}if((!this.enableRtl&&!this.getHeaderContent().style.paddingRight||this.enableRtl&&!this.getHeaderContent().style.paddingLeft)&&(s.style.overflowY="hidden"),!this.isInitialLoad&&!this.getColumns().length){var f=s.getBoundingClientRect().height,g=f===0?this.allowPaging?this.pageSettings.pageSize*this.getRowHeight():window.innerHeight:f,v=Math.ceil(g/this.getRowHeight());this.rowRenderingMode!=="Vertical"&&(this.headerMaskTable=this.createEmptyMaskTable(n,1)),this.contentMaskTable=this.createEmptyMaskTable(s,v);return}if(this.maskRowContentScroll=!!((this.enableVirtualization||this.enableColumnVirtualization)&&e),!this.contentMaskTable){var m=s;(this.enableVirtualization||this.enableColumnVirtualization)&&(m=m.querySelector(".e-virtualtable")),c(m.querySelector("tbody"))||(this.contentMaskTable=this.createMaskTable(m,this.getContentMaskColumns(),e))}if(!this.headerMaskTable&&(this.isFrozenGrid()||this.enableColumnVirtualization&&e==="X")){var m=n;this.enableColumnVirtualization&&e==="X"&&(m=m.querySelector(".e-virtualtable")),this.headerMaskTable=this.createMaskTable(m,this.getContentMaskColumns(),e)}if(a&&a.querySelector(".e-summaryrow")){var y=a.firstChild;if(!this.footerContentMaskTable){var I=y;this.footerContentMaskTable=this.createMaskTable(I)}}this.enableVirtualization&&e||b.add(s,"scroll",this.translateMaskRow,this)}},t.prototype.getContentMaskColumns=function(){return this.getColumns()},t.prototype.createEmptyMaskTable=function(e,r){var n=this.createElement("table",{className:"e-table e-masked-table"}),s=this.createElement("tbody",{className:"e-masked-tbody"}),a=this.createElement("tr",{className:"e-masked-row e-row",attrs:{style:"height: "+this.getRowHeight()+"px;"}}),l=this.createElement("td",{className:"e-masked-cell e-rowcell"});l.innerHTML=this.getShimmerTemplate(),a.appendChild(l);for(var h=0;h<r;h++)s.appendChild(a.cloneNode(!0));return n.appendChild(s),e.appendChild(n),n},t.prototype.createMaskTable=function(e,r,n){var s=e,a=!!D(s,".e-gridheader"),l=!!D(s,".e-gridcontent"),h=!!D(s,".e-gridfooter"),u=this.getContent().firstChild,p=u.scrollHeight,d=s.querySelector("table"),f=d.cloneNode();f.removeAttribute("role"),f.removeAttribute("id"),f.style.position="absolute",f.style.zIndex="5",f.style.width=d.getBoundingClientRect().width+"px",a&&!(this.enableColumnVirtualization&&n==="X")&&(f.style.transform="translate(0px,"+d.querySelector("thead").getBoundingClientRect().height+"px)"),f.setAttribute("class","e-table e-masked-table");var g=d.querySelector("colgroup").cloneNode(!0);if(g.removeAttribute("id"),g.setAttribute("class","e-masked-colgroup"),f.appendChild(g),a&&this.enableColumnVirtualization&&n==="X"){var v=this.createMaskRow(g,r);if(this.isFrozenGrid())for(var m=[].slice.call(v.querySelectorAll(".e-rowcell")),y=0;y<m.length;y++)y<this.frozenLeftCount?(this.frozenLeftCount-1===y&&m[parseInt(y.toString(),10)].classList.add("e-freezeleftborder"),m[parseInt(y.toString(),10)].classList.add("e-leftfreeze"),m[parseInt(y.toString(),10)].setAttribute("data-colindex",y.toString()),m[parseInt(y.toString(),10)].style.left=r[parseInt(y.toString(),10)].valueX-this.translateX+"px"):m.length-this.frozenRightCount<=y&&r[parseInt(y.toString(),10)]&&(m.length-this.frozenRightCount===y&&m[parseInt(y.toString(),10)].classList.add("e-freezerightborder"),m[parseInt(y.toString(),10)].classList.add("e-rightfreeze"),m[parseInt(y.toString(),10)].setAttribute("data-colindex",y.toString()),m[parseInt(y.toString(),10)].style.right=this.translateX+r[parseInt(y.toString(),10)].valueX+"px");var I=d.querySelector("thead"),S=[].slice.call(I.querySelectorAll("tr")),R=I.cloneNode();R.removeAttribute("role"),R.setAttribute("class","e-masked-thead");for(var L=S.length,y=0;y<L;y++)R.appendChild(v.cloneNode(!0)),R.childNodes[parseInt(y.toString(),10)].style.height=S[parseInt(y.toString(),10)].getBoundingClientRect().height+"px";f.appendChild(R)}var P=d.querySelector("tbody").cloneNode();P.removeAttribute("role"),P.setAttribute("class","e-masked-tbody");var J=d.querySelector("tbody");if(l||a){var he=u,L=Math.ceil(he.getBoundingClientRect().height/this.getRowHeight());if(J.querySelector(".e-emptyrow")||!J.childNodes.length||l&&this.childGrid){var v=this.createMaskRow(g,r),pe=v.cloneNode(!0);pe.classList.add("e-altrow");for(var y=0;y<L;y++){var Re=1;P.appendChild((y+Re)%2===0?pe.cloneNode(!0):v.cloneNode(!0))}}else{var B='tr:not([style*="display:none"]):not([style*="display: none"])',S=[].slice.call(J.querySelectorAll(B)),H=J.querySelector(".e-addedrow, .e-editedrow"),O=void 0;if(H){if(O=S.indexOf(H),this.isFrozenGrid()&&this.enableColumnVirtualization)for(var m=[].slice.call(S[O+1].querySelectorAll(".e-rowcell")),y=0;y<m.length;y++)y<this.frozenLeftCount?(m[parseInt(y.toString(),10)].classList.add("e-leftfreeze"),m[parseInt(y.toString(),10)].setAttribute("data-colindex",y.toString()),m[parseInt(y.toString(),10)].style.left=r[parseInt(y.toString(),10)].valueX-this.translateX+"px"):m.length-this.frozenRightCount<=y&&r[parseInt(y.toString(),10)]&&(m[parseInt(y.toString(),10)].classList.add("e-rightfreeze"),m[parseInt(y.toString(),10)].setAttribute("data-colindex",y.toString()),m[parseInt(y.toString(),10)].style.right=this.translateX+r[parseInt(y.toString(),10)].valueX+"px");H.classList.contains("e-addedrow")?S.splice(O,2):S.splice(O,1)}L=(this.enableVirtualization||this.enableColumnVirtualization)&&n?S.length:L<=S.length?L:S.length;for(var y=0;y<L;y++)P.appendChild(this.applyMaskRow(S[parseInt(y.toString(),10)].cloneNode(!0),S[parseInt(y.toString(),10)].getBoundingClientRect().height));if(H&&H.classList.contains("e-editedrow")&&O<L){var U=P.childNodes[parseInt(O.toString(),10)];U.style.height=this.getRowHeight()+"px",U.classList.add("e-row"),H.classList.contains("e-altrow")&&U.classList.add("e-altrow")}}}if(f.appendChild(P),h){var re=d.querySelector("tfoot"),j=re.cloneNode();j.setAttribute("class","e-masked-tfoot");for(var S=[].slice.call(re.querySelectorAll("tr")),y=0;y<S.length;y++)j.appendChild(this.applyMaskRow(S[parseInt(y.toString(),10)].cloneNode(!0),S[parseInt(y.toString(),10)].getBoundingClientRect().height));f.appendChild(j)}if(a&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+gt).style.position="relative"),s.insertBefore(f,s.firstChild),l&&!(this.enableVirtualization&&n)){var W=p-f.getBoundingClientRect().height;W=W<0?0:W;var G=u.scrollTop<=W?u.scrollTop:W;this.enableVirtualization&&(G-=$a(D(s,".e-virtualtable")).height),f.style.transform="translate(0px,"+G+"px)"}return f},t.prototype.applyMaskRow=function(e,r){var n=e;n.removeAttribute("role"),n.removeAttribute("aria-rowindex"),n.removeAttribute("data-rowindex"),n.removeAttribute("data-uid"),n.classList.add("e-masked-row"),n.style.height=r+"px";for(var s=[].slice.call(n.childNodes),a=0;a<s.length;a++){var l=s[parseInt(a.toString(),10)],h=l.firstChild&&l.firstChild.classList&&l.firstChild.classList.contains("e-checkbox-wrapper");l.removeAttribute("role"),l.removeAttribute("tabindex"),l.removeAttribute("aria-label"),this.enableColumnVirtualization&&l.classList.contains("e-fixedfreeze")&&(F([l],["e-fixedfreeze","e-freezeleftborder","e-freezerightborder"]),T([l],["e-unfreeze"])),this.enableColumnVirtualization&&(l.classList.contains("e-leftfreeze")||l.classList.contains("e-rightfreeze"))||l.removeAttribute("data-colindex"),l.removeAttribute("aria-colindex"),l.removeAttribute("index"),l.removeAttribute("ej-mappingname"),l.removeAttribute("ej-mappingvalue"),l.removeAttribute("e-mappinguid"),l.removeAttribute("aria-expanded"),l.classList.add("e-masked-cell"),l.innerHTML=this.getShimmerTemplate(),l.classList.contains("e-recordplusexpand")||l.classList.contains("e-recordpluscollapse")?l.firstChild.classList.add("e-mask-group-intent"):l.classList.contains("e-gridchkbox")||h?l.firstChild.classList.add("e-mask-checkbox-intent"):l.classList.contains("e-rowdragdrop")?l.firstChild.classList.add("e-mask-drag-intent"):l.classList.contains("e-indentcell")&&(l.innerHTML="")}return n},t.prototype.createMaskRow=function(e,r){var n=e,s=r,a=this.createElement("tr",{className:"e-masked-row e-row"});this.rowRenderingMode!=="Vertical"&&(a.style.height=this.getRowHeight()+"px");for(var l=this.createElement("td",{className:"e-masked-cell e-rowcell"}),h=0,u=0;h<n.childNodes.length;h++){var p=n.childNodes[parseInt(h.toString(),10)],d=l.cloneNode();d.innerHTML=this.getShimmerTemplate(),p.classList.contains("e-group-intent")||p.classList.contains("e-detail-intent")||p.classList.contains("e-drag-intent")?p.classList.contains("e-group-intent")?d.firstChild.classList.add("e-mask-group-intent"):p.classList.contains("e-detail-intent")?d.firstChild.classList.add("e-mask-detail-intent"):p.classList.contains("e-drag-intent")&&d.firstChild.classList.add("e-mask-drag-intent"):(this.rowRenderingMode==="Vertical"&&s[parseInt(u.toString(),10)]&&d.setAttribute("data-cell",s[parseInt(u.toString(),10)].headerText?s[parseInt(u.toString(),10)].headerText:s[parseInt(u.toString(),10)].field),p.style.display==="none"?d.classList.add("e-hide"):(d.style.textAlign=s[parseInt(u.toString(),10)]&&s[parseInt(u.toString(),10)].textAlign?s[parseInt(u.toString(),10)].textAlign.toLowerCase():this.enableRtl?"right":"left",s[parseInt(u.toString(),10)]&&(s[parseInt(u.toString(),10)].type==="checkbox"||s[parseInt(u.toString(),10)].displayAsCheckBox)&&d.firstChild.classList.add("e-mask-checkbox-intent")),u++),a.appendChild(d)}return a},t.prototype.getShimmerTemplate=function(){return this.maskRowContentScroll?'<span class="e-mask e-skeleton e-skeleton-text"></span>':'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},t.prototype.addShimmerEffect=function(){this.maskRowContentScroll=!1;for(var e=[].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)")),r=0;r<e.length;r++)e[parseInt(r.toString(),10)]&&e[parseInt(r.toString(),10)].classList.add("e-shimmer-wave")},t.prototype.translateMaskRow=function(e){for(var r=e.target,n=r.querySelectorAll(".e-masked-table"),s=0;s<n.length;s++){var a=n[parseInt(s.toString(),10)];if(a){var l=r.scrollHeight-a.getBoundingClientRect().height;l=l<0?0:l;var h=r.scrollTop<=l?r.scrollTop:l;this.enableVirtualization&&(h-=$a(D(a,".e-virtualtable")).height),a.style.transform="translate(0px,"+h+"px)"}}},t.prototype.removeMaskRow=function(){if(!c(this.contentModule)){var e=this.getContent().firstChild;b.remove(e,"scroll",this.translateMaskRow)}this.headerMaskTable&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+gt).style.position="");for(var r=[this.headerMaskTable,this.contentMaskTable,this.footerContentMaskTable],n=0;n<r.length;n++){var s=r[parseInt(n.toString(),10)];s&&Se(s)}this.headerMaskTable=null,this.contentMaskTable=null,this.footerContentMaskTable=null},t.prototype.refreshMaskRow=function(){var e=this.getContent().firstChild;if(!(!this.isInitialLoad&&!this.getColumns().length)&&this.contentMaskTable&&e.querySelector(".e-masked-table")){var r=e;this.enableVirtualization&&(r=r.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(r)}},t.prototype.refreshMaskRowColgroupWidth=function(e){var r=e.querySelector("table:not(.e-masked-table)"),n=r.querySelector(Ht).cloneNode(!0),s=e.querySelector(".e-masked-table");n.removeAttribute("id"),n.setAttribute("class","e-masked-colgroup");for(var a=0;a<n.childNodes.length;a++)n.childNodes[parseInt(a.toString(),10)].removeAttribute("class");Se(s.querySelector(".e-masked-colgroup")),s.insertBefore(n,s.firstChild),s.style.width=r.getBoundingClientRect().width+"px"},t.prototype.updateStackedFilter=function(){this.allowFiltering&&this.filterSettings.type==="FilterBar"&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},t.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var e=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!c(e))for(var r=0;r<e.length;r++)!c(e[parseInt(r.toString(),10)].hideAtMedia)&&(c(e[parseInt(r.toString(),10)].visible)||e[parseInt(r.toString(),10)].visible)&&this.pushMediaColumn(e[parseInt(r.toString(),10)],r)}this.updateFrozenColumnsWidth()},t.prototype.pushMediaColumn=function(e,r){this.mediaCol.push(e),this.media[e.uid]=window.matchMedia(e.hideAtMedia),this.mediaQueryUpdate(r,this.media[e.uid]),this.mediaBindInstance[parseInt(r.toString(),10)]=this.mediaQueryUpdate.bind(this,r),this.media[e.uid].addListener(this.mediaBindInstance[parseInt(r.toString(),10)])},t.prototype.updateMediaColumns=function(e){if(!this.enableColumnVirtualization){for(var r=this.getColumnIndexByUid(e.uid),n=0;n<this.mediaCol.length;n++)if(e.uid===this.mediaCol[parseInt(n.toString(),10)].uid){this.mediaCol.splice(n,1);return}this.pushMediaColumn(e,r)}},t.prototype.mediaQueryUpdate=function(e,r){var n=this.getColumns()[parseInt(e.toString(),10)];this.mediaCol.some(function(s){return s.uid===n.uid})&&(n.visible=r.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,n.visible?this.showHider.show(n.headerText,"headerText"):this.showHider.hide(n.headerText,"headerText")))},t.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var e=this.element.querySelector("."+un);this.aggregates.length&&this.element.scrollHeight>parseInt(this.height.toString(),10)&&e&&T([e],["e-footerpadding"]);var r=this.getColumns().filter(function(n){return n.type==="checkbox"});(r.length===0||r.length&&this.selectionSettings.checkboxMode==="ResetOnRowClick")&&(this.isCheckBoxSelection=!1),this.rowRenderingMode==="Vertical"&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),F([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh(),this.isFrozenGrid()&&this.isAutoGenerateColumns&&(this.widthService.setWidthToColumns(),this.isAutoGenerateColumns=!1)},t.prototype.removeMediaListener=function(){for(var e=0;e<this.mediaCol.length;e++)this.media[this.mediaCol[parseInt(e.toString(),10)].uid].removeListener(this.mediaBindInstance[this.mediaCol[parseInt(e.toString(),10)].index])},t.prototype.eventInitializer=function(){},t.prototype.destroy=function(){var e=this.element;if(e){var r=!!(e.querySelector("."+Tt)&&e.querySelector("."+vi));r&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(yi,{}),this.destroyDependentModules(),this.isReact&&this.destroyTemplate(["template"]),this.isVue&&this.destroyTemplate(),r&&o.prototype.destroy.call(this),this.toolTipObj.destroy(),this.isReact&&!Q.isIE&&(this.element.innerHTML="");for(var n=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],s=0;s<n.length;s++)this[n[parseInt(s.toString(),10)]]&&(this[n[parseInt(s.toString(),10)]]=null);this.element.innerHTML="",ot(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"])}},t.prototype.destroyDependentModules=function(){var e=this.element;!e||!e.querySelector("."+Tt)&&!e.querySelector("."+vi)||(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())},t.prototype.getModuleName=function(){return"grid"},t.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):this.element.classList.remove("e-afenabled")},t.prototype.setCSSClass=function(e){this.cssClass&&T([this.element],this.cssClass.split(" ")),e&&F([this.element],e.split(" "))},t.prototype.onPropertyChanged=function(e,r){var n=!1,s=!1,a=!1,l,h={requestType:"refresh"},u=null,p=null;if(!this.isDestroyed){this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();var d=Object.keys(e);d.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),s=!0);for(var f=0,g=d;f<g.length;f++){var v=g[f];switch(v){case"allowPaging":this.notify(lt,{module:"pager",enable:this.allowPaging}),n=!0,this.height==="100%"&&this.scrollModule.refresh();break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(Bt,{module:"pager",properties:e.pageSettings});break}if(this.pagerModule&&this.pagerModule.isCancel){this.pagerModule.isCancel=!1;return}this.notify(Bt,{module:"pager",properties:e.pageSettings}),(c(e.pageSettings.currentPage)&&c(e.pageSettings.pageSize)&&c(e.pageSettings.totalRecordsCount)||!c(r.pageSettings)&&e.pageSettings.currentPage!==r.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(n=!0),this.pagerModule&&this.pagerModule.isCancel&&(this.pagerModule.isCancel=!1);break;case"allowSorting":this.notify(lt,{module:"sort",enable:this.allowSorting}),n=!0,l=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(lt,{module:"filter",enable:this.allowFiltering}),n=!0,this.filterSettings.type!=="FilterBar"?this.refreshHeader():this.height==="100%"&&this.scrollModule.refresh();break;case"height":case"width":this.notify(lt,{module:"scroll",properties:{width:e.width,height:e.height}}),this.allowPaging&&this.pagerModule.refresh();break;case"allowReordering":this.headerModule.refreshUI(),l=!0;break;case"allowRowDragAndDrop":this.notify(lt,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(lt,{module:"selection",enable:this.allowSelection});break;case"cssClass":this.setCSSClass(r.cssClass);break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=nt(this.rowTemplate),n=!0;break;case"emptyRecordTemplate":this.emptyRecordTemplateFn=nt(this.emptyRecordTemplate),n=!0;break;case"detailTemplate":this.detailTemplateFn=nt(this.detailTemplate),n=!0;break;case"allowGrouping":this.notify(lt,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),n=!0,l=!0,this.height==="100%"&&this.scrollModule.refresh();break;case"enableInfiniteScrolling":case"childGrid":if(n=!0,u=this.parentDetails?document.querySelector("#"+this.parentDetails.parentID):null,p=u?u.ej2_instances[0]:null,this.childGrid&&p&&c(p.childGrid.childGrid)){var m=Object.assign({},p.childGrid,{childGrid:e.childGrid});for(p.setProperties({childGrid:m},!0);!c(p.parentDetails);){var y=document.querySelector("#"+p.parentDetails.parentID),I=y?y.ej2_instances[0]:null;if(I){var S=Object.assign({},I.childGrid);S.childGrid=p.childGrid,I.setProperties({childGrid:S},!0)}p=I}}this.headerModule.refreshUI();break;case"toolbar":this.notify(lt,{module:"toolbar"}),this.height==="100%"&&this.scrollModule.refresh();break;case"groupSettings":this.notify(Bt,{module:"group",properties:e.groupSettings,oldProperties:r.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(n=!0),this.notify(lt,{module:"aggregate",properties:e}),this.height==="100%"&&this.scrollModule.refresh();break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"enableColumnVirtualization":case"currencyCode":case"locale":this.log("frozen_rows_columns"),a=!0,s=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(n=!0),this.getDataModule().isQueryInvokedFromData=!1;break;case"autoFit":this.autoFit?this.preventAdjustColumns():this.restoreAdjustColumns();break;default:this.extendedPropertyChange(v,e,s)}}l&&this.updateDefaultCursor(),s?a||this.getFrozenColumns()||this.frozenRows?this.freezeRefresh():this.refresh():n&&(this.notify(xn,h),n=!1,this.maintainSelection(e.selectedRowIndex))}},t.prototype.extendedPropertyChange=function(e,r,n){switch(e){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=r.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),this.height!=="auto"&&(this.scrollModule.removePadding(!r.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=r.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=r.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&!this.enableAdaptiveUI&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=r.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),this.filterSettings.type==="FilterBar"&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify(Op,{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?T([this.element],"e-grid-min-height"):F([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(lt,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(lt,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(lt,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(lt,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(Bt,{module:"filter",properties:r.filterSettings});break;case"searchSettings":this.notify(Bt,{module:"search",properties:r.searchSettings});break;case"sortSettings":this.notify(Bt,{module:"sort"});break;case"selectionSettings":this.notify(Bt,{module:"selection",properties:r.selectionSettings});break;case"editSettings":this.notify(Bt,{module:"edit",properties:r.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(an,{case:"textwrap",isModeChg:e==="textWrapSettings"});break;case"dataSource":var s=this.getDataModule().getState();if(this.allowSelection&&this.isPersistSelection&&!(s&&s.isPending)&&this.clearSelection(),!c(this.dataSource)&&this.dataSource.result&&(this.isVirtualAdaptive=!1),Object.getPrototypeOf(r).deepWatch)for(var a=this.getPrimaryKeyFieldNames()[0],l=0,h=Object.keys(r.dataSource);l<h.length;l++)this.setRowData(N(a,this.dataSource[h[parseInt(l.toString(),10)]]),this.dataSource[h[parseInt(l.toString(),10)]]);else if(s.isPending){var u=c(this.dataSource)?[]:this.dataSource.result,p=s.group||[];if(p.length&&!this.groupSettings.enableLazyLoading&&!(u.length&&u[0].field))for(var l=0;l<p.length;l++)u=A.group(u,p[parseInt(l.toString(),10)],s.aggregates||[]);this.dataSource={result:u,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),s.resolver(this.dataSource)}else this.getDataModule().setState({isDataChanged:!1}),this.notify(Bs,{}),n||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(Gs,{}));this.scrollRefresh();break;case"enableHover":var d=r.enableHover?T:F;d([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(r.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(gd,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(vd,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(r.enableStickyHeader);break}},t.prototype.maintainSelection=function(e){var r=this;if(e!==-1){var n=function(){r.selectRow(e),r.off(st,n)};this.on(st,n,this)}},t.prototype.setProperties=function(e,r){o.prototype.setProperties.call(this,e,r);var n="filterSettings";e[""+n]&&this.filterModule&&r&&this.filterModule.refreshFilter()},t.prototype.getTablesCount=function(){return this.tablesCount},t.prototype.updateDefaultCursor=function(){for(var e=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),r=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),n=this.getColumns(),s=0;s<e.length;s++){var a=e[parseInt(s.toString(),10)];(this.allowGrouping||this.allowReordering||this.allowSorting)&&(!n[parseInt(s.toString(),10)].allowReordering||!n[parseInt(s.toString(),10)].allowSorting||!n[parseInt(s.toString(),10)].allowGrouping?a.classList.add("e-defaultcursor"):a.classList.add("e-mousepointer"))}for(var l=0;l<r.length;l++)this.allowReordering&&r[parseInt(l.toString(),10)].classList.add("e-mousepointer")},t.prototype.updateColumnModel=function(e,r){for(var n=0,s=e.length;n<s;n++)e[parseInt(n.toString(),10)].columns?this.updateColumnModel(e[parseInt(n.toString(),10)].columns,!0):this.columnModel.push(e[parseInt(n.toString(),10)]);(c(r)||!r)&&this.updateLockableColumns()},t.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},t.prototype.isFrozenGrid=function(){return this.getFrozenColumns()!==0||this.frozenLeftColumns.length!==0||this.frozenRightColumns.length!==0||this.fixedColumns.length!==0},t.prototype.getFrozenMode=function(){return this.frozenName},t.prototype.updateLockableColumns=function(){for(var e=this.columnModel,r=0,n=0,s=this.getFrozenColumns(),a=0;a<e.length;a++)e[parseInt(a.toString(),10)].lockColumn&&(a<s?(e.splice(r,0,e.splice(a,1)[0]),r++):(e.splice(s+n,0,e.splice(a,1)[0]),n++))},t.prototype.checkLockColumns=function(e){for(var r=0;r<e.length;r++)e[parseInt(r.toString(),10)].columns?this.checkLockColumns(e[parseInt(r.toString(),10)].columns):e[parseInt(r.toString(),10)].lockColumn&&this.lockcolPositionCount++},t.prototype.leftrightColumnWidth=function(e){var r=e==="left"?this.getFrozenLeftColumns():e==="right"?this.getFrozenRightColumns():[],n=0;return r.filter(function(s){s.visible&&(n+=parseInt(s.width.toString(),10))}),n},t.prototype.getColumns=function(e){var r=this,n=this.inViewIndexes.map(function(f){return f-r.groupSettings.columns.length}).filter(function(f){return f>-1}),s=n.length;(!this.enableColumnVirtualization||c(this.columnModel)||this.columnModel.length===0||e)&&(this.columnModel=[],this.updateColumnModel(this.columns));var a=s===0?this.columnModel:this.columnModel.slice(n[0],n[s-1]+1),l=[],h=[],u=[],p=this.enableColumnVirtualization&&this.isPreparedFrozenColumns&&s===0;p&&(this.frozenRightColumns=[],this.frozenLeftColumns=[]);for(var d=0;d<a.length;d++)a[parseInt(d.toString(),10)].freeze==="Left"||a[parseInt(d.toString(),10)].isFrozen?(l.push(a[parseInt(d.toString(),10)]),p&&this.frozenLeftColumns.push(a[parseInt(d.toString(),10)])):a[parseInt(d.toString(),10)].freeze==="Right"?(h.push(a[parseInt(d.toString(),10)]),p&&this.frozenRightColumns.push(a[parseInt(d.toString(),10)])):u.push(a[parseInt(d.toString(),10)]);return this.enableColumnVirtualization&&this.isFrozenGrid()&&(this.frozenLeftColumns.length&&(l=this.frozenLeftColumns),this.frozenRightColumns.length&&(h=this.frozenRightColumns)),l.concat(u).concat(h)},t.prototype.getStackedHeaderColumnByHeaderText=function(e,r){for(var n=0;n<r.length;n++){var s=r[parseInt(n.toString(),10)];if(s.field===e||s.headerText===e){this.stackedColumn=s;break}else s.columns&&this.getStackedHeaderColumnByHeaderText(e,s.columns)}return this.stackedColumn},t.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},t.prototype.getQuery=function(){return this.query},t.prototype.getLocaleConstants=function(){return this.defaultLocale},t.prototype.setColumnIndexesInView=function(e){this.inViewIndexes=e},t.prototype.getVisibleColumns=function(){return this.getCurrentVisibleColumns()},t.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},t.prototype.setGridHeaderContent=function(e){this.headerModule.setPanel(e)},t.prototype.getContentTable=function(){return this.contentModule.getTable()},t.prototype.setGridContentTable=function(e){this.contentModule.setTable(e)},t.prototype.getContent=function(){return this.contentModule.getPanel()},t.prototype.setGridContent=function(e){this.contentModule.setPanel(e)},t.prototype.getHeaderTable=function(){return this.headerModule.getTable()},t.prototype.setGridHeaderTable=function(e){this.headerModule.setTable(e)},t.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName(un)[0],this.footerElement},t.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName(un)[0],this.footerElement.firstChild.firstChild},t.prototype.getPager=function(){return this.gridPager},t.prototype.setGridPager=function(e){this.gridPager=e},t.prototype.getRowByIndex=function(e){return this.enableVirtualization&&this.groupSettings.enableLazyLoading?this.lazyLoadRender.getRowByIndex(e):this.contentModule.getRowByIndex(e)},t.prototype.getMovableRowByIndex=function(e){return this.contentModule.getRowByIndex(e)},t.prototype.getFrozenRowByIndex=function(e){return this.contentModule.getRowByIndex(e)},t.prototype.getRows=function(){return this.contentModule.getRowElements()},t.prototype.getFrozenRightRowByIndex=function(e){return this.contentModule.getRowByIndex(e)},t.prototype.getRowInfo=function(e){var r=e,n={target:e};if(!c(e)&&c(M(r,"e-detailrowcollapse")&&c(M(r,"e-recordplusexpand")))){var s=D(r,"."+Me);if(!s){var a=D(r,"."+ft);if(!c(a)&&!a.classList.contains("e-addedrow")){var l=this.getRowObjectFromUID(a.getAttribute("data-uid")),h=parseInt(a.getAttribute(Ke),10);n={row:a,rowData:l.data,rowIndex:h}}return n}var u=parseInt(s.getAttribute(rt),10),p=D(s,"."+ft);if(!c(s)&&!isNaN(u)&&!c(p)){var h=parseInt(p.getAttribute(Ke),10),d=this.contentModule.getRows(),f=u+this.getIndentCount(),g=d.filter(function(I){return I.uid===p.getAttribute("data-uid")}),v={},m=void 0;Object.keys(g).length&&(v=g[0].data,m=g[0].cells[parseInt(f.toString(),10)].column),n={cell:s,cellIndex:u,row:p,rowIndex:h,rowData:v,column:m,target:e}}}return n},t.prototype.getMovableRows=function(){return this.contentModule.getRowElements()},t.prototype.getFrozenRightRows=function(){return this.contentModule.getRowElements()},t.prototype.getDataRows=function(){return this.getAllDataRows()},t.prototype.getAllDataRows=function(e){if(c(this.getContentTable().querySelector(Le)))return[];var r=this.getContentTable().querySelector(Le),n=[].slice.call(r.children);if(this.frozenRows){var s=this.getHeaderTable().querySelector(Le),a=[].slice.call(s.children);n=this.addMovableRows(a,n)}var l=this.generateDataRows(n,e);return l},t.prototype.addMovableRows=function(e,r){for(var n=0,s=r.length;n<s;n++)e.push(r[parseInt(n.toString(),10)]);return e},t.prototype.generateDataRows=function(e,r){for(var n=[],s=0,a=e.length;s<a;s++)e[parseInt(s.toString(),10)].classList.contains(ft)&&(!e[parseInt(s.toString(),10)].classList.contains("e-hiddenrow")||r)&&(this.isCollapseStateEnabled()?n[parseInt(e[parseInt(s.toString(),10)].getAttribute("data-rowindex"),10)]=e[parseInt(s.toString(),10)]:n.push(e[parseInt(s.toString(),10)]));return n},t.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},t.prototype.getAllMovableDataRows=function(e){return this.getAllDataRows(e)},t.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},t.prototype.getAllFrozenDataRows=function(e){return this.getAllDataRows(e)},t.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},t.prototype.getAllFrozenRightDataRows=function(e){return this.getAllDataRows(e)},t.prototype.setCellValue=function(e,r,n){var s="cells",a="data",l="index",h="uid",u=this.getPrimaryKeyFieldNames()[0],p=new Lt(this,this.serviceLocator),d=this.getColumnIndexByField(r),f=this.getColumnByField(r),g=this.contentModule.getRows(),v=g.filter(function(R){return N(u,R.data)===e})[0],m=v?this.element.querySelector("[data-uid="+v[""+h]+"]"):null;if(!c(m)){typeof n=="string"&&(n=this.sanitize(n)),ht(r,n,v[""+a]),this.isRowDragable();var y=this.enableVirtualization?m.children[parseInt(d.toString(),10)]:this.getCellFromIndex(v[""+l],d);if(!c(y)){var I=0;this.groupSettings.columns.length&&(d=d+this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&d++,this.isRowDragable()&&d++;var S=v[""+s][d-I];p.refreshTD(y,S,v[""+a],{index:v[""+l]}),this.isReact&&(y=this.enableVirtualization?m.children[parseInt(d.toString(),10)]:this.getCellFromIndex(v[""+l],d)),this.aggregates.length>0&&(this.notify(Ms,{}),this.groupSettings.columns.length>0&&this.notify(Fa,{})),!c(v)&&!c(v.changes)&&(v.changes[""+r]=n),this.trigger(Ls,{cell:y,column:f,data:v[""+a]}),this.isReact&&y.getAttribute("tabindex")==="0"&&y.classList.contains("e-focused")&&y.focus()}}},t.prototype.refreshReactColumnTemplateByUid=function(e,r){var n=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,function(){var s=!!(n.childGrid&&n.element.querySelectorAll(".e-childgrid").length),a=s?n.getContentTable().querySelectorAll(".e-row"):n.getDataRows();n.refreshReactTemplateTD(a,s),r&&n.renderTemplates()})},t.prototype.refreshReactTemplateTD=function(e,r,n){for(var s="cells",a="index",l=this.getIndentCount(),h=0,u=!1,p=0;p<e.length;p++){var d=this.getRowObjectFromUID(e[parseInt(p.toString(),10)].getAttribute("data-uid"));if(r&&!d&&M(e[parseInt(p.toString(),10)],"e-childgrid")){var f=M(e[parseInt(p.toString(),10)],"e-childgrid").ej2_instances[0];d=f.getRowObjectFromUID(e[parseInt(p.toString(),10)].getAttribute("data-uid")),h=f.getIndentCount(),u=!0}if(d&&d.isDataRow&&!c(d.index)&&!e[parseInt(p.toString(),10)].classList.contains("e-editedrow"))for(var g=0;g<d[""+s].length;g++){var v=d[""+s][parseInt(g.toString(),10)];if(v.isTemplate){var m=new Lt(this,this.serviceLocator),y=r?e[parseInt(p.toString(),10)].children[v.index+(u?h:l)]:this.getCellFromIndex(p,n?v.index:g-l);m.refreshTD(y,v,d.data,{index:d[""+a]})}}u=!1}},t.prototype.refreshGroupCaptionFooterTemplate=function(){for(var e=!!(this.childGrid&&this.element.querySelectorAll(".e-childgrid").length),r=this.getContentTable().querySelectorAll(".e-groupcaptionrow, .e-groupfooterrow"),n=0;n<r.length;n++){var s=this,a=this.getRowObjectFromUID(r[parseInt(n.toString(),10)].getAttribute("data-uid"));if(e&&!a&&M(r[parseInt(n.toString(),10)],"e-childgrid")&&(s=M(r[parseInt(n.toString(),10)],"e-childgrid").ej2_instances[0],a=s.getRowObjectFromUID(r[parseInt(n.toString(),10)].getAttribute("data-uid"))),a){var l=a.cells.filter(function(u){return u.isDataCell}),h={cells:l,data:a.data,dataUid:a.uid};s.notify(Cp,h)}}},t.prototype.refreshReactHeaderTemplateByUid=function(e){if(this.isReact)for(var r="cells",n=this.headerModule.rows,s=this.getNormalizedColumnIndex(e),a=function(u){var p=n[parseInt(u.toString(),10)][""+r][parseInt(s.toString(),10)];if(p&&p.column.uid===e){var d=new rh(l,l.serviceLocator),f=M(l.element.querySelectorAll("[e-mappinguid="+e+"]")[0],"e-templatecell");d.refresh(p,f);var g=l.sortSettings.columns,v=g.findIndex(function(I){return I.field===p.column.field});if(v!==-1){var m=l.getColumnHeaderByField(p.column.field);l.ariaService.setSort(m,g[parseInt(v.toString(),10)].direction.toLowerCase()),g.length>1&&m.querySelector(".e-headercelldiv").insertBefore(l.createElement("span",{className:"e-sortnumber",innerHTML:(v+1).toString()}),m.querySelector(".e-headertext"));var y=m.querySelector(".e-sortfilterdiv");g[parseInt(v.toString(),10)].direction==="Ascending"?ot(y,["e-ascending","e-icon-ascending"],[]):ot(y,["e-descending","e-icon-descending"],[])}}},l=this,h=0;h<n.length;h++)a(h)},t.prototype.setRowData=function(e,r){var n="uid",s=this.contentModule.getRows(),a=this.getPrimaryKeyFieldNames()[0];this.groupSettings.columns.length>0&&this.aggregates.length>0&&(s=s.filter(function(p){return p.isDataRow}));var l=s.filter(function(p){return N(a,p.data)===e})[0],h=l?[].slice.call(this.element.querySelectorAll("[data-uid="+l[""+n]+"]")):void 0;if(!c(l)&&h.length){if(l.changes=r,this.frozenRows){var u=this.getRowsObject()[l.index];this.setFrozenRowData(u,r)}else this.setFrozenRowData(l,r);this.aggregates.length>0&&(this.notify(Ms,{}),this.groupSettings.columns.length>0&&this.notify(Fa,{}))}else return},t.prototype.setFrozenRowData=function(e,r){var n=new kr(this.serviceLocator,null,this);e.changes=r,Uf(e,this.getForeignKeyColumns(),e.changes),n.refresh(e,this.getColumns(),!0)},t.prototype.getCellFromIndex=function(e,r){var n=this.getColumnByIndex(r);return tg(this,n,e,r)},t.prototype.getMovableCellFromIndex=function(e,r){return this.getCellFromIndex(e,r)},t.prototype.getFrozenRightCellFromIndex=function(e,r){return this.getCellFromIndex(e,r)},t.prototype.getColumnHeaderByIndex=function(e){return this.getHeaderTable().getElementsByClassName("e-headercell")[parseInt(e.toString(),10)]},t.prototype.getMovableColumnHeaderByIndex=function(e){return this.getColumnHeaderByIndex(e)},t.prototype.getFrozenRightColumnHeaderByIndex=function(e){return this.getColumnHeaderByIndex(e)},t.prototype.getFrozenLeftColumnHeaderByIndex=function(e){return this.getColumnHeaderByIndex(e)},t.prototype.getRowObjectFromUID=function(e){var r=this.contentModule.getRows(),n=this.rowObject(r,e);return c(n)&&this.enableVirtualization&&this.groupSettings.columns.length>0&&(n=this.rowObject(this.vRows,e)),n},t.prototype.rowObject=function(e,r){if(e)for(var n=0,s=e;n<s.length;n++){var a=s[n];if(a.uid===r)return a}return null},t.prototype.getRowsObject=function(){return this.contentModule.getRows()},t.prototype.getMovableRowsObject=function(){return this.contentModule.getRows()},t.prototype.getFrozenRightRowsObject=function(){return this.contentModule.getRows()},t.prototype.getColumnHeaderByField=function(e){var r=this.getColumnByField(e);return r?this.getColumnHeaderByUid(r.uid):void 0},t.prototype.getColumnHeaderByUid=function(e){var r=this.getHeaderContent().querySelector("[e-mappinguid="+e+"]");return r?r.parentElement:void 0},t.prototype.getColumnByIndex=function(e){var r;return this.getColumns().some(function(n,s){return r=n,s===e}),r},t.prototype.getColumnByField=function(e){return Gi(this.getColumns(),function(r){if(r.field===e)return r})[0]},t.prototype.getColumnIndexByField=function(e){for(var r=this.getColumns(),n=0;n<r.length;n++)if(r[parseInt(n.toString(),10)].field===e)return n;return-1},t.prototype.getColumnByUid=function(e){return Gi(this.getColumns().concat(this.getStackedColumns(this.columns)),function(r){if(r.uid===e)return r})[0]},t.prototype.getStackedColumns=function(e,r){r===void 0&&(r=[]);for(var n=0,s=e;n<s.length;n++){var a=s[n];a.columns&&(r.push(a),this.getStackedColumns(a.columns,r))}return r},t.prototype.getColumnIndexByUid=function(e){var r=Gi(this.getColumns(),function(n,s){if(n.uid===e)return s})[0];return c(r)?-1:r},t.prototype.getUidByColumnField=function(e){return Gi(this.getColumns(),function(r){if(r.field===e)return r.uid})[0]},t.prototype.getNormalizedColumnIndex=function(e){var r=this.getColumnIndexByUid(e);return r+this.getIndentCount()},t.prototype.getIndentCount=function(){var e=0;return this.allowGrouping&&(e+=this.groupSettings.columns.length),this.isDetail()&&e++,this.isRowDragable()&&c(this.rowDropSettings.targetID)&&e++,e},t.prototype.getColumnFieldNames=function(){for(var e=[],r,n=0,s=this.getColumns().length;n<s;n++)r=this.getColumns()[parseInt(n.toString(),10)],r.visible&&e.push(r.field);return e},t.prototype.getRowTemplate=function(){return this.rowTemplateFn},t.prototype.getEmptyRecordTemplate=function(){return this.emptyRecordTemplateFn},t.prototype.getDetailTemplate=function(){return this.detailTemplateFn},t.prototype.getEditTemplate=function(){return this.editTemplateFn},t.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},t.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},t.prototype.getPrimaryKeyFieldNames=function(){for(var e=[],r=0;r<this.columnModel.length;r++)this.columnModel[parseInt(r.toString(),10)].isPrimaryKey&&e.push(this.columnModel[parseInt(r.toString(),10)].field);return e},t.prototype.refresh=function(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},t.prototype.refreshHeader=function(){this.headerModule.refreshUI()},t.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},t.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},t.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},t.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},t.prototype.getSelectedColumnsUid=function(){var e=this,r=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(function(n){return r.push(e.getColumns()[parseInt(n.toString(),10)].uid)}),r},t.prototype.getDataModule=function(){return this.renderModule.data},t.prototype.showColumns=function(e,r){r=r||"headerText",this.showHider.show(e,r)},t.prototype.hideColumns=function(e,r){r=r||"headerText",this.showHider.hide(e,r)},t.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},t.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount||this.rightcount},t.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount||this.leftcount},t.prototype.getMovableColumnsCount=function(){return this.movableCount||this.movablecount},t.prototype.updateFrozenColumnsWidth=function(){if(this.isFrozenGrid()&&!this.enableColumnVirtualization)for(var e=this.getColumns(),r=!0,n=0,s=0,a=0,l=function(p){var d=e[parseInt(p.toString(),10)];if(c(d.width)&&(d.freeze==="Left"||d.freeze==="Right"||d.freeze==="Fixed"||d.isFrozen)&&(d.width=Math.max(200,d.minWidth?parseFloat(d.minWidth.toString()):0)),d.width==="auto"&&(d.freeze==="Left"||d.freeze==="Right"||d.freeze==="Fixed"||d.isFrozen)){var f=0;if(r){e.filter(function(v){if(v.visible&&(v.width==="auto"&&n++,v.width!=="auto")){var m=c(v.width)?Math.max(200,v.minWidth?parseFloat(v.minWidth.toString()):0):parseFloat(v.width.toString());f+=m}});var g=h.isPercentageWidthGrid()||h.width==="auto"?h.element.getBoundingClientRect().width:parseFloat(h.width.toString());s=h.height==="auto"?g-f:g-f-fi(),s<0&&(s=0),a=parseFloat((s/n).toString()),e.filter(function(v){v.visible&&v.minWidth&&parseFloat(v.minWidth.toString())>a&&(s=s-parseFloat(v.minWidth.toString()),n--)}),r=!1}d.minWidth&&parseFloat(d.minWidth.toString())>a?d.width=parseFloat(d.minWidth.toString()):d.width=s/n}},h=this,u=0;u<e.length;u++)l(u)},t.prototype.refreshSplitFrozenColumn=function(){this.splitFrozenCount(this.columns),this.updateFrozenColumnsWidth(),this.isAutoGenerateColumns=!0},t.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.fixedColumns=[],this.splitFrozenCount(this.columns),this.leftcount=this.frozenLeftCount,this.rightcount=this.frozenRightCount,this.movablecount=this.movableCount,this.frozenLeftCount&&!this.frozenRightCount?this.frozenName="Left":this.frozenRightCount&&!this.frozenLeftCount?this.frozenName="Right":this.frozenLeftCount&&this.frozenRightCount?this.frozenName="Left-Right":this.frozenColumns||this.frozenRows?this.frozenName="Left":this.frozenName=void 0},t.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},t.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},t.prototype.getVisibleMovableCount=function(){return this.visibleMovable},t.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},t.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},t.prototype.getMovableColumns=function(){return this.movableColumns},t.prototype.splitStackedColumns=function(e){for(var r=0;r<e.length;r++)e[parseInt(r.toString(),10)].columns?this.splitStackedColumns(e[parseInt(r.toString(),10)].columns):e[parseInt(r.toString(),10)].freeze==="Left"||e[parseInt(r.toString(),10)].isFrozen?(e[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenLeft++,this.leftcount++):e[parseInt(r.toString(),10)].freeze==="Right"?(e[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenRight++,this.rightcount++):e[parseInt(r.toString(),10)].freeze==="Fixed"?(e[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenFixed++,this.fixedcount++):(e[parseInt(r.toString(),10)].visible!==!1&&this.visibleMovable++,this.movablecount++)},t.prototype.pushStackedColumns=function(e,r,n,s,a){n[parseInt(r.toString(),10)]=s.headerText;for(var l=0;l<e.length;l++)if(e[parseInt(l.toString(),10)].columns)r=r+1,this.pushStackedColumns(e[parseInt(l.toString(),10)].columns,r,n,e[parseInt(l.toString(),10)],a),r=r-1;else{var h=[];h=n.slice().slice(0,r+1),e[parseInt(l.toString(),10)].freeze==="Left"||e[parseInt(l.toString(),10)].isFrozen?(this.stackedLeft.push(h),this.stackedarrayLeft.push(e[parseInt(l.toString(),10)])):e[parseInt(l.toString(),10)].freeze==="Right"?(this.stackedRight.push(h),this.stackedarrayRight.push(e[parseInt(l.toString(),10)])):e[parseInt(l.toString(),10)].freeze==="Fixed"?(this.stackedFixed.push(h),this.stackedarrayFixed.push(e[parseInt(l.toString(),10)])):(this.stackedMovable.push(h),this.stackedarrayMovable.push(e[parseInt(l.toString(),10)]))}},t.prototype.pushallcol=function(e,r,n,s,a){if(n.headerText===r)a?n.columns.push(s):n.columns.push({headerText:e,columns:[]});else if(n.columns&&n.columns.length)for(var l=0;l<n.columns.length;l++)this.pushallcol(e,r,n.columns[parseInt(l.toString(),10)],s,a)},t.prototype.resetStackedColumns=function(e,r,n){for(var s={},a=[],l=1;l<=e.length;l++)for(var h=e[l-1],u=0;u<h.length;u++)if(!s.columns&&l===1?(s={headerText:h[parseInt(u.toString(),10)],columns:[]},a.push(h[parseInt(u.toString(),10)])):a.indexOf(h[parseInt(u.toString(),10)])===-1&&(this.pushallcol(h[parseInt(u.toString(),10)],h[u-1],s),a.push(h[parseInt(u.toString(),10)])),u===h.length-1){this.pushallcol(null,h[parseInt(u.toString(),10)],s,r[l-1],!0);for(var p=0;p!==e.length-1&&l!==e.length;)h.toString()===e[parseInt(l.toString(),10)].toString()&&(l++,this.pushallcol(null,h[parseInt(u.toString(),10)],s,r[l-1],!0)),p++}n==="Left"?this.frozenLeftColumns.push(s):n==="Right"?this.frozenRightColumns.push(s):this.movableColumns.push(s)},t.prototype.splitFrozenCount=function(e){if(this.frozenColumns||this.changedProperties&&this.changedProperties.frozenColumns===0){var r=!this.enableColumnVirtualization||this.enableColumnVirtualization&&this.isPreparedFrozenColumns?this.enableColumnVirtualization&&this.columnModel&&this.columnModel.length?this.columnModel:this.getColumns():this.columns;if(!this.changedProperties||this.changedProperties&&!this.changedProperties.frozenColumns)for(var n=0;n<r.length;n++)this.frozenColumns>n?r[parseInt(n.toString(),10)].freeze="Left":r[parseInt(n.toString(),10)].freeze==="Right"||r[parseInt(n.toString(),10)].freeze==="Fixed"?r[parseInt(n.toString(),10)].freeze=r[parseInt(n.toString(),10)].freeze:r[parseInt(n.toString(),10)].freeze=void 0}for(var n=0;n<e.length;n++)if(e[parseInt(n.toString(),10)].columns){this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0;var s=[];this.splitStackedColumns(e[parseInt(n.toString(),10)].columns),this.leftcount&&!this.rightcount&&!this.movablecount&&!this.fixedcount?(this.frozenLeftCount+=this.leftcount,this.frozenLeftColumns.push(e[parseInt(n.toString(),10)])):this.rightcount&&!this.leftcount&&!this.movablecount&&!this.fixedcount?(this.frozenRightCount+=this.rightcount,this.frozenRightColumns.push(e[parseInt(n.toString(),10)])):this.movablecount&&!this.leftcount&&!this.rightcount&&!this.fixedcount?(this.movableCount+=this.movablecount,this.movableColumns.push(e[parseInt(n.toString(),10)])):this.fixedcount&&!this.leftcount&&!this.rightcount&&!this.movablecount?(this.fixedCount+=this.fixedcount,this.fixedColumns.push(e[parseInt(n.toString(),10)]),this.movableCount+=this.movablecount,this.movableColumns.push(e[parseInt(n.toString(),10)])):(this.frozenLeftCount+=this.leftcount,this.frozenRightCount+=this.rightcount,this.movableCount+=this.movablecount,this.fixedCount+=this.fixedcount,this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0,this.stackedLeft=[],this.stackedRight=[],this.stackedFixed=[],this.stackedMovable=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayFixed=[],this.stackedarrayMovable=[],this.pushStackedColumns(e[parseInt(n.toString(),10)].columns,0,s,e[parseInt(n.toString(),10)],{headerText:e[parseInt(n.toString(),10)].headerText,columns:[]}),this.stackedarrayLeft.length&&this.resetStackedColumns(this.stackedLeft,this.stackedarrayLeft,"Left"),this.stackedarrayRight.length&&this.resetStackedColumns(this.stackedRight,this.stackedarrayRight,"Right"),this.stackedarrayFixed.length&&this.resetStackedColumns(this.stackedFixed,this.stackedarrayFixed,"Fixed"),this.stackedarrayMovable.length&&this.resetStackedColumns(this.stackedMovable,this.stackedarrayMovable,"Movable"),this.stackedLeft=[],this.stackedRight=[],this.stackedMovable=[],this.stackedFixed=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayMovable=[],this.stackedarrayFixed=[])}else e[parseInt(n.toString(),10)].freeze==="Right"?(e[parseInt(n.toString(),10)].visible!==!1&&this.visibleFrozenRight++,this.frozenRightColumns.push(e[parseInt(n.toString(),10)]),this.frozenRightCount++):e[parseInt(n.toString(),10)].freeze==="Left"||e[parseInt(n.toString(),10)].isFrozen?(e[parseInt(n.toString(),10)].visible!==!1&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(e[parseInt(n.toString(),10)]),this.frozenLeftCount++):e[parseInt(n.toString(),10)].freeze==="Fixed"?(this.fixedColumns.push(e[parseInt(n.toString(),10)]),this.fixedCount++,this.movableColumns.push(e[parseInt(n.toString(),10)]),this.movableCount++):(e[parseInt(n.toString(),10)].visible!==!1&&this.visibleMovable++,this.movableColumns.push(e[parseInt(n.toString(),10)]),this.movableCount++);if(this.frozenLeftColumns.length){var r=this.frozenLeftColumns[this.frozenLeftColumns.length-1];this.removeBorder(this.frozenLeftColumns),this.frozenLeftBorderColumns(r instanceof ct?this.lastVisibleLeftCol(this.frozenLeftColumns):r)}if(this.frozenRightColumns.length){var r=this.frozenRightColumns[0];this.removeBorder(this.frozenRightColumns),this.frozenRightBorderColumns(r instanceof ct?this.firstVisibleRightCol(this.frozenRightColumns):r)}if((this.frozenLeftColumns.length||this.frozenRightColumns.length)&&this.freezeColumnRefresh){var r=this.frozenLeftColumns.concat(this.movableColumns).concat(this.frozenRightColumns);this.setProperties({columns:r},!0),this.freezeColumnRefresh=!1}},t.prototype.removeBorder=function(e){for(var r=0;r<e.length;r++)e[parseInt(r.toString(),10)].columns&&e[parseInt(r.toString(),10)].columns.length?((e[parseInt(r.toString(),10)].border==="Right"||e[parseInt(r.toString(),10)].border==="Left")&&(e[parseInt(r.toString(),10)].border=void 0),this.removeBorder(e[parseInt(r.toString(),10)].columns)):(e[parseInt(r.toString(),10)].border==="Right"||e[parseInt(r.toString(),10)].border==="Left")&&(e[parseInt(r.toString(),10)].border=void 0)},t.prototype.isVisibleColumns=function(e,r){if(e.columns&&e.columns.length)for(var n=0;n<e.columns.length;n++)this.isVisibleColumns(e.columns[parseInt(n.toString(),10)],r),e.columns[parseInt(n.toString(),10)].visible&&c(e.columns[parseInt(n.toString(),10)].columns)&&(!c(e.columns[parseInt(n.toString(),10)].freeze)||e.columns[parseInt(n.toString(),10)].isFrozen)&&r.push("true");else e.visible&&(!c(e.freeze)||e.isFrozen)&&r.push("true")},t.prototype.lastVisibleLeftCol=function(e){for(var r,n=e.length-1;n>=0;n--){var s=[];if(this.isVisibleColumns(e[parseInt(n.toString(),10)],s),e[parseInt(n.toString(),10)].visible&&s.indexOf("true")!==-1){r=e[parseInt(n.toString(),10)];break}}return r},t.prototype.firstVisibleRightCol=function(e){for(var r,n=0;n<e.length;n++){var s=[];if(this.isVisibleColumns(e[parseInt(n.toString(),10)],s),e[parseInt(n.toString(),10)].visible&&s.indexOf("true")!==-1){r=e[parseInt(n.toString(),10)];break}}return r},t.prototype.frozenLeftBorderColumns=function(e){if(!c(e))if(e.columns&&e.columns.length){e.border="Left";var r=e.columns[e.columns.length-1];this.frozenLeftBorderColumns(r instanceof ct&&r.columns?this.lastVisibleLeftCol(e.columns):r)}else e.border="Left"},t.prototype.frozenRightBorderColumns=function(e){if(!c(e))if(e.columns&&e.columns.length){e.border="Right";var r=e.columns[0];this.frozenRightBorderColumns(r instanceof ct&&r.columns?this.firstVisibleRightCol(e.columns):r)}else e.border="Right"},t.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},t.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},t.prototype.getVisibleFrozenColumnsCount=function(){for(var e=0,r=this.columnModel,n=0;n<this.frozenColumns;n++)r[parseInt(n.toString(),10)].visible&&e++;if(this.frozenLeftCount||this.leftcount||this.frozenRightCount||this.rightcount)for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible&&(r[parseInt(n.toString(),10)].freeze==="Left"||r[parseInt(n.toString(),10)].freeze==="Right")&&e++;return e},t.prototype.getVisibleFrozenCount=function(e,r){if(!this.frozenLeftCount&&!this.leftcount&&(!this.frozenRightCount||!this.rightcount))for(var n=0,s=e.length;n<s;n++)e[parseInt(n.toString(),10)].columns?r=this.getVisibleFrozenCount(e[parseInt(n.toString(),10)].columns,r):e[parseInt(n.toString(),10)].isFrozen&&e[parseInt(n.toString(),10)].visible&&r++;return r},t.prototype.getFrozenCount=function(e,r,n){for(var s=0,a=e.length;s<a;s++)e[parseInt(s.toString(),10)].columns?r=this.getFrozenCount(e[parseInt(s.toString(),10)].columns,r,n):(e[parseInt(s.toString(),10)].isFrozen&&n>this.frozenColumns-1&&r++,n++);return r},t.prototype.goToPage=function(e){this.pagerModule&&this.pagerModule.goToPage(e)},t.prototype.updateExternalMessage=function(e){this.pagerModule&&!this.pagerTemplate&&this.pagerModule.updateExternalMessage(e)},t.prototype.sortColumn=function(e,r,n){this.sortModule&&this.sortModule.sortColumn(e,r,n)},t.prototype.changeDataSource=function(e,r){this.isChangeDataSourceCall=!0,this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping&&this.setProperties({groupSettings:{columns:[]}},!0),r&&r.length&&this.setProperties({columns:r},!0),e&&(c(r)&&this.setProperties({columns:[]},!0),this.setProperties({dataSource:e},!0)),this.freezeRefresh(),this.isChangeDataSourceCall=!1},t.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},t.prototype.removeSortColumn=function(e){this.sortModule&&this.sortModule.removeSortColumn(e)},t.prototype.clearGridActions=function(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()},t.prototype.filterByColumn=function(e,r,n,s,a,l,h,u){this.filterModule&&this.filterModule.filterByColumn(e,r,n,s,a,l,h,u)},t.prototype.clearFiltering=function(e){this.filterModule&&this.filterModule.clearFiltering(e)},t.prototype.removeFilteredColsByField=function(e,r){this.filterModule&&this.filterModule.removeFilteredColsByField(e,r)},t.prototype.selectRow=function(e,r){this.selectionModule&&this.selectionModule.selectRow(e,r)},t.prototype.selectRows=function(e){this.selectionModule&&this.selectionModule.selectRows(e)},t.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},t.prototype.selectCell=function(e,r){this.selectionModule&&this.selectionModule.selectCell(e,r)},t.prototype.selectCellsByRange=function(e,r){this.selectionModule.selectCellsByRange(e,r)},t.prototype.search=function(e){this.searchModule&&this.searchModule.search(e)},t.prototype.print=function(){this.printModule&&this.printModule.print()},t.prototype.deleteRecord=function(e,r){this.editModule&&this.editModule.deleteRecord(e,r)},t.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},t.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},t.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},t.prototype.addRecord=function(e,r){this.editModule&&this.editModule.addRecord(e,r)},t.prototype.deleteRow=function(e){this.editModule&&this.editModule.deleteRow(e)},t.prototype.editCell=function(e,r){this.editModule&&this.editModule.editCell(e,r)},t.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},t.prototype.updateCell=function(e,r,n){this.editModule&&this.editModule.updateCell(e,r,n)},t.prototype.updateRow=function(e,r){this.editModule&&this.editModule.updateRow(e,r)},t.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},t.prototype.enableToolbarItems=function(e,r){this.toolbarModule&&this.toolbarModule.enableItems(e,r)},t.prototype.copy=function(e){this.clipboardModule&&this.clipboardModule.copy(e)},t.prototype.recalcIndentWidth=function(){var e=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&!(!this.groupSettings.columns.length&&!this.isDetail()&&!this.isRowDragable()||this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")||!this.getContentTable())){var r=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,n=[].slice.call(this.getHeaderTable().querySelector(Ht).childNodes),s=[].slice.call(this.getContentTable().querySelector(Ht).childNodes),a=r/30,l=this.getFrozenMode()==="Right"?this.groupSettings.columns.length+this.getColumns().length:0,h=this.element.offsetWidth,u=function(p,d){if(Xs(e)){var f=(d/h*100).toFixed(1)+"%";n[parseInt(p.toString(),10)].style.width=f,s[parseInt(p.toString(),10)].style.width=f}else n[parseInt(p.toString(),10)].style.width=d+"px",s[parseInt(p.toString(),10)].style.width=d+"px";e.notify(Gl,{index:p,width:d})};for(a>=1&&(r=30/a),r<1&&(r=1),(this.enableColumnVirtualization||this.isAutoGen||this.columns.length===this.groupSettings.columns.length)&&(r=30);l<this.groupSettings.columns.length;)u(l,r),l++;this.isDetail()&&(u(l,r),l++),this.isRowDragable()&&u(l,r),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}},t.prototype.resetIndentWidth=function(){if(Xs(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth(),this.autoFit&&this.preventAdjustColumns()),(this.width==="auto"||typeof this.width=="string"&&this.width.indexOf("%")!==-1)&&this.getColumns().filter(function(r){return(!r.width||r.width==="auto")&&r.minWidth}).length>0){var e=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(e)}this.isFrozenGrid()&&this.enableColumnVirtualization&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&this.textWrapSettings.wrapMode!=="Content"&&this.notify(ys,{}),this.frozenRows&&this.scrollModule&&this.scrollModule.resizeFrozenRowBorder()},t.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},t.prototype.reorderColumns=function(e,r){this.reorderModule&&this.reorderModule.reorderColumns(e,r)},t.prototype.reorderColumnByIndex=function(e,r){this.reorderModule&&this.reorderModule.reorderColumnByIndex(e,r)},t.prototype.reorderColumnByTargetIndex=function(e,r){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(e,r)},t.prototype.reorderRows=function(e,r){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(e,r)},t.prototype.refreshDataSource=function(e){this.notify("refreshdataSource",e)},t.prototype.disableRowDD=function(e){var r=this.getHeaderTable(),n=this.getContentTable(),s=r.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),a=this.getRows(),l=e?"none":"";mt(r.querySelector(Ht).childNodes[0],{display:l}),mt(n.querySelector(Ht).childNodes[0],{display:l});for(var h=0;h<this.getRows().length;h++){var u=a[parseInt(h.toString(),10)].firstElementChild;e?T([u],"e-hide"):F([u],["e-hide"])}for(var p=0;p<r.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;p++){var u=s[parseInt(p.toString(),10)];e?T([u],"e-hide"):F([u],["e-hide"])}},t.prototype.autoFitColumns=function(e){this.resizeModule&&this.resizeModule.autoFitColumns(e)},t.prototype.preventAdjustColumns=function(){if(!(this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"||this.allowResizing&&this.resizeSettings.mode==="Auto")){for(var e=this.getColumns(),r=this.getHeaderTable(),n=0,s=0;s<e.length;s++)if(e[parseInt(s.toString(),10)].visible){if(this.groupSettings.columns.length&&this.groupSettings.columns.indexOf(e[parseInt(s.toString(),10)].field)>-1){var a=[].slice.call(r.querySelector("colgroup").querySelectorAll(":not(.e-group-intent):not(.e-detail-intent):not(.e-drag-intent)"));if(a[parseInt(s.toString(),10)].style.display==="none")continue}if(e[parseInt(s.toString(),10)].width)n+=parseFloat(e[parseInt(s.toString(),10)].width.toString());else{n=0;break}}if(n){var l=this.isPercentageWidthGrid(),h=this.widthUnit(l),u=this.getContentTable();if(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())for(var p=this.defaultIndentWidth(l),d=p.toString()+h,f=[].slice.call(r.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),g=[].slice.call(u.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),s=0;s<f.length;s++)f[parseInt(s.toString(),10)].style.setProperty("width",d),g[parseInt(s.toString(),10)].style.setProperty("width",d),n+=p;(l&&n<100||!l&&n<u.parentElement.clientWidth)&&(c(u.querySelector(".e-emptyrow"))?T([r,u],["e-tableborder"]):(T([r],["e-tableborder"]),F([u],["e-tableborder"])));var v=n.toString()+h;r.style.setProperty("width",v),u.style.setProperty("width",v)}else this.restoreAdjustColumns()}},t.prototype.restoreAdjustColumns=function(){if(!(this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"||this.allowResizing&&this.resizeSettings.mode==="Auto")){var e=this.getHeaderTable(),r=this.getContentTable();if(F([e,r],["e-tableborder"]),e.style.removeProperty("width"),r.style.removeProperty("width"),this.groupSettings.columns.length||this.isDetail()||this.isRowDragable()){var n=this.isPercentageWidthGrid(),s=this.defaultIndentWidth(n).toString()+this.widthUnit(n),a=[].slice.call(e.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent"));a.forEach(function(l){l.style.setProperty("width",s)}),e.querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.recalcIndentWidth()}}},t.prototype.widthUnit=function(e){return e?"%":"px"},t.prototype.defaultIndentWidth=function(e){return e?parseFloat((30/this.element.offsetWidth*100).toFixed(1)):30},t.prototype.isPercentageWidthGrid=function(){return this.getColumns()[0].width.toString().indexOf("%")>-1},t.prototype.createColumnchooser=function(e,r,n){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(e,r,n)},t.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new sh(this)),this.serviceLocator.register("cellRendererFactory",new tf),this.serviceLocator.register("rendererFactory",new sf),this.serviceLocator.register("localization",this.localeObj=new yr(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new Or(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new vf(this)),this.serviceLocator.register("ariaService",this.ariaService=new ih),this.serviceLocator.register("focus",this.focusModule=new af(this))},t.prototype.processModel=function(){var e=this.groupSettings.columns,r=this.sortSettings.columns,n,s;if(this.allowGrouping)for(var a=function(d,f){s=0;for(var g=r.length;s<g;s++)if(r[parseInt(s.toString(),10)].field===e[parseInt(d.toString(),10)]){n=!0;break}if(n?l.allowSorting?l.sortedColumns.push(r[parseInt(s.toString(),10)].field):r[parseInt(s.toString(),10)].direction="Ascending":r.push({field:e[parseInt(d.toString(),10)],direction:"Ascending",isFromGroup:!0}),!l.groupSettings.showGroupedColumn){var v=l.enableColumnVirtualization?l.columns.filter(function(m){return m.field===e[parseInt(d.toString(),10)]})[0]:l.getColumnByField(e[parseInt(d.toString(),10)]);v?v.visible=!1:l.log("initial_action",{moduleName:"group",columnName:e[parseInt(d.toString(),10)]})}},l=this,h=0,u=e.length;h<u;h++)a(h,u);if(!e.length)for(var h=0;h<r.length;h++)this.sortedColumns.push(r[parseInt(h.toString(),10)].field);if(this.rowTemplateFn=nt(this.rowTemplate),this.emptyRecordTemplateFn=nt(this.emptyRecordTemplate),this.detailTemplateFn=nt(this.detailTemplate),this.editTemplateFn=nt(this.editSettings.template),this.editHeaderTemplateFn=nt(this.editSettings.headerTemplate),this.editFooterTemplateFn=nt(this.editSettings.footerTemplate),!c(this.parentDetails)){var p=c(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",p,!0)}this.initForeignColumn()},t.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify(Mp,this.getForeignKeyColumns())},t.prototype.enableVerticalRendering=function(){this.rowRenderingMode==="Vertical"?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")},t.prototype.gridRender=function(){var e;this.updateRTL(),this.rowRenderingMode==="Vertical"&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),Q.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),this.cssClass&&(this.cssClass.indexOf(" ")!==-1?(e=this.element.classList).add.apply(e,this.cssClass.split(" ")):this.element.classList.add(this.cssClass)),this.allowRowDragAndDrop&&this.rowDropSettings.targetID&&Q.info.name==="mozilla"&&this.element.classList.add("e-disableuserselect"),ot(this.element,["e-responsive","e-default"],[]);var r=this.serviceLocator.getService("rendererFactory");this.headerModule=r.getRenderer(At.Header),this.contentModule=r.getRenderer(At.Content),this.printModule=new hh(this,this.scrollModule),this.clipboardModule=new Sf(this,this.serviceLocator),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},t.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.height!=="auto"&&this.scrollModule.setPadding()},t.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},t.prototype.createGridPopUpElement=function(){var e=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),r=this.createElement("div",{className:dt,attrs:{tabIndex:"-1"}});Oe([r,this.createElement("div",{className:"e-uptail e-tail"})],e),r.appendChild(this.createElement("span")),Oe([r,this.createElement("div",{className:"e-downtail e-tail"})],e),this.element.appendChild(e)},t.prototype.updateGridLines=function(){switch(ot(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines");break}this.updateResizeLines()},t.prototype.updateResizeLines=function(){this.allowResizing&&!(this.gridLines==="Vertical"||this.gridLines==="Both")?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},t.prototype.applyTextWrap=function(){if(this.allowTextWrap){var e=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":Rt(this.element,!1),Rt(this.getContent(),!1),Rt(e,!0);break;case"Content":Rt(this.getContent(),!0),Rt(this.element,!1),Rt(e,!1);break;default:Rt(this.element,!0),Rt(this.getContent(),!1),Rt(e,!1)}this.textWrapSettings.wrapMode!=="Content"&&this.notify(ys,{})}},t.prototype.removeTextWrap=function(){Rt(this.element,!1);var e=[].slice.call(this.element.getElementsByClassName("e-columnheader"));Rt(e,!1),Rt(this.getContent(),!1),this.textWrapSettings.wrapMode!=="Content"&&this.notify(ys,{})},t.prototype.createTooltip=function(){this.toolTipObj=new Eu({opensOn:"custom",content:"",cssClass:this.cssClass?this.cssClass:null},this.element)},t.prototype.freezeRefresh=function(){(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.pageSettings.currentPage=1),this.componentRefresh()},t.prototype.getTooltipStatus=function(e){var r=this.getHeaderTable(),n=this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"?"e-gridcontent":"e-gridheader",s=this.createTable(r,n,"header"),a=this.createTable(r,n,"content"),l=e.classList.contains("e-headercell")?s:a,h=e.classList.contains("e-headercell")?"th":"tr";l.querySelector(h).className=e.className,l.querySelector(h).innerHTML=e.innerHTML;var u=l.querySelector(h).getBoundingClientRect().width;return document.body.removeChild(s),document.body.removeChild(a),!!(u>e.getBoundingClientRect().width&&!e.classList.contains("e-editedbatchcell")||this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"&&u>e.getBoundingClientRect().width*.55-(this.height!=="auto"?16:0))},t.prototype.mouseMoveHandler=function(e){if(this.isEllipsisTooltip()){var r=M(e.target,"e-ellipsistooltip");(this.prevElement!==r||e.type==="mouseout")&&this.toolTipObj.close();var n=e.target.tagName,s=["A","BUTTON","INPUT"];if(r&&e.type!=="mouseout"&&!(Q.isDevice&&s.indexOf(n)!==-1)&&this.getTooltipStatus(r)){var a=this.getColumns()[parseInt(r.getAttribute(rt),10)],l=a.disableHtmlEncode?"innerText":"innerHTML",h=this.createElement("div");if(r.getElementsByClassName("e-headertext").length){var u=r.getElementsByClassName("e-headertext")[0];h[""+l]=this.sanitize(u.innerText),this.toolTipObj.content=h}else h[""+l]=this.sanitize(r.innerText),this.toolTipObj.content=h;this.prevElement=r,this.enableHtmlSanitizer&&(this.toolTipObj.enableHtmlSanitizer=!0),a.disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),this.toolTipObj.open(r)}}},t.prototype.isEllipsisTooltip=function(){var e=this.getColumns();if(this.clipMode==="EllipsisWithTooltip")return!0;for(var r=0;r<e.length;r++)if(e[parseInt(r.toString(),10)].clipMode==="EllipsisWithTooltip")return!0;return!1},t.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},t.prototype.createTable=function(e,r,n){var s=this.createElement("div");s.className=this.element.className,s.style.cssText="display: inline-block;visibility:hidden;position:absolute";var a=this.createElement("div");a.className=r;var l=this.createElement("table");l.className=e.className,l.style.cssText="table-layout: auto;width: auto";var h=n==="header"?"th":"td",u=this.createElement("tr",{attrs:{role:"row"}}),p=this.createElement(h);return u.appendChild(p),l.appendChild(u),a.appendChild(l),s.appendChild(a),document.body.appendChild(s),s},t.prototype.onKeyPressed=function(e){(e.action==="tab"||e.action==="shiftTab")&&this.toolTipObj.close()},t.prototype.wireEvents=function(){b.add(this.element,"click",this.mouseClickHandler,this),b.add(this.element,"touchend",this.mouseClickHandler,this),b.add(this.element,"focusout",this.focusOutHandler,this),b.add(this.element,"dblclick",this.dblClickHandler,this),b.add(this.element,"keydown",this.keyPressHandler,this),b.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=this.element.tabIndex===-1?0:this.element.tabIndex),this.keyboardModule=new Xi(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),b.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),b.add(this.element,"mouseover",this.mouseMoveHandler,this),b.add(this.element,"mouseout",this.mouseMoveHandler,this),b.add(this.getContent(),"touchstart",this.tapEvent,this),b.add(document.body,"keydown",this.keyDownHandler,this)},t.prototype.unwireEvents=function(){b.remove(this.element,"click",this.mouseClickHandler),b.remove(this.element,"touchend",this.mouseClickHandler),b.remove(this.element,"focusout",this.focusOutHandler),b.remove(this.element,"dblclick",this.dblClickHandler),b.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),b.remove(this.element,"mouseover",this.mouseMoveHandler),b.remove(this.element,"mouseout",this.mouseMoveHandler),b.remove(this.element,"keydown",this.keyPressHandler),b.remove(this.getContent(),"touchstart",this.tapEvent),b.remove(document.body,"keydown",this.keyDownHandler),b.remove(window,"resize",this.resetIndentWidth)},t.prototype.addListener=function(){this.isDestroyed||(this.on(Rr,this.dataReady,this),this.on(st,this.recalcIndentWidth,this),this.on(gi,this.recalcIndentWidth,this),this.on(_s,this.refreshFrozenPosition,this),this.on(js,this.refreshSplitFrozenColumn,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(Di,this.dataBoundFunction),this.on(Zi,this.onKeyPressed,this))},t.prototype.removeListener=function(){this.isDestroyed||(this.off(Rr,this.dataReady),this.off(st,this.recalcIndentWidth),this.off(gi,this.recalcIndentWidth),this.on(_s,this.refreshFrozenPosition,this),this.on(js,this.refreshSplitFrozenColumn,this),this.removeEventListener(Di,this.dataBoundFunction),this.off(Zi,this.onKeyPressed))},t.prototype.getCurrentViewRecords=function(){return Qt(this)?c(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},t.prototype.mouseClickHandler=function(e){if(!(this.isChildGrid(e)||M(e.target,"e-gridpopup")&&e.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(e))&&!((!this.allowRowDragAndDrop&&(M(e.target,vi)||e.target.tagName==="TD")||!(this.allowGrouping||this.allowReordering)&&M(e.target,"e-gridheader"))&&e.touches)){M(e.target,"e-gridheader")&&this.allowRowDragAndDrop&&!M(e.target,"e-filterbarcell")&&e.target&&["A","BUTTON","INPUT"].indexOf(e.target.tagName)===-1&&e.preventDefault();var r=this.getRowInfo(e.target),n="cancel";r[""+n]=!1;var s=!1,a=D(e.target,"tr");if(a&&a.getAttribute("data-uid")){var l=this.getRowObjectFromUID(a.getAttribute("data-uid"));s=l?l.isDataRow:!1}s&&this.trigger(lp,r),this.notify(rr,e)}},t.prototype.checkEdit=function(e){var r=M(e.target,ft),n=this.editSettings.mode!=="Batch"&&this.isEdit&&r&&(r.classList.contains(cn)||r.classList.contains(vr));return!M(e.target,"e-unboundcelldiv")&&(n||M(e.target,Me)&&M(e.target,Me).classList.contains("e-editedbatchcell"))},t.prototype.dblClickHandler=function(e){var r=M(e.target,"e-grid");if(!(c(r)||r.id!==this.element.id||D(e.target,".e-unboundcelldiv"))){var n=!1,s=D(e.target,"tr");if(s&&s.getAttribute("data-uid")){var a=this.getRowObjectFromUID(s.getAttribute("data-uid"));n=a?a.isDataRow:!1}var l=this.getRowInfo(e.target);l.target=e.target,n&&this.trigger(ap,l),this.notify(Ep,e)}},t.prototype.focusOutHandler=function(e){if(!this.isChildGrid(e)){M(e.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var r=this.element.querySelector(".e-cancel:not(.e-hide)");r&&!r.parentElement.classList.contains("e-tbar-btn")&&r.classList.add("e-hide");var n=e.relatedTarget,s=n?n.getAttribute("aria-owns"):null;(!n||!M(n,"e-grid")&&(!c(s)&&s)!==e.target.getAttribute("aria-owns"))&&!this.keyPress&&this.isEdit&&!Q.isDevice&&(this.editSettings.mode==="Batch"&&!((M(n,"e-ddl")||M(n,"e-ddt"))&&M(n,"e-multi-select-list-wrapper")&&M(n,"e-input-group"))&&(M(n,"e-uploader")||!(n&&c(M(n,"e-input-group"))))&&(this.editModule.saveCell(),this.notify(Np,{})),this.editSettings.mode==="Normal"&&this.editModule.editFormValidate()),this.keyPress=!1}},t.prototype.isChildGrid=function(e){var r=M(e.target,"e-grid");return!!(r&&r.id!==this.element.id||M(e.target,"e-unboundcelldiv")&&c(r))},t.prototype.mergePersistGridData=function(e){var r=this.getLocalData();if(!(c(r)||r==="")||!c(e)){var n=c(e)?JSON.parse(r):e;this.enableVirtualization&&n.pageSettings&&(n.pageSettings.currentPage=1);var s=Object.keys(n);this.isProtectedOnChange=!0;for(var a=0,l=s;a<l.length;a++){var h=l[a];typeof this[""+h]=="object"&&!c(this[""+h])?Array.isArray(this[""+h])&&h==="columns"?(this.setFrozenCount(),pn(this[""+h]),this.mergeColumns(n[""+h],this[""+h]),this.mergedColumns=!0,this[""+h]=n[""+h]):_(this[""+h],n[""+h]):this[""+h]=n[""+h]}this.isProtectedOnChange=!1}},t.prototype.mergeColumns=function(e,r){for(var n=e,s=this.isFrozenGrid(),a=function(u){var p=r.filter(function(d){return s?d.index===n[parseInt(u.toString(),10)][""+Ya]:d.index===n[parseInt(u.toString(),10)].index})[0];c(p)||(s&&(p=_({},p,{},!0),p.freeze=n[parseInt(u.toString(),10)].freeze),p.columns&&p.columns.length?(l.mergeColumns(n[parseInt(u.toString(),10)].columns,p.columns),n[parseInt(u.toString(),10)]=_(p,n[parseInt(u.toString(),10)],{},!0)):n[parseInt(u.toString(),10)]=_(p,n[parseInt(u.toString(),10)],{},!0))},l=this,h=0;h<n.length;h++)a(h)},t.prototype.isDetail=function(){return!c(this.detailTemplate)||!c(this.childGrid)},t.prototype.isCommandColumn=function(e){var r=this;return e.some(function(n){return n.columns?r.isCommandColumn(n.columns):!!(n.commands||n.commandsTemplate)})},t.prototype.isForeignKeyEnabled=function(e){var r=this;return e.some(function(n){return n.columns?r.isForeignKeyEnabled(n.columns):!!(n.dataSource&&n.foreignKeyValue)})},t.prototype.keyPressHandler=function(e){var r=_(e,{cancel:!1});this.trigger("keyPressed",r),r.cancel===!0&&e.stopImmediatePropagation()},t.prototype.keyDownHandler=function(e){if(e.altKey){if(e.keyCode===74&&(this.keyA?(this.notify(Ua,{target:e.target,collapse:!1}),this.keyA=!1):(this.focusModule&&this.focusModule.currentInfo&&this.focusModule.currentInfo.element&&(F([this.focusModule.currentInfo.element,this.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.focusModule.currentInfo.element.tabIndex=-1),this.element.classList.contains("e-childgrid")||this.element.focus())),e.keyCode===87){var r=this.focusModule;if(r){if(!this.currentViewData.length)return;r.focusContent(),r.addOutline()}}e.keyCode===65&&(this.keyA=!0),e.keyCode===72&&this.keyA&&(this.notify(Ua,{target:e.target,collapse:!0}),this.keyA=!1)}e.keyCode===13&&this.notify(hn,e)},t.prototype.keyActionHandler=function(e){this.isChildGrid(e)||this.isEdit&&e.action!=="escape"&&e.action!=="enter"&&e.action!=="shiftEnter"&&e.action!=="tab"&&e.action!=="shiftTab"||(this.keyPress=!0,this.allowKeyboard&&(e.action==="ctrlPlusP"&&(e.preventDefault(),this.print()),this.notify(Zi,e)))},t.prototype.setInjectedModules=function(e){this.injectedModules=e},t.prototype.updateColumnObject=function(){Rn(this.columns,this.enableColumnVirtualization,this),pn(this.columns),this.initForeignColumn(),this.notify(Ar,{})},t.prototype.refreshFrozenPosition=function(e){e&&e.isModeChg?(this.refreshColumns(),this.notify(Ad,{})):this.refreshColumns()},t.prototype.getForeignKeyColumns=function(){return this.getColumns().filter(function(e){return e.isForeignColumn()})},t.prototype.getRowHeight=function(){return this.rowHeight?this.rowHeight:Vf(this.element)},t.prototype.refreshColumns=function(){if(this.freezeColumnRefresh=!0,this.setFrozenCount(),this.updateFrozenColumnsWidth(),this.isFrozenGrid()&&(this.isPreventScrollEvent=!0),this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()&&this.enableColumnVirtualization){var e=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.getHeaderContent().querySelector("."+gt).scrollLeft=e,this.getContent().querySelector("."+dt).scrollLeft=e}},t.prototype.excelExport=function(e,r,n,s){if(this.exportGrids&&this.exportGrids.length){var a=this.exportGrids.slice();return this.exportMultipleExcelGrids(a,e,r,n,s)}else return this.excelExportModule?this.excelExportModule.Map(this,e,r,n,!1,s):null},t.prototype.csvExport=function(e,r,n,s){return this.excelExportModule?this.excelExportModule.Map(this,e,r,n,!0,s):null},t.prototype.pdfExport=function(e,r,n,s){if(this.exportGrids&&this.exportGrids.length){var a=this.exportGrids.slice();return this.exportMultiplePdfGrids(a,e,r,n,s)}else return this.pdfExportModule?this.pdfExportModule.Map(this,e,r,n,s):null},t.prototype.exportMultiplePdfGrids=function(e,r,n,s,a){var l=this;if(e.length!==0){var h=e.shift(),u=document.getElementById(h).ej2_instances[0],p=u.pdfExportModule?u.pdfExportModule.Map(u,r,n,s,a):Promise.resolve();return p.then(function(d){return n=e.length!==1,l.exportMultiplePdfGrids(e,r,n,d,a)})}return null},t.prototype.exportMultipleExcelGrids=function(e,r,n,s,a){var l=this;if(e.length!==0){var h=e.shift(),u=document.getElementById(h).ej2_instances[0],p=u.excelExportModule?u.excelExportModule.Map(u,r,n,s,!1,a):null;return p.then(function(d){return n=e.length!==1,l.exportMultipleExcelGrids(e,r,n,d,a)})}return null},t.prototype.groupColumn=function(e){this.groupModule&&this.groupModule.groupColumn(e)},t.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},t.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},t.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},t.prototype.ungroupColumn=function(e){this.groupModule&&this.groupModule.ungroupColumn(e)},t.prototype.openColumnChooser=function(e,r){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(e,r)},t.prototype.scrollRefresh=function(){var e=this,r=function(){e.scrollModule.refresh(),e.off(st,r)};this.on(st,r,this)},t.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},t.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},t.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},t.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},t.prototype.selectCells=function(e){this.selectionModule&&this.selectionModule.selectCells(e)},t.prototype.selectRowsByRange=function(e,r){this.selectionModule&&this.selectionModule.selectRowsByRange(e,r)},t.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},t.prototype.ensureModuleInjected=function(e){return this.getInjectedModules().indexOf(e)>=0},t.prototype.destroyTemplate=function(e,r){this.clearTemplate(e,r)},t.prototype.log=function(e,r){this.loggerModule&&this.loggerModule.log(e,r)},t.prototype.applyBiggerTheme=function(e){this.element.classList.contains("e-bigger")&&e.classList.add("e-bigger")},t.prototype.getPreviousRowData=function(){var e=this.getRowsObject()[this.getRows().length-1].data;return e},t.prototype.hideScroll=function(){var e=this.getContent().querySelector("."+dt);e.scrollHeight<=e.clientHeight&&(this.scrollModule.removePadding(),e.style.overflowY="auto")},t.prototype.getRowIndexByPrimaryKey=function(e){var r=this.getPrimaryKeyFieldNames()[0];e=typeof e=="object"?e[""+r]:e;for(var n=this.getRowsObject(),s=0;s<n.length;s++)if(!(n[parseInt(s.toString(),10)].isDetailRow||n[parseInt(s.toString(),10)].isCaptionRow)){var a=n[parseInt(s.toString(),10)].data[""+r];if(r.split(".").length>1&&(a=ng(r,n[parseInt(s.toString(),10)].data)),a===e)return n[parseInt(s.toString(),10)].index}return-1},t.prototype.grabColumnByFieldFromAllCols=function(e,r){var n;this.columnModel=[],this.updateColumnModel(this.columns);for(var s=this.columnModel,a=0;a<s.length;a++)if(!r&&e===s[parseInt(a.toString(),10)].field||r&&s[parseInt(a.toString(),10)].isForeignColumn()&&e===s[parseInt(a.toString(),10)].foreignKeyValue){n=s[parseInt(a.toString(),10)];break}return n},t.prototype.grabColumnByUidFromAllCols=function(e){var r;this.columnModel=[],this.updateColumnModel(this.columns);for(var n=this.columnModel,s=0;s<n.length;s++)e===n[parseInt(s.toString(),10)].uid&&(r=n[parseInt(s.toString(),10)]);return r},t.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length||this.searchSettings.key.length){var e=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof V?this.renderModule.data.getData(this.dataSource,e):this.dataSource instanceof V?this.dataSource.executeLocal(e):new V(this.dataSource,e).executeLocal(e)}return[]},t.prototype.getUserAgent=function(){var e=Q.userAgent.toLowerCase();return/iphone|ipod|ipad|macintosh/.test(e)},t.prototype.tapEvent=function(e){this.getUserAgent()&&(jt.timer?(clearTimeout(jt.timer),jt.timer=null,this.dblClickHandler(e),this.notify(Dp,e)):jt.timer=setTimeout(function(){jt.timer=null},300))},t.prototype.getRowUid=function(e){return""+e+this.rowUid++},t.prototype.getRowElementByUID=function(e){var r,n=[],s=[].slice.call(this.getContent().querySelector(Le).children);this.frozenRows?(n=[].slice.call(this.getHeaderContent().querySelector(Le).children),n=n.concat(s)):n=s;for(var a=0,l=n;a<l.length;a++){var h=l[a];if(h.getAttribute("data-uid")===e){r=h;break}}return r},t.prototype.getHiddenColumns=function(){for(var e=[],r=0,n=this.columnModel;r<n.length;r++){var s=n[r];s.visible===!1&&e.push(s)}return e},t.prototype.calculatePageSizeByParentHeight=function(e){if(this.allowPaging&&(this.allowTextWrap&&this.textWrapSettings.wrapMode==="Header"||!this.allowTextWrap)){var r=0;e.indexOf("%")!==-1&&(e=parseInt(e,10)/100*this.element.clientHeight);var n=this.getNoncontentHeight()+this.getRowHeight();if(e>n){var s=0;s=e-this.getNoncontentHeight(),r=s/this.getRowHeight()}if(r>0)return Math.floor(r)}return 0},t.prototype.getNoncontentHeight=function(){var e=0;if(c(this.getHeaderContent().clientHeight)||(e+=this.getHeaderContent().clientHeight),this.toolbar&&!c(this.element.querySelector(".e-toolbar").clientHeight)&&(e+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!c(this.element.querySelector(".e-gridpager").clientHeight)&&(e+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!c(this.element.querySelector(".e-columnheader").clientHeight)&&(e+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!c(this.element.querySelector(".e-groupdroparea").clientHeight)&&(e+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!c(this.element.querySelector(".e-summaryrow").clientHeight))for(var r=0;r<this.element.getElementsByClassName("e-summaryrow").length;r++)e+=this.element.getElementsByClassName("e-summaryrow")[parseInt(r.toString(),10)].clientHeight;return e},t.prototype.getSummaryValues=function(e,r){return A.aggregates[e.type.toLowerCase()](r,e.field)},t.prototype.serverExcelExport=function(e){this.isExcel=!0,this.exportGrid(e)},t.prototype.serverPdfExport=function(e){this.isExcel=!1,this.exportGrid(e)},t.prototype.serverCsvExport=function(e){this.isExcel=!0,this.exportGrid(e)},t.prototype.exportGrid=function(e){var r=this,n=r.getDataModule().generateQuery(!0),s=new Dt().processQuery(new V({url:""}),n),a=JSON.parse(s.data),l=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"])),h=["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"];l.filterSettings.columns=a.where,l.searchSettings.fields=a.search&&a.search[0].fields||[],l.sortSettings.columns=a.sorted,l.columns=this.setHeaderText(l.columns,h);var u=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),p=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});p.value=JSON.stringify(l),u.method="POST",u.action=e,u.appendChild(p),document.body.appendChild(u),u.submit(),u.remove()},t.prototype.setHeaderText=function(e,r){for(var n=0;n<e.length;n++){var s=this.getColumnByUid(e[parseInt(n.toString(),10)].uid);e[parseInt(n.toString(),10)].headerText=s.headerText,c(s.template)||(e[parseInt(n.toString(),10)].template="true"),e[parseInt(n.toString(),10)].format&&(e[parseInt(n.toString(),10)].format=ig(this.getFormat(e[parseInt(n.toString(),10)].format),e[parseInt(n.toString(),10)].type,this.isExcel,Th)),e[parseInt(n.toString(),10)].columns&&this.setHeaderText(e[parseInt(n.toString(),10)].columns,r);for(var a=Object.keys(e[parseInt(n.toString(),10)]),l=0;l<a.length;l++)r.indexOf(a[parseInt(l.toString(),10)])<0&&delete e[parseInt(n.toString(),10)][a[parseInt(l.toString(),10)]]}return e},t.prototype.getFormat=function(e){return typeof e=="object"?c(e.format)?e.skeleton:e.format:e},t.prototype.isCollapseStateEnabled=function(){var e="isExpanded";return this[""+e]===!1},t.prototype.updateRowValue=function(e,r){var n={requestType:"save",data:r};this.showSpinner(),this.notify(Hs,n),this.refresh()},t.prototype.setForeignKeyData=function(){this.dataBind();var e=this.getDataModule().getForeignKeyDataState();e.isPending?(this.getDataModule().setForeignKeyDataState({}),e.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},t.prototype.resetFilterDlgPosition=function(e){var r=this.getColumnHeaderByField(e);if(r){var n=r.querySelector(".e-filtermenudiv"),s=this.element.querySelector(".e-filter-popup");if(n&&s){var a=this.element.getBoundingClientRect(),l=n.getBoundingClientRect();s&&(s.offsetWidth+l.right>a.right?s.style.left=(l.right-s.offsetWidth-a.left).toString()+"px":s.style.left=(l.right-a.left).toString()+"px")}}},t.prototype.renderTemplates=function(e){var r=this.parentDetails&&this.parentDetails.parentInstObj&&this.parentDetails.parentInstObj.isReact;if(r&&this.portals)this.parentDetails.parentInstObj.portals=this.parentDetails.parentInstObj.portals.concat(this.portals),this.parentDetails.parentInstObj.renderTemplates(e),this.portals=void 0;else{var n="portals";this.notify("reactTemplateRender",this[""+n]),this.renderReactTemplates(e)}},t.prototype.batchUpdate=function(e){this.processRowChanges(e)},t.prototype.batchAsyncUpdate=function(e){this.processBulkRowChanges(e)},t.prototype.processBulkRowChanges=function(e){var r=this;if(!this.dataToBeUpdated)this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e),setTimeout(function(){r.processRowChanges(r.dataToBeUpdated),r.dataToBeUpdated=null},this.asyncTimeOut);else for(var n=[En,kd,Zl],s=this.getPrimaryKeyFieldNames()[0],a=0;a<n.length;a++)e[n[parseInt(a.toString(),10)]]&&Zf(this,e,n[parseInt(a.toString(),10)],s)},t.prototype.processRowChanges=function(e){var r=this,n=this.getPrimaryKeyFieldNames()[0];e=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},e);var s=this.getDataModule().saveChanges(e,n,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?s.then(function(){r.setNewData()}):this.setNewData()},t.prototype.setNewData=function(){var e=this,r=JSON.parse(JSON.stringify(this.getCurrentViewRecords())),n=this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount());n.then(function(s){e.bulkRefresh(s.result,r,s.count)})},t.prototype.deleteRowElement=function(e){var r=this.getRowElementByUID(e.uid);Se(r)},t.prototype.bulkRefresh=function(e,r,n){for(var s=this,a=this.getRowsObject(),l=this.getPrimaryKeyFieldNames()[0],h=function(m){e.filter(function(y){return y[""+l]===a[parseInt(m.toString(),10)].data[""+l]}).length||(u.deleteRowElement(a[parseInt(m.toString(),10)]),a.splice(m,1),m--),p=m},u=this,p,d=0;d<a.length;d++)h(d),d=p;for(var f=function(m){var y;r.filter(function(I){I[""+l]===e[parseInt(m.toString(),10)][""+l]&&(I!==e[parseInt(m.toString(),10)]&&s.setRowData(e[parseInt(m.toString(),10)][""+l],e[parseInt(m.toString(),10)]),y=!0)}),y||g.renderRowElement(e[parseInt(m.toString(),10)],m)},g=this,d=0;d<e.length;d++)f(d);this.currentViewData=e;var v=[].slice.call(this.getContentTable().getElementsByClassName(ft));$f(this,this.getRowsObject(),v),eg(this),this.allowPaging&&this.notify(Bt,{module:"pager",properties:{totalRecordsCount:n}})},t.prototype.renderRowElement=function(e,r){var n=new kr(this.serviceLocator,null,this),s=new Nn(this),a=s.generateRows([e]),l=n.render(a[0],this.getColumns());this.addRowObject(a[0],r);var h=this.getContentTable().querySelector(Le);if(h.querySelector(".e-emptyrow")){var u=h.querySelector(".e-emptyrow");u.parentNode.removeChild(u),this.frozenRows&&this.element.querySelector(".e-frozenrow-empty")&&this.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty")}this.frozenRows&&r<this.frozenRows?h=this.getHeaderContent().querySelector(Le):h=this.getContent().querySelector(Le),h=this.getContent().querySelector(Le),h.appendChild(l)},t.prototype.addRowObject=function(e,r){this.getRowsObject().splice(r,1,e)},t.prototype.updateVisibleExpandCollapseRows=function(){for(var e=this.getRowsObject(),r=0,n=e.length;r<n;r++)(e[parseInt(r.toString(),10)].isDataRow||e[parseInt(r.toString(),10)].isAggregateRow)&&this.getRowElementByUID(e[parseInt(r.toString(),10)].uid).style.display==="none"?e[parseInt(r.toString(),10)].visible=!1:e[parseInt(r.toString(),10)].visible=!0},t.prototype.sanitize=function(e){return this.enableHtmlSanitizer?ti.sanitize(e):e},t.prototype.getHeight=function(e){return!Number.isInteger(e)&&e.indexOf("%")!==-1?e=parseInt(e,10)/100*this.element.clientHeight:!Number.isInteger(e)&&this.height!=="auto"?e=parseInt(e,10):e=this.height,e},t.prototype.getFrozenRightContent=function(){return this.contentModule.getPanel()},t.prototype.getFrozenRightHeader=function(){return this.headerModule.getPanel()},t.prototype.getMovableHeaderTbody=function(){return this.getHeaderContent().querySelector(Le)},t.prototype.getMovableContentTbody=function(){return this.getContent().querySelector(Le)},t.prototype.getFrozenHeaderTbody=function(){return this.getHeaderContent().querySelector(Le)},t.prototype.getFrozenLeftContentTbody=function(){return this.getContent().querySelector(Le)},t.prototype.getFrozenRightHeaderTbody=function(){return this.getHeaderContent().querySelector(Le)},t.prototype.getFrozenRightContentTbody=function(){return this.getContent().querySelector(Le)},t.prototype.showResponsiveCustomFilter=function(e){this.filterModule&&this.filterModule.showCustomFilter(e||this.rowRenderingMode==="Vertical")},t.prototype.showResponsiveCustomSort=function(e){this.sortModule&&this.sortModule.showCustomSort(e||this.rowRenderingMode==="Vertical")},t.prototype.showResponsiveCustomColumnChooser=function(e){this.columnChooserModule&&this.columnChooserModule.showCustomColumnChooser(e||this.rowRenderingMode==="Vertical")},t.prototype.showAdaptiveFilterDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)},t.prototype.showAdaptiveSortDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)},t.prototype.getCurrentVisibleColumns=function(e){for(var r=[],n=e?this.getColumns():this.columnModel,s=0,a=n;s<a.length;s++){var l=a[s];l.visible&&r.push(l)}return r},t.prototype.enableInfiniteAggrgate=function(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&!this.groupSettings.enableLazyLoading&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)};var i;return w([C([])],t.prototype,"currentViewData",void 0),w([C()],t.prototype,"parentDetails",void 0),w([C()],t.prototype,"showHider",void 0),w([C([])],t.prototype,"columns",void 0),w([C(!0)],t.prototype,"enableAltRow",void 0),w([C(!0)],t.prototype,"enableHover",void 0),w([C(!1)],t.prototype,"enableAutoFill",void 0),w([C(!0)],t.prototype,"allowKeyboard",void 0),w([C(!1)],t.prototype,"enableStickyHeader",void 0),w([C(!1)],t.prototype,"enableHtmlSanitizer",void 0),w([C(!1)],t.prototype,"allowTextWrap",void 0),w([Je({},kf)],t.prototype,"textWrapSettings",void 0),w([Je({},Df)],t.prototype,"resizeSettings",void 0),w([C(!1)],t.prototype,"allowPaging",void 0),w([Je({},cf)],t.prototype,"pageSettings",void 0),w([Je({},Mf)],t.prototype,"loadingIndicator",void 0),w([C(!0)],t.prototype,"enableVirtualMaskRow",void 0),w([C(!1)],t.prototype,"enableVirtualization",void 0),w([C(!1)],t.prototype,"enableColumnVirtualization",void 0),w([C(!1)],t.prototype,"enableInfiniteScrolling",void 0),w([Je({},Af)],t.prototype,"searchSettings",void 0),w([C(!1)],t.prototype,"allowSorting",void 0),w([C("Ellipsis")],t.prototype,"clipMode",void 0),w([C(!0)],t.prototype,"allowMultiSorting",void 0),w([C(!1)],t.prototype,"allowExcelExport",void 0),w([C(!1)],t.prototype,"allowPdfExport",void 0),w([Je({},xf)],t.prototype,"sortSettings",void 0),w([Je({},If)],t.prototype,"infiniteScrollSettings",void 0),w([C(!0)],t.prototype,"allowSelection",void 0),w([C(-1)],t.prototype,"selectedRowIndex",void 0),w([Je({},Rf)],t.prototype,"selectionSettings",void 0),w([C(!1)],t.prototype,"allowFiltering",void 0),w([C("Horizontal")],t.prototype,"rowRenderingMode",void 0),w([C(!1)],t.prototype,"enableAdaptiveUI",void 0),w([C(!1)],t.prototype,"allowReordering",void 0),w([C(!1)],t.prototype,"allowResizing",void 0),w([C(!1)],t.prototype,"allowRowDragAndDrop",void 0),w([Je({},Tf)],t.prototype,"rowDropSettings",void 0),w([Je({},Ef)],t.prototype,"filterSettings",void 0),w([C(!1)],t.prototype,"allowGrouping",void 0),w([C(!1)],t.prototype,"enableImmutableMode",void 0),w([C(!1)],t.prototype,"showColumnMenu",void 0),w([C(!1)],t.prototype,"autoFit",void 0),w([Je({},Lf)],t.prototype,"groupSettings",void 0),w([Je({},Ff)],t.prototype,"editSettings",void 0),w([Dr([],Cf)],t.prototype,"aggregates",void 0),w([C(!1)],t.prototype,"showColumnChooser",void 0),w([Je({},df)],t.prototype,"columnChooserSettings",void 0),w([C(!1)],t.prototype,"enableHeaderFocus",void 0),w([C("auto")],t.prototype,"height",void 0),w([C("auto")],t.prototype,"width",void 0),w([C("Default")],t.prototype,"gridLines",void 0),w([C()],t.prototype,"rowTemplate",void 0),w([C()],t.prototype,"emptyRecordTemplate",void 0),w([C()],t.prototype,"detailTemplate",void 0),w([C()],t.prototype,"childGrid",void 0),w([C()],t.prototype,"queryString",void 0),w([C("AllPages")],t.prototype,"printMode",void 0),w([C("Expanded")],t.prototype,"hierarchyPrintMode",void 0),w([C([])],t.prototype,"dataSource",void 0),w([C(null)],t.prototype,"rowHeight",void 0),w([C()],t.prototype,"query",void 0),w([C("USD")],t.prototype,"currencyCode",void 0),w([C()],t.prototype,"exportGrids",void 0),w([C()],t.prototype,"toolbar",void 0),w([C()],t.prototype,"contextMenuItems",void 0),w([C()],t.prototype,"columnMenuItems",void 0),w([C()],t.prototype,"toolbarTemplate",void 0),w([C()],t.prototype,"pagerTemplate",void 0),w([C(0)],t.prototype,"frozenRows",void 0),w([C(0)],t.prototype,"frozenColumns",void 0),w([C("")],t.prototype,"cssClass",void 0),w([C("All")],t.prototype,"columnQueryMode",void 0),w([C({})],t.prototype,"currentAction",void 0),w([C("")],t.prototype,"ej2StatePersistenceVersion",void 0),w([k()],t.prototype,"created",void 0),w([k()],t.prototype,"destroyed",void 0),w([k()],t.prototype,"load",void 0),w([k()],t.prototype,"rowDataBound",void 0),w([k()],t.prototype,"queryCellInfo",void 0),w([k()],t.prototype,"headerCellInfo",void 0),w([k()],t.prototype,"actionBegin",void 0),w([k()],t.prototype,"actionComplete",void 0),w([k()],t.prototype,"actionFailure",void 0),w([k()],t.prototype,"dataBound",void 0),w([k()],t.prototype,"recordDoubleClick",void 0),w([k()],t.prototype,"recordClick",void 0),w([k()],t.prototype,"rowSelecting",void 0),w([k()],t.prototype,"rowSelected",void 0),w([k()],t.prototype,"rowDeselecting",void 0),w([k()],t.prototype,"rowDeselected",void 0),w([k()],t.prototype,"cellSelecting",void 0),w([k()],t.prototype,"cellSelected",void 0),w([k()],t.prototype,"cellDeselecting",void 0),w([k()],t.prototype,"cellDeselected",void 0),w([k()],t.prototype,"columnSelecting",void 0),w([k()],t.prototype,"columnSelected",void 0),w([k()],t.prototype,"columnDeselecting",void 0),w([k()],t.prototype,"columnDeselected",void 0),w([k()],t.prototype,"columnDragStart",void 0),w([k()],t.prototype,"columnDrag",void 0),w([k()],t.prototype,"columnDrop",void 0),w([k()],t.prototype,"printComplete",void 0),w([k()],t.prototype,"beforePrint",void 0),w([k()],t.prototype,"pdfQueryCellInfo",void 0),w([k()],t.prototype,"pdfHeaderQueryCellInfo",void 0),w([k()],t.prototype,"pdfAggregateQueryCellInfo",void 0),w([k()],t.prototype,"excelAggregateQueryCellInfo",void 0),w([k()],t.prototype,"exportDetailDataBound",void 0),w([k()],t.prototype,"exportDetailTemplate",void 0),w([k()],t.prototype,"excelQueryCellInfo",void 0),w([k()],t.prototype,"excelHeaderQueryCellInfo",void 0),w([k()],t.prototype,"beforeExcelExport",void 0),w([k()],t.prototype,"excelExportComplete",void 0),w([k()],t.prototype,"beforePdfExport",void 0),w([k()],t.prototype,"pdfExportComplete",void 0),w([k()],t.prototype,"rowDragStartHelper",void 0),w([k()],t.prototype,"detailDataBound",void 0),w([k()],t.prototype,"rowDragStart",void 0),w([k()],t.prototype,"rowDrag",void 0),w([k()],t.prototype,"rowDrop",void 0),w([k()],t.prototype,"toolbarClick",void 0),w([k()],t.prototype,"beforeOpenColumnChooser",void 0),w([k()],t.prototype,"beforeOpenAdaptiveDialog",void 0),w([k()],t.prototype,"batchAdd",void 0),w([k()],t.prototype,"batchDelete",void 0),w([k()],t.prototype,"batchCancel",void 0),w([k()],t.prototype,"beforeBatchAdd",void 0),w([k()],t.prototype,"beforeBatchDelete",void 0),w([k()],t.prototype,"beforeBatchSave",void 0),w([k()],t.prototype,"beginEdit",void 0),w([k()],t.prototype,"commandClick",void 0),w([k()],t.prototype,"cellEdit",void 0),w([k()],t.prototype,"cellSave",void 0),w([k()],t.prototype,"cellSaved",void 0),w([k()],t.prototype,"resizeStart",void 0),w([k()],t.prototype,"resizing",void 0),w([k()],t.prototype,"resizeStop",void 0),w([k()],t.prototype,"keyPressed",void 0),w([k()],t.prototype,"beforeDataBound",void 0),w([k()],t.prototype,"contextMenuOpen",void 0),w([k()],t.prototype,"contextMenuClick",void 0),w([k()],t.prototype,"columnMenuOpen",void 0),w([k()],t.prototype,"columnMenuClick",void 0),w([k()],t.prototype,"checkBoxChange",void 0),w([k()],t.prototype,"beforeCopy",void 0),w([k()],t.prototype,"beforePaste",void 0),w([k()],t.prototype,"beforeAutoFill",void 0),w([k()],t.prototype,"columnDataStateChange",void 0),w([k()],t.prototype,"dataStateChange",void 0),w([k()],t.prototype,"dataSourceChanged",void 0),w([k()],t.prototype,"exportGroupCaption",void 0),w([k()],t.prototype,"lazyLoadGroupExpand",void 0),w([k()],t.prototype,"lazyLoadGroupCollapse",void 0),t=i=w([si],t),t}(Kt);function Of(){return["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound"]}var hh=function(){function o(t,i){this.isAsyncPrint=!1,this.defered=new xt,this.parent=t,!this.parent.isDestroyed&&(this.parent.on(st,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(ri,this.actionBeginFunction),this.parent.on(ni,this.onEmpty.bind(this)),this.parent.on(qa,this.hierarchyPrint,this),this.scrollModule=i)}return o.prototype.isContentReady=function(){var t=this;return this.isPrintGrid()&&(this.parent.hierarchyPrintMode==="None"||!this.parent.childGrid)?this.contentReady:function(){t.defered.promise.then(function(){t.contentReady()}),t.isPrintGrid()&&t.hierarchyPrint()}},o.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var t=window.printGridObj;t&&!t.element.querySelector("[aria-busy=true")&&t.printModule.defered.resolve()},o.prototype.print=function(){this.renderPrintGrid()},o.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},o.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},o.prototype.renderPrintGrid=function(){var t=this.parent,i=Ve("div",{id:this.parent.element.id+"_print",className:t.element.className+" e-print-grid"});i.classList.remove("e-gridhover"),document.body.appendChild(i);for(var e=new lh(dh(t,t.hierarchyPrintMode)),r=0;r<e.columns.length;r++)e.columns[parseInt(r.toString(),10)]=_({},e.columns[parseInt(r.toString(),10)]),t.isFrozenGrid()&&!t.getFrozenColumns()&&(e.columns[parseInt(r.toString(),10)].freeze=void 0);this.parent.isAngular&&(e.viewContainerRef=this.parent.viewContainerRef),e.load=function(){},e.query=t.getQuery().clone(),window.printGridObj=e,e.isPrinting=!0;var n=e.getInjectedModules(),s=t.getInjectedModules();(!n||n.length!==s.length)&&e.setInjectedModules(s),t.notify(Bp,{element:i,printgrid:e}),this.parent.log("exporting_begin",this.getModuleName()),e.registeredTemplate=this.parent.registeredTemplate,e.isVue=this.parent.isVue,e.appendTo(i),t.isVue3||(e.trigger=t.trigger)},o.prototype.contentReady=function(){if(this.isPrintGrid()){var t=this.parent;if(this.isAsyncPrint){this.printGrid();return}var i={requestType:"print",element:t.element,selectedRows:t.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:t.hierarchyPrintMode};if(this.isAsyncPrint||t.trigger(Aa,i),i.cancel){Ce(t.element);return}this.isAsyncPrint||this.printGrid()}},o.prototype.printGrid=function(){var t=this.parent;if(t.height!=="auto"){var i=this.scrollModule.getCssProperties(),e=t.element.querySelector("."+dt),r=t.element.querySelector("."+Tt);e.style.height="auto",e.style.overflowY="auto",r.style[i.padding]="",r.firstElementChild.style[i.border]=""}t.allowGrouping&&(t.groupSettings.columns.length?this.removeColGroup(t):t.element.querySelector(".e-groupdroparea").style.display="none");for(var n=0,s=[].slice.call(t.element.getElementsByClassName(dt));n<s.length;n++){var a=s[n];a.style.overflowX="hidden"}for(var l=[].slice.call(t.element.getElementsByClassName("e-spin-show")),h=0,u=[].slice.call(l);h<u.length;h++){var a=u[h];ot(a,["e-spin-hide"],["e-spin-show"])}this.printGridElement(t),t.isPrinting=!1,delete window.printGridObj;var p={element:t.element};t.trigger(Ta,p),t.destroy(),this.parent.log("exporting_complete",this.getModuleName())},o.prototype.printGridElement=function(t){ot(t.element,["e-print-grid-layout"],["e-print-grid"]),t.isPrinting&&Ce(t.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=kh(t.element,this.printWind)},o.prototype.removeColGroup=function(t){var i=t.groupSettings.columns.length,e=t.element,r="#"+t.element.id;if(i){for(var n=Ee(".e-groupcaption",e),s=n[i-1].getAttribute("colspan"),a=0;a<n.length;a++)n[parseInt(a.toString(),10)].setAttribute("colspan",s);var l=Ee("colgroup"+r+"colgroup",e),h=Ee(".e-content colgroup",e),u=Ee(".e-summarycontent colgroup",e);this.hideColGroup(l,i),this.hideColGroup(h,i),this.hideColGroup(u,i)}},o.prototype.hideColGroup=function(t,i){for(var e=0;e<t.length;e++)for(var r=0;r<i;r++)t[parseInt(e.toString(),10)].children[parseInt(r.toString(),10)].style.display="none"},o.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},o.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(st,this.contentReady.bind(this)),this.parent.removeEventListener(ri,this.actionBeginFunction),this.parent.off(ni,this.onEmpty.bind(this)),this.parent.off(qa,this.hierarchyPrint))},o.prototype.getModuleName=function(){return"print"},o.printGridProp=Of().concat([Aa,Ta,Ds]),o}();function Nf(o,t){return o.prototype&&t in o.prototype}function uh(o,t,i){return c(o)||o===""?"":A.getObject(o,t)}function ch(o,t){requestAnimationFrame(function(){try{t(null,o())}catch(i){t(i)}})}function Gi(o,t){for(var i=[],e=0,r=o.length;e<r;e++){var n=t(o[parseInt(e.toString(),10)],e);c(n)||i.push(n)}return i}function Ss(o){for(var t=[],i=0;i<o.length;i++)t.push(_({},An(o[parseInt(i.toString(),10)]),{},!0));return t}function nt(o){if(o)try{var t=o[0]!=="<";return typeof o=="function"?Ue(o):t&&document.querySelectorAll(o).length?Ue(document.querySelector(o).innerHTML.trim()):Ue(o)}catch{return Ue(o)}}function $t(o,t){var i={},e=["style","class"];_(i,t,{}),"style"in i&&(mt(o,i[e[0]]),delete i[e[0]]),"class"in i&&(T([o],i[e[1]]),delete i[e[1]]),Ie(o,i)}function pn(o,t){t===void 0&&(t=0);for(var i=0,e=o.length;i<e;i++)o[parseInt(i.toString(),10)].columns?(o[parseInt(i.toString(),10)].index=c(o[parseInt(i.toString(),10)].index)?t:o[parseInt(i.toString(),10)].index,t++,t=pn(o[parseInt(i.toString(),10)].columns,t)):(o[parseInt(i.toString(),10)].index=c(o[parseInt(i.toString(),10)].index)?t:o[parseInt(i.toString(),10)].index,t++);return t}function Rn(o,t,i){for(var e=0,r=o.length;e<r;e++){var n=void 0;typeof o[parseInt(e.toString(),10)]=="string"?n=new ct({field:o[parseInt(e.toString(),10)]},i):!(o[parseInt(e.toString(),10)]instanceof ct)||o[parseInt(e.toString(),10)].columns?o[parseInt(e.toString(),10)].columns?(o[parseInt(e.toString(),10)].columns=Rn(o[parseInt(e.toString(),10)].columns,null,i),n=new ct(o[parseInt(e.toString(),10)],i)):n=new ct(o[parseInt(e.toString(),10)],i):n=o[parseInt(e.toString(),10)],n.type&&n.type.toLowerCase()==="checkbox"&&(n.allowReordering=!1),n.headerText=c(n.headerText)?n.foreignKeyValue||n.field||"":n.headerText,n.foreignKeyField=n.foreignKeyField||n.field,n.valueAccessor=(typeof n.valueAccessor=="string"?N(n.valueAccessor,window):n.valueAccessor)||uh,n.width=t&&c(n.width)?200:n.width,c(n.visible)&&(n.visible=!0),o[parseInt(e.toString(),10)]=n}return o}function Pf(o,t,i){var e=o.querySelector("span"),r=o.parentElement.getBoundingClientRect(),n=t.target.getBoundingClientRect();e.className=i,o.style.display="";var s=(c(t.clientY)?t.changedTouches[0].clientY:t.clientY)>o.offsetHeight+10;o.style.top=n.top-r.top+(s?-(o.offsetHeight+10):o.offsetHeight+10)+"px",o.style.left=Bf(o,t,n,r.left)+"px",s?(o.querySelector(".e-downtail").style.display="",o.querySelector(".e-uptail").style.display="none"):(o.querySelector(".e-downtail").style.display="none",o.querySelector(".e-uptail").style.display="")}function Bf(o,t,i,e){var r=o.offsetWidth/2,n=Qs(t).x;return n-i.left<r?i.left-e:i.right-n<r?i.right-e-r*2:n-e-r}function An(o){return o instanceof _e?N("properties",o):o}function M(o,t,i){for(var e=o;e&&!(i?e.id===t:e.classList.contains(t));)e=e.parentElement;return e}function zf(o){for(var t=[],i=0,e=o.length;i<e;i++)o[parseInt(i.toString(),10)].hasOwnProperty("properties")?t.push(o[parseInt(i.toString(),10)].properties):t.push(o[parseInt(i.toString(),10)]);return t}function Qs(o){var t={};return t.x=c(o.clientX)?o.changedTouches[0].clientX:o.clientX,t.y=c(o.clientY)?o.changedTouches[0].clientY:o.clientY,t}var Hf=0;function Ai(o){return o+Hf++}function qt(o,t){for(var i=0,e=t.length;i<e;i++)e===t.length?o.appendChild(t[parseInt(i.toString(),10)]):o.appendChild(t[0]);return o}function qf(o,t,i,e){if(o==="Custom"){var r=i.customAggregate;return typeof r=="string"&&(r=N(r,window)),r?r.call(e,t,i):""}return i.field in t||t instanceof Array?A.aggregates[o.toLowerCase()](t,i.field):null}var bs=null;function fi(){if(bs!==null)return bs;var o=document.createElement("div"),t=0;return o.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(o),t=o.offsetWidth-o.clientWidth|0,document.body.removeChild(o),bs=t}var Zr;function Vf(o){if(Zr!==void 0)return Zr;var t=Ve("table",{className:Zt,styles:"visibility: hidden",attrs:{role:"grid"}});t.innerHTML='<tr><td class="e-rowcell">A<td></tr>',o.appendChild(t);var i=t.querySelector("td").getBoundingClientRect();return o.removeChild(t),Zr=Math.ceil(i.height),Zr}function Wf(o){return o.split(".").length>1}function ph(o){var t=q("#"+o.element.id+"EditConfirm",o.element);return o.editSettings.mode==="Batch"&&(Ee(".e-updatedtd",o.element).length||Ee(".e-gridform.e-formvalidator",o.element).length)&&o.editSettings.showConfirmDialog&&(t?t.classList.contains("e-popup-close"):!0)}function Rt(o,t){var i="e-wrap";o=o instanceof Array?o:[o];for(var e=0;e<o.length;e++)t?o[parseInt(e.toString(),10)].classList.add(i):o[parseInt(e.toString(),10)].classList.remove(i)}function Ys(o,t){var i=o.getService("valueFormatter"),e="format",r;switch((t.type==="date"||t.type==="datetime"||t.type==="dateonly")&&(r={type:t.type==="dateonly"?"date":t.type,skeleton:t.format},typeof t.format=="string"&&t.format!=="yMd"&&(r[""+e]=t.format)),t.type){case"date":t.setFormatter(i.getFormatFunction(r)),t.setParser(i.getParserFunction(r));break;case"dateonly":t.setFormatter(i.getFormatFunction(r)),t.setParser(i.getParserFunction(r));break;case"datetime":t.setFormatter(i.getFormatFunction(r)),t.setParser(i.getParserFunction(r));break;case"number":t.setFormatter(i.getFormatFunction({format:t.format})),t.setParser(i.getParserFunction({format:t.format}));break}}function Yi(o,t){for(var i=[],e=2;e<arguments.length;e++)i[e-2]=arguments[e];for(var r=0,n=o.length;r<n;r++)t?(ot(o[parseInt(r.toString(),10)],i.slice(),[]),o[parseInt(r.toString(),10)].setAttribute("aria-selected","true")):(ot(o[parseInt(r.toString(),10)],[],i.slice()),o[parseInt(r.toString(),10)].removeAttribute("aria-selected"))}function Gf(o,t){var i=t.element.style.display;t.element.style.display="block";var e=t.width,r=nl(o,t.element);t.element.style.display=i,t.element.style.top=r.top+o.getBoundingClientRect().height-5+"px";var n=r.left-e+o.clientWidth;n<1?t.element.style.left=e+n-16+"px":t.element.style.left=n+-4+"px"}function fr(o){var t=o.querySelector(".e-frame"),i=t.previousSibling;t.classList.contains("e-check")?(i.checked=!1,ot(t,["e-uncheck"],["e-check"])):(i.checked=!0,ot(t,["e-check"],["e-uncheck"]))}function Ui(o,t){o.checked=t}function xs(o,t,i){var e=Ve("div",{className:i});return e.appendChild(t),e.setAttribute("uid",o),e}function dn(o,t){F([o],["e-check","e-stop","e-uncheck"]),t?o.classList.add("e-check"):o.classList.add("e-uncheck")}function Uf(o,t,i){for(var e=0;e<t.length;e++)ht(t[parseInt(e.toString(),10)].field,nr(t[parseInt(e.toString(),10)],i),o.foreignKeyData);for(var r=o.cells,e=0;e<r.length;e++)r[parseInt(e.toString(),10)].isForeignKey&&ht("foreignKeyData",N(r[parseInt(e.toString(),10)].column.field,o.foreignKeyData),r[parseInt(e.toString(),10)])}function nr(o,t,i,e){var r=o.foreignKeyField,n=c(i)?uh(o.field,t):i;n=c(n)?"":n;var s=new se,a=e||(o.dataSource instanceof V&&o.dataSource.dataSource.json.length?o.dataSource.dataSource.json:o.columnData);return n.getDay?s.where(Vi({field:r,operator:"equal",value:n,matchCase:!1})):s.where(r,"==",n,!1),new V(a).executeLocal(s)}function yo(o,t){var i;return t.some(function(e){return i=e,e.foreignKeyValue===o})&&i}function Tn(o){return o<10?"0"+o:String(o)}function Vi(o,t,i){var e,r,n,s=_({},An(o)),a=_({},An(o));if(c(o.value)||o.value==="")return e=new be(s.field,s.operator,s.value,!1),e;var l=new Date(o.value);if(t==="dateonly"&&!i){typeof s.value=="string"&&(s.value=new Date(s.value));var h=s.value.getFullYear()+"-"+Tn(s.value.getMonth()+1)+"-"+Tn(s.value.getDate()),u=new be(s.field,s.operator,h,!1);e=u}else if(o.operator==="equal"||o.operator==="notequal"){t==="datetime"?(r=new Date(l.setSeconds(l.getSeconds()-1)),n=new Date(l.setSeconds(l.getSeconds()+2)),o.value=new Date(l.setSeconds(n.getSeconds()-1))):(r=new Date(l.setHours(0)-1),n=new Date(l.setHours(24))),s.value=r,a.value=n,o.operator==="equal"?(s.operator="greaterthan",a.operator="lessthan"):o.operator==="notequal"&&(s.operator="lessthanorequal",a.operator="greaterthanorequal");var p=new be(s.field,s.operator,s.value,!1),d=new be(a.field,a.operator,a.value,!1);e=o.operator==="equal"?p.and(d):p.or(d)}else{t==="date"&&(o.operator==="lessthanorequal"||o.operator==="greaterthan")&&(s.value=new Date(l.setHours(24)-1)),typeof s.value=="string"&&(s.value=new Date(s.value));var u=new be(s.field,s.operator,s.value,!1);e=u}return o.setProperties?o.setProperties({ejpredicate:e},!0):o.ejpredicate=e,e}function Qt(o){return o.enableVirtualization&&o.groupSettings.columns.length>0&&o.isVirtualAdaptive&&!o.groupSettings.enableLazyLoading}function mi(o,t){if(o===void 0&&(o=""),o){for(var i=t,e=o.split("."),r=0;r<e.length&&!c(i);r++)if(i=i[e[parseInt(r.toString(),10)]],yt(i)){var n=e[parseInt(r.toString(),10)].charAt(0).toUpperCase()+e[parseInt(r.toString(),10)].slice(1);i=t[""+n]||t[(""+n).charAt(0).toLowerCase()+(""+n).slice(1)]}return i}}function _f(o,t){for(var i=o.getRowsObject(),e={},r=0,n=i;r<n.length;r++){var s=n[r];if(s.isExpand&&!s.isDetailRow){var a=o.allowPaging&&o.printMode==="AllPages"?s.index+o.pageSettings.currentPage*o.pageSettings.pageSize-o.pageSettings.pageSize:s.index;c(a)||(e[parseInt(a.toString(),10)]={},e[parseInt(a.toString(),10)].isExpand=!0,o.childGrid&&(e[parseInt(a.toString(),10)].gridModel=dh(s.childGrid,t),e[parseInt(a.toString(),10)].gridModel.query=o.childGrid.query))}}return e}function dh(o,t){t===void 0&&(t="Expanded");var i={};if(!o)return i;for(var e=0,r=hh.printGridProp;e<r.length;e++){var n=r[e];n==="columns"?i[""+n]=zf(o.getColumns()):n==="allowPaging"?i[""+n]=o.printMode==="CurrentPage":i[""+n]=An(o[""+n])}return i.enableHover=!1,(o.childGrid||o.detailTemplate)&&t!=="None"&&(i.expandedRows=_f(o,t)),i}function Co(o,t,i,e){var r=o||{},n=arguments.length;e&&(n=n-1);for(var s=1;s<n;s++)if(arguments[parseInt(s.toString(),10)])for(var a=arguments[parseInt(s.toString(),10)],l=Object.keys(Object.getPrototypeOf(a)).length?Object.keys(a).concat(jf(a)):Object.keys(a),h=0;h<l.length;h++){var u=r[l[parseInt(h.toString(),10)]],p=a[l[parseInt(h.toString(),10)]],d=void 0;e&&(gn(p)||Array.isArray(p))?gn(p)?(d=u||{},r[l[parseInt(h.toString(),10)]]=_({},d,p,e)):(d=u||[],r[l[parseInt(h.toString(),10)]]=_([],d,p,e)):r[l[parseInt(h.toString(),10)]]=p}return r}function jf(o){for(var t=[];Object.getPrototypeOf(o)&&Object.keys(Object.getPrototypeOf(o)).length;)t=t.concat(Object.keys(Object.getPrototypeOf(o))),o=Object.getPrototypeOf(o);return t}function Kf(o){for(var t=0,i=0;i<o.length;i++){var e=fh(o[parseInt(i.toString(),10)],0);t<e&&(t=e)}return t+1}function fh(o,t){var i=t,e=[];if(o.columns){t++;for(var r=0;r<o.columns.length;r++)e[parseInt(r.toString(),10)]=fh(o.columns[parseInt(r.toString(),10)],t);for(var n=0;n<e.length;n++)i<e[parseInt(n.toString(),10)]&&(i=e[parseInt(n.toString(),10)]);t=i}return t}function Qf(o,t){for(var i=0;i<t.length;i++)t[parseInt(i.toString(),10)].uid=t[parseInt(i.toString(),10)].isForeignKey?yo(t[parseInt(i.toString(),10)].field,o.getForeignKeyColumns()).uid:o.enableColumnVirtualization?og(o,t[parseInt(i.toString(),10)].field).uid:o.getColumnByField(t[parseInt(i.toString(),10)].field).uid}var jt;(function(o){o.timer=null})(jt||(jt={}));function $a(o){var t=document.defaultView.getComputedStyle(o,null),i=t.getPropertyValue("transform"),e=i.replace(/,/g,""),r=parseFloat(e.split(" ")[4]),n=parseFloat(e.split(" ")[5]);return{width:r,height:n}}function So(o){var t=o.getContent().firstElementChild;return t.scrollWidth>t.offsetWidth?fi():0}function gh(o,t){var i=0,e=o.getColumns(),r=t*30;o.isRowDragable()&&(i++,r+=30),i+=o.groupSettings.columns.length-t,r+=30*(o.groupSettings.columns.length-t);for(var n=(o.width==="auto"?o.element.offsetWidth:parseInt(o.width.toString(),10))-So(o),s=0;s<e.length;s++)if(e[parseInt(s.toString(),10)].visible&&(r+=parseInt(e[parseInt(s.toString(),10)].width.toString(),10),i++),r>n){i--;break}return i}function Yf(o,t){for(var i=0,e=0;e<o.childNodes.length;e++){var r=o.childNodes[parseInt(e.toString(),10)];if(r.classList.add("e-leftfreeze"),vt(r,i,t.enableRtl,"Left"),(r.classList.contains("e-indentcell")||r.classList.contains("e-recordplusexpand")||r.classList.contains("e-recordpluscollapse"))&&(i+=30),r.classList.contains("e-groupcaption")){var n=parseInt(r.getAttribute("colspan"),10);t.isRowDragable()&&(n--,i+=30),n=n-(t.groupSettings.columns.length-e),i=i+30*(t.groupSettings.columns.length-e);for(var s=t.getColumns(),a=0;a<s.length;a++){if(parseInt(r.getAttribute("colspan"),10)>1&&parseInt(s[parseInt(a.toString(),10)].width.toString(),10)+i>parseInt(t.width.toString(),10)-So(t)){var l=gh(t,e);r.setAttribute("colspan",l.toString());break}if(s[parseInt(a.toString(),10)].visible&&(i+=parseInt(s[parseInt(a.toString(),10)].width.toString(),10),n--),n===0)break}}if(r.classList.contains("e-summarycell")){var h=r.getAttribute("e-mappinguid"),u=t.getColumnByUid(h);i+=parseInt(u.width.toString(),10)}}}function Xf(o,t){var i=Jf(t),e=new xt;return i.dataSource=e.resolve,i.action=o,{state:i,deffered:e}}function Jf(o){var t=new Dt,i=new V({url:"",adaptor:new Dt}),e=t.processQuery(i,o),r=JSON.parse(e.data);return r}function Xs(o){for(var t=o.getVisibleColumns(),i=0,e=0,r=0;r<t.length;r++)yt(t[parseInt(r.toString(),10)].width)?e++:t[parseInt(r.toString(),10)].width.toString().indexOf("%")!==-1&&i++;return(o.width==="auto"||typeof o.width=="string"&&o.width.indexOf("%")!==-1)&&!o.groupSettings.showGroupedColumn&&o.groupSettings.columns.length&&i&&!e}function $f(o,t,i,e,r){for(var n=e||0,s=r||0;s<t.length;s++)if(t[parseInt(s.toString(),10)]&&t[parseInt(s.toString(),10)].isDataRow){t[parseInt(s.toString(),10)].index=n,t[parseInt(s.toString(),10)].isAltRow=o.enableAltRow?n%2!==0:!1,i[parseInt(s.toString(),10)].setAttribute(Ke,n.toString()),i[parseInt(s.toString(),10)].setAttribute(mo,(n+1).toString()),t[parseInt(s.toString(),10)].isAltRow?i[parseInt(s.toString(),10)].classList.add("e-altrow"):i[parseInt(s.toString(),10)].classList.remove("e-altrow");for(var a=0;a<i[parseInt(s.toString(),10)].cells.length;a++)i[parseInt(s.toString(),10)].cells[parseInt(a.toString(),10)].setAttribute("index",n.toString());n++}t.length||o.renderModule.emptyRow(!0)}function Zf(o,t,i,e){var r=o.dataToBeUpdated[""+i].concat(t[""+i]).reduce(function(n,s){return n[s[""+e]]=n[s[""+e]]===void 0?s:Object.assign(n[s[""+e]],s),n},{});o.dataToBeUpdated[""+i]=Object.keys(r).map(function(n){return r[""+n]})}function eg(o){o.contentModule.rowElements=[].slice.call(o.element.querySelectorAll(".e-row:not(.e-addedrow)"))}function Za(o,t){var i=[];return i.push(o.uid),vh(o,i),i.indexOf(t)>-1}function vh(o,t){for(var i=0;i<o.columns.length;i++)o.columns[parseInt(i.toString(),10)].uid&&t.push(o.columns[parseInt(i.toString(),10)].uid),o.columns[parseInt(i.toString(),10)].columns&&o.columns[parseInt(i.toString(),10)].columns.length&&vh(o.columns[parseInt(i.toString(),10)],t)}function fn(o){return o.columns[0].freeze||o.columns[0].isFrozen?o.columns[0].freeze==="Left"||o.columns[0].isFrozen?"Left":o.columns[0].freeze==="Right"?"Right":o.columns[0].freeze==="Fixed"?"Fixed":"None":o.columns[0].columns&&o.columns[0].columns.length?fn(o.columns[0]):"None"}function Js(o){if(o.querySelector(".e-fixedfreeze"))for(var t=[].slice.call(o.querySelectorAll(".e-filterbarcell:not(.e-hide),.e-summarycell:not(.e-hide),.e-headercell:not(.e-hide),.e-rowcell:not(.e-hide)")),i=0;i<t.length;i++)t[parseInt(i.toString(),10)].classList.contains("e-fixedfreeze")&&(!t[i-1]||t[i-1]&&!t[i-1].classList.contains("e-fixedfreeze"))&&t[parseInt(i.toString(),10)].classList.add("e-freezeleftborder"),t[parseInt(i.toString(),10)].classList.contains("e-fixedfreeze")&&(!t[i+1]||t[i+1]&&!t[i+1].classList.contains("e-fixedfreeze"))&&t[parseInt(i.toString(),10)].classList.add("e-freezerightborder")}function vt(o,t,i,e){e==="Left"&&(i?o.style.right=t+"px":o.style.left=t+"px"),e==="Right"&&(i?o.style.left=t+"px":o.style.right=t+"px")}function mh(o,t,i){if(t.freeze==="Left"||t.isFrozen)if(i.classList.add("e-leftfreeze"),t.border==="Left"&&i.classList.add("e-freezeleftborder"),t.index===0)vt(i,o.getIndentCount()*30,o.enableRtl,"Left"),o.enableColumnVirtualization&&(t.valueX=o.getIndentCount()*30);else{for(var e=o.getColumns(),r=o.getIndentCount()*30,n=0;n<e.length&&t.uid!==e[parseInt(n.toString(),10)].uid;n++)e[parseInt(n.toString(),10)].visible&&(r+=parseFloat(e[parseInt(n.toString(),10)].width.toString()));vt(i,r,o.enableRtl,"Left"),o.enableColumnVirtualization&&(t.valueX=r)}else if(t.freeze==="Right"){i.classList.add("e-rightfreeze");var e=o.getColumns();if(t.border==="Right"&&i.classList.add("e-freezerightborder"),t.index===e[e.length-1].index){var r=o.getFrozenMode()==="Right"&&o.isRowDragable()?30:0;vt(i,r,o.enableRtl,"Right"),o.enableColumnVirtualization&&(t.valueX=r)}else{for(var r=o.getFrozenMode()==="Right"&&o.isRowDragable()?30:0,n=e.length-1;n>=0&&t.uid!==e[parseInt(n.toString(),10)].uid;n--)e[parseInt(n.toString(),10)].visible&&(r+=parseFloat(e[parseInt(n.toString(),10)].width.toString()));vt(i,r,o.enableRtl,"Right"),o.enableColumnVirtualization&&(t.valueX=r)}}else if(t.freeze==="Fixed"){i.classList.add("e-fixedfreeze");var e=o.getColumns(),r=0;o.getVisibleFrozenLeftCount()?r=o.getIndentCount()*30:o.getFrozenMode()==="Right"&&(r=o.groupSettings.columns.length*30);for(var n=0;n<e.length&&t.uid!==e[parseInt(n.toString(),10)].uid;n++)(e[parseInt(n.toString(),10)].freeze==="Left"||e[parseInt(n.toString(),10)].isFrozen||e[parseInt(n.toString(),10)].freeze==="Fixed")&&e[parseInt(n.toString(),10)].visible&&(r+=parseFloat(e[parseInt(n.toString(),10)].width.toString()));vt(i,r-1,o.enableRtl,"Left"),r=o.getFrozenMode()==="Right"&&o.isRowDragable()?30:0;for(var n=e.length-1;n>=0&&t.uid!==e[parseInt(n.toString(),10)].uid;n--)(e[parseInt(n.toString(),10)].freeze==="Right"||e[parseInt(n.toString(),10)].freeze==="Fixed")&&e[parseInt(n.toString(),10)].visible&&(r+=parseFloat(e[parseInt(n.toString(),10)].width.toString()));vt(i,r-1,o.enableRtl,"Right")}else i.classList.add("e-unfreeze")}function yh(o,t,i){return[].slice.call(o.getDataRows()[parseInt(i.toString(),10)].getElementsByClassName(Me))}function tg(o,t,i,e){return yh(o,t,i)[parseInt(e.toString(),10)]}function ig(o,t,i,e){var r,n=new Cr;if(t==="number")try{r=n.getNumberPattern({format:o,currency:e,useGrouping:!0},!0)}catch{r=o}else if(t==="date"||t==="time"||t==="datetime")try{if(r=n.getDatePattern({skeleton:o,type:t},i),c(r))throw"error"}catch{try{r=n.getDatePattern({format:o,type:t},i)}catch{r=o}}else r=o;if(t!=="number"){var s=/G|H|c|'| a|yy|y|EEEE|E/g,a={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};r=r.replace(s,function(l){return a[""+l]})}return r}function rg(o){if(o.enableAdaptiveUI)for(var t=document.getElementsByClassName("e-responsive-dialog"),i=0;i<t.length;i++)t[parseInt(i.toString(),10)].classList.add("e-bigger")}function ng(o,t){for(var i,e=o.split(".").length,r=o.split("."),n=t,s=0;s<e;s++)i=n[r[parseInt(s.toString(),10)]],n=i;return i}function sg(o,t,i,e,r,n){for(var s=Object.keys(o),a=t,l=0;l<s.length;l++){var h=o[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)];if(r&&!r.isFrozenGrid()&&!r.isRowDragable()){if(h=!c(h)&&parseInt(h.getAttribute("data-colindex"),10)===t?h:o[parseInt(l.toString(),10)].querySelector('td[data-colindex="'+t+'"]'),c(h))continue;t=r.getContentTable().querySelector(".e-detailrowcollapse, .e-detailrowexpand")?h.cellIndex-1:h.cellIndex}if(o[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell").length&&h){if(mt(o[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)],{display:i}),o[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)].classList.contains("e-hide")&&F([o[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)]],["e-hide"]),n&&r.isRowDragable()||r&&r.isDetail()){var u=t+1;e[s[parseInt(l.toString(),10)]].cells[parseInt(u.toString(),10)].visible=i===""}else c(e[s[parseInt(l.toString(),10)]])||(e[s[parseInt(l.toString(),10)]].cells[parseInt(t.toString(),10)].visible=i==="",e[s[parseInt(l.toString(),10)]].cells[parseInt(t.toString(),10)].visible===!1&&o[s[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(t.toString(),10)].classList.add("e-hide"));t=a}}}function Mi(o,t,i,e){for(var r=0,n=t;r<n.length;r++){var s=n[r];i?o.on(s.event,s.handler,e):o.off(s.event,s.handler)}}function og(o,t){var i;o.columnModel||o.getColumns();for(var e=0,r=o.columnModel;e<r.length;e++){var n=r[e];if(n.field===t){i=n;break}}return i}function bo(o,t){o.destroyTemplate(t),o.isReact&&o.renderTemplates()}function _t(o,t,i){var e=o,r=t,n=!1;if(i)for(var s=r[0];s<e.length;s++)for(var a=e[parseInt(s.toString(),10)],l=0;l<a.length;l++){if(n&&e[parseInt(s.toString(),10)][parseInt(l.toString(),10)]===1)return r=[s,l],r;!n&&r.toString()===[s,l].toString()&&(n=!0)}else for(var s=r[0];s>=0;s--)for(var a=e[parseInt(s.toString(),10)],l=a.length-1;l>=0;l--){if(n&&e[parseInt(s.toString(),10)][parseInt(l.toString(),10)]===1)return r=[s,l],r;!n&&r.toString()===[s,l].toString()&&(n=!0)}return r}var el=function(){function o(t){this.isExecuteLocal=!1,this.existingPredicate={},this.foreignKeyQuery=new se,this.filterState=!0,this.values={},this.renderEmpty=!1,this.isCheckboxFilterTemplate=!1,this.infiniteRenderMod=!1,this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1,this.infinitePermenantLocalData=[],this.infiniteQueryExecutionPending=!1,this.infiniteSkipCnt=0,this.infiniteScrollAppendDiff=0,this.prevInfiniteScrollDirection="",this.infiniteLoadedElem=[],this.infiniteDataCount=0,this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteManualSelectMaintainPred=[],this.parent=t,this.id=this.parent.element.id,this.valueFormatter=new Or(this.parent.locale),this.cBoxTrue=ir(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=ir(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&T([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?T([this.cBoxTrue,this.cBoxFalse],this.parent.cssClass.split(" ")):T([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass]))}return o.prototype.destroy=function(){this.closeDialog()},o.prototype.wireEvents=function(){b.add(this.dlg,"click",this.clickHandler,this),b.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=Dh(this.searchBoxKeyUp,200);var t=this.dialogObj.element.querySelector(".e-searchinput");t&&(b.add(t,"keyup",this.searchHandler,this),b.add(t,"input",this.searchHandler,this))},o.prototype.unWireEvents=function(){b.remove(this.dlg,"click",this.clickHandler),b.remove(this.dlg,"keyup",this.keyupHandler);var t=this.dialogObj.element.querySelector(".e-searchinput");t&&(b.remove(t,"keyup",this.searchHandler),b.remove(t,"input",this.searchHandler))},o.prototype.foreignKeyFilter=function(t,i,e){var r=this,n={},s=[],a=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(a.where(e)).then(function(l){r.options.column.columnData=l.result,r.parent.notify(ln,{predicate:n,column:r.options.column}),t.ejpredicate=n.predicate.predicates;for(var h=n.predicate.predicates,u=0;u<h.length;u++)s.push({field:h[parseInt(u.toString(),10)].field,predicate:"or",matchCase:h[parseInt(u.toString(),10)].ignoreCase,ignoreAccent:h[parseInt(u.toString(),10)].ignoreAccent,operator:h[parseInt(u.toString(),10)].operator,value:h[parseInt(u.toString(),10)].value,type:r.options.type});t.filterCollection=s.length?s:i.filter(function(p){return p.field=r.options.field}),r.options.handler(t)})},o.prototype.foreignFilter=function(t,i){var e=this.options.isRemote?this.options.column.type==="string"?"contains":"equal":this.options.column.type?"contains":"equal",r=new be(this.options.column.foreignKeyValue,e,i,!0,this.options.ignoreAccent);this.foreignKeyFilter(t,[t.filterCollection],r)},o.prototype.searchBoxClick=function(t){var i=t.target;i.classList.contains("e-searchclear")&&(this.sInput.value=i.classList.contains("e-chkcancel-icon")?"":this.sInput.value,this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:t}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},o.prototype.searchBoxKeyUp=function(t){(c(t)||t.key!=="ArrowUp"&&t.key!=="ArrowDown"&&t.key!=="Tab"&&!(t.key==="Tab"&&t.shiftKey))&&(!c(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:t}):this.refreshCheckboxes(),this.updateSearchIcon())},o.prototype.updateSearchIcon=function(){this.sInput.value.length?(ot(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]),c(document.body.querySelector(".e-chkcancel-icon"))||document.body.querySelector(".e-chkcancel-icon").setAttribute("title",this.localeObj.getConstant("Clear"))):(ot(this.sIcon,["e-search-icon"],["e-chkcancel-icon"]),c(document.body.querySelector(".e-searchclear.e-search-icon"))||document.body.querySelector(".e-searchclear.e-search-icon").setAttribute("title",this.localeObj.getConstant("Search")))},o.prototype.getLocalizedLabel=function(t){return this.localeObj.getConstant(t)},o.prototype.updateDataSource=function(){var t=this.options.dataSource,i="object";if(!(t instanceof V)){for(var e=0;e<t.length;e++)if(typeof t!==i){var r={};r[this.options.field]=t[parseInt(e.toString(),10)],t[parseInt(e.toString(),10)]=r}}},o.prototype.updateModel=function(t){this.options=t,this.existingPredicate=t.actualPredicate||{},this.options.dataSource=t.dataSource,this.options.dataManager=t.dataManager?t.dataManager:t.dataSource,this.updateDataSource(),this.options.type=t.type,this.options.format=t.format||"",this.options.ignoreAccent=t.ignoreAccent||!1,this.options.filteredColumns=t.filteredColumns||this.parent.filterSettings.columns,this.options.query=t.query||new se,this.options.allowCaseSensitive=t.allowCaseSensitive||!1,this.options.uid=t.column.uid,this.options.disableHtmlEncode=t.column.disableHtmlEncode||!1,this.values={},this.localeObj=t.localeObj,this.isFiltered=t.filteredColumns.length,this.infiniteRenderMod=!!(this.parent.filterSettings&&this.parent.filterSettings.enableInfiniteScrolling),this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]},o.prototype.getAndSetChkElem=function(t){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!t.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);var i={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search"),cssClass:this.parent.cssClass}};ce.createInput(i,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},o.prototype.showDialog=function(t){var i={requestType:vp,columnName:this.options.field,columnType:this.options.type,cancel:!1},e="filterModel";if(i[""+e]=this,this.parent.notify(qp,i),i.cancel){t.cancel=i.cancel;return}this.dialogObj=new fo({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!c(M(t.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""});var r="isStringTemplate";this.dialogObj[""+r]=!0,this.renderResponsiveFilter(t);var n=this.parent.filterSettings&&this.parent.filterSettings.type==="CheckBox"?this.getLocalizedLabel("CheckBoxFilterDialogARIA"):this.getLocalizedLabel("ExcelFilterDialogARIA");if(this.dlg.setAttribute("aria-label",n),t.isResponsiveFilter){var s=document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv");s.appendChild(this.dlg)}else this.parent.element.appendChild(this.dlg);this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=t.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show();var a=this.dialogObj.element.querySelector(".e-dlg-content");a.appendChild(this.sBox),this.wireEvents(),!c(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&!this.infiniteRenderMod?this.parent.showMaskRow(void 0,this.dialogObj.element):this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"?this.showMask():(this.infiniteRenderMod&&(this.cBox.style.marginTop=this.getListHeight(this.cBox)+"px"),Ir({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),Wi(this.spinner)),this.getAllData()},o.prototype.renderResponsiveFilter=function(t){t.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},o.prototype.dialogCreated=function(t){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":Q.isDevice?this.dialogObj.position={X:"center",Y:"center"}:Gf(this.options.target,this.dialogObj),this.options.column.showColumnMenu&&this.parent.notify(Lp,t)},o.prototype.openDialog=function(t){this.updateModel(t),this.getAndSetChkElem(t),this.showDialog(t)},o.prototype.closeDialog=function(){if(this.infiniteRenderMod&&this.infinitePermenantLocalData.length&&!this.options.isRemote&&(this.options.dataSource.dataSource.json=this.infinitePermenantLocalData),this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;var t=this.options.columns.filter(function(e){return e.getFilterItemTemplate()}),i=this.parent.registeredTemplate;t.length&&!c(i)&&i.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate!==void 0&&bo(this.parent,["filterItemTemplate"]),this.parent.notify(Fp,{field:this.options.field}),this.dialogObj.destroy(),this.unWireEvents(),Se(this.dlg),this.dlg=null,this.parent.notify(Xl,{})}},o.prototype.clearFilter=function(t){var i={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(Wa,i),!i.cancel&&this.options.handler({action:"clear-filter",field:t?t.field:this.options.field})},o.prototype.btnClick=function(t){if(this.filterState){if(t.target.tagName.toLowerCase()==="input"&&t.target.classList.contains("e-searchinput")||t.keyCode===13)this.isCheckboxFilterTemplate||this.fltrBtnHandler();else{var i=t.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===i?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===i&&this.clearFilter()}this.closeDialog()}else t.target&&t.target.firstChild&&t.target.firstChild.textContent.toLowerCase()===this.getLocalizedLabel("CancelButton").toLowerCase()?this.closeDialog():t.target.tagName.toLowerCase()!=="input"&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify(wd,{})},o.prototype.fltrBtnHandler=function(){var t=this;this.infiniteRenderMod&&(this.cBox.innerHTML="",qt(this.cBox,this.infiniteLoadedElem.slice()));var i=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)")),e=i,r="equal",n=this.dialogObj.element.querySelector(".e-dropdownlist");n&&(this.options.operator=r=n.ej2_instances[0].value),this.isMenuNotEqual=this.options.operator==="notequal";var s;this.options.hideSearchbox||(s=this.searchBox.querySelector(".e-searchinput"));var a=this.options.allowCaseSensitive,l={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:r,type:this.options.type,matchCase:a,ignoreAccent:this.options.ignoreAccent},h=this.itemsCnt!==i.length&&this.itemsCnt-i.length<i.length;h&&s&&s.value===""&&(r=this.isMenuNotEqual?"equal":"notequal",i=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),l.predicate=this.isMenuNotEqual?"or":"and",l.operator=r);var u,p,d,f,g=[];if(i.length!==this.itemsCnt||s&&s.value&&s.value!==""||this.infiniteRenderMod){if(this.infiniteRenderMod)this.infiniteRenderMod&&this.infiniteFltrBtnHandler(g);else for(var v=0;v<i.length;v++)u=this.values[M(i[parseInt(v.toString(),10)],"e-ftrchk").getAttribute("uid")],f=_({},{value:u},l),u&&!u.toString().length&&(f.operator=h?"notequal":"equal"),u===""||c(u)?g=g.concat(o.generateNullValuePredicates(l)):g.push(f),this.notifyFilterPrevEvent(f);(this.options.type==="date"||this.options.type==="datetime")&&e.length&&(d=e.length-1,p=this.values[M(e[parseInt(d.toString(),10)],"e-ftrchk").getAttribute("uid")],c(p)&&h&&g.push({field:l.field,matchCase:l.matchCase,operator:"equal",predicate:"and",value:null}));var m=this.infiniteRenderMod?this.sBox.querySelector(".e-add-current"):this.cBox.querySelector(".e-add-current");if(m&&m.classList.contains("e-check")){var y=this.existingPredicate[this.options.field];if(y)for(var I=function(L){g.some(function(P){return P.value===y[parseInt(L.toString(),10)].value})||g.push(y[parseInt(L.toString(),10)])},S=0;S<y.length;S++)I(S);else return}if(!this.infiniteRenderMod)this.initiateFilter(g);else if(g.length)this.initiateFilter(g);else if(this.sBox.querySelector(".e-selectall").classList.contains("e-check")&&!g.length){var R=this.options.filteredColumns.some(function(L){return t.options.field===L.field});R&&this.clearFilter()}}else{var R=this.options.filteredColumns.some(function(P){return t.options.field===P.field});R&&this.clearFilter()}},o.prototype.infiniteFltrBtnHandler=function(t){var i;if(this.infiniteManualSelectMaintainPred.length)for(var e=0;e<this.infiniteManualSelectMaintainPred.length;e++){var r=this.infiniteManualSelectMaintainPred[e];if(i=r.value+"",i===""||c(i)){var n={predicate:r.predicate,field:r.field,type:r.type,uid:r.uid,operator:r.operator,matchCase:r.matchCase,ignoreAccent:r.ignoreAccent};t.push.apply(t,o.generateNullValuePredicates(n))}else t.push(this.infiniteManualSelectMaintainPred[e]);this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[e])}if(!this.localInfiniteSelectAllClicked&&this.sInput.value===""&&!(!this.options.parentCurrentViewDataCount&&t.length))for(var e=0;e<this.infiniteUnloadParentExistPred.length;e++)t.unshift(this.infiniteUnloadParentExistPred[e]),this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][e]);this.sInput.value!==""&&(!this.localInfiniteSelectAllClicked||this.infiniteLocalSelectAll)&&(this.infiniteSearchPred.predicate="or",t.unshift(this.infiniteSearchPred),this.notifyFilterPrevEvent(this.infiniteSearchPred))},o.prototype.notifyFilterPrevEvent=function(t){var i={instance:this,handler:this.fltrBtnHandler,arg1:t.field,arg2:t.predicate,arg3:t.operator,arg4:t.matchCase,arg5:t.ignoreAccent,arg6:t.value,cancel:!1};this.parent.notify(Wa,i),i.cancel},o.generateNullValuePredicates=function(t){var i=[];return t.type==="string"&&i.push({field:t.field,ignoreAccent:t.ignoreAccent,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:""}),i.push({field:t.field,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:null}),i.push({field:t.field,matchCase:t.matchCase,operator:t.operator,predicate:t.predicate,value:void 0}),i},o.prototype.initiateFilter=function(t){var i=t[0],e;if(!c(i)){e=i.ejpredicate?i.ejpredicate:new be(i.field,i.operator,i.value,!i.matchCase,i.ignoreAccent);for(var r=1;r<t.length;r++)e=t[parseInt(r.toString(),10)].ejpredicate!==void 0?e[t[parseInt(r.toString(),10)].predicate](t[parseInt(r.toString(),10)].ejpredicate):e[t[parseInt(r.toString(),10)].predicate](t[parseInt(r.toString(),10)].field,t[parseInt(r.toString(),10)].operator,t[parseInt(r.toString(),10)].value,!t[parseInt(r.toString(),10)].matchCase,t[parseInt(r.toString(),10)].ignoreAccent);var n={action:"filtering",filterCollection:t,field:this.options.field,ejpredicate:be.or(e)};this.options.handler(n)}},o.prototype.isForeignColumn=function(t){return t.isForeignColumn?t.isForeignColumn():!1},o.prototype.refreshCheckboxes=function(){var t=this,i=this.sInput.value,e=this.options.column,r=this.isForeignColumn(e)?this.foreignKeyQuery.clone():this.options.query.clone(),n=this.options.query.clone(),s=r.queries.filter(function(S){return S&&S.fn==="onWhere"})[0];r.queries=[],n.queries=[];var a=this.options.type!=="string"&&parseFloat(i)?parseFloat(i):i,l=this.options.isRemote?this.options.type==="string"?"contains":"equal":this.options.type?"contains":"equal",h=!0,u=this.options.ignoreAccent,p=this.isForeignColumn(e)?e.foreignKeyValue:e.field;a=a===""||a===void 0?void 0:a;var d=[],f={field:p,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:h,ignoreAccent:u},g,v=this.options.dataManager.adaptor.getModuleName;if(this.options.type==="boolean"&&(a!==void 0&&this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())!==-1?a="true":a!==void 0&&this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())!==-1&&(a="false"),a!==void 0&&this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(a.toLowerCase())!==-1&&v?a=(v(),!0):a!==void 0&&this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(a.toLowerCase())!==-1&&v&&(a=(v(),!1)),l="equal"),(this.options.type==="date"||this.options.type==="datetime"||this.options.type==="dateonly")&&this.options.format){var m=new Cr,y=typeof this.options.format=="string"?this.options.format:this.options.format.format;y?a=m.parseDate(i,{format:y})||new Date(i):a=new Date(i),this.options.type==="dateonly"&&(a=a.getFullYear()+"-"+Tn(a.getMonth()+1)+"-"+Tn(a.getDate()))}this.infiniteSearchValChange=!0,this.infiniteLoadedElem=[],this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteSkipCnt=0,this.infiniteDataCount=0,this.infiniteManualSelectMaintainPred=[],this.sInput.value===""?(this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[],this.options.parentTotalDataCount=this.options.parentTotalDataCount):this.infiniteUnloadParentExistPred=[],this.addDistinct(r);var I={requestType:mp,filterModel:this,columnName:p,column:e,operator:l,matchCase:h,ignoreAccent:u,filterChoiceCount:null,query:r,value:a};this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(I.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(ri,I,function(S){if(S.operator=S.operator,g=new be(p,S.operator,I.value,S.matchCase,S.ignoreAccent),t.options.type==="date"||t.options.type==="datetime"||t.options.type==="dateonly"){l="equal";var R={field:p,operator:l,value:a,matchCase:h,ignoreAccent:u};c(a)||(g=Vi(R,t.options.type))}if(i&&typeof i=="string"&&t.isBlanks&&t.getLocalizedLabel("Blanks").toLowerCase().indexOf(i.toLowerCase())>=0){d=d.concat(o.generateNullValuePredicates(f));var L=o.generatePredicate(d);L.predicates.push(g),g=L,r.where(L)}else i.length?(g=c(s)?g:g.and(s.e),r.where(g)):c(s)||(g=s.e,r.where(s.e));t.infiniteSearchPred=g,S.filterChoiceCount=c(S.filterChoiceCount)?1e3:S.filterChoiceCount,t.infiniteRenderMod&&t.parent.filterSettings.itemsCount!==S.filterChoiceCount&&(t.parent.filterSettings.itemsCount=I.filterChoiceCount);var P={};if(Wi(t.spinner),t.renderEmpty=!1,t.isForeignColumn(e)&&i.length){var J="result"in e.dataSource?new V(e.dataSource.result):e.dataSource;J.executeQuery(r).then(function(he){var pe=t.options.column.columnData;t.options.column.columnData=he.result,t.parent.notify(ln,{predicate:P,column:e}),P.predicate.predicates.length?n.where(P.predicate):t.renderEmpty=!0,t.options.column.columnData=pe,t.infiniteRenderMod?(t.infiniteInitialLoad=!!c(t.fullData),t.makeInfiniteScrollRequest(n),n.requiresCount()):n.take(S.filterChoiceCount),t.search(S,n)})}else t.infiniteRenderMod&&t.parent.filterSettings.itemsCount?(t.infiniteInitialLoad=!!c(t.fullData),t.makeInfiniteScrollRequest(r),r.requiresCount()):r.take(S.filterChoiceCount),t.search(S,r)})},o.prototype.search=function(t,i){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(t,i):this.processSearch(i)},o.prototype.getPredicateFromCols=function(t,i){for(var e=o.getPredicate(t,i),r=[],n={},s=this.parent.getForeignKeyColumns!==void 0,a=s?this.parent.getForeignKeyColumns():[],l=0,h=Object.keys(e);l<h.length;l++){var u=h[l],p=void 0;s&&!this.parent.getColumnByField(u)&&(p=yo(u,a)),p?(this.parent.notify(ln,{predicate:n,column:p}),n.predicate.predicates.length&&r.push(be.or(n.predicate.predicates))):r.push(e[""+u])}return r.length&&be.and(r)},o.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new se},o.prototype.getAllData=function(){var t=this;this.customQuery=!1;var i=this.getQuery();i.requiresCount(),this.addDistinct(i);var e={requestType:Da,query:i,filterChoiceCount:null},r="filterModel";e[""+r]=this,this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(e.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(ri,e,function(n){n.filterChoiceCount=c(n.filterChoiceCount)?1e3:n.filterChoiceCount,t.infiniteRenderMod&&t.parent.filterSettings.itemsCount!==n.filterChoiceCount&&(t.parent.filterSettings.itemsCount=n.filterChoiceCount),t.infiniteRenderMod||i.take(n.filterChoiceCount),(!n.query.distincts.length||t.infiniteRenderMod)&&(t.customQuery=!0,t.queryGenerate(i)),t.infiniteRenderMod&&(t.infiniteInitialLoad=!!c(t.fullData),t.makeInfiniteScrollRequest(i)),t.parent.dataSource&&"result"in t.parent.dataSource?t.filterEvent(n,i):t.processDataOperation(i,!0)})},o.prototype.addDistinct=function(t){var i=this,e,r=A.distinct(this.options.filteredColumns,"field");if(r.indexOf(this.options.column.field)<=-1&&(r=r.concat(this.options.column.field)),this.infiniteRenderMod||t.distinct(r),this.infiniteRenderMod&&!this.options.isRemote&&this.sInput.value==="")this.options.dataSource=this.options.dataSource instanceof V?this.options.dataSource:new V(this.options.dataSource),this.infinitePermenantLocalData=this.options.dataSource.dataSource.json.slice(),this.options.dataSource.dataSource.json=A.distinct((e=this.options.parentFilteredLocalRecords).concat.apply(e,this.infinitePermenantLocalData),this.options.column.field,!0),this.isForeignColumn(this.options.column)&&(this.options.column.dataSource=this.options.column.dataSource instanceof V?this.options.column.dataSource:new V(this.options.column.dataSource),this.options.dataSource.dataSource.json=this.options.dataSource.dataSource.json.map(function(s,a){return Object.assign({},s,i.options.column.dataSource.dataSource.json[a])}));else if(this.infiniteRenderMod&&this.options.isRemote){t.select(this.options.column.field),t.sortBy(this.options.column.field,"ascending");var n=this.options.dataManager.adaptor.getModuleName;n&&n()&&(n()==="ODataV4Adaptor"||n()==="WebApiAdaptor"||n()==="CustomDataAdaptor"||n()==="GraphQLAdaptor"||n()==="ODataAdaptor")&&t.distinct(r)}return t},o.prototype.filterEvent=function(t,i){var e=this,r=Xf(t,i);this.parent.trigger(qs,r.state);var n=r.deffered;n.promise.then(function(s){e.dataSuccess(s)})},o.prototype.infiniteScrollMouseKeyDownHandler=function(){b.remove(this.cBox,"scroll",this.infiniteScrollHandler)},o.prototype.infiniteScrollMouseKeyUpHandler=function(t){var i=this;b.add(this.cBox,"scroll",this.infiniteScrollHandler,this);var e=this.cBox;e.children.length>1&&(e.scrollTop>=e.scrollHeight-e.offsetHeight||e.scrollTop<=0)&&this.infiniteScrollHandler(),jt.timer=setTimeout(function(){i.clickHandler(t),jt.timer=null},0)},o.prototype.getListHeight=function(t){var i=Ve("div",{className:"e-ftrchk",styles:"visibility: hidden"});i.innerHTML='<div class="e-checkbox-wrapper"><span class="e-label e-checkboxfiltertext">A</div></span>',t.appendChild(i);var e=i.getBoundingClientRect();t.removeChild(i);var r=Math.round(e.height);return r},o.prototype.getShimmerTemplate=function(){return'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},o.prototype.showMask=function(){var t=5,i,e=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxMaskList",className:"e-checkboxlist e-fields e-infinite-list e-masklist",styles:"z-index: 10;"}),r=this.cBox;if(this.removeMask(),r){var n=getComputedStyle(r),s=r.children.length?parseInt(n.height):Math.floor(parseInt(n.height.split("px")[0]))-5,a=this.isExcel&&!r.children.length&&!this.dlg.classList.contains("e-excelfilter")?"":getComputedStyle(this.dlg.querySelector(".e-dlg-content")).backgroundColor;e.style.cssText="width: "+n.width+"; min-height: "+n.minHeight+"; height: "+s+"px; margin: "+n.margin+"; border-style: "+n.borderStyle+"; border-width: "+n.borderWidth+"; border-color: "+n.borderColor+"; position: absolute; background-color: "+a+";";var l=this.getListHeight(r);t=Math.floor(s/l),t=r.children.length>t?r.children.length:t,i=l+"px"}var h='<div class="e-ftrchk e-mask-ftrchk" style="width: 100%; height:'+i+';"><div class="e-checkbox-wrapper" style="width: 100%;"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";if(e.innerHTML="",!r.children.length){this.spinner.insertAdjacentHTML("beforebegin",h);var u=[].slice.call(this.spinner.parentElement.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));u[0].classList.add("e-mask-checkbox-filter-intent"),u[1].classList.add("e-mask-checkbox-filter-span-intent")}this.spinner.insertBefore(e,this.cBox);for(var p=0;t&&p<t;p++){e.innerHTML+=h;var u=[].slice.call(e.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));u[0].classList.add("e-mask-checkbox-filter-intent"),u[1].classList.add("e-mask-checkbox-filter-span-intent")}this.cBox&&(e.scrollTop=this.cBox.scrollTop)},o.prototype.removeMask=function(){var t=this.dialogObj.element.querySelectorAll(".e-mask-ftrchk");if(t.length)for(var i=0;i<t.length;i++)Se(t[i]);var e=this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist");e&&Se(this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist"))},o.prototype.infiniteScrollHandler=function(){var t=this.cBox;t.scrollTop>=t.scrollHeight-t.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length<=this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3&&(!this.infiniteDataCount||this.infiniteDataCount>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)?(this.makeInfiniteScrollRequest(),this.prevInfiniteScrollDirection="down"):t.scrollTop>=t.scrollHeight-t.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3?(this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt+=this.prevInfiniteScrollDirection==="down"?this.parent.filterSettings.itemsCount:this.parent.filterSettings.itemsCount*3,qt(this.cBox,this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.parent.filterSettings.itemsCount+this.infiniteSkipCnt)),this.prevInfiniteScrollDirection="down"):t.scrollTop===0&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.infiniteLoadedElem.length>this.parent.filterSettings.itemsCount*3&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3?(this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount*2,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt-=this.prevInfiniteScrollDirection==="up"?this.parent.filterSettings.itemsCount:this.parent.filterSettings.itemsCount*3,this.infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount))),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up"):t.scrollTop===0&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.cBox.children.length<this.parent.filterSettings.itemsCount*3&&(this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount*2,this.infiniteDataCount%this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt=(Math.floor(this.infiniteDataCount/this.parent.filterSettings.itemsCount)-3)*this.parent.filterSettings.itemsCount,this.infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount))),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up")},o.prototype.infiniteRemoveElements=function(t){for(var i=0;i<t.length;i++)Se(t[i])},o.prototype.infiniteAppendElements=function(t){for(var i=0;i<t.length;i++)this.cBox.insertBefore(t[i],this.cBox.children[i])},o.prototype.makeInfiniteScrollRequest=function(t){var i=this;!this.infiniteInitialLoad&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"?setTimeout(function(){i.infiniteQueryExecutionPending&&i.showMask()},500):this.infiniteInitialLoad||(Ir({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),Wi(this.spinner));var e="fn";if(this.infiniteQuery&&this.infiniteQuery.queries&&this.infiniteQuery.queries.length)for(var r=0;r<this.infiniteQuery.queries.length;r++)(this.infiniteQuery.queries[r][""+e]==="onTake"||this.infiniteQuery.queries[r][""+e]==="onSkip")&&(this.infiniteQuery.queries.splice(r,1),r--);var n=!!t;t=t||this.infiniteQuery,this.infiniteInitialLoad||this.infiniteSearchValChange?this.infiniteSkipCnt=0:this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount,t.skip(this.infiniteSkipCnt),this.infiniteInitialLoad||this.infiniteSearchValChange?(t.take(this.parent.filterSettings.itemsCount*3),this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount*2):t.take(this.parent.filterSettings.itemsCount),n||(this.processDataOperation(t),this.infiniteQueryExecutionPending=!0)},o.prototype.processDataOperation=function(t,i){var e=this;this.options.dataSource=this.options.dataSource instanceof V?this.options.dataSource:new V(this.options.dataSource);var r=[],n=[];if(this.isForeignColumn(this.options.column)&&i){var s="result"in this.options.column.dataSource?new V(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=t.params,r.push(s.executeQuery(this.foreignKeyQuery)),n.push(function(l){return e.foreignKeyData=l})}if(this.infiniteRenderMod&&(this.infiniteQuery=t.clone(),this.infiniteInitialLoad?(this.cBox.classList.add("e-checkbox-infinitescroll"),b.add(this.cBox,"scroll",this.infiniteScrollHandler,this),b.add(this.cBox,"mouseup",this.infiniteScrollMouseKeyUpHandler,this),b.add(this.cBox,"mousedown",this.infiniteScrollMouseKeyDownHandler,this)):this.infiniteSearchValChange&&(this.cBox.innerHTML="")),this.infiniteRenderMod&&this.infiniteInitialLoad&&!this.options.isRemote){var a=this.isForeignColumn(this.options.column)?this.options.foreignKeyValue:this.options.column.field;this.options.dataSource.executeQuery(new se().sortBy(a,A.fnAscending)).then(function(l){e.options.dataSource.dataSource.json=l.result,e.executeQueryOperations(t,r,n)})}else this.executeQueryOperations(t,r,n)},o.prototype.executeQueryOperations=function(t,i,e){var r=this;i.push(this.options.dataSource.executeQuery(t)),e.push(this.dataSuccess.bind(this));var n=0;Promise.all(i).then(function(s){r.infiniteQueryExecutionPending=r.infiniteRenderMod?!1:r.infiniteQueryExecutionPending;for(var a=0;a<s.length;a++)r.infiniteDataCount=r.infiniteRenderMod&&!r.infiniteDataCount?s[a].count:r.infiniteDataCount,e[n++](s[parseInt(a.toString(),10)].result)}).catch(function(){r.infiniteRenderMod&&r.parent.filterSettings&&r.parent.filterSettings.loadingIndicator==="Shimmer"&&r.parent.showMaskRow(void 0,r.dialogObj.element)})},o.prototype.dataSuccess=function(t){if(!(!this.infiniteInitialLoad&&this.infiniteDataCount&&(this.infiniteSkipCnt>=this.infiniteDataCount&&!this.infiniteSearchValChange||t.length===0))){this.fullData=t;var i={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify(sd,i),i.executeQuery){var e=new se;this.customQuery||(this.isExecuteLocal=!0,this.queryGenerate(e),this.isExecuteLocal=!1);var r=new V(i.dataSource).executeLocal(e),n=this.options.column;this.filteredData=o.getDistinct(r,this.options.field,n,this.foreignKeyData,this).records||[]}var s=i.executeQuery?this.filteredData:i.dataSource;this.processDataSource(null,!0,s,i),this.sInput&&(this.infiniteRenderMod&&this.infiniteInitialLoad||!this.infiniteRenderMod)&&this.sInput.focus(),(this.infiniteInitialLoad||this.infiniteSearchValChange)&&(this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1);var a={requestType:gp,columnName:this.options.field,columnType:this.options.type},l="filterModel";a[""+l]=this,this.parent.notify(Va,a),this.isCheckboxFilterTemplate&&Er(this.spinner)}},o.prototype.queryGenerate=function(t){if(this.parent.searchSettings&&this.parent.searchSettings.key.length){var i=this.parent.searchSettings,e=i.fields.length?i.fields:this.options.columns.map(function(l){return l.field});t.search(i.key,e,i.operator,i.ignoreCase,i.ignoreAccent)}if(this.options.filteredColumns.length){for(var r=[],n=0;n<this.options.filteredColumns.length;n++){var s=this.options.filteredColumns[parseInt(n.toString(),10)];this.options.uid?(s.uid=s.uid||this.parent.getColumnByField(s.field).uid,s.uid!==this.options.uid&&r.push(this.options.filteredColumns[parseInt(n.toString(),10)])):s.field!==this.options.field&&r.push(this.options.filteredColumns[parseInt(n.toString(),10)])}var a=this.getPredicateFromCols(r,this.isExecuteLocal);a&&t.where(a)}},o.prototype.processDataSource=function(t,i,e,r){Wi(this.spinner),this.isExecuteLocal=!0,this.updateResult(),this.isExecuteLocal=!1;var n={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify(Id,n),this.isCheckboxFilterTemplate=n.isCheckboxFilterTemplate,this.isCheckboxFilterTemplate?this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.removeMask():this.createFilterItems(e,i,r)},o.prototype.processSearch=function(t){this.processDataOperation(t)},o.prototype.updateResult=function(){this.result={};var t=this.infiniteRenderMod&&this.existingPredicate[this.options.field]?this.getPredicateFromCols(this.existingPredicate[this.options.field],this.isExecuteLocal):this.getPredicateFromCols(this.options.filteredColumns,this.isExecuteLocal),i=new se;t&&i.where(t),this.parent.notify(Sd,{query:i});for(var e=new V(this.fullData).executeLocal(i),r=0,n=e;r<n.length;r++){var s=n[r];this.result[mi(this.options.field,s)]=!0}},o.prototype.clickHandler=function(t){var i;c(jt.timer)||clearTimeout(jt.timer);var e=t.target;if(!(!c(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&M(e,"e-mask-ftrchk"))){var r=M(e,"e-checkbox-wrapper");if(M(e,"e-searchbox")&&this.searchBoxClick(t),r&&!this.isCheckboxFilterTemplate){var n=r.querySelector(".e-selectall");if(n)this.updateAllCBoxes(!n.classList.contains("e-check"));else if(fr(r.parentElement),this.infiniteRenderMod&&!r.parentElement.querySelector(".e-add-current")){this.localInfiniteSelectionInteracted=!0;var s=this.options.allowCaseSensitive,a=r.parentElement.querySelector(".e-frame"),l=a.previousSibling,h=l.checked?"equal":"notequal",u=l.checked?"or":"and",p={field:this.options.field,predicate:u,uid:this.options.uid,operator:h,type:this.options.type,matchCase:s,ignoreAccent:this.options.ignoreAccent},d=this.values[M(l,"e-ftrchk").getAttribute("uid")];if(this.updateInfiniteManualSelectPred(p,d),this.infiniteRenderMod&&!this.options.isRemote&&this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length){var f=this.getPredicateFromCols((i=this.options.filteredColumns).concat.apply(i,this.infiniteManualSelectMaintainPred),!0),g=new se;f&&g.where(f);var v=new V(this.infinitePermenantLocalData).executeLocal(g);this.options.parentTotalDataCount!==v.length&&(this.options.parentTotalDataCount=v.length),!this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length&&(this.infiniteUnloadParentExistPred=[])}this.infiniteUnloadParentExistPred.length&&(this.options.parentTotalDataCount===this.infiniteDataCount||!this.options.parentTotalDataCount)&&(this.infiniteUnloadParentExistPred=[])}this.updateIndeterminatenBtn(),r.querySelector(".e-chk-hidden").focus()}this.setFocus(M(r,"e-ftrchk"))}},o.prototype.updateInfiniteManualSelectPred=function(t,i){for(var e=0;e<this.infiniteManualSelectMaintainPred.length;e++){var r=this.infiniteManualSelectMaintainPred[e];if(r.value+""==i+""&&(r.operator==="equal"||r.operator==="notequal")){this.infiniteManualSelectMaintainPred.splice(e,1);break}}(t.predicate==="or"&&(!this.localInfiniteSelectAllClicked||!this.infiniteLocalSelectAll)||t.predicate==="and"&&(!this.localInfiniteSelectAllClicked||this.infiniteLocalSelectAll))&&(this.infiniteManualSelectMaintainPred.push(_({},{value:i},t)),t.predicate==="or"?this.options.parentTotalDataCount++:this.options.parentTotalDataCount--)},o.prototype.focusNextOrPrev=function(t,i){var e=t.key==="ArrowUp"?i.indexOf(document.activeElement)-1:i.indexOf(document.activeElement)+1,r=i[(e+i.length)%i.length];if(r){r.focus();var n=r.classList.contains("e-chk-hidden")?M(r,"e-ftrchk"):r;this.setFocus(n)}},o.prototype.keyupHandler=function(t){if((t.key==="Tab"&&t.shiftKey||t.key==="Tab"||(t.key==="ArrowUp"||t.key==="ArrowDown")&&!t.altKey)&&this.setFocus(M(t.target,"e-ftrchk")),(t.key==="ArrowUp"||t.key==="ArrowDown")&&!t.altKey&&this.parent.filterSettings.type==="CheckBox"){t.preventDefault();var i=Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"])'));this.focusNextOrPrev(t,i)}},o.prototype.setFocus=function(t){var i=this.dlg.querySelector(".e-chkfocus");i&&i.classList.remove("e-chkfocus"),t&&t!==i&&t.classList.add("e-chkfocus")},o.prototype.updateAllCBoxes=function(t){this.infiniteRenderMod&&(this.localInfiniteSelectAllClicked=!0,this.infiniteLocalSelectAll=t,this.infiniteUnloadParentExistPred=[],this.infiniteManualSelectMaintainPred=[]);for(var i=this.infiniteRenderMod?this.infiniteLoadedElem.map(function(s){return s.querySelector(".e-frame")}):[].slice.call(this.cBox.querySelectorAll(".e-frame:not(.e-add-current)")),e=0,r=i;e<r.length;e++){var n=r[e];dn(n,t),Ui(n.previousSibling,t)}},o.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},o.prototype.createCheckbox=function(t,i,e){var r=i?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);Ui(r.querySelector("input"),i);var n=r.querySelector(".e-label"),s=Co({},e,{column:this.options.column,parent:this.parent}),a=this.options.disableHtmlEncode?"textContent":"innerHTML";n[""+a]=!c(t)&&t.toString().length?this.parent.enableHtmlSanitizer?ti.sanitize(t):t:this.getLocalizedLabel("Blanks");var l=Ai("cbox");if(n.setAttribute("id",l+"cboxLabel"),r.querySelector("input").setAttribute("aria-labelledby",n.id),n.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),typeof t=="boolean"&&(n.innerHTML=t===!0?this.getLocalizedLabel("FilterTrue"):this.getLocalizedLabel("FilterFalse")),T([n],["e-checkboxfiltertext"]),this.options.template&&e[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&e[this.options.column.field]!==this.getLocalizedLabel("AddCurrentSelection")){n.innerHTML="";var h=this.parent.isReact&&this.options.column.filter&&typeof this.options.column.filter.itemTemplate!="string",u=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;h||u?(this.options.template(s,this.parent,"filterItemTemplate",null,null,null,n),this.parent.renderTemplates()):qt(n,this.options.template(s,this.parent,"filterItemTemplate"))}return r},o.prototype.updateIndeterminatenBtn=function(){var t=this.infiniteRenderMod?this.infiniteLoadedElem.length:this.cBox.children.length-1,i=[],e=!1,r=this.infiniteRenderMod?this.sBox.querySelector(".e-selectall"):this.cBox.querySelector(".e-selectall"),n=this.infiniteRenderMod?this.infiniteLoadedElem.filter(function(l){return l.querySelector(".e-check")}).length:this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)").length;this.cBox.querySelector(".e-add-current")&&(t-=1);var s;this.options.isResponsiveFilter||(s=this.dialogObj.btnObj[0],s.disabled=!1);var a=r.previousSibling;Ui(a,!1),a.indeterminate=!1,this.infiniteRenderMod&&this.sInput.value===""&&!this.options.parentCurrentViewDataCount&&!this.localInfiniteSelectionInteracted&&(!this.localInfiniteSelectAllClicked||!this.infiniteLocalSelectAll&&!n)&&(t!==n||t===n)?n=0:this.infiniteRenderMod&&this.infiniteLoadedElem.length<this.infiniteDataCount&&this.infiniteUnloadParentExistPred.length&&(!n||t===n)&&this.infiniteLocalSelectAll&&(n?t+=this.infiniteUnloadParentExistPred.length:n+=this.infiniteUnloadParentExistPred.length),t===n?(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),i=["e-check"],Ui(a,!0)):n?(i=["e-stop"],a.indeterminate=!0):(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!1,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),i=["e-uncheck"],e=!0,s&&(s.disabled=!0)),s&&(this.filterState=!s.disabled,s.dataBind()),F([r],["e-check","e-stop","e-uncheck"]),T([r],i),this.parent.notify(Us,{disabled:e})},o.prototype.createFilterItems=function(t,i,e){var r,n,s,a=this.parent.createElement("div"),l,h=!1;this.options.isResponsiveFilter||(l=this.dialogObj.btnObj[0]);var u=-1,p="ejValue";e.executeQuery||(p=e.field);for(var d=0;d<t.length;d++){var f=N(p,t[parseInt(d.toString(),10)]);(f===""||c(f))&&(u=u+1)}if(this.infiniteRenderMod||(this.itemsCnt=u!==-1?t.length-u:t.length),this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.removeMask(),t.length&&!this.renderEmpty){var g=this.getLocalizedLabel("SelectAll"),v=this.cBox.querySelector(".e-checkfltrnmdiv");v&&v.classList.remove("e-checkfltrnmdiv");var m=this.createCheckbox(g,!1,(r={},r[this.options.field]=g,r));if(this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?T([m],this.parent.cssClass.split(" ")):T([m],[this.parent.cssClass])),this.infiniteInitialLoad||!this.infiniteRenderMod){var y=xs(Ai("cbox"),m,"e-ftrchk");y.querySelector(".e-frame").classList.add("e-selectall"),this.infiniteRenderMod?this.sBox.insertBefore(y,this.spinner):a.appendChild(y)}else this.sBox.querySelector(".e-ftrchk .e-selectall")&&(this.sBox.querySelector(".e-ftrchk .e-selectall").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-selectall").parentElement.classList.remove("e-checkbox-disabled"));var I=new be("field","equal",this.options.field);this.options.foreignKeyValue&&(I=I.or("field","equal",this.options.foreignKeyValue));var S=new V(this.options.filteredColumns).executeLocal(new se().where(I)).length;if(this.sInput.value){var R=this.createCheckbox(this.getLocalizedLabel("AddCurrentSelection"),!1,(n={},n[this.options.field]=this.getLocalizedLabel("AddCurrentSelection"),n));if(this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?T([R],this.parent.cssClass.split(" ")):T([R],[this.parent.cssClass])),this.infiniteRenderMod&&!c(this.sBox.children[2])&&this.sBox.children[2].innerText!=="Add current selection to filter"||!this.infiniteRenderMod){var L=xs(Ai("cbox"),R,"e-ftrchk");if(L.querySelector(".e-frame").classList.add("e-add-current"),this.infiniteRenderMod){this.sBox.insertBefore(L,this.spinner);var P=this.spinner.querySelector(".e-checkboxlist"),J=Math.ceil(L.getBoundingClientRect().height);P.style.height=parseInt(getComputedStyle(P).height.split("px")[0])-J+"px",P.style.minHeight=P.style.height}else a.appendChild(L)}else this.sBox.querySelector(".e-ftrchk .e-add-current")&&(this.sBox.querySelector(".e-ftrchk .e-add-current").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-add-current").parentElement.classList.remove("e-checkbox-disabled"))}else if(this.infiniteRenderMod&&!c(this.sBox.children[2])&&this.sBox.children[2].innerText==="Add current selection to filter"){var P=this.spinner.querySelector(".e-checkboxlist"),he=Math.ceil(this.sBox.children[2].getBoundingClientRect().height);P.style.height=parseInt(getComputedStyle(P).height.split("px")[0])+he+"px",P.style.minHeight=P.style.height,Se(this.sBox.children[2])}for(var pe=void 0,d=0;d<t.length;d++){var Re=Ai("cbox");this.values[""+Re]=N(p,t[parseInt(d.toString(),10)]);var B=N(this.options.field,t[parseInt(d.toString(),10)]);this.options.formatFn&&(B=this.valueFormatter.toView(B,this.options.formatFn));var H={value:B,column:this.options.column,data:t[parseInt(d.toString(),10)]};if(this.parent.notify(Vp,H),B=H.value,B===""||c(B)){if(pe)continue;pe=!0}this.infiniteRenderMod&&this.updateInfiniteUnLoadedCheckboxExistPred(B,this.infiniteUnloadParentExistPred);var O=this.localInfiniteSelectAllClicked?this.createCheckbox(B,this.infiniteLocalSelectAll,N("dataObj",t[d])):this.createCheckbox(B,this.getCheckedState(S,this.values[""+Re]),N("dataObj",t[d]));a.appendChild(xs(Re,O,"e-ftrchk")),this.infiniteRenderMod&&(a.lastChild.style.height=this.getListHeight(this.cBox)+"px")}var U=this.cBox.scrollTop;!this.infiniteRenderMod||this.infiniteSearchValChange?this.cBox.innerHTML="":this.infiniteRenderMod&&this.cBox.children.length&&this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteRenderMod&&((s=this.infiniteLoadedElem).push.apply(s,[].slice.call(a.children)),this.itemsCnt=u!==-1?this.infiniteLoadedElem.length-u:this.infiniteLoadedElem.length),this.infiniteUnloadParentExistPred.length&&(this.infiniteLoadedElem.length>=this.infiniteDataCount||!this.options.parentCurrentViewDataCount||this.options.parentTotalDataCount===this.infiniteDataCount&&this.options.parentCurrentViewDataCount)&&(this.infiniteUnloadParentExistPred=[]),qt(this.cBox,[].slice.call(a.children)),this.infiniteRenderMod&&!this.infiniteScrollAppendDiff&&(this.infiniteScrollAppendDiff=Math.round(U-this.cBox.scrollTop)),this.updateIndeterminatenBtn(),this.infiniteRenderMod?l.disabled?h=!0:h=!1:(l&&(l.disabled=!1),h=!1)}else{if(a.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.infiniteRenderMod){var y=this.sBox.querySelector(".e-ftrchk .e-selectall");if(y){var re=y.parentElement.parentElement;y.classList.contains("e-check")?fr(re):y.classList.contains("e-stop")&&(fr(re),y.classList.remove("e-stop"),fr(re)),y.previousSibling.disabled=!0,y.parentElement.classList.add("e-checkbox-disabled")}var j=this.sBox.querySelector(".e-ftrchk .e-add-current");if(j){var W=j.parentElement.parentElement;j.classList.contains("e-check")&&fr(W),j.previousSibling.disabled=!0,j.parentElement.classList.add("e-checkbox-disabled")}}this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),qt(this.cBox.children[0],[].slice.call(a.children)),l&&(l.disabled=!0),h=!0,this.filterState=!h}l&&t.length&&(this.filterState=!l.disabled,l.dataBind());var G={requestType:Da,dataSource:this.renderEmpty?[]:t},te="filterModel";G[""+te]=this,this.parent.notify(Va,G),this.parent.notify(Us,{disabled:h}),this.infiniteRenderMod&&this.infiniteInitialLoad&&(this.cBox.style.marginTop="0px"),Er(this.spinner)},o.prototype.updateInfiniteUnLoadedCheckboxExistPred=function(t,i){for(var e=0;e<i.length;e++){var r=i[e];t===r.value&&(r.operator==="equal"||r.operator==="notequal")&&(this.infiniteManualSelectMaintainPred.push(i[e]),i.splice(e,1),e--)}},o.prototype.getCheckedState=function(t,i){if(!this.isFiltered||!t)return!0;var e=this.sInput.value?!0:this.result[""+i];return this.infiniteRenderMod?e:this.options.operator==="notequal"?!e:e},o.getDistinct=function(t,i,e,r,n){for(var s=t.length,a=[],l,h="ejValue",u={},p=e&&e.isForeignColumn?e.isForeignColumn():!1;s--;){if(l=t[parseInt(s.toString(),10)],e&&e.type==="dateonly"&&typeof l[""+i]=="string"&&l[""+i]){var d=l[""+i].split(/[^0-9.]/);l[""+i]=new Date(parseInt(d[0],10),parseInt(d[1],10)-1,parseInt(d[2],10))}l=mi(i,l);var f=typeof l=="string"&&!c(n)&&!c(n.parent)&&!c(n.parent.filterSettings)&&!c(n.parent.filterSettings.enableCaseSensitivity)?l.toLowerCase():l;if(!(f in u)){var g={};if(g[""+h]=l,u[""+f]=!0,p){var v=nr(e,{},l,r)[0];ht(jl,v,t[parseInt(s.toString(),10)]),l=N(e.foreignKeyValue,v)}ht(i,c(l)?null:l,g),ht("dataObj",t[parseInt(s.toString(),10)],g),a.push(g)}}return A.group(A.sort(a,i,A.fnAscending),"ejValue")},o.getPredicate=function(t,i){for(var e=A.distinct(t,"field",!0)||[],r=[],n={},s=0;s<e.length;s++)r=new V(t).executeLocal(new se().where("field","equal",e[parseInt(s.toString(),10)].field)),r.length!==0&&(n[e[parseInt(s.toString(),10)].field]=o.generatePredicate(r,i));return n},o.generatePredicate=function(t,i){var e=t?t.length:0,r,n="or",s=o.updateDateFilter(t[0]);s.ignoreAccent=c(s.ignoreAccent)?!1:s.ignoreAccent,s.type==="date"||s.type==="datetime"||s.type==="dateonly"?r=Vi(s,s.type,i):r=s.ejpredicate?s.ejpredicate:new be(s.field,s.operator,s.value,!o.getCaseValue(s),s.ignoreAccent);for(var a=1;a<e;a++)t[parseInt(a.toString(),10)]=o.updateDateFilter(t[parseInt(a.toString(),10)]),e>2&&a>1&&(t[a].predicate==="or"&&t[a-1].predicate==="or"||t[a].predicate==="and"&&t[a-1].predicate==="and")?t[a].type==="date"||t[a].type==="datetime"||t[a].type==="dateonly"?r.predicates.push(Vi(t[parseInt(a.toString(),10)],t[a].type,i)):r.predicates.push(new be(t[a].field,t[parseInt(a.toString(),10)].operator,t[parseInt(a.toString(),10)].value,!o.getCaseValue(t[parseInt(a.toString(),10)]),t[parseInt(a.toString(),10)].ignoreAccent)):t[a].type==="date"||t[a].type==="datetime"||t[a].type==="dateonly"?t[parseInt(a.toString(),10)].predicate==="and"&&t[parseInt(a.toString(),10)].operator==="equal"?r=r[""+n](Vi(t[parseInt(a.toString(),10)],t[parseInt(a.toString(),10)].type,i),t[parseInt(a.toString(),10)].type,t[parseInt(a.toString(),10)].ignoreAccent):r=r[t[parseInt(a.toString(),10)].predicate](Vi(t[parseInt(a.toString(),10)],t[parseInt(a.toString(),10)].type,i),t[parseInt(a.toString(),10)].type,t[parseInt(a.toString(),10)].ignoreAccent):r=t[parseInt(a.toString(),10)].ejpredicate?r[t[parseInt(a.toString(),10)].predicate](t[parseInt(a.toString(),10)].ejpredicate):r[t[parseInt(a.toString(),10)].predicate](t[parseInt(a.toString(),10)].field,t[parseInt(a.toString(),10)].operator,t[parseInt(a.toString(),10)].value,!o.getCaseValue(t[parseInt(a.toString(),10)]),t[parseInt(a.toString(),10)].ignoreAccent);return r||null},o.getCaseValue=function(t){return c(t.matchCase)?!(t.type==="string"||c(t.type)&&typeof t.value=="string"):t.matchCase},o.updateDateFilter=function(t){return(t.type==="date"||t.type==="datetime"||t.type==="dateonly"||t.value instanceof Date)&&(t.type=t.type||"date"),t},o}(),ag=function(){var o=function(t,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},o(t,i)};return function(t,i){o(t,i);function e(){this.constructor=t}t.prototype=i===null?Object.create(i):(e.prototype=i.prototype,new e)}}(),Ch=function(o){ag(t,o);function t(i){var e=o.call(this,i)||this;return e.initRenderCalled=!1,e.checkInjectedModules=!0,e.directivekeys={columns:{column:{stackedColumns:"stackedColumn"}},aggregates:{aggregate:{aggregateColumns:"aggregateColumn"}}},e.statelessTemplateProps=null,e.templateProps=["template","headerTemplate","commandsTemplate","filter.itemTemplate","editTemplate","filterTemplate"],e.immediateRender=!1,e.portals=[],e}return t.prototype.render=function(){if((this.element&&!this.initRenderCalled||this.refreshing)&&!this.isReactForeceUpdate)o.prototype.render.call(this),this.initRenderCalled=!0;else return Xe.createElement("div",this.getDefaultAttributes(),[].concat(this.props.children,this.portals))},t}(lh);Fr(Ch,[Lr,Xe.Component]);const lg=()=>{const o=il(),t=["All","Available","Applicable","Deployed","New","Updated","Sigma Translations"],i=[{OrderID:10248,CustomerID:"VINET",ShipCountry:"France"},{OrderID:10249,CustomerID:"TOMSP",ShipCountry:"Germany"},{OrderID:10250,CustomerID:"HANAR",ShipCountry:"Brazil"},{OrderID:10251,CustomerID:"VICTE",ShipCountry:"France"}],r={dataSource:[{id:1,name:"Australia",hasChild:!0,expanded:!0},{id:2,pid:1,name:"New South Wales"},{id:3,pid:1,name:"Victoria"},{id:4,pid:1,name:"South Australia"},{id:6,pid:1,name:"Western Australia"},{id:7,name:"Brazil",hasChild:!0},{id:8,pid:7,name:"Paran"},{id:9,pid:7,name:"Cear"},{id:10,pid:7,name:"Acre"},{id:11,name:"China",hasChild:!0},{id:12,pid:11,name:"Guangzhou"},{id:13,pid:11,name:"Shanghai"},{id:14,pid:11,name:"Beijing"},{id:15,pid:11,name:"Shantou"},{id:16,name:"France",hasChild:!0},{id:17,pid:16,name:"Pays de la Loire"},{id:18,pid:16,name:"Aquitaine"},{id:19,pid:16,name:"Brittany"},{id:20,pid:16,name:"Lorraine"},{id:21,name:"India",hasChild:!0},{id:22,pid:21,name:"Assam"},{id:23,pid:21,name:"Bihar"},{id:24,pid:21,name:"Tamil Nadu"},{id:25,pid:21,name:"Punjab"}],id:"id",parentID:"pid",text:"name",hasChildren:"hasChild"};return Xe.useEffect(()=>{console.log("location",o)},[]),$.jsxs("div",{className:"container px-2",children:[$.jsxs("div",{className:"grid grid-cols-6 gap-2 pt-2 pb-4",children:[$.jsx("div",{className:"e-card text-center",children:$.jsx("div",{className:"e-card-header",children:$.jsxs("div",{className:"e-card-header-caption",children:[$.jsxs("div",{className:"e-card-title flex justify-center items-center gap-2 mb-2",children:[$.jsx("p",{className:"uppercase font-semibold",children:"available"}),$.jsx("span",{className:"e-circle-info e-icons text-blue-600"})]}),$.jsx("div",{className:"e-card-subtitle text-blue-900 font-semibold",children:"191"})]})})}),$.jsx("div",{className:"e-card text-center",children:$.jsx("div",{className:"e-card-header",children:$.jsxs("div",{className:"e-card-header-caption",children:[$.jsxs("div",{className:"e-card-title flex justify-center items-center gap-2 mb-2",children:[$.jsx("span",{className:"e-circle-check e-icons text-green-400"}),$.jsx("p",{className:"uppercase font-semibold",children:"applicable"}),$.jsx("span",{className:"e-circle-info e-icons text-blue-600"})]}),$.jsx("div",{className:"e-card-subtitle text-blue-400 font-semibold",children:"144"})]})})}),$.jsx("div",{className:"e-card text-center",children:$.jsx("div",{className:"e-card-header",children:$.jsxs("div",{className:"e-card-header-caption",children:[$.jsxs("div",{className:"e-card-title flex justify-center items-center gap-2 mb-2",children:[$.jsx("span",{className:"e-circle-check e-icons text-green-400"}),$.jsx("p",{className:"uppercase font-semibold",children:"deployed"}),$.jsx("span",{className:"e-circle-info e-icons text-blue-600"})]}),$.jsx("div",{className:"e-card-subtitle text-green-400 font-semibold",children:"144"})]})})}),$.jsx("div",{className:"e-card text-center",children:$.jsx("div",{className:"e-card-header",children:$.jsxs("div",{className:"e-card-header-caption",children:[$.jsxs("div",{className:"e-card-title flex justify-center items-center gap-2 mb-2",children:[$.jsx("span",{className:"rounded-lg border border-blue-400 text-blue-400 text-xs",children:"new"}),$.jsx("p",{className:"uppercase font-semibold",children:"new"}),$.jsx("span",{className:"e-circle-info e-icons text-blue-600"})]}),$.jsx("div",{className:"e-card-subtitle text-blue-400 font-semibold",children:"0"})]})})}),$.jsx("div",{className:"e-card text-center",children:$.jsx("div",{className:"e-card-header",children:$.jsxs("div",{className:"e-card-header-caption",children:[$.jsxs("div",{className:"e-card-title flex justify-center items-center gap-2 mb-2",children:[$.jsx("span",{className:"e-icons e-refresh-2 text-blue-400"}),$.jsx("p",{className:"uppercase font-semibold",children:"updated"}),$.jsx("span",{className:"e-circle-info e-icons text-blue-600"})]}),$.jsx("div",{className:"e-card-subtitle text-blue-400 font-semibold",children:"0"})]})})}),$.jsx("div",{className:"e-card text-center",children:$.jsx("div",{className:"e-card-header",children:$.jsxs("div",{className:"e-card-header-caption",children:[$.jsxs("div",{className:"e-card-title flex justify-center items-center gap-2 mb-2",children:[$.jsx("span",{className:"e-icons e-refresh-2 text-blue-400"}),$.jsx("p",{className:"uppercase font-semibold",children:"sigma translations"}),$.jsx("span",{className:"e-circle-info e-icons text-blue-600"})]}),$.jsx("div",{className:"e-card-subtitle text-blue-400 font-semibold",children:"16"})]})})})]}),$.jsxs("div",{className:"flex gap-2",children:[$.jsxs("div",{className:"search flex items-center",children:[$.jsx("label",{className:"me-2",children:"Search: "}),$.jsx(Fl,{placeholder:"First Name",fields:r,showCheckBox:!0})]}),$.jsx(Pl,{width:200,dataSource:t}),$.jsx(ws,{className:"text-blue-400 bg-transparent border-transparent !p-1",iconCss:"e-search e-icons",iconPosition:"Center"}),$.jsx(ws,{className:"text-blue-400 bg-transparent border-transparent !p-1",iconCss:"e-filter-2 e-icons",iconPosition:"Center"})]}),$.jsxs("div",{className:"grid grid-flow-col auto-cols-fr gap-4 mt-4",children:[$.jsx("div",{className:"bg-white p-3",children:$.jsx(Bl,{fields:r,showCheckBox:!0})}),$.jsx("div",{children:$.jsx(Ch,{dataSource:i,children:$.jsxs(Xc,{children:[$.jsx(ds,{field:"OrderID",headerText:"Order ID"}),$.jsx(ds,{field:"CustomerID",headerText:"Customer ID"}),$.jsx(ds,{field:"ShipCountry",headerText:"Ship Country"})]})})})]})]})},hg=()=>{const[o,t]=Xe.useState(0),i=il();return Xe.useEffect(()=>{console.log("location 2",i)},[]),$.jsxs($.Fragment,{children:[$.jsx("p",{children:o}),$.jsx("button",{onClick:()=>{t(e=>e+1)},children:"increment"})]})},ug=Fh([{path:"/",element:$.jsx(jh,{}),children:[{path:"",element:$.jsx(lg,{})},{path:"/counter",element:$.jsx(hg,{})}]}]),dg=()=>$.jsx(Mh,{router:ug});export{dg as default};
